This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: public/images
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.claude/
  commands/
    ai-commit.md
    analyze-project.md
    architect.md
    code-cleanup.md
    code-review.md
    commit-all.md
    create-prd.md
    find-dead-code.md
    implement-prd.md
    review-staging.md
    test-driven.md
    variant.md
  settings.local.json
.cursor/
  .cursorules
  mcp.json
  taskmaster.mdc
app/
  about/
    layout.tsx
    page.tsx
  about-alt/
    layout.tsx
    page.tsx
  api/
    auth/
      callback/
        route.ts
      saigo-callback/
        route.ts
      saigo-verify-and-signin/
        route.ts
      unified-callback/
        route.ts
      verify-and-signin/
        route.ts
      verify-captcha/
        route.ts
    hdi/
      download/
        route.ts
      names/
        route.ts
        seed_db.py
        seed.sql
    lead/
      route.ts
    saigo/
      instagram/
        check-trigger/
          route.ts
        delete/
          [id]/
            route.ts
        run/
          route.ts
        route.ts
      key/
        route.ts
      leaderboard/
        route.ts
      practice/
        route.ts
      username/
        route.ts
    stripe/
      create-checkout/
        route.ts
      create-portal/
        route.ts
    webhook/
      stripe/
        route.ts
  blog/
    _assets/
      components/
        Avatar.tsx
        BadgeCategory.tsx
        CardArticle.tsx
        CardCategory.tsx
        HeaderBlog.tsx
      content.tsx
    [articleId]/
      page.tsx
    author/
      [authorId]/
        page.tsx
    category/
      [categoryId]/
        page.tsx
    layout.tsx
    page.tsx
  consulting/
    page.tsx
  conversations/
    page.tsx
  dashboard/
    layout.tsx
    page.tsx
  donate/
    layout.tsx
    page.tsx
  hdi/
    components/
      -- SQLite
      AudioPlayer.tsx
      ContentSections.tsx
      CountdownTimer.tsx
      HDIHeader.tsx
      TerminalEmulation.tsx
    lib/
      create_db.py
      db_agent.py
    layout.tsx
    page.tsx
  libs/
    supabase/
      server.ts
  portfolio/
    page.tsx
  privacy-policy/
    page.tsx
  saigo/
    leaderboard/
      layout.tsx
      page.tsx
    lib/
      .python-version
      add-instagram-check-with-users.ts
      add-instagram-check.ts
      encrypt.ts
      guard.ts
      seed_db.ts
      seed_practices_last7days.ts
      seed_practices.ts
      seed_users.ts
      sum_points_days.py
      sum_practice_days.py
      testdb.ts
    signin/
      layout.tsx
      page.tsx
    username/
      layout.tsx
      page.tsx
    layout.tsx
  signin/
    layout.tsx
    page.tsx
    route.ts
  somatic-bournemouth/
    page.tsx
  synai/
    components/
      ComparisonSection.tsx
      CTASection.tsx
      engineering.md
      FeaturesSection.tsx
      ProcessSection.tsx
      SynaiHero.tsx
      TechnicalDeepDive.tsx
      TechnicalSection.tsx
    page.tsx
  team/
    layout.tsx
    page.tsx
  tos/
    page.tsx
  error.tsx
  globals.css
  layout.tsx
  not-found.tsx
  page.tsx
apps/
  accounts/
    app/
      (auth)/
        signin/
          page.tsx
      auth/
        callback/
          route.ts
      logout/
        route.ts
    README.md
  flowstate/
    middleware.ts
    README.md
archived/
  ab-testing/
    README.md
  hdi/
    DATABASE.md
    FILE_MOVES.md
    INTEGRATION_NOTES.md
    README.md
  recruitment/
    layout.tsx
    page.tsx
  saigo/
    DATABASE.md
    FILE_MOVES.md
    README.md
  PROCESS.md
  README.md
  synai-original.html
  TEMPLATE.md
  tracking.csv
bin/
  bot_runner.ts
  cli.ts
  reset_month.ts
components/
  team/
    RoleCard.test.tsx
    RoleCard.tsx
    RoleSection.tsx
  AuthButton.tsx
  BetterIcon.tsx
  ButtonAccount.tsx
  ButtonCheckout.tsx
  ButtonGradient.tsx
  ButtonLead.tsx
  ButtonPopover.tsx
  ButtonSignin.tsx
  ButtonSupport.tsx
  CompoundingHoursSection.tsx
  Countdown.tsx
  CTA.tsx
  CumulativePointsAreaChart.tsx
  FAQ.tsx
  FeatureDisplay.tsx
  FeaturesAccordion.tsx
  FeaturesGrid.tsx
  FeaturesListicle.tsx
  Footer.tsx
  Header.tsx
  HeaderMobileMenuManager.tsx
  Hero.tsx
  IntroVideo.tsx
  KnowledgeGapSection.tsx
  LayoutClient.tsx
  LeaderboardTable.tsx
  LineGraph.tsx
  LiveLeaderboard.tsx
  LoadingBar.tsx
  LoadingPage.tsx
  MailingListForm.tsx
  Modal.tsx
  PortfolioCarousel.tsx
  PracticeSummaryPieChart.tsx
  PracticeTypesRadarChart.tsx
  PracticeTypesStackedBarChart.tsx
  Pricing.tsx
  Problem.tsx
  SaigoAnimatedText.tsx
  Tabs.tsx
  Testimonial1Small.tsx
  TestimonialRating.tsx
  Testimonials1.tsx
  Testimonials11.tsx
  Testimonials3.tsx
  TestimonialsAvatars.tsx
  Timer.tsx
  WhyOceanheartVideo.tsx
  WithWithout.tsx
cypress/
  e2e/
    sso.cy.ts
docs/
  ai-docs/
    anthropic_web_search_tool.md
    claude_code_best_practices.md
    claude_code_tech.md
  claude-task-manager/
    ai-client-utils-example.md
    command-reference.md
    configuration.md
    examples.md
    fastmcp-core.txt
    licensing.md
    README.md
    task-structure.md
    tutorial.md
  database/
    ERD.md
  development/
    gitflow.mdc
  refactor/
    DEAD_CODE_TARGETS.md
    refactor.md
  specs/
    00_todos.spec.md
    01_feature_outline.spec.md
    01_secret_login.spec.md
    02_saigo_login.spec.md
    03_saigo_auth_api.spec.md
    04_saigo_users_insert.spec.md
    05_saigo_username_page.spec.md
    07_new_landing_page.md
    spec_template.md
  a_b_testing_implementation_guide.md
  about_me_page_content.md
  CODE_REVIEW.md
  ENV.sample-sso
  landing_page_prd.md
  next-upgrade-breaking-changes.md
  next-upgrade-checklist.md
  next-upgrade-dependency-compatibility.md
  next-upgrade-plan.md
  next-upgrade-readme.md
  PRD-Subdomain-SSO.md
  rebranding_prd.md
  refactor_prd.md
  spec.md
  synai_implementation_plan.md
  synai_migration_prd.md
hooks/
  useForm.test.ts
  useForm.ts
lib/
  teamData.ts
libs/
  supabase/
    client.ts
    init.sql
    middleware.ts
    server.ts
  abTesting.tsx
  api.ts
  chartColors.ts
  gpt.ts
  instagram-service.ts
  resend.ts
  seo.tsx
  stripe.ts
migrations/
  20231018_add_practices_and_force.sql
  20250907_create_user_entitlements.sql
  20250907_seed_dev_entitlements.example.sql
  alter_users_table.sql
  instagram_page_check.sql
  saigo_table_relationships_by_id.sql
  saigo_table_relationships.sql
  saigo_tables_uuid.sql
  saigo_tables.sql
  table_definitions.sql
packages/
  common-auth/
    src/
      index.ts
      requireAuth.ts
      returnTo.ts
      ssrClient.ts
      withEntitlement.ts
    package.json
    README.md
    tsconfig.json
prompts/
  saigo_username_prompt.xml
  saigo.md
public/
  scripts/
    anime.min.js
    progress.js
scripts/
  fileops.py
  make_scripts_executable.py
  nextjs_upgrade.py
supabase/
  migrations/
    20240601000000_ab_testing.sql
types/
  config.ts
  index.ts
  next-auth.d.ts
.eslintrc.json
.gitignore
.python-version
AGENTS.md
ARCHITECTURE.md
bunfig.toml
CLAUDE.md
cleanup_aider.py
CLEANUP_LIST.md
config.ts
cypress.config.ts
global.d.ts
index.html
jest.setup.ts
middleware.ts
next-sitemap.config.js
next.config.js
package.json
postcss.config.js
pyproject.toml
README.md
safe_delete.py
tailwind.config.js
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app/about/layout.tsx">
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export const metadata = getSEOTags({
  title: `About ${config.appName}`,
  canonicalUrlRelative: "/about",
});

import { Suspense } from "react";
import Header from "@/components/Header";
import Footer from "@/components/Footer";

export default async function LayoutAbout({ children }: { children: any }) {
  return (
    <div>
      <Suspense>
        <Header />
      </Suspense>

      <main className="min-h-screen max-w-6xl mx-auto p-8">{children}</main>

      <div className="h-24" />

      <Footer />
    </div>
  );
}
</file>

<file path="app/api/auth/callback/route.ts">
import { NextResponse, NextRequest } from "next/server";
import { createClient } from "@/libs/supabase/server";
import config from "@/config";

export const dynamic = "force-dynamic";

// This route is called after a successful login. It exchanges the code for a session and redirects to the callback URL (see config.js).
export async function GET(req: NextRequest) {
  const requestUrl = new URL(req.url);
  const code = requestUrl.searchParams.get("code");

  if (code) {
    const supabase = createClient();
    await supabase.auth.exchangeCodeForSession(code);
  }

  // URL to redirect to after sign in process completes
  return NextResponse.redirect(requestUrl.origin + config.auth.callbackUrl);
}
</file>

<file path="app/api/auth/saigo-callback/route.ts">
import { NextResponse, NextRequest } from "next/server";
import { createClient } from "@/libs/supabase/server";
import config from "@/config";

export const dynamic = "force-dynamic";

export async function GET(req: NextRequest) {
  console.log("üöÄ Starting auth callback processing...");
  const requestUrl = new URL(req.url);
  const code = requestUrl.searchParams.get("code");
  console.log("üìù Auth code present:", !!code);

  if (code) {
    console.log("‚öôÔ∏è Creating Supabase client...");
    const supabase = createClient();

    console.log("üîÑ Exchanging code for session...");
    const { data: { session }, error } = await supabase.auth.exchangeCodeForSession(code);

    if (error) {
      console.error("‚ùå Session exchange error:", {
        error: error.message,
        status: error.status
      });
    }

    if (session?.user?.email) {
      console.log("‚úÖ Session obtained successfully for email:", session.user.email);

      console.log("üîç Checking for existing user in saigo_users...");
      const { data: existingUser, error: selectError } = await supabase
        .from("saigo_users")
        .select("*")
        .eq("email", session.user.email)
        .maybeSingle();

      if (selectError) {
        console.error("‚ùå Error querying saigo_users:", {
          error: selectError.message,
          hint: selectError.hint
        });
      }

      if (existingUser) {
        console.log("üë§ Existing user found:", {
          email: existingUser.email,
          hasUsername: !!existingUser.saigo_username
        });

        if (existingUser.saigo_username) {
          console.log("‚û°Ô∏è Redirecting to leaderboard - username exists");
          return NextResponse.redirect(requestUrl.origin + "/saigo/leaderboard");
        } else {
          console.log("‚û°Ô∏è Redirecting to username generation - no username found");
          return NextResponse.redirect(requestUrl.origin + "/saigo/username");
        }
      } else {
        console.log("üìù Creating new user record...", {
          email: session.user.email,
          userId: session.user.id
        });

        const { error: insertError } = await supabase
          .from("saigo_users")
          .insert([{ email: session.user.email, user_id: session.user.id }]);

        if (insertError) {
          console.error("‚ùå Error inserting new saigo user:", {
            error: insertError.message,
            hint: insertError.hint
          });
        } else {
          console.log("‚úÖ New user created successfully");
        }

        console.log("‚û°Ô∏è Redirecting new user to username generation");
        return NextResponse.redirect(requestUrl.origin + "/saigo/username");
      }
    } else {
      console.error("‚ö†Ô∏è No user email in session:", { session });
    }
  } else {
    console.error("‚ö†Ô∏è No auth code provided in callback URL");
  }

  console.log("‚ö†Ô∏è Fallback: No valid response condition met");
  return NextResponse.redirect(requestUrl.origin + config.auth.loginUrl);
}
</file>

<file path="app/api/auth/saigo-verify-and-signin/route.ts">
export const dynamic = "force-dynamic";

export async function POST(request: Request) {
  const { recaptchaToken } = await request.json();

  // Verify reCAPTCHA token
  const recaptchaResponse = await fetch(
    `https://www.google.com/recaptcha/api/siteverify?secret=${process.env.RECAPTCHA_SECRET_KEY}&response=${recaptchaToken}`,
    { method: "POST" }
  );
  const recaptchaData = await recaptchaResponse.json();

  if (!recaptchaData.success) {
    return Response.json({ error: "Invalid captcha", recaptchaData }, { status: 400 });
  }

  return Response.json({ success: true });
}
</file>

<file path="app/api/auth/verify-and-signin/route.ts">
export const dynamic = "force-dynamic";

export async function POST(request: Request) {
  const { recaptchaToken } = await request.json();

  // Verify reCAPTCHA token
  const recaptchaResponse = await fetch(
    `https://www.google.com/recaptcha/api/siteverify?secret=${process.env.RECAPTCHA_SECRET_KEY}&response=${recaptchaToken}`,
    { method: "POST" }
  );
  const recaptchaData = await recaptchaResponse.json();

  console.log({ recaptchaData, recaptchaToken });

  if (!recaptchaData.success) {
    return Response.json({ error: "Invalid captcha", recaptchaData }, { status: 400 });
  }

  return Response.json({ success: true });
}
</file>

<file path="app/api/hdi/download/route.ts">
import { NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

export async function GET() {
  try {
    // Path to the PDF file (not accessible from client side)
    const filePath = path.join(process.cwd(), 'private', 'hdi-v0.1.pdf');
    
    // Read the file
    const fileBuffer = fs.readFileSync(filePath);
    
    // Create response with appropriate headers
    const response = new NextResponse(fileBuffer, {
      status: 200,
      headers: {
        'Content-Type': 'application/pdf',
        'Content-Disposition': 'attachment; filename="hdi-v0.1.pdf"',
      },
    });
    
    return response;
  } catch (error) {
    console.error('Error serving PDF:', error);
    return new NextResponse(JSON.stringify({ error: 'File not found' }), {
      status: 404,
      headers: {
        'Content-Type': 'application/json',
      },
    });
  }
}
</file>

<file path="app/api/hdi/names/route.ts">
export const runtime = 'nodejs';  // Force Node.js runtime, not Edge

import { NextRequest, NextResponse } from 'next/server';
import BetterSqlite3 from 'better-sqlite3';
import path from 'path';
import { fileURLToPath } from 'url';

// GET endpoint to fetch all HDI names
export async function GET() {
  try {
    // Get the directory of the current file
    const __filename = fileURLToPath(import.meta.url);
    const __dirname = path.dirname(__filename);

    // Connect to the database in the same directory as this file
    const dbPath = path.join(__dirname, 'names.db');

    const db = new BetterSqlite3(dbPath);

    const names = db.prepare('SELECT name FROM Name ORDER BY created_at DESC').all();

    db.close();

    return NextResponse.json({
      names: names.map((row: { name: string }) => row.name),
    });
  } catch (error) {
    console.error('Error fetching HDI names:', error);
    return NextResponse.json({
      // Fallback to hardcoded values in case of error
      names: [
        "Human Digital Interface",
        "Higher Defiance Institute",
        "Hyperconsciousness Design Initiative",
        "Heart Data Integrated",
      ],
    });
  }
}

export async function POST(request: NextRequest) {
  try {
    const { name } = await request.json();

    if (!name || typeof name !== 'string' || name.trim() === '') {
      return NextResponse.json(
        { error: 'Name is required' },
        { status: 400 }
      );
    }

    // Get the directory of the current file
    const __filename = fileURLToPath(import.meta.url);
    const __dirname = path.dirname(__filename);

    // Connect to the database in the same directory as this file
    const dbPath = path.join(__dirname, 'names.db');
    const db = new BetterSqlite3(dbPath);

    // Insert the new name
    const result = db.prepare('INSERT INTO Name (name) VALUES (?)').run(name);

    // Get updated list of names
    const names = db.prepare('SELECT name FROM Name ORDER BY created_at DESC').all();

    db.close();

    return NextResponse.json({
      success: true,
      names: names.map((row: { name: string }) => row.name),
    });
  } catch (error) {
    console.error('Error adding HDI name:', error);
    return NextResponse.json(
      { error: 'Failed to add HDI name' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/hdi/names/seed_db.py">
import sqlite3
import re
import os
import datetime


def insert_names_from_sql():
    # Get the directory of the current script
    script_dir = os.path.dirname(os.path.abspath(__file__))

    # Paths to the database and SQL file
    db_path = os.path.join(script_dir, "names.db")
    sql_path = os.path.join(script_dir, "seed.sql")

    # Read the SQL file
    with open(sql_path, "r") as file:
        sql_content = file.read()

    # Extract names using regex
    # Looking for patterns like (id, 'Name')
    name_pattern = r"\(\d+,\s*'([^']+)'"
    names = re.findall(name_pattern, sql_content)

    if not names:
        print("No names found in the SQL file.")
        return

    # Connect to the database
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()

    # Get current timestamp in the required format
    current_timestamp = datetime.datetime.now().isoformat()

    # Insert each name with the formatted timestamp
    for name in names:
        cursor.execute(
            "INSERT INTO Name (name, created_at) VALUES (?, ?)",
            (name, current_timestamp),
        )
        print(f"Inserted: {name} with timestamp: {current_timestamp}")

    # Commit changes and close connection
    conn.commit()
    print(f"Successfully inserted {len(names)} names into the database.")
    conn.close()


if __name__ == "__main__":
    insert_names_from_sql()
</file>

<file path="app/api/hdi/names/seed.sql">
-- SQLite
INSERT INTO Name (id, name, created_at)
VALUES (5, 'Human Dissent Interface'),
    (6, 'Higher Dimensions Institute'),
    (7, 'Hyper Divergence Initiative'),
    (8, 'Hacker Development Initiative'),
    (9, 'Hyper Dream Interpretation'),
    (10, 'Human Divinity Interface'),
    (11, 'Havoc Design Initiative'),
    (12, 'Holistic Discovery Institute'),
    (13, 'Hyperconscious Design Institute'),
    (14, 'Higher Dimensional Intelligence'),
    (16, 'Heart Data Incorporated'),
    (17, 'Higher Destiny Interface'),
    (20, 'Holistic Divergence Institute'),
    (21, 'Human Discovery Interface'),
    (22, 'Hyperconscious Design Innovation'),
    (29, 'Human Defiance Initiative'),
    (30, 'Heretic Development Incubator');
</file>

<file path="app/api/lead/route.ts">
import { NextResponse, NextRequest } from "next/server";
import { createClient } from "@/libs/supabase/server";

// This route is used to store the leads that are generated from the landing page.
// The API call is initiated by <ButtonLead /> component
export async function POST(req: NextRequest) {
  const body = await req.json();

  if (!body.email) {
    return NextResponse.json({ error: "Email is required" }, { status: 400 });
  }

  try {
    const supabase = createClient();

    // TODO: leads table needs service role policy to be set up for read access
    const { data: existingLead, error: selectError } = await supabase
      .from("leads")
      .select("email")
      .ilike("email", body.email)
      .maybeSingle();

    if (selectError) {
      return NextResponse.json({ error: selectError.message }, { status: 500 });
    }

    if (existingLead) {
      return NextResponse.json({ error: "Email already subscribed" }, { status: 400 });
    }

    // Insert the new lead if not already subscribed
    await supabase.from("leads").insert({ email: body.email });
    return NextResponse.json({});
  } catch (e) {
    console.error(e);
    return NextResponse.json({ error: e.message }, { status: 500 });
  }
}
</file>

<file path="app/api/saigo/key/route.ts">
import { NextRequest, NextResponse } from "next/server";
import crypto from "crypto";

export async function POST(req: NextRequest) {
  console.log("üîë Key route called");
  const algorithm = "aes-256-cbc";
  const secret = process.env.SAIGO_SECRET_KEY;

  console.log("üîë Secret key:", secret);

  function decrypt(encryptedText: string) {
    const [ivHex, encryptedData] = encryptedText.split(':');
    const iv = Buffer.from(ivHex, 'hex');
    const encryptedBuffer = Buffer.from(encryptedData, 'hex');

    const decipher = crypto.createDecipheriv(algorithm, Buffer.from(secret), iv);
    const decrypted = Buffer.concat([decipher.update(encryptedBuffer), decipher.final()]);
    return decrypted.toString();
  }

  const { hiddenKeyParam } = await req.json();

  if (!hiddenKeyParam) {
    return NextResponse.json({}, { status: 200 }) // give away nothing
  }

  let decryptedKey: string;
  try {
    decryptedKey = decrypt(hiddenKeyParam);
  } catch (error) {
    return NextResponse.json({}, { status: 200 }) // give away nothing
  }

  console.log("üîë Decrypted key:", decryptedKey);
  if (decryptedKey === process.env.SAIGO_SECRET_KEY_ORIGIN) {
    return NextResponse.json({ success: true }, { status: 200 });
  } else {
    return NextResponse.json({}, { status: 200 }) // give away nothing
  }
}
</file>

<file path="app/api/saigo/practice/route.ts">
import { NextResponse } from "next/server";
import { createServiceClient } from "@/libs/supabase/server";

export async function POST(request: Request) {
  const supabase = createServiceClient();

  try {
    const { activityType, minutes, comment } = await request.json();

    // Retrieve the logged-in user; adjust as needed for your auth.
    const {
      data: { user },
    } = await supabase.auth.getUser();

    if (!user) {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 });
    }

    // Look up the corresponding saigo_users record using auth user id stored in user_id column
    const { data: profile, error: profileError } = await supabase
      .from("saigo_users")
      .select("id")
      .eq("user_id", user.id)
      .single();

    if (profileError || !profile) {
      return NextResponse.json(
        { error: "User not registered in saigo_users" },
        { status: 400 }
      );
    }

    // Insert a new record into the practices table.
    // Note: The comment field is not inserted as the table does not support it yet.
    const { error } = await supabase.from("practices").insert({
      type: activityType,
      points: minutes,
      user_id: profile.id,
      created_at: new Date().toISOString(),
    });

    if (error) {
      return NextResponse.json({ error: error.message }, { status: 400 });
    }

    return NextResponse.json(
      { message: "Practice submitted successfully" },
      { status: 200 }
    );
  } catch (err: any) {
    return NextResponse.json(
      { error: err.message || "Unknown error" },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/stripe/create-checkout/route.ts">
import { createCheckout } from "@/libs/stripe";
import { createClient } from "@/libs/supabase/server";
import { NextRequest, NextResponse } from "next/server";

// This function is used to create a Stripe Checkout Session (one-time payment or subscription)
// It's called by the <ButtonCheckout /> component
// Users must be authenticated. It will prefill the Checkout data with their email and/or credit card (if any)
export async function POST(req: NextRequest) {
  const body = await req.json();

  if (!body.priceId) {
    return NextResponse.json(
      { error: "Price ID is required" },
      { status: 400 }
    );
  } else if (!body.successUrl || !body.cancelUrl) {
    return NextResponse.json(
      { error: "Success and cancel URLs are required" },
      { status: 400 }
    );
  } else if (!body.mode) {
    return NextResponse.json(
      {
        error:
          "Mode is required (either 'payment' for one-time payments or 'subscription' for recurring subscription)",
      },
      { status: 400 }
    );
  }

  try {
    const supabase = createClient();

    const {
      data: { user },
    } = await supabase.auth.getUser();

    const { priceId, mode, successUrl, cancelUrl } = body;

    const { data } = await supabase
      .from("profiles")
      .select("*")
      .eq("id", user?.id)
      .single();

    const stripeSessionURL = await createCheckout({
      priceId,
      mode,
      successUrl,
      cancelUrl,
      // If user is logged in, it will pass the user ID to the Stripe Session so it can be retrieved in the webhook later
      clientReferenceId: user?.id,
      user: {
        email: data?.email,
        // If the user has already purchased, it will automatically prefill it's credit card
        customerId: data?.customer_id,
      },
      // If you send coupons from the frontend, you can pass it here
      // couponId: body.couponId,
    });

    return NextResponse.json({ url: stripeSessionURL });
  } catch (e) {
    console.error(e);
    return NextResponse.json({ error: e?.message }, { status: 500 });
  }
}
</file>

<file path="app/api/stripe/create-portal/route.ts">
import { NextResponse, NextRequest } from "next/server";
import { createClient } from "@/libs/supabase/server";
import { createCustomerPortal } from "@/libs/stripe";

export async function POST(req: NextRequest) {
  try {
    const supabase = createClient();

    const body = await req.json();

    const {
      data: { user },
    } = await supabase.auth.getUser();

    // User who are not logged in can't make a purchase
    if (!user) {
      return NextResponse.json(
        { error: "You must be logged in to view billing information." },
        { status: 401 }
      );
    } else if (!body.returnUrl) {
      return NextResponse.json(
        { error: "Return URL is required" },
        { status: 400 }
      );
    }

    const { data } = await supabase
      .from("profiles")
      .select("*")
      .eq("id", user?.id)
      .single();

    if (!data?.customer_id) {
      return NextResponse.json(
        {
          error: "You don't have a billing account yet. Make a purchase first.",
        },
        { status: 400 }
      );
    }

    const stripePortalUrl = await createCustomerPortal({
      customerId: data.customer_id,
      returnUrl: body.returnUrl,
    });

    return NextResponse.json({
      url: stripePortalUrl,
    });
  } catch (e) {
    console.error(e);
    return NextResponse.json({ error: e?.message }, { status: 500 });
  }
}
</file>

<file path="app/api/webhook/stripe/route.ts">
import configFile from "@/config";
import { findCheckoutSession } from "@/libs/stripe";
import { SupabaseClient } from "@supabase/supabase-js";
import { headers } from "next/headers";
import { NextRequest, NextResponse } from "next/server";
import Stripe from "stripe";

const stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {
  apiVersion: "2025-02-24.acacia",
  typescript: true,
});
const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET;

// This is where we receive Stripe webhook events
// It's used to update user data, send emails, etc...
// By default, it'll store the user in the database
// See more: https://shipfa.st/docs/features/payments
export async function POST(req: NextRequest) {
  const body = await req.text();

  const signature = headers().get("stripe-signature");

  let eventType;
  let event;

  // Create a private supabase client using the secret service_role API key
  const supabase = new SupabaseClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL,
    process.env.SUPABASE_SERVICE_ROLE_KEY
  );

  // verify Stripe event is legit
  try {
    event = stripe.webhooks.constructEvent(body, signature, webhookSecret);
  } catch (err) {
    console.error(`Webhook signature verification failed. ${err.message}`);
    return NextResponse.json({ error: err.message }, { status: 400 });
  }

  eventType = event.type;

  try {
    switch (eventType) {
      case "checkout.session.completed": {
        // First payment is successful and a subscription is created (if mode was set to "subscription" in ButtonCheckout)
        // ‚úÖ Grant access to the product
        const stripeObject: Stripe.Checkout.Session = event.data
          .object as Stripe.Checkout.Session;

        const session = await findCheckoutSession(stripeObject.id);

        const customerId = session?.customer;
        const priceId = session?.line_items?.data[0]?.price.id;
        const userId = stripeObject.client_reference_id;
        const plan = configFile.stripe.plans.find((p) => p.priceId === priceId);

        const customer = (await stripe.customers.retrieve(
          customerId as string
        )) as Stripe.Customer;

        if (!plan) break;

        let user;
        if (!userId) {
          // check if user already exists
          const { data: profile } = await supabase
            .from("profiles")
            .select("*")
            .eq("email", customer.email)
            .single();
          if (profile) {
            user = profile;
          } else {
            // create a new user using supabase auth admin
            const { data } = await supabase.auth.admin.createUser({
              email: customer.email,
            });

            user = data?.user;
          }
        } else {
          // find user by ID
          const { data: profile } = await supabase
            .from("profiles")
            .select("*")
            .eq("id", userId)
            .single();

          user = profile;
        }

        await supabase
          .from("profiles")
          .update({
            customer_id: customerId,
            price_id: priceId,
            has_access: true,
          })
          .eq("id", user?.id);

        // Extra: send email with user link, product page, etc...
        // try {
        //   await sendEmail(...);
        // } catch (e) {
        //   console.error("Email issue:" + e?.message);
        // }

        break;
      }

      case "checkout.session.expired": {
        // User didn't complete the transaction
        // You don't need to do anything here, by you can send an email to the user to remind him to complete the transaction, for instance
        break;
      }

      case "customer.subscription.updated": {
        // The customer might have changed the plan (higher or lower plan, cancel soon etc...)
        // You don't need to do anything here, because Stripe will let us know when the subscription is canceled for good (at the end of the billing cycle) in the "customer.subscription.deleted" event
        // You can update the user data to show a "Cancel soon" badge for instance
        break;
      }

      case "customer.subscription.deleted": {
        // The customer subscription stopped
        // ‚ùå Revoke access to the product
        const stripeObject: Stripe.Subscription = event.data
          .object as Stripe.Subscription;
        const subscription = await stripe.subscriptions.retrieve(
          stripeObject.id
        );

        await supabase
          .from("profiles")
          .update({ has_access: false })
          .eq("customer_id", subscription.customer);
        break;
      }

      case "invoice.paid": {
        // Customer just paid an invoice (for instance, a recurring payment for a subscription)
        // ‚úÖ Grant access to the product
        const stripeObject: Stripe.Invoice = event.data
          .object as Stripe.Invoice;
        const priceId = stripeObject.lines.data[0].price.id;
        const customerId = stripeObject.customer;

        // Find profile where customer_id equals the customerId (in table called 'profiles')
        const { data: profile } = await supabase
          .from("profiles")
          .select("*")
          .eq("customer_id", customerId)
          .single();

        // Make sure the invoice is for the same plan (priceId) the user subscribed to
        if (profile.price_id !== priceId) break;

        // Grant the profile access to your product. It's a boolean in the database, but could be a number of credits, etc...
        await supabase
          .from("profiles")
          .update({ has_access: true })
          .eq("customer_id", customerId);

        break;
      }

      case "invoice.payment_failed":
        // A payment failed (for instance the customer does not have a valid payment method)
        // ‚ùå Revoke access to the product
        // ‚è≥ OR wait for the customer to pay (more friendly):
        //      - Stripe will automatically email the customer (Smart Retries)
        //      - We will receive a "customer.subscription.deleted" when all retries were made and the subscription has expired

        break;

      default:
      // Unhandled event type
    }
  } catch (e) {
    console.error("stripe error: ", e.message);
  }

  return NextResponse.json({});
}
</file>

<file path="app/blog/_assets/components/Avatar.tsx">
import Link from "next/link";
import Image from "next/image";
import { articleType } from "../content";

// This is the author avatar that appears in the article page and in <CardArticle /> component
const Avatar = ({ article }: { article: articleType }) => {
  return (
    <Link
      href={`/blog/author/${article.author.slug}`}
      title={`Posts by ${article.author.name}`}
      className="inline-flex items-center gap-2 group"
      rel="author"
    >
      <span itemProp="author">
        <Image
          src={article.author.avatar}
          alt={`Avatar of ${article.author.name}`}
          className="w-7 h-7 rounded-full object-cover object-center"
          width={28}
          height={28}
        />
      </span>
      <span className="group-hover:underline">{article.author.name}</span>
    </Link>
  );
};

export default Avatar;
</file>

<file path="app/blog/_assets/components/BadgeCategory.tsx">
import Link from "next/link";
import { categoryType } from "../content";

// This is the category badge that appears in the article page and in <CardArticle /> component
const Category = ({
  category,
  extraStyle,
}: {
  category: categoryType;
  extraStyle?: string;
}) => {
  return (
    <Link
      href={`/blog/category/${category.slug}`}
      className={`badge badge-sm md:badge-md hover:badge-primary ${
        extraStyle ? extraStyle : ""
      }`}
      title={`Posts in ${category.title}`}
      rel="tag"
    >
      {category.titleShort}
    </Link>
  );
};

export default Category;
</file>

<file path="app/blog/[articleId]/page.tsx">
import Link from "next/link";
import Script from "next/script";
import { articles } from "../_assets/content";
import BadgeCategory from "../_assets/components/BadgeCategory";
import Avatar from "../_assets/components/Avatar";
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export async function generateMetadata({
  params,
}: {
  params: { articleId: string };
}) {
  const article = articles.find((article) => article.slug === params.articleId);

  return getSEOTags({
    title: article.title,
    description: article.description,
    canonicalUrlRelative: `/blog/${article.slug}`,
    extraTags: {
      openGraph: {
        title: article.title,
        description: article.description,
        url: `/blog/${article.slug}`,
        images: [
          {
            url: article.image.urlRelative,
            width: 1200,
            height: 660,
          },
        ],
        locale: "en_US",
        type: "website",
      },
    },
  });
}

export default async function Article({
  params,
}: {
  params: { articleId: string };
}) {
  const article = articles.find((article) => article.slug === params.articleId);
  const articlesRelated = articles
    .filter(
      (a) =>
        a.slug !== params.articleId &&
        a.categories.some((c) =>
          article.categories.map((c) => c.slug).includes(c.slug)
        )
    )
    .sort(
      (a, b) =>
        new Date(b.publishedAt).valueOf() - new Date(a.publishedAt).valueOf()
    )
    .slice(0, 3);

  return (
    <>
      {/* SCHEMA JSON-LD MARKUP FOR GOOGLE */}
      <Script
        type="application/ld+json"
        id={`json-ld-article-${article.slug}`}
        dangerouslySetInnerHTML={{
          __html: JSON.stringify({
            "@context": "https://schema.org",
            "@type": "Article",
            mainEntityOfPage: {
              "@type": "WebPage",
              "@id": `https://${config.domainName}/blog/${article.slug}`,
            },
            name: article.title,
            headline: article.title,
            description: article.description,
            image: `https://${config.domainName}${article.image.urlRelative}`,
            datePublished: article.publishedAt,
            dateModified: article.publishedAt,
            author: {
              "@type": "Person",
              name: article.author.name,
            },
          }),
        }}
      />

      {/* GO BACK LINK */}
      <div>
        <Link
          href="/blog"
          className="link !no-underline text-base-content/80 hover:text-base-content inline-flex items-center gap-1"
          title="Back to Blog"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            className="w-5 h-5"
          >
            <path
              fillRule="evenodd"
              d="M15 10a.75.75 0 01-.75.75H7.612l2.158 1.96a.75.75 0 11-1.04 1.08l-3.5-3.25a.75.75 0 010-1.08l3.5-3.25a.75.75 0 111.04 1.08L7.612 9.25h6.638A.75.75 0 0115 10z"
              clipRule="evenodd"
            />
          </svg>
          Back to Blog
        </Link>
      </div>

      <article>
        {/* HEADER WITH CATEGORIES AND DATE AND TITLE */}
        <section className="my-12 md:my-20 max-w-[800px]">
          <div className="flex items-center gap-4 mb-6">
            {article.categories.map((category) => (
              <BadgeCategory
                category={category}
                key={category.slug}
                extraStyle="!badge-lg"
              />
            ))}
            <span className="text-base-content/80" itemProp="datePublished">
              {new Date(article.publishedAt).toLocaleDateString("en-US", {
                month: "long",
                day: "numeric",
                year: "numeric",
              })}
            </span>
          </div>

          <h1 className="text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight mb-6 md:mb-8">
            {article.title}
          </h1>

          <p className="text-base-content/80 md:text-lg max-w-[700px]">
            {article.description}
          </p>
        </section>

        <div className="flex flex-col md:flex-row">
          {/* SIDEBAR WITH AUTHORS AND 3 RELATED ARTICLES */}
          <section className="max-md:pb-4 md:pl-12 max-md:border-b md:border-l md:order-last md:w-72 shrink-0 border-base-content/10">
            <p className="text-base-content/80 text-sm mb-2 md:mb-3">
              Posted by
            </p>
            <Avatar article={article} />

            {articlesRelated.length > 0 && (
              <div className="hidden md:block mt-12">
                <p className=" text-base-content/80 text-sm  mb-2 md:mb-3">
                  Related reading
                </p>
                <div className="space-y-2 md:space-y-5">
                  {articlesRelated.map((article) => (
                    <div className="" key={article.slug}>
                      <p className="mb-0.5">
                        <Link
                          href={`/blog/${article.slug}`}
                          className="link link-hover hover:link-primary font-medium"
                          title={article.title}
                          rel="bookmark"
                        >
                          {article.title}
                        </Link>
                      </p>
                      <p className="text-base-content/80 max-w-full text-sm">
                        {article.description}
                      </p>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </section>

          {/* ARTICLE CONTENT */}
          <section className="w-full max-md:pt-4 md:pr-20 space-y-12 md:space-y-20">
            {article.content}
          </section>
        </div>
      </article>
    </>
  );
}
</file>

<file path="app/blog/author/[authorId]/page.tsx">
import Image from "next/image";
import { authors, articles } from "../../_assets/content";
import CardArticle from "../../_assets/components/CardArticle";
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export async function generateMetadata({
  params,
}: {
  params: { authorId: string };
}) {
  const author = authors.find((author) => author.slug === params.authorId);

  return getSEOTags({
    title: `${author.name}, Author at ${config.appName}'s Blog`,
    description: `${author.name}, Author at ${config.appName}'s Blog`,
    canonicalUrlRelative: `/blog/author/${author.slug}`,
  });
}

export default async function Author({
  params,
}: {
  params: { authorId: string };
}) {
  const author = authors.find((author) => author.slug === params.authorId);
  const articlesByAuthor = articles
    .filter((article) => article.author.slug === author.slug)
    .sort(
      (a, b) =>
        new Date(b.publishedAt).valueOf() - new Date(a.publishedAt).valueOf()
    );

  return (
    <>
      <section className="max-w-3xl mx-auto flex flex-col md:flex-row gap-8 mt-12 mb-24 md:mb-32">
        <div>
          <p className="text-xs uppercase tracking-wide text-base-content/80 mb-2">
            Authors
          </p>
          <h1 className="font-extrabold text-3xl lg:text-5xl tracking-tight mb-2">
            {author.name}
          </h1>
          <p className="md:text-lg mb-6 md:mb-10 font-medium">{author.job}</p>
          <p className="md:text-lg text-base-content/80">
            {author.description}
          </p>
        </div>

        <div className="max-md:order-first flex md:flex-col gap-4 shrink-0">
          <Image
            src={author.avatar}
            width={256}
            height={256}
            alt={author.name}
            priority={true}
            className="rounded-box w-[12rem] md:w-[16rem] "
          />

          {author.socials?.length > 0 && (
            <div className="flex flex-col md:flex-row gap-4">
              {author.socials.map((social) => (
                <a
                  key={social.name}
                  href={social.url}
                  className="btn btn-square"
                  // Using a dark theme? -> className="btn btn-square btn-neutral"
                  title={`Go to ${author.name} profile on ${social.name}`}
                  target="_blank"
                >
                  {social.icon}
                </a>
              ))}
            </div>
          )}
        </div>
      </section>

      <section>
        <h2 className="font-bold text-2xl lg:text-4xl tracking-tight text-center mb-8 md:mb-12">
          Most recent articles by {author.name}
        </h2>

        <div className="grid lg:grid-cols-2 gap-8">
          {articlesByAuthor.map((article) => (
            <CardArticle key={article.slug} article={article} />
          ))}
        </div>
      </section>
    </>
  );
}
</file>

<file path="app/blog/category/[categoryId]/page.tsx">
import { categories, articles } from "../../_assets/content";
import CardArticle from "../../_assets/components/CardArticle";
import CardCategory from "../../_assets/components/CardCategory";
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export async function generateMetadata({
  params,
}: {
  params: { categoryId: string };
}) {
  const category = categories.find(
    (category) => category.slug === params.categoryId
  );

  return getSEOTags({
    title: `${category.title} | Blog by ${config.appName}`,
    description: category.description,
    canonicalUrlRelative: `/blog/category/${category.slug}`,
  });
}

export default async function Category({
  params,
}: {
  params: { categoryId: string };
}) {
  const category = categories.find(
    (category) => category.slug === params.categoryId
  );
  const articlesInCategory = articles
    .filter((article) =>
      article.categories.map((c) => c.slug).includes(category.slug)
    )
    .sort(
      (a, b) =>
        new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime()
    )
    .slice(0, 4)
    .filter(article => article.published)

  return (
    <>
      <section className="mt-12 mb-24 md:mb-32 max-w-3xl mx-auto text-center">
        <h1 className="font-extrabold text-3xl lg:text-5xl tracking-tight mb-6 md:mb-12">
          {category.title}
        </h1>
        <p className="md:text-lg opacity-80 max-w-xl mx-auto">
          {category.description}
        </p>
      </section>

      <section className="mb-24">
        <h2 className="font-bold text-2xl lg:text-4xl tracking-tight text-center mb-8 md:mb-12">
          Most recent articles in {category.title}
        </h2>

        <div className="grid lg:grid-cols-2 gap-8">
          {articlesInCategory.map((article) => (
            <CardArticle
              key={article.slug}
              article={article}
              tag="h3"
              showCategory={false}
            />
          ))}
        </div>
      </section>

      <section>
        <h2 className="font-bold text-2xl lg:text-4xl tracking-tight text-center mb-8 md:mb-12">
          Other categories you might like
        </h2>

        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
          {categories
            .filter((c) => c.slug !== category.slug)
            .map((category) => (
              <CardCategory key={category.slug} category={category} tag="h3" />
            ))}
        </div>
      </section>
    </>
  );
}
</file>

<file path="app/blog/layout.tsx">
import { Suspense } from "react";
import HeaderBlog from "./_assets/components/HeaderBlog";
import Footer from "@/components/Footer";

export default async function LayoutBlog({ children }: { children: any }) {
  return (
    <div>
      <Suspense>
        <HeaderBlog />
      </Suspense>

      <main className="min-h-screen max-w-6xl mx-auto p-8">{children}</main>

      <div className="h-24" />

      <Footer />
    </div>
  );
}
</file>

<file path="app/dashboard/layout.tsx">
import { ReactNode } from "react";
import { redirect } from "next/navigation";
import { createClient } from "@/libs/supabase/server";
import config from "@/config";

// This is a server-side component to ensure the user is logged in.
// If not, it will redirect to the login page.
// It's applied to all subpages of /dashboard in /app/dashboard/*** pages
// You can also add custom static UI elements like a Navbar, Sidebar, Footer, etc..
// See https://shipfa.st/docs/tutorials/private-page
export default async function LayoutPrivate({
  children,
}: {
  children: ReactNode;
}) {
  const supabase = createClient();

  const {
    data: { user },
  } = await supabase.auth.getUser();

  if (!user) {
    redirect(config.auth.loginUrl);
  }

  return <>{children}</>;
}
</file>

<file path="app/hdi/components/AudioPlayer.tsx">
"use client";

import { useState, useEffect } from "react";

export default function AudioPlayer() {
  // State for audio
  const [audio, setAudio] = useState<HTMLAudioElement | null>(null);
  const [isPlaying, setIsPlaying] = useState(false);
  const [progress, setProgress] = useState(0);
  const [duration, setDuration] = useState(0);

  // Initialize audio
  useEffect(() => {
    const audioElement = new Audio('/audio/just_cant_wait_to_be_king.mp3');

    audioElement.addEventListener('loadedmetadata', () => {
      setDuration(audioElement.duration);
    });

    audioElement.addEventListener('timeupdate', () => {
      setProgress(audioElement.currentTime);
    });

    audioElement.addEventListener('ended', () => {
      setIsPlaying(false);
      setProgress(0);
    });

    setAudio(audioElement);

    return () => {
      audioElement.pause();
      audioElement.src = "";
    };
  }, []);

  // Handle play/pause
  const togglePlay = () => {
    if (!audio) return;

    if (isPlaying) {
      audio.pause();
    } else {
      audio.play();
    }

    setIsPlaying(!isPlaying);
  };

  // Format time for display (mm:ss)
  const formatTime = (time: number) => {
    const minutes = Math.floor(time / 60);
    const seconds = Math.floor(time % 60);
    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
  };

  // Handle seeking
  const handleSeek = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (!audio) return;
    const newTime = parseFloat(e.target.value);
    audio.currentTime = newTime;
    setProgress(newTime);
  };

  return (
    <div className="audio-player mb-12 bg-base-200 rounded-xl overflow-hidden shadow-lg">
      <div className="p-4 flex flex-col">
        <div className="flex items-center justify-between mb-2">
          <button
            onClick={togglePlay}
            className="bg-green-500 hover:bg-green-600 text-white rounded-full w-12 h-12 flex items-center justify-center transition-colors duration-200"
            aria-label={isPlaying ? "Pause" : "Play"}
          >
            {isPlaying ? (
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
              </svg>
            ) : (
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            )}
          </button>
          <div className="text-sm font-mono ml-4 flex-1">
            <div className="font-bold text-green-500">HDI Radio</div>
            <div className="text-xs opacity-70">March 2025: chart #1</div>
          </div>
          <div className="text-xs font-mono opacity-70">
            {formatTime(progress)} / {formatTime(duration)}
          </div>
        </div>

        {/* Audio visualization/timeline */}
        <div className="relative h-8 w-full bg-black rounded overflow-hidden">
          {/* Progress bar */}
          <div className="absolute top-0 left-0 h-full bg-green-500 opacity-30" style={{ width: `${(progress / duration) * 100}%` }}></div>

          {/* Audio waveform visualization (static design) */}
          <div className="absolute top-0 left-0 w-full h-full flex items-center justify-around px-2">
            {Array.from({ length: 40 }).map((_, i) => (
              <div
                key={i}
                className={`w-1 bg-green-400 rounded-full ${isPlaying ? 'animate-pulse' : ''}`}
                style={{
                  height: `${Math.sin(i * 0.5) * 50 + 50}%`,
                  opacity: i < (progress / duration) * 40 ? 0.9 : 0.3,
                  animationDelay: `${i * 50}ms`
                }}
              ></div>
            ))}
          </div>

          {/* Seek input */}
          <input
            type="range"
            min="0"
            max={duration || 100}
            value={progress}
            onChange={handleSeek}
            className="absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer"
          />
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/hdi/components/ContentSections.tsx">
"use client";

import { motion, AnimatePresence } from "framer-motion";

interface ContentSectionsProps {
  hdiDefinitions: string[];
  currentDefinitionIndex: number;
}

export default function ContentSections({ hdiDefinitions, currentDefinitionIndex }: ContentSectionsProps) {
  console.log(currentDefinitionIndex);

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 2.5 }}
    >
      <section className="text-center max-w-xl mx-auto mt-6 md:mt-12 mb-16 md:mb-24">
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-4">
          The next generation of human-computer interaction is almost here.
        </p>
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-4">
          The future is coming and soon the old world of the analogue and digital will become one.
        </p>
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-4">
          There's every chance you'll survive this transition. But then again, there's a chance you won't.
        </p>
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-4">
          It's really just a question of bandwidth. <em>How much data can you handle?</em>
        </p>
        <hr className="my-16 border-base-300" />
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-8">
          HDI will rewire your fundamental relationship with the machine <span className="font-bold">forever</span>.
        </p>
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-2 max-w-sm mx-auto">
          But to get to the root of the problem, we need to update the most important operating system of all: <span className="font-bold">your brain</span>.
        </p>
        <p className="text-sm md:text-md opacity-20 leading-relaxed mb-2 max-w-sm mx-auto mt-8">
          Do you think that's air you're breathing now?
        </p>
      </section>

      <section className="max-w-xl mx-auto">
        <h3 className="font-bold text-2xl lg:text-3xl tracking-tight mb-6 text-center">
          What is HDI?
        </h3>
        <AnimatePresence mode="wait">
          <motion.div
            key={currentDefinitionIndex}
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 1 }}
          >
            <p className="text-md md:text-lg opacity-80 leading-relaxed mb-6 mx-auto text-center">
              {hdiDefinitions[currentDefinitionIndex]} (HDI)
            </p>
          </motion.div>
        </AnimatePresence>
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-12 mx-auto text-center">
          is a revolutionary technology of the mind, body and heart. Dilligently applied, it bridges the gap between human cognition, digital systems and beyond.
        </p>
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-20 max-w-sm mx-auto text-center">
          <em>"Digital actions will be the fundamental unit of all knowledge work. It all starts with the prompt - the prompt <em>is</em> <strong>you</strong>."</em>
        </p>
        <p className="text-md md:text-lg opacity-80 leading-relaxed mb-24 max-w-sm mx-auto text-center">
          <strong><em>In the end, it comes down to the man in the box.</em></strong>
        </p>
      </section>
    </motion.div>
  );
}
</file>

<file path="app/hdi/components/HDIHeader.tsx">
"use client";

import { useState, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";
import Image from "next/image";

interface HDIHeaderProps {
  hdiDefinitions: string[];
  currentDefinitionIndex: number;
  setCurrentDefinitionIndex: (index: (prevIndex: number) => number) => void;
  isLoading: boolean;
}

export default function HDIHeader({ hdiDefinitions, currentDefinitionIndex, setCurrentDefinitionIndex, isLoading }: HDIHeaderProps) {

  const [direction, setDirection] = useState(1); // 1 for right to left, -1 for left to right

  // Effect for the carousel
  useEffect(() => {
    if (hdiDefinitions.length === 0) return;

    const carouselInterval = setInterval(() => {
      setDirection(1);
      setCurrentDefinitionIndex((prevIndex) =>
        prevIndex === hdiDefinitions.length - 1 ? 0 : prevIndex + 1
      );
    }, 3000);

    return () => clearInterval(carouselInterval);
  }, [hdiDefinitions.length]);

  // Animation variants for the carousel
  const variants = {
    enter: (direction: number) => ({
      x: direction > 0 ? 100 : -100,
      opacity: 0
    }),
    center: {
      x: 0,
      opacity: 1
    },
    exit: (direction: number) => ({
      x: direction > 0 ? -100 : 100,
      opacity: 0
    })
  };

  const loadingText = () => {
    return (
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 2.5 }}
      >
        <div className="text-2xl font-bold opacity-50">Loading...</div>
      </motion.div>
    )
  }

  return (
    <section className="text-center max-w-xl mx-auto mt-6 md:mt-12 mb-16 md:mb-24">
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 2.5 }}
      >
        <h1 className="font-extrabold lg:text-5xl opacity-60 tracking-tight mb-6 tracking-wide" style={{ fontSize: '5rem' }}>
          HDI
        </h1>
      </motion.div>
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 2.5 }}
      >
        <Image src="/images/hdi_logo_v01-2.png" alt="HDI Logo" width={300} height={300} className="mx-auto my-4" />
      </motion.div>

      {/* Carousel for h2 with id="hdi-carousel" */}
      <div id="hdi-carousel" className="h-12 relative mb-12">
        {isLoading ? (
          loadingText()
        ) : (
          <AnimatePresence initial={false} custom={direction}>
            <motion.h2
              key={currentDefinitionIndex}
              custom={direction}
              variants={variants}
              initial="enter"
              animate="center"
              exit="exit"
              transition={{
                x: { type: "spring", stiffness: 300, damping: 30 },
                opacity: { duration: 0.2 }
              }}
              className="text-2xl absolute w-full"
            >
              {hdiDefinitions[currentDefinitionIndex]}
            </motion.h2>
          </AnimatePresence>
        )}
      </div>
    </section>
  );
}
</file>

<file path="app/hdi/components/TerminalEmulation.tsx">
"use client";

import { useState, useEffect } from "react";

export default function TerminalEmulation() {
  // State for terminal animation
  const [terminalLines, setTerminalLines] = useState<string[]>([]);
  const [isAnimationComplete, setIsAnimationComplete] = useState(false);
  const [showCursor, setShowCursor] = useState(true);

  const terminalContent = [
    { prefix: "<span class='text-green-500'>hdi@oceanheart:~$</span> <span class='text-green-400'>", text: "./initialize.sh", suffix: "</span>" },
    { prefix: "<span class='text-green-500'>[INFO]</span> <span class='text-green-400'>", text: "Initializing HDI system components...", suffix: "</span>" },
    { prefix: "<span class='text-green-500'>[INFO]</span> <span class='text-green-400'>", text: "Loading neural interface modules...", suffix: "</span>" },
    { prefix: "<span class='text-green-500'>[INFO]</span> <span class='text-green-400'>", text: "Establishing connection to central node...", suffix: "</span>" },
    { prefix: "<span class='text-green-500'>[SUCCESS]</span> <span class='text-green-400'>", text: "Connection established.", suffix: "</span>" },
    // { prefix: "<span class='text-green-500'>hdi@oceanheart:~$</span> <span class='text-green-400'>", text: "", suffix: "</span>" }
  ];

  // Effect to start terminal animation on component mount
  useEffect(() => {
    let isMounted = true;
    let timeouts: NodeJS.Timeout[] = [];

    const animateTerminal = async () => {
      // Clear any existing lines
      setTerminalLines([]);

      // Process each line with a delay
      for (let i = 0; i < terminalContent.length; i++) {
        const line = terminalContent[i];

        // Type each character of the current line
        let displayedText = line.prefix;
        for (let j = 0; j <= line.text.length; j++) {
          if (!isMounted) return;

          // Add next character
          const newText = line.prefix + line.text.substring(0, j) + line.suffix;

          // Update with small delay
          await new Promise<void>(resolve => {
            const timeout = setTimeout(() => {
              if (isMounted) {
                if (i === 0) {
                  // For first line, directly update the array
                  setTerminalLines([newText]);
                } else {
                  // For subsequent lines, append to existing lines
                  setTerminalLines(prev => {
                    const newLines = [...prev];
                    if (newLines.length > i) {
                      newLines[i] = newText;
                    } else {
                      newLines.push(newText);
                    }
                    return newLines;
                  });
                }
              }
              resolve();
            }, Math.random() * 50);
            timeouts.push(timeout as NodeJS.Timeout);
          });
        }

        // Pause between lines
        if (i < terminalContent.length - 1) {
          await new Promise<void>(resolve => {
            const timeout = setTimeout(resolve, 300);
            timeouts.push(timeout as NodeJS.Timeout);
          });
        }
      }

      // Animation complete
      if (isMounted) {
        setIsAnimationComplete(true);
      }
    };

    animateTerminal();

    // Cleanup function
    return () => {
      isMounted = false;
      timeouts.forEach(clearTimeout);
    };
  }, []);

  // Blinking cursor effect
  useEffect(() => {
    const cursorInterval = setInterval(() => {
      setShowCursor(prev => !prev);
    }, 500);

    return () => clearInterval(cursorInterval);
  }, []);

  return (
    <div className="terminal-container mb-12 rounded-xl overflow-hidden shadow-lg">
      <div className="terminal-header bg-gray-800 p-2 flex items-center">
        <div className="terminal-button bg-red-500 rounded-full w-3 h-3 mr-2"></div>
        <div className="terminal-button bg-yellow-500 rounded-full w-3 h-3 mr-2"></div>
        <div className="terminal-button bg-green-500 rounded-full w-3 h-3"></div>
        <div className="terminal-title text-gray-400 text-xs ml-4">hdi@oceanheart:~</div>
      </div>
      <div className="terminal-body bg-black p-4 font-mono text-sm" style={{ minHeight: '200px' }}>
        {terminalLines.map((line, index) => (
          <div key={`line-${index}`} className="terminal-line" dangerouslySetInnerHTML={{ __html: line }} />
        ))}
        {isAnimationComplete && (
          <div className="terminal-line">
            <span className="text-green-500">hdi@oceanheart:~$</span>
            <span className={`text-green-400 ${showCursor ? 'terminal-cursor' : 'opacity-0'}`}>_</span>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="app/hdi/lib/create_db.py">
import sqlite3
from datetime import datetime

# Connect to SQLite database (creates it if it doesn't exist)
conn = sqlite3.connect("names.db")
cursor = conn.cursor()

# Create the User table
cursor.execute(
    """
CREATE TABLE IF NOT EXISTS Name (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    created_at DATE DEFAULT CURRENT_TIMESTAMP
)
"""
)

names = [
    "Human Digital Interface",
    "Higher Defiance Institute",
    "Hyperconsciousness Design Initiative",
    "Heart Data Integrated",
]

# Insert data into the table
for name in names:
    cursor.execute(
        """
    INSERT INTO Name (name, created_at)
    VALUES (?, ?)
    """,
        (name, datetime.now().isoformat()),
    )

# Commit the changes and close the connection
conn.commit()
conn.close()
</file>

<file path="app/hdi/lib/db_agent.py">
# /// script
# dependencies = [
#   "openai>=1.63.0",
#   "rich>=13.7.0",
#   "pydantic>=2.0.0",
# ]
# ///


import os
import sys
import json
import argparse
import sqlite3
import subprocess
from typing import List
from rich.console import Console
from rich.panel import Panel
import openai
from pydantic import BaseModel, Field, ValidationError
from openai import pydantic_function_tool

# Initialize rich console
console = Console()


# Create our list of function tools from our pydantic models
class ListTablesArgs(BaseModel):
    reasoning: str = Field(
        ..., description="Explanation for listing tables relative to the user request"
    )


class DescribeTableArgs(BaseModel):
    reasoning: str = Field(..., description="Reason why the table schema is needed")
    table_name: str = Field(..., description="Name of the table to describe")


class SampleTableArgs(BaseModel):
    reasoning: str = Field(..., description="Explanation for sampling the table")
    table_name: str = Field(..., description="Name of the table to sample")
    row_sample_size: int = Field(
        ..., description="Number of rows to sample (aim for 3-5 rows)"
    )


class RunTestSQLQuery(BaseModel):
    reasoning: str = Field(..., description="Reason for testing this query")
    sql_query: str = Field(..., description="The SQL query to test")


class RunFinalSQLQuery(BaseModel):
    reasoning: str = Field(
        ...,
        description="Final explanation of how this query satisfies the user request",
    )
    sql_query: str = Field(..., description="The validated SQL query to run")


# Create tools list
tools = [
    pydantic_function_tool(ListTablesArgs),
    pydantic_function_tool(DescribeTableArgs),
    pydantic_function_tool(SampleTableArgs),
    pydantic_function_tool(RunTestSQLQuery),
    pydantic_function_tool(RunFinalSQLQuery),
]

AGENT_PROMPT = """<purpose>
    You are a world-class expert at crafting precise SQLite SQL queries.
    Your goal is to generate accurate queries that exactly match the user's data needs.
</purpose>

<instructions>
    <instruction>Use the provided tools to explore the database and construct the perfect query.</instruction>
    <instruction>Start by listing tables to understand what's available.</instruction>
    <instruction>Describe tables to understand their schema and columns.</instruction>
    <instruction>Sample tables to see actual data patterns.</instruction>
    <instruction>Test queries before finalizing them.</instruction>
    <instruction>Only call run_final_sql_query when you're confident the query is perfect.</instruction>
    <instruction>Be thorough but efficient with tool usage.</instruction>
    <instruction>If you find your run_test_sql_query tool call returns an error or won't satisfy the user request, try to fix the query or try a different query.</instruction>
    <instruction>Think step by step about what information you need.</instruction>
    <instruction>Be sure to specify every parameter for each tool call.</instruction>
    <instruction>Every tool call should have a reasoning parameter which gives you a place to explain why you are calling the tool.</instruction>
</instructions>

<tools>
    <tool>
        <name>list_tables</name>
        <description>Returns list of available tables in database</description>
        <parameters>
            <parameter>
                <name>reasoning</name>
                <type>string</type>
                <description>Why we need to list tables relative to user request</description>
                <required>true</required>
            </parameter>
        </parameters>
    </tool>
    
    <tool>
        <name>describe_table</name>
        <description>Returns schema info for specified table</description>
        <parameters>
            <parameter>
                <name>reasoning</name>
                <type>string</type>
                <description>Why we need to describe this table</description>
                <required>true</required>
            </parameter>
            <parameter>
                <name>table_name</name>
                <type>string</type>
                <description>Name of table to describe</description>
                <required>true</required>
            </parameter>
        </parameters>
    </tool>
    
    <tool>
        <name>sample_table</name>
        <description>Returns sample rows from specified table, always specify row_sample_size</description>
        <parameters>
            <parameter>
                <name>reasoning</name>
                <type>string</type>
                <description>Why we need to sample this table</description>
                <required>true</required>
            </parameter>
            <parameter>
                <name>table_name</name>
                <type>string</type>
                <description>Name of table to sample</description>
                <required>true</required>
            </parameter>
            <parameter>
                <name>row_sample_size</name>
                <type>integer</type>
                <description>Number of rows to sample aim for 3-5 rows</description>
                <required>true</required>
            </parameter>
        </parameters>
    </tool>
    
    <tool>
        <name>run_test_sql_query</name>
        <description>Tests a SQL query and returns results (only visible to agent)</description>
        <parameters>
            <parameter>
                <name>reasoning</name>
                <type>string</type>
                <description>Why we're testing this specific query</description>
                <required>true</required>
            </parameter>
            <parameter>
                <name>sql_query</name>
                <type>string</type>
                <description>The SQL query to test</description>
                <required>true</required>
            </parameter>
        </parameters>
    </tool>
    
    <tool>
        <name>run_final_sql_query</name>
        <description>Runs the final validated SQL query and shows results to user</description>
        <parameters>
            <parameter>
                <name>reasoning</name>
                <type>string</type>
                <description>Final explanation of how query satisfies user request</description>
                <required>true</required>
            </parameter>
            <parameter>
                <name>sql_query</name>
                <type>string</type>
                <description>The validated SQL query to run</description>
                <required>true</required>
            </parameter>
        </parameters>
    </tool>
</tools>

<user-request>
    {{user_request}}
</user-request>
"""


def list_tables(reasoning: str) -> List[str]:
    """Returns a list of tables in the database.

    The agent uses this to discover available tables and make informed decisions.

    Args:
        reasoning: Explanation of why we're listing tables relative to user request

    Returns:
        List of table names as strings
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        cursor.execute(
            "SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';"
        )
        tables = [row[0] for row in cursor.fetchall()]
        conn.close()
        console.log(f"[blue]List Tables Tool[/blue] - Reasoning: {reasoning}")
        return tables
    except Exception as e:
        console.log(f"[red]Error listing tables: {str(e)}[/red]")
        return []


def describe_table(reasoning: str, table_name: str) -> str:
    """Returns schema information about the specified table.

    The agent uses this to understand table structure and available columns.

    Args:
        reasoning: Explanation of why we're describing this table
        table_name: Name of table to describe

    Returns:
        String containing table schema information
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        cursor.execute(f"PRAGMA table_info('{table_name}');")
        rows = cursor.fetchall()
        conn.close()
        output = "\n".join([str(row) for row in rows])
        console.log(
            f"[blue]Describe Table Tool[/blue] - Table: {table_name} - Reasoning: {reasoning}"
        )
        return output
    except Exception as e:
        console.log(f"[red]Error describing table: {str(e)}[/red]")
        return ""


def sample_table(reasoning: str, table_name: str, row_sample_size: int) -> str:
    """Returns a sample of rows from the specified table.

    The agent uses this to understand actual data content and patterns.

    Args:
        reasoning: Explanation of why we're sampling this table
        table_name: Name of table to sample from
        row_sample_size: Number of rows to sample aim for 3-5 rows

    Returns:
        String containing sample rows in readable format
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        cursor.execute(f"SELECT * FROM {table_name} LIMIT {row_sample_size};")
        rows = cursor.fetchall()
        conn.close()
        output = "\n".join([str(row) for row in rows])
        console.log(
            f"[blue]Sample Table Tool[/blue] - Table: {table_name} - Rows: {row_sample_size} - Reasoning: {reasoning}"
        )
        return output
    except Exception as e:
        console.log(f"[red]Error sampling table: {str(e)}[/red]")
        return ""


def run_test_sql_query(reasoning: str, sql_query: str) -> str:
    """Executes a test SQL query and returns results.

    The agent uses this to validate queries before finalizing them.
    Results are only shown to the agent, not the user.

    Args:
        reasoning: Explanation of why we're running this test query
        sql_query: The SQL query to test

    Returns:
        Query results as a string
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        cursor.execute(sql_query)
        rows = cursor.fetchall()
        conn.commit()
        conn.close()
        output = "\n".join([str(row) for row in rows])
        console.log(f"[blue]Test Query Tool[/blue] - Reasoning: {reasoning}")
        console.log(f"[dim]Query: {sql_query}[/dim]")
        return output
    except Exception as e:
        console.log(f"[red]Error running test query: {str(e)}[/red]")
        return str(e)


def run_final_sql_query(reasoning: str, sql_query: str) -> str:
    """Executes the final SQL query and returns results to user.

    This is the last tool call the agent should make after validating the query.

    Args:
        reasoning: Final explanation of how this query satisfies user request
        sql_query: The validated SQL query to run

    Returns:
        Query results as a string
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        cursor.execute(sql_query)
        rows = cursor.fetchall()
        conn.commit()
        conn.close()
        output = "\n".join([str(row) for row in rows])
        console.log(
            Panel(
                f"[green]Final Query Tool[/green]\nReasoning: {reasoning}\nQuery: {sql_query}"
            )
        )
        return output
    except Exception as e:
        console.log(f"[red]Error running final query: {str(e)}[/red]")
        return str(e)


def main():
    # Set up argument parser
    parser = argparse.ArgumentParser(description="SQLite Agent using OpenAI API")
    parser.add_argument(
        "-d", "--db", required=True, help="Path to SQLite database file"
    )
    parser.add_argument("-p", "--prompt", required=True, help="The user's request")
    parser.add_argument(
        "-c",
        "--compute",
        type=int,
        default=10,
        help="Maximum number of agent loops (default: 3)",
    )
    args = parser.parse_args()

    # Configure the API key
    OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
    if not OPENAI_API_KEY:
        console.print(
            "[red]Error: OPENAI_API_KEY environment variable is not set[/red]"
        )
        console.print(
            "Please get your API key from https://platform.openai.com/api-keys"
        )
        console.print("Then set it with: export OPENAI_API_KEY='your-api-key-here'")
        sys.exit(1)

    openai.api_key = OPENAI_API_KEY

    # Set global DB_PATH for tool functions
    global DB_PATH
    DB_PATH = args.db

    # Create a single combined prompt based on the full template
    completed_prompt = AGENT_PROMPT.replace("{{user_request}}", args.prompt)
    messages = [{"role": "user", "content": completed_prompt}]

    compute_iterations = 0

    # Main agent loop
    while True:
        console.rule(
            f"[yellow]Agent Loop {compute_iterations+1}/{args.compute}[/yellow]"
        )
        compute_iterations += 1

        if compute_iterations >= args.compute:
            console.print(
                "[yellow]Warning: Reached maximum compute loops without final query[/yellow]"
            )
            raise Exception(
                f"Maximum compute loops reached: {compute_iterations}/{args.compute}"
            )

        try:
            # Generate content with tool support
            response = openai.chat.completions.create(
                model="o3-mini",
                # model="gpt-4o-mini",
                messages=messages,
                tools=tools,
                tool_choice="required",
            )

            if response.choices:
                assert len(response.choices) == 1
                message = response.choices[0].message

                if message.function_call:
                    func_call = message.function_call
                elif message.tool_calls and len(message.tool_calls) > 0:
                    # If a tool_calls list is present, use the first call and extract its function details.
                    tool_call = message.tool_calls[0]
                    func_call = tool_call.function
                else:
                    func_call = None

                if func_call:
                    func_name = func_call.name
                    func_args_str = func_call.arguments

                    messages.append(
                        {
                            "role": "assistant",
                            "tool_calls": [
                                {
                                    "id": tool_call.id,
                                    "type": "function",
                                    "function": func_call,
                                }
                            ],
                        }
                    )

                    console.print(
                        f"[blue]Function Call:[/blue] {func_name}({func_args_str})"
                    )
                    try:
                        # Validate and parse arguments using the corresponding pydantic model
                        if func_name == "ListTablesArgs":
                            args_parsed = ListTablesArgs.model_validate_json(
                                func_args_str
                            )
                            result = list_tables(reasoning=args_parsed.reasoning)
                        elif func_name == "DescribeTableArgs":
                            args_parsed = DescribeTableArgs.model_validate_json(
                                func_args_str
                            )
                            result = describe_table(
                                reasoning=args_parsed.reasoning,
                                table_name=args_parsed.table_name,
                            )
                        elif func_name == "SampleTableArgs":
                            args_parsed = SampleTableArgs.model_validate_json(
                                func_args_str
                            )
                            result = sample_table(
                                reasoning=args_parsed.reasoning,
                                table_name=args_parsed.table_name,
                                row_sample_size=args_parsed.row_sample_size,
                            )
                        elif func_name == "RunTestSQLQuery":
                            args_parsed = RunTestSQLQuery.model_validate_json(
                                func_args_str
                            )
                            result = run_test_sql_query(
                                reasoning=args_parsed.reasoning,
                                sql_query=args_parsed.sql_query,
                            )
                        elif func_name == "RunFinalSQLQuery":
                            args_parsed = RunFinalSQLQuery.model_validate_json(
                                func_args_str
                            )
                            result = run_final_sql_query(
                                reasoning=args_parsed.reasoning,
                                sql_query=args_parsed.sql_query,
                            )
                            console.print("\n[green]Final Results:[/green]")
                            console.print(result)
                            return
                        else:
                            raise Exception(f"Unknown tool call: {func_name}")

                        console.print(
                            f"[blue]Function Call Result:[/blue] {func_name}(...) ->\n{result}"
                        )

                        # Append the function call result into our messages as a tool response
                        messages.append(
                            {
                                "role": "tool",
                                "tool_call_id": tool_call.id,
                                "content": json.dumps({"result": str(result)}),
                            }
                        )

                    except Exception as e:
                        error_msg = f"Argument validation failed for {func_name}: {e}"
                        console.print(f"[red]{error_msg}[/red]")
                        messages.append(
                            {
                                "role": "tool",
                                "tool_call_id": tool_call.id,
                                "content": json.dumps({"error": error_msg}),
                            }
                        )
                        continue
                else:
                    raise Exception(
                        "No function call in this response - should never happen"
                    )

        except Exception as e:
            console.print(f"[red]Error in agent loop: {str(e)}[/red]")
            raise e


if __name__ == "__main__":
    main()
</file>

<file path="app/hdi/layout.tsx">
import { Suspense } from "react";
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export const metadata = getSEOTags({
  title: `${config.appName} HDI - Human Digital Interface`,
  description: "The next generation of human-computer interaction",
  canonicalUrlRelative: "/hdi",
});

export default function HDILayout({ children }: { children: React.ReactNode }) {
  return (
    <div>
      <Suspense>
        <Header />
      </Suspense>

      <main className="min-h-screen p-2">{children}</main>

      <Suspense>
        <Footer showHDIForm={true} />
      </Suspense>
    </div>
  );
}
</file>

<file path="app/hdi/page.tsx">
"use client";

import { useState, useEffect } from "react";
import Script from "next/script";

// Import components
import HDIHeader from './components/HDIHeader';
import TerminalEmulation from './components/TerminalEmulation';
import AudioPlayer from './components/AudioPlayer';
import ContentSections from './components/ContentSections';
import CountdownTimer from './components/CountdownTimer';

export default function HDIPage() {
  // State for HDI definitions from the database
  const [hdiDefinitions, setHdiDefinitions] = useState([
    "Human Digital Interface",
    "Higher Defiance Institute",
    "Hyperconsciousness Design Initiative",
    "Heart Data Integrated"
  ]);
  const [namesCount, setNamesCount] = useState(4);
  const [isLoading, setIsLoading] = useState(true);
  const [timeRemaining, setTimeRemaining] = useState({
    days: 0,
    hrs: 0,
    mins: 0,
    secs: 0,
    expired: false
  });
  const [currentDefinitionIndex, setCurrentDefinitionIndex] = useState(0);

  // Fetch HDI names from the API
  const fetchHDINames = async () => {
    try {
      const response = await fetch('/api/hdi/names');
      const data = await response.json();

      if (data.names && data.names.length > 0) {
        setHdiDefinitions(data.names);
        setNamesCount(data.names.length);
      }

      setIsLoading(false);
    } catch (error) {
      console.error('Error fetching HDI names:', error);
      setIsLoading(false);
    }
  };

  // Poll for new names
  useEffect(() => {
    fetchHDINames();

    const pollInterval = setInterval(async () => {
      try {
        const response = await fetch('/api/hdi/names');
        const data = await response.json();

        if (data.count > namesCount) {
          setHdiDefinitions(data.names);
          setNamesCount(data.count);
        }
      } catch (error) {
        console.error('Error polling HDI names:', error);
      }
    }, 5000); // Poll every 5 secs

    return () => clearInterval(pollInterval);
  }, [namesCount]);

  const handleDownload = async () => {
    try {
      if (timeRemaining.expired) {
        window.location.href = "/api/hdi/download";
      } else {
        console.log("Download not available yet");
      }
    } catch (error) {
      console.error("Download failed:", error);
    }
  };

  return (
    <>
      <div className="container mx-auto px-4 font-mono">
        <HDIHeader
          hdiDefinitions={hdiDefinitions}
          currentDefinitionIndex={currentDefinitionIndex}
          setCurrentDefinitionIndex={setCurrentDefinitionIndex}
          isLoading={isLoading}
        />
        <TerminalEmulation />
        <AudioPlayer />
        <CountdownTimer onDownload={handleDownload} timeRemaining={timeRemaining} setTimeRemaining={setTimeRemaining} />
        <ContentSections hdiDefinitions={hdiDefinitions} currentDefinitionIndex={currentDefinitionIndex} />
      </div>
    </>
  );
}
</file>

<file path="app/libs/supabase/server.ts">
import { createClient } from '@supabase/supabase-js'

export function createServerClient() {
  const supabase = createClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_ROLE_KEY!
  )
  return supabase
}
</file>

<file path="app/privacy-policy/page.tsx">
import Link from "next/link";
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

// CHATGPT PROMPT TO GENERATE YOUR PRIVACY POLICY ‚Äî replace with your own data üëá

// 1. Go to https://chat.openai.com/
// 2. Copy paste bellow
// 3. Replace the data with your own (if needed)
// 4. Paste the answer from ChatGPT directly in the <pre> tag below

// You are an excellent lawyer.

// I need your help to write a simple privacy policy for my website. Here is some context:
// - Website: https://shipfa.st
// - Name: ShipFast
// - Description: A JavaScript code boilerplate to help entrepreneurs launch their startups faster
// - User data collected: name, email and payment information
// - Non-personal data collection: web cookies
// - Purpose of Data Collection: Order processing
// - Data sharing: we do not share the data with any other parties
// - Children's Privacy: we do not collect any data from children
// - Updates to the Privacy Policy: users will be updated by email
// - Contact information: marc@shipfa.st

// Please write a simple privacy policy for my site. Add the current date.  Do not add or explain your reasoning. Answer:

export const metadata = getSEOTags({
  title: `Privacy Policy | ${config.appName}`,
  canonicalUrlRelative: "/privacy-policy",
});

const PrivacyPolicy = () => {
  return (
    <main className="max-w-xl mx-auto">
      <div className="p-5">
        <Link href="/" className="btn btn-ghost">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            className="w-5 h-5"
          >
            <path
              fillRule="evenodd"
              d="M15 10a.75.75 0 01-.75.75H7.612l2.158 1.96a.75.75 0 11-1.04 1.08l-3.5-3.25a.75.75 0 010-1.08l3.5-3.25a.75.75 0 111.04 1.08L7.612 9.25h6.638A.75.75 0 0115 10z"
              clipRule="evenodd"
            />
          </svg>{" "}
          Back
        </Link>
        <h1 className="text-3xl font-extrabold pb-6">
          Privacy Policy for {config.appName}
        </h1>

        <pre
          className="leading-relaxed whitespace-pre-wrap"
          style={{ fontFamily: "sans-serif" }}
        >
          {`
Effective Date: February 18, 2025

1. Introduction

oceanheart.ai ("we," "our," or "us") values your privacy. This Privacy Policy explains how we collect, use, and protect your information when you visit our website (https://www.oceanheart.ai) and use our services.

2. Information We Collect

Personal Data: We collect your name, email, and payment information for order processing. Within the app, users are required to store client details under pseudonyms and remove any personally identifiable data (PID), including dates of birth and addresses. 

It is the responsibility of each user to ensure they gain appropriate levels of consent from their clients before storing their data. Clients must understand that their any and all of their data will be stored on our servers and regularly used for training our AI models, or sent to third parties for analysis, extraction and transformation.

Non-Personal Data: We use cookies to improve website functionality and user experience.

3. How We Use Your Data

We collect and use your data solely for order processing and to provide our services effectively.

4. Data Sharing

We do not share your personal data with any third parties.

5. Updates to This Privacy Policy

We may update this Privacy Policy from time to time. Users will be notified of any changes via email.

6. Contact Us

If you have any questions about this Privacy Policy, please contact us at kai@oceanheart.ai.

By using our services, you agree to the terms of this Privacy Policy.
`}
        </pre>
      </div>
    </main>
  );
};

export default PrivacyPolicy;
</file>

<file path="app/saigo/leaderboard/layout.tsx">
import { ReactNode } from "react";
import { guardLeaderboardPage } from "../lib/guard";

export default async function Layout({ children }: { children: ReactNode }) {
  await guardLeaderboardPage();
  return <>{children}</>;
}
</file>

<file path="app/saigo/leaderboard/page.tsx">
import LiveLeaderboard from "@/components/LiveLeaderboard";

export default function LeaderboardPage() {

  return <LiveLeaderboard />;
}
</file>

<file path="app/saigo/lib/.python-version">
3.12.8
</file>

<file path="app/saigo/lib/encrypt.ts">
import crypto from 'crypto';
import { config } from 'dotenv';
import path from 'path';

// Load env variables from one of multiple possible .env paths
const envPaths = [".env", "../.env", "../../.env", "../../../.env"].map(p =>
  path.resolve(process.cwd(), p)
);
for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.SAIGO_SECRET_KEY) break;
}

const algorithm = 'aes-256-cbc';
const secret = process.env.SAIGO_SECRET_KEY;

// Ensure the secret is a Buffer and is 32 bytes long
if (!secret || secret.length !== 32) {
  throw new Error('SAIGO_SECRET_KEY must be a 32-byte string');
}

const iv = crypto.randomBytes(16);

function encrypt(text: string) {
  const cipher = crypto.createCipheriv(algorithm, Buffer.from(secret), iv);
  let encrypted = cipher.update(text, 'utf8', 'hex');
  encrypted += cipher.final('hex');
  return `${iv.toString('hex')}:${encrypted}`;
}

// Example: Generate an encrypted key
const encryptedKey = encrypt('saigo-no-yume');
console.log(encryptedKey);
</file>

<file path="app/saigo/lib/guard.ts">
import { createClient } from "@/libs/supabase/server";
import { redirect } from "next/navigation";

export async function guardUsernamePage() {
  const supabase = createClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) {
    redirect("/saigo/signin");
  }
  const { data: profile, error } = await supabase
    .from("saigo_users")
    .select("username")
    .eq("user_id", user.id)
    .single();
  if (error) {
    console.error("Error fetching saigo user for username page:", error);
  }
  // If a username exists, the user should not be on the username page
  if (profile?.username) {
    redirect("/saigo/leaderboard");
  }
}

export async function guardLeaderboardPage() {
  const supabase = createClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) {
    redirect("/saigo/signin");
  }
  const { data: profile, error } = await supabase
    .from("saigo_users")
    .select("username")
    .eq("user_id", user.id)
    .single();
  if (error) {
    console.error("Error fetching saigo user for leaderboard:", error);
  }
  // If no username exists, the user should not be on the leaderboard page
  if (!profile?.username) {
    redirect("/saigo/username");
  }
}
</file>

<file path="app/saigo/lib/seed_db.ts">
import { createClient } from '@supabase/supabase-js';
import { faker } from '@faker-js/faker';
import { v4 as uuidv4 } from 'uuid';
const SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY!;

const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);

async function seed() {
  const numberOfUsers = 10;
  const practicesPerUser = 25;
  const practiceTypes = [
    "Meditation",
    "Sitting in the rain",
    "Energy movements",
    "High Guard",
    "Jumping",
    "Projection"
  ];

  const createdUsers: any[] = [];

  // 1. Create 10 new supabase auth users
  for (let i = 0; i < numberOfUsers; i++) {
    const email = faker.internet.email();
    const password = "password123"; // default password
    const { data: authUser, error: authError } = await supabase.auth.admin.createUser({
      email,
      password,
      email_confirm: true
    });
    if (authError) {
      console.error("Error creating auth user:", authError);
      continue;
    }
    if (authUser) {
      createdUsers.push(authUser.user);
      console.log(`Created auth user: ${authUser.user.email}`);
    }
  }

  // 2. Create corresponding saigo_users with made-up usernames
  for (const user of createdUsers) {
    const username = faker.internet.username();
    const { error: userError } = await supabase.from('saigo_users').insert({
      id: uuidv4(),
      user_id: user.id,     // associating the auth user's ID
      email: user.email,
      username,        // made-up username
    });
    if (userError) {
      console.error(`Error inserting saigo_user for user ${user.id}:`, userError);
    } else {
      console.log(`Inserted saigo_user for ${user.email}`);
    }
  }

  // 3. Create exactly 25 practice records for each user
  const practices = [];
  for (const user of createdUsers) {
    for (let i = 0; i < practicesPerUser; i++) {
      const randomType = practiceTypes[Math.floor(Math.random() * practiceTypes.length)];
      const randomPoints = Math.floor(Math.random() * (120 - 5 + 1)) + 5; // random int between 5 and 120

      practices.push({
        user_id: user.id,
        type: randomType,
        points: randomPoints
        // created_at will default to now in the database
      });
    }
  }

  const { error: practicesError } = await supabase
    .from('practices')
    .insert(practices);
  if (practicesError) {
    console.error("Error inserting practices:", practicesError);
  } else {
    console.log(`Inserted ${practices.length} practice records successfully.`);
  }

  console.log("Database seeding complete!");
}

seed()
  .then(() => process.exit(0))
  .catch((err) => {
    console.error("Seeding failed:", err);
    process.exit(1);
  });
</file>

<file path="app/saigo/lib/seed_practices_last7days.ts">
import { config } from "dotenv";
import path from "path";
import { createClient } from "@supabase/supabase-js";
import { randomInt } from 'crypto';

// Helper function to get a random integer between min and max (inclusive)
function getRandomInt(min: number, max: number): number {
  return randomInt(min, max + 1);
}

// Load env variables from one of multiple possible .env paths
const envPaths = [".env", "../.env", "../../.env", "../../../.env"].map(p =>
  path.resolve(process.cwd(), p)
);
for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.NEXT_PUBLIC_SUPABASE_URL) break;
}

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

async function seedLast7Days() {
  // 1. Fetch all users from the saigo_users table.
  // Fetch all users
  const { data: allUsers, error: allUsersError } = await supabase
    .from("saigo_users")
    .select("id, username");

  if (allUsersError) {
    console.error("Error fetching users:", allUsersError);
    process.exit(1);
  }
  console.log(`Fetched ${allUsers!.length} users`);

  // 2. Define today as current date in UTC and calculate the start date (6 days before today)
  const now = new Date();
  const today = new Date(Date.UTC(
    now.getUTCFullYear(),
    now.getUTCMonth(),
    now.getUTCDate()
  ));
  const startDate = new Date(Date.UTC(
    now.getUTCFullYear(),
    now.getUTCMonth(),
    now.getUTCDate() - 6
  ));

  console.log(`Generating practices from ${startDate.toISOString()} to ${today.toISOString()}`);

  // 3. Define an array of practice types (optional selection).
  const practiceTypes = [
    "Meditation",
    "Sitting in the Rain",
    "Energy movements",
    "High Guard",
    "Jumping",
    "Projection"
  ];

  // For each user, create random practice records over the last 7 days
  for (const user of allUsers!) {
    if (user.username === "sereneWisdom42") {
      continue;
    }
    const practices = [];

    // Assign an activity level to each user (1: Low, 2: Medium, 3: High)
    const activityLevel = getRandomInt(1, 3);

    // Set ranges based on activity level
    let practicesPerDayRange: [number, number];
    let pointsRange: [number, number];
    let practiceDaysProbability: number;

    if (activityLevel === 1) {
      // Low activity
      practicesPerDayRange = [0, 1];
      pointsRange = [5, 20];
      practiceDaysProbability = 50; // 50% chance to practice on any day
    } else if (activityLevel === 2) {
      // Medium activity
      practicesPerDayRange = [1, 2];
      pointsRange = [10, 35];
      practiceDaysProbability = 70; // 70% chance
    } else {
      // High activity
      practicesPerDayRange = [1, 3];
      pointsRange = [20, 50];
      practiceDaysProbability = 90; // 90% chance
    }

    for (let i = 0; i < 7; i++) {
      // Randomly decide if the user practiced on this day
      const practicedToday = getRandomInt(1, 100) <= practiceDaysProbability;
      if (!practicedToday) {
        continue; // Skip to the next day
      }

      // Calculate the date for the practice (UTC)
      const date = new Date(Date.UTC(
        startDate.getUTCFullYear(),
        startDate.getUTCMonth(),
        startDate.getUTCDate() + i
      ));

      // Random number of practices for this day
      const practicesPerDay = getRandomInt(practicesPerDayRange[0], practicesPerDayRange[1]);

      for (let j = 0; j < practicesPerDay; j++) {
        // Random time within the day
        const hours = getRandomInt(0, 23);
        const minutes = getRandomInt(0, 59);
        const seconds = getRandomInt(0, 59);

        const recordDate = new Date(Date.UTC(
          date.getUTCFullYear(),
          date.getUTCMonth(),
          date.getUTCDate(),
          hours,
          minutes,
          seconds
        ));

        // Random points for the practice
        const points = getRandomInt(pointsRange[0], pointsRange[1]);

        // Randomly select a practice type
        const type = practiceTypes[getRandomInt(0, practiceTypes.length - 1)];

        practices.push({
          user_id: user.id,
          type,
          points,
          created_at: recordDate
        });
      }
    }

    // Ensure at least one practice per user if none were generated
    if (practices.length === 0) {
      const randomDate = new Date(Date.UTC(
        today.getUTCFullYear(),
        today.getUTCMonth(),
        today.getUTCDate() - getRandomInt(0, 6)
      ));

      const hours = getRandomInt(0, 23);
      const minutes = getRandomInt(0, 59);
      const seconds = getRandomInt(0, 59);

      randomDate.setUTCHours(hours, minutes, seconds);

      const points = getRandomInt(10, 50);
      const type = practiceTypes[getRandomInt(0, practiceTypes.length - 1)];

      practices.push({
        user_id: user.id,
        type,
        points,
        created_at: randomDate
      });

      console.log(`No practices generated for user ${user.id}. Assigned a default practice.`);
    }

    // Insert the practices for the current user
    const { error: insertError } = await supabase
      .from("practices")
      .insert(practices.map(practice => ({
        ...practice,
        created_at: practice.created_at.toISOString(),
      })));
    if (insertError) {
      console.error(`Error inserting practices for user ${user.id}:`, insertError);
    } else {
      console.log(`Inserted ${practices.length} practice records for user ${user.id} (Activity Level: ${activityLevel})`);
    }
  }

  console.log("Finished seeding mock practice data for the last 7 days.");
}

seedLast7Days()
  .then(() => process.exit(0))
  .catch((err) => {
    console.error("Seeding failed:", err);
    process.exit(1);
  });
</file>

<file path="app/saigo/lib/seed_practices.ts">
import { config } from "dotenv";
import path from "path";
import { createClient } from "@supabase/supabase-js";

// Try multiple possible locations for the .env file
const envPaths = [".env", "../.env", "../../.env", "../../../.env"].map(p =>
  path.resolve(process.cwd(), p)
);
for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.NEXT_PUBLIC_SUPABASE_URL) break;
}

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

async function seedPracticeRecords() {
  // Fetch all the saigo_users
  const { data: users, error: usersError } = await supabase
    .from("saigo_users")
    .select("id");
  if (usersError) {
    console.error("Error fetching users:", usersError);
    process.exit(1);
  }
  console.log(`Fetched ${users!.length} users.`);

  // Define the practice types as in seed_db.ts
  const practiceTypes = [
    "Meditation",
    "Sitting In The Rain",
    "Energy Movements",
    "High Guard",
    "Feels Like",
    "Surrender",
    "Tonglen",
    "Scanning",
    "Manifestation",
    "The Tones",
    "Mind Projection",
    "Koan Meditation",
    "Conversations with God",
    "Time Stepping",
    "Brain Wiggle",
    "The White Fire",
    "Energise Water",
    "Aums",
    "Seeing Auras",
    "Watching Static",
    "Prana Walking",
    "Cloud Busting"
  ];

  // for each user, generate 1 practice record with all the practice types
  for (const user of users!) {
    const practices = [];
    for (const type of practiceTypes) {
      practices.push({
        user_id: user.id,
        type: type,
        points: 5,
        created_at: new Date().toISOString()
      });
    }
    const { error: insertError } = await supabase
      .from("practices")
      .insert(practices);
    if (insertError) {
      console.error(`Error inserting practices for user ${user.id}:`, insertError);
    } else {
      console.log(`Inserted ${practices.length} practices for user ${user.id}`);
    }
  }

  console.log("Practice seeding complete!");
}

seedPracticeRecords()
  .then(() => process.exit(0))
  .catch((err) => {
    console.error("Seeding failed:", err);
    process.exit(1);
  });
</file>

<file path="app/saigo/lib/seed_users.ts">
import { config } from "dotenv";
import path from "path";
import { createClient } from "@supabase/supabase-js";
import { v4 as uuidv4 } from 'uuid';
import { faker } from "@faker-js/faker";

// Load env variables
const envPaths = [".env", "../.env", "../../.env", "../../../.env"].map(p =>
  path.resolve(process.cwd(), p)
);
for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.NEXT_PUBLIC_SUPABASE_URL) break;
}

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

// Parse the command-line parameter --n
const args = process.argv.slice(2);
let n = 5; // default number of users
args.forEach((arg, index) => {
  if (arg === "--n") {
    n = parseInt(args[index + 1], 10);
  }
});
if (isNaN(n) || n <= 0) {
  console.error("Please provide a valid number greater than 0 using the --n parameter.");
  process.exit(1);
}

async function seedUsers() {
  // Generate n users programmatically
  const users = Array.from({ length: n }).map(() => {
    const username = faker.internet.userName();
    return {
      id: uuidv4(),
      email: `${username.toLowerCase()}@example.com`,
      username,
    }
  });

  const { error } = await supabase.from('saigo_users').insert(users);
  if (error) {
    console.error('Error inserting users:', error);
    process.exit(1);
  } else {
    console.log(`Inserted ${users.length} users into saigo_users.`);
    process.exit(0);
  }
}

seedUsers()
  .catch(err => {
    console.error('Seeding users failed:', err);
    process.exit(1);
  });
</file>

<file path="app/saigo/lib/sum_points_days.py">
import csv
import sys
from datetime import datetime, timedelta


def main():
    if len(sys.argv) < 2:
        print("Usage: python script.py <csv_file>")
        sys.exit(1)

    csv_file = sys.argv[1]
    today = datetime.utcnow().date()  # CSV timestamps are in UTC
    start_date = today - timedelta(days=6)  # Last 7 days including today

    total_points = {start_date + timedelta(days=i): 0 for i in range(7)}

    with open(csv_file, newline="") as f:
        reader = csv.DictReader(f)
        for row in reader:
            iso_str = row["created_at"].replace(" ", "T")
            try:
                dt = datetime.fromisoformat(iso_str)
            except Exception as e:
                print(f"Error parsing date '{row['created_at']}': {e}")
                continue

            row_date = dt.date()
            if start_date <= row_date <= today:
                try:
                    points = float(row["points"])
                except ValueError:
                    points = 0
                total_points[row_date] += points

    for date in sorted(total_points):
        print(f"{date}: {total_points[date]}")


if __name__ == "__main__":
    main()
</file>

<file path="app/saigo/lib/sum_practice_days.py">
import csv
import sys
from datetime import datetime, timedelta


def main():
    if len(sys.argv) < 2:
        print("Usage: python script.py <csv_file>")
        sys.exit(1)

    csv_file = sys.argv[1]
    today = datetime.utcnow().date()  # CSV dates are in UTC
    start_date = today - timedelta(days=6)  # Last 7 days including today

    counts = {start_date + timedelta(days=i): 0 for i in range(7)}

    with open(csv_file, newline="") as f:
        reader = csv.DictReader(f)
        for row in reader:
            # Replace the space with 'T' to form an ISO format string
            iso_str = row["created_at"].replace(" ", "T")
            try:
                dt = datetime.fromisoformat(iso_str)
            except Exception as e:
                print(f"Error parsing date '{row['created_at']}': {e}")
                continue

            row_date = dt.date()
            if start_date <= row_date <= today:
                counts[row_date] += 1

    for date in sorted(counts):
        print(f"{date}: {counts[date]}")


if __name__ == "__main__":
    main()
</file>

<file path="app/saigo/lib/testdb.ts">
import { config } from "dotenv";
import { createClient } from "@supabase/supabase-js";
import path from "path";

// Try multiple possible locations for the .env file
const envPaths = [
  '.env',
  '../.env',
  '../../.env',
  '../../../.env',
].map(p => path.resolve(process.cwd(), p));

for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.NEXT_PUBLIC_SUPABASE_URL) break;
}

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

export async function getUserPractices(userId: string) {
  const { data: practices, error } = await supabase
    .from('practices')
    .select('*')
    .eq('user_id', userId)
    .order('created_at', { ascending: false });

  if (error) {
    console.error('Error fetching practices:', error);
    return null;
  }

  return practices;
}

export async function getUser(userId: string) {
  const { data: user, error } = await supabase
    .from('saigo_users')
    .select('*')
    .eq('id', userId)
    .single();

  if (error) {
    console.error('Error fetching user:', error);
    return null;
  }

  return user;
}

async function main() {
  const nebs = await getUser("5160a692-ecde-42bb-b7a9-3e1bbf052011");
  console.log(nebs);
  const practices = await getUserPractices("5160a692-ecde-42bb-b7a9-3e1bbf052011");
  console.log(practices);
}

main();
</file>

<file path="app/saigo/signin/layout.tsx">
import { ReactNode } from "react";
import config from "@/config";
import { getSEOTags } from "@/libs/seo";

export const metadata = getSEOTags({
  title: `Sign-in to ${config.appName}`,
  canonicalUrlRelative: "/saigo/signin",
});

export default function Layout({ children }: { children: ReactNode }) {
  return <>{children}</>;
}
</file>

<file path="app/saigo/signin/page.tsx">
"use client";

import Link from "next/link";
import { useEffect, useState } from "react";
import { createClient } from "@/libs/supabase/client";
import { Provider } from "@supabase/supabase-js";
import toast from "react-hot-toast";
import config from "@/config";
import Image from "next/image";

export default function SaigoLogin() {
  const supabase = createClient();
  const [email, setEmail] = useState<string>("");
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const [isDisabled, setIsDisabled] = useState<boolean>(false);
  const [recaptchaLoaded, setRecaptchaLoaded] = useState(false);

  useEffect(() => {
    // Set the Saigo theme
    document.documentElement.setAttribute('data-theme', config.colors.saigoTheme);
    // setSaigoTheme(config.colors.saigoTheme);

    const script = document.createElement('script');
    script.src = `https://www.google.com/recaptcha/api.js?render=${process.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY}`;
    script.async = true;
    script.defer = true;

    script.onload = () => {
      setRecaptchaLoaded(true);
    };

    document.body.appendChild(script);

    return () => {
      document.body.removeChild(script);
      const badge = document.querySelector('.grecaptcha-logo');
      if (badge && badge.parentElement) {
        badge.parentElement.remove();
      }
    };
  }, []);

  const handleSignup = async (
    e: any,
    options: {
      type: string;
      provider?: Provider;
    }
  ) => {
    e?.preventDefault();

    if (!recaptchaLoaded) {
      toast.error("Please wait for reCAPTCHA to load");
      return;
    }

    if (!window.grecaptcha) {
      throw new Error("reCAPTCHA not loaded");
    }
    await new Promise((resolve) => window.grecaptcha.ready(resolve));
    const recaptchaToken = await window.grecaptcha.execute(
      process.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY as string,
      { action: "login" }
    );

    // Use Saigo-specific verification endpoint
    const res = await fetch("/api/auth/saigo-verify-and-signin", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ recaptchaToken }),
    });
    const data = await res.json();

    if (data.error) {
      throw new Error(data.error);
    }

    setIsLoading(true);

    try {
      const { type, provider } = options;
      const redirectURL = window.location.origin + "/api/auth/saigo-callback";

      if (type === "oauth") {
        await supabase.auth.signInWithOAuth({
          provider,
          options: {
            redirectTo: redirectURL,
          },
        });
      } else if (type === "magic_link") {
        await supabase.auth.signInWithOtp({
          email,
          options: {
            emailRedirectTo: redirectURL,
          },
        });

        toast.success("Check your emails!");
        setIsDisabled(true);
      }
    } catch (error) {
      console.error(error);
      toast.error("An error occurred during sign in");
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <main className="p-8 md:p-24" data-theme="luxury">
      <div className="text-center mb-4">
        <Link href="/" className="btn btn-ghost btn-sm">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            className="w-5 h-5"
          >
            <path
              fillRule="evenodd"
              d="M15 10a.75.75 0 01-.75.75H7.612l2.158 1.96a.75.75 0 11-1.04 1.08l-3.5-3.25a.75.75 0 010-1.08l3.5-3.25a.75.75 0 111.04 1.08L7.612 9.25h6.638A.75.75 0 0115 10z"
              clipRule="evenodd"
            />
          </svg>
          Home
        </Link>
      </div>
      <h1 className="text-3xl md:text-4xl font-extrabold tracking-tight text-center mb-12">
        Welcome, Navigator.
      </h1>

      <Image src="/images/hbi_transparent.webp" alt="HBI Logo" width={200} height={200} className="mx-auto mb-8" />

      <div className="space-y-8 max-w-xl mx-auto">
        <button
          className="btn btn-block btn-primary"
          onClick={(e) =>
            handleSignup(e, { type: "oauth", provider: "google" })
          }
          disabled={isLoading}
        >
          {isLoading ? (
            <span className="loading loading-spinner loading-xs"></span>
          ) : (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="w-6 h-6"
              viewBox="0 0 48 48"
            >
              <path
                fill="#FFC107"
                d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"
              />
              <path
                fill="#FF3D00"
                d="m6.306 14.691 6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 16.318 4 9.656 8.337 6.306 14.691z"
              />
              <path
                fill="#4CAF50"
                d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238A11.91 11.91 0 0 1 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"
              />
              <path
                fill="#1976D2"
                d="M43.611 20.083H42V20H24v8h11.303a12.04 12.04 0 0 1-4.087 5.571l.003-.002 6.19 5.238C36.971 39.205 44 34 44 24c0-1.341-.138-2.65-.389-3.917z"
              />
            </svg>
          )}
          Sign in with Google
        </button>

        <div className="divider text-xs text-base-content/50 font-medium">
          OR
        </div>

        <form
          className="form-control w-full space-y-4"
          onSubmit={(e) => handleSignup(e, { type: "magic_link" })}
        >
          <input
            required
            type="email"
            value={email}
            autoComplete="email"
            placeholder="your@email.com"
            className="input input-bordered w-full placeholder:opacity-60"
            onChange={(e) => setEmail(e.target.value)}
          />

          <button
            className="btn btn-secondary btn-block"
            disabled={isLoading || isDisabled}
            type="submit"
          >
            {isLoading && (
              <span className="loading loading-spinner loading-xs"></span>
            )}
            Send Magic Link
          </button>
        </form>
      </div>
    </main>
  );
}
</file>

<file path="app/saigo/username/layout.tsx">
import { ReactNode } from "react";
import { guardUsernamePage } from "../lib/guard";

export default async function Layout({ children }: { children: ReactNode }) {
  await guardUsernamePage();
  return <>{children}</>;
}
</file>

<file path="app/saigo/username/page.tsx">
"use client";

import Image from "next/image";
import { useState, useEffect } from "react";
import { useRouter } from 'next/navigation';
import config from "@/config";

export default function UsernamePage() {
  const router = useRouter();
  const [username, setUsername] = useState<string | null>(null);
  const [isGenerating, setIsGenerating] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    document.documentElement.setAttribute('data-theme', config.colors.saigoTheme);
  }, []);

  const handleGenerateUsername = async () => {
    setIsGenerating(true);
    setError(null);

    try {
      const response = await fetch('/api/saigo/username', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
      });

      if (!response.ok) {
        throw new Error('Failed to generate username');
      }

      const data = await response.json();
      setUsername(data.created);
      setTimeout(() => router.push('/saigo/leaderboard'), 3000);
    } catch (err) {
      setError("Failed to generate username. Please try again.");
      console.error("Username generation error:", err);
    } finally {
      setIsGenerating(false);
    }
  };

  return (
    <div className="container flex flex-col items-center mx-auto px-4 py-8">
      <Image src="/images/hbi_transparent.webp" alt="HBI Logo" width={200} height={200} />
      <h1 className="text-2xl font-bold mb-4 mt-4">Generate Your Unique Username</h1>

      <div className="flex flex-col items-center gap-4 mt-4">
        <button
          className="btn btn-outline btn-white"
          onClick={handleGenerateUsername}
          disabled={isGenerating}
        >
          {isGenerating ? "Generating..." : "Generate Username"}
        </button>

        {username && (
          <div className="alert alert-success">
            <p>Your generated username: <strong>{username}</strong></p>
          </div>
        )}

        {error && (
          <div className="alert alert-error">
            <p>{error}</p>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="app/saigo/layout.tsx">
import { ReactNode } from "react";
import { redirect } from "next/navigation";
import { createClient } from "@/libs/supabase/server";
import config from "@/config";
import { headers } from "next/headers";

// Mark as server component explicitly
export const dynamic = 'force-dynamic';
export const revalidate = 0;

export default async function SaigoLayoutPrivate({
  children,
}: {
  children: ReactNode;
}) {
  // const supabase = createClient();
  // const currentPath = headers().get("x-pathname") || "";

  // // Step 1: Get user session
  // const {
  //   data: { user },
  //   error: authError,
  // } = await supabase.auth.getUser();

  // if (authError || !user) {
  //   return redirect(config.auth.loginUrl);
  // }

  // // Step 2: Get user data to verify they exist
  // const { data: saigoUser, error: userError } = await supabase
  //   .from("saigo_users")
  //   .select("id")
  //   .eq("email", user.email)
  //   .maybeSingle();

  // if (userError || !saigoUser) {
  //   return redirect(config.auth.loginUrl);
  // }

  return <>{children}</>;
}
</file>

<file path="app/signin/layout.tsx">
import { ReactNode } from "react";
import config from "@/config";
import { getSEOTags } from "@/libs/seo";

export const metadata = getSEOTags({
  title: `Sign-in to ${config.appName}`,
  canonicalUrlRelative: "/auth/signin",
});

export default function Layout({ children }: { children: ReactNode }) {
  return <>{children}</>;
}
</file>

<file path="app/signin/page.tsx">
"use client";

import Link from "next/link";
import { useEffect, useState } from "react";
import { createClient } from "@/libs/supabase/client";
import { Provider } from "@supabase/supabase-js";
import toast from "react-hot-toast";
import config from "@/config";
import Script from "next/script";

// This a login/singup page for Supabase Auth.
// Successfull login redirects to /api/auth/callback where the Code Exchange is processed (see app/api/auth/callback/route.js).
export default function Login() {
  const supabase = createClient();
  const [email, setEmail] = useState<string>("");
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const [isDisabled, setIsDisabled] = useState<boolean>(false);
  const [recaptchaLoaded, setRecaptchaLoaded] = useState(false);

  useEffect(() => {
    // Load reCAPTCHA script
    const script = document.createElement('script');
    script.src = `https://www.google.com/recaptcha/api.js?render=${process.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY}`;
    script.async = true;
    script.defer = true;

    script.onload = () => {
      setRecaptchaLoaded(true);
    };

    document.body.appendChild(script);

    return () => {
      document.body.removeChild(script);
      const badge = document.querySelector('.grecaptcha-logo');
      if (badge && badge.parentElement) {
        badge.parentElement.remove();
      }
    };
  }, []);

  const handleSignup = async (
    e: any,
    options: {
      type: string;
      provider?: Provider;
    }
  ) => {
    e?.preventDefault();

    // Wait for recaptcha to be loaded
    if (!recaptchaLoaded) {
      toast.error("Please wait for reCAPTCHA to load");
      return;
    }

    if (!window.grecaptcha) {
      throw new Error("reCAPTCHA not loaded");
    }
    await new Promise((resolve) => window.grecaptcha.ready(resolve));
    const recaptchaToken = await window.grecaptcha.execute(
      process.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY as string,
      { action: "login" }
    );

    // Verify captcha first
    const res = await fetch("/api/auth/verify-and-signin", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ recaptchaToken }),
    });
    const data = await res.json();

    if (data.error) {
      throw new Error(data.error);
    }

    setIsLoading(true);

    try {
      const { type, provider } = options;
      const redirectURL = window.location.origin + "/api/auth/callback";

      if (type === "oauth") {
        await supabase.auth.signInWithOAuth({
          provider,
          options: {
            redirectTo: 'http://localhost:3000',
          },
        });
      } else if (type === "magic_link") {
        await supabase.auth.signInWithOtp({
          email,
          options: {
            emailRedirectTo: redirectURL,
          },
        });

        toast.success("Check your emails!");

        setIsDisabled(true);
      }
    } catch (error) {
      console.log(error);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <main className="p-8 md:p-24" data-theme={config.colors.theme}>
      <div className="text-center mb-4">
        <Link href="/" className="btn btn-ghost btn-sm">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            className="w-5 h-5"
          >
            <path
              fillRule="evenodd"
              d="M15 10a.75.75 0 01-.75.75H7.612l2.158 1.96a.75.75 0 11-1.04 1.08l-3.5-3.25a.75.75 0 010-1.08l3.5-3.25a.75.75 0 111.04 1.08L7.612 9.25h6.638A.75.75 0 0115 10z"
              clipRule="evenodd"
            />
          </svg>
          Home
        </Link>
      </div>
      <h1 className="text-3xl md:text-4xl font-extrabold tracking-tight text-center mb-12">
        Sign-in to {config.appName}{" "}
      </h1>

      <div className="space-y-8 max-w-xl mx-auto">
        <button
          className="btn btn-block"
          onClick={(e) =>
            handleSignup(e, { type: "oauth", provider: "google" })
          }
          disabled={isLoading}
        >
          {isLoading ? (
            <span className="loading loading-spinner loading-xs"></span>
          ) : (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="w-6 h-6"
              viewBox="0 0 48 48"
            >
              <path
                fill="#FFC107"
                d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"
              />
              <path
                fill="#FF3D00"
                d="m6.306 14.691 6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 16.318 4 9.656 8.337 6.306 14.691z"
              />
              <path
                fill="#4CAF50"
                d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238A11.91 11.91 0 0 1 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"
              />
              <path
                fill="#1976D2"
                d="M43.611 20.083H42V20H24v8h11.303a12.04 12.04 0 0 1-4.087 5.571l.003-.002 6.19 5.238C36.971 39.205 44 34 44 24c0-1.341-.138-2.65-.389-3.917z"
              />
            </svg>
          )}
          Sign-up with Google
        </button>

        <div className="divider text-xs text-base-content/50 font-medium">
          OR
        </div>

        <form
          className="form-control w-full space-y-4"
          onSubmit={(e) => handleSignup(e, { type: "magic_link" })}
        >
          <input
            required
            type="email"
            value={email}
            autoComplete="email"
            placeholder="tom@cruise.com"
            className="input input-bordered w-full placeholder:opacity-60"
            onChange={(e) => setEmail(e.target.value)}
          />

          <button
            className="btn btn-primary btn-block"
            disabled={isLoading || isDisabled}
            type="submit"
          >
            {isLoading && (
              <span className="loading loading-spinner loading-xs"></span>
            )}
            Send Magic Link
          </button>
        </form>
      </div>
    </main>
  );
}
</file>

<file path="app/tos/page.tsx">
import Link from "next/link";
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

// CHATGPT PROMPT TO GENERATE YOUR TERMS & SERVICES ‚Äî replace with your own data üëá

// 1. Go to https://chat.openai.com/
// 2. Copy paste bellow
// 3. Replace the data with your own (if needed)
// 4. Paste the answer from ChatGPT directly in the <pre> tag below

// You are an excellent lawyer.

// I need your help to write a simple Terms & Services for my website. Here is some context:
// - Website: https://shipfa.st
// - Name: ShipFast
// - Contact information: marc@shipfa.st
// - Description: A JavaScript code boilerplate to help entrepreneurs launch their startups faster
// - Ownership: when buying a package, users can download code to create apps. They own the code but they do not have the right to resell it. They can ask for a full refund within 7 day after the purchase.
// - User data collected: name, email and payment information
// - Non-personal data collection: web cookies
// - Link to privacy-policy: https://shipfa.st/privacy-policy
// - Governing Law: France
// - Updates to the Terms: users will be updated by email

// Please write a simple Terms & Services for my site. Add the current date. Do not add or explain your reasoning. Answer:

export const metadata = getSEOTags({
  title: `Terms and Conditions | ${config.appName}`,
  canonicalUrlRelative: "/tos",
});

const TOS = () => {
  return (
    <main className="max-w-xl mx-auto">
      <div className="p-5">
        <Link href="/" className="btn btn-ghost">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            className="w-5 h-5"
          >
            <path
              fillRule="evenodd"
              d="M15 10a.75.75 0 01-.75.75H7.612l2.158 1.96a.75.75 0 11-1.04 1.08l-3.5-3.25a.75.75 0 010-1.08l3.5-3.25a.75.75 0 111.04 1.08L7.612 9.25h6.638A.75.75 0 0115 10z"
              clipRule="evenodd"
            />
          </svg>
          Back
        </Link>
        <h1 className="text-3xl font-extrabold pb-6">
          Terms and Conditions for {config.appName}
        </h1>

        <pre
          className="leading-relaxed whitespace-pre-wrap"
          style={{ fontFamily: "sans-serif" }}
        >
          {`
Effective Date: February 18, 2025

1. Introduction

oceanheart.ai ("we," "our," or "us") values your privacy. These Terms of Service explain how we collect, use, and protect your information when you visit our website (https://www.oceanheart.ai) and use our services.

2. Information We Collect

Personal Data: We collect your name, email, and payment information for order processing. Within the app, users are required to store client details under pseudonyms and remove any personally identifiable data (PID), including dates of birth and addresses.

It is the responsibility of each user to ensure they gain appropriate levels of consent from their clients before storing their data. Clients must understand that their any and all of their data will be stored on our servers and regularly used for training our AI models, or sent to third parties for analysis, extraction and transformation.

Non-Personal Data: We use cookies to improve website functionality and user experience.

3. How We Use Your Data

We collect and use your data solely for order processing and to provide our services effectively.

4. Data Sharing

We do not share your personal data with any third parties.

5. Updates to Terms of Service

We may update these Terms of Service from time to time. Users will be notified of any changes via email.

6. Contact Us

If you have any questions about these Terms of Service, please contact us at kai@oceanheart.ai.

By using our services, you agree to the terms of these Terms of Service.
`}
        </pre>
      </div>
    </main>
  );
};

export default TOS;
</file>

<file path="app/error.tsx">
"use client";

import Link from "next/link";
import ButtonSupport from "@/components/ButtonSupport";

// A simple error boundary to show a nice error page if something goes wrong (Error Boundary)
// Users can contanct support, go to the main page or try to reset/refresh to fix the error
export default function Error({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  return (
    <>
      <div className="h-screen w-full flex flex-col justify-center items-center text-center gap-6 p-6">
        <div className="p-6 bg-white rounded-xl">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            data-name="Layer 1"
            className="w-36 h-36 md:w-64 md:h-64"
            viewBox="0 0 509.04617 507.58297"
          >
            <path
              fill="#f2f2f2"
              d="M504.17 454.213c-6.3 13.08-17.91 22.81-30.08 30.72a189.914 189.914 0 0 1-42.66 20.65c-2.06.71-4.14 1.37-6.23 2h-84.51c-.59-.64-1.15-1.31-1.68-2-5.66-7.25-8.72-16.54-7.61-25.64 1.43-11.69 10.31-22.43 21.81-24.91 11.51-2.49 24.63 4.38 28.13 15.63 1.92-21.68 4.14-44.26 15.66-62.72 10.44-16.71 28.51-28.67 48.09-30.81a60.558 60.558 0 0 1 33.48 6.13c.95.48 1.89.98 2.81 1.5a56.015 56.015 0 0 1 16.14 13.77c12.21 15.46 15.2 37.93 6.65 55.68Z"
            />
            <path
              fill="#fff"
              d="M480.76 386.133a317.08 317.08 0 0 0-90.56 119.45c-.29.66-.58 1.33-.86 2h-3.98c.28-.67.56-1.34.85-2 3.85-9 8.1-17.84 12.77-26.45a321.861 321.861 0 0 1 34.91-51.66 316.97 316.97 0 0 1 44.26-43.95 1.93 1.93 0 0 1 .42-.26 2.032 2.032 0 0 1 2.81 1.5 1.478 1.478 0 0 1-.62 1.37Z"
            />
            <path
              fill="#ffb8b8"
              d="M167.214 293.587a9.497 9.497 0 0 0-1.203-14.513l-4.796-31.62-19.702 6.201 10.793 28.21a9.549 9.549 0 0 0 14.908 11.722Z"
            />
            <path
              className="fill-primary"
              d="m146.919 278.711-12.153-56.756a32.5 32.5 0 0 1 9.281-30.393c15.556-14.99 35.55-33.885 42.455-38.772a35.606 35.606 0 0 1 22.277-6.576l.166.018 10.454 9.88-22.773 37.489-34.571 21.66 3.847 55.63Z"
            />
            <rect
              width={59}
              height={8}
              x={134.48}
              y={201.583}
              fill="#ccc"
              rx={4}
            />
            <rect
              width={59}
              height={8}
              x={134.48}
              y={288.583}
              fill="#ccc"
              rx={4}
            />
            <path
              fill="#ccc"
              d="M164.48 506.583a2 2 0 0 1-1.992-1.823l-25.496-299a2 2 0 1 1 3.984-.354l23.475 276.252L187.26 205.41a2 2 0 1 1 3.985.344l-24.771 299a2 2 0 0 1-1.99 1.828Z"
            />
            <circle cx={221.715} cy={108.007} r={26.239} fill="#ffb8b8" />
            <path
              fill="#ffb8b8"
              d="m143.516 494.591-12.478-3.977 9.402-50.025 18.418 5.87-15.342 48.132z"
            />
            <path
              fill="#2f2e41"
              d="m142.822 505.66-40.172-12.805.332-1.043a15.829 15.829 0 0 1 19.864-10.262l25.109 8.004Z"
            />
            <path
              fill="#ffb8b8"
              d="M234.305 494.332h-13.097l-6.233-50.518h19.33v50.518z"
            />
            <path
              fill="#2f2e41"
              d="M196.45 505.994h40.162V491.09h-25.354a14.826 14.826 0 0 0-14.809 14.81ZM233.922 477.938l-4.42-.66c-13.407-1.997-14.21-2.117-16.339-3.051-1.087-.478-1.163-7.693-.51-48.256.478-29.774 1.075-66.83-.083-86.723a3.5 3.5 0 0 0-6.703-1.18c-9.976 23.037-26.712 74.59-37.787 108.704-3.852 11.866-6.895 21.239-8.82 26.857a4.524 4.524 0 0 1-5.354 2.898c-9.114-2.278-8.504-3.247-21.485-6.604a4.489 4.489 0 0 1-3.282-5.282c2.348-11.072 45.314-190.6 48.603-207.666a4.502 4.502 0 0 1 5.305-3.571c9.674 1.949 15.56 4.017 25.12 6.016 10.315 2.158 20.982 4.39 31.386 6.472a4.463 4.463 0 0 1 2.619 1.605c2.574 3.252 6.392 5.077 10.434 7.01 2.724 1.302-3.45 1.185-1.077 3.063 9.61 7.608-4.21 162.088-12.56 196.978a4.515 4.515 0 0 1-5.047 3.39ZM232.898 130.967c-1.532-6.5 6.212-20.487 4.68-26.987-1.037-4.402-11.388-1.41-13.804-5.233s-6.461-6.921-10.984-6.972c-5.198-.058-10.313 3.798-15.237 2.131-4.978-1.685-6.57-8.503-4.368-13.276s6.942-7.814 11.627-10.197c7.978-4.059 17.266-7.023 25.805-4.337 5.161 1.623 9.477 5.14 13.653 8.58 3.807 3.136 7.678 6.342 10.339 10.495 5.213 8.135 4.899 19.095.444 27.669s-12.574 14.865-21.519 18.517"
            />
            <path
              className="fill-primary"
              d="M168.47 282.233c2.832-4.73 7.132-26.897 12.434-64.103 3.61-25.4 6.755-51.206 8.316-64.389a6.339 6.339 0 0 1 3.56-5.001q1.518-.734 3.02-1.388c12.922-5.621 26.019-7.484 38.923-5.536a70.619 70.619 0 0 1 34.92 15.91l.117.112.03.158c.056.293 5.476 29.498-5.625 49.23-10.948 19.468-11.076 71.026-11.076 71.544v.663l-.637-.182c-17.032-4.866-82.825 3.648-83.488 3.735l-1.025.133Z"
            />
            <rect
              width={59}
              height={8}
              x={212.48}
              y={214.583}
              fill="#ccc"
              rx={4}
            />
            <rect
              width={59}
              height={8}
              x={212.48}
              y={301.583}
              fill="#ccc"
              rx={4}
            />
            <path
              fill="#ccc"
              d="M242.48 507.583a2 2 0 0 1-1.992-1.823l-25.496-287a2 2 0 1 1 3.984-.354l23.475 264.252L265.26 218.41a2 2 0 0 1 3.985.344l-24.771 287a2 2 0 0 1-1.99 1.828Z"
            />
            <path
              fill="#ffb8b8"
              d="M226.013 302.85a9.497 9.497 0 0 1 8.896-11.53l21.208-23.938 13.17 15.91-24.39 17.818a9.549 9.549 0 0 1-18.884 1.74Z"
            />
            <path
              className="fill-primary"
              d="m238.36 286.189 33.458-44.61-17.253-36.97 1.253-43.845 14.144-2.613.15.075a35.606 35.606 0 0 1 15.128 17.624c3.142 7.856 9.659 34.581 14.573 55.619a32.5 32.5 0 0 1-8.723 30.557l-41.043 41.043Z"
            />
            <path
              fill="#ccc"
              d="m98.11 495.178 45.773 11.02a3.922 3.922 0 0 0 4.555-2.125l39.32-104.542a3.221 3.221 0 0 0 .003-2.546 3.644 3.644 0 0 0-2.094-1.961l-34.415-13.143a4.139 4.139 0 0 0-3.374.187 3.511 3.511 0 0 0-1.84 2.252l-.002.005-24.29 92.138-.36.023c-.14.009-14.065.956-20.327 8.472a13.291 13.291 0 0 0-2.949 10.22Z"
            />
            <path
              fill="#3f3d56"
              d="M496 506.583a.997.997 0 0 1-1 1H1a1 1 0 0 1 0-2h494a.997.997 0 0 1 1 1Z"
            />
            <path
              fill="#b3b3b3"
              d="m131.05 438.563.21-1.989 41.733 4.42-.211 1.989zM126.801 454.875l.82-1.824 33.583 15.11-.82 1.824zM177.384 426.985l-39.583-13.11.821-1.824 39.583 13.11-.821 1.824zM181.384 417.985l-39.583-19.11.821-1.824 39.583 19.11-.821 1.824zM122.832 470.232l1.299-1.521 28.54 24.38-1.3 1.52zM114.207 477.62l1.821-.827 11.46 25.27-1.822.825z"
            />
            <path
              fill="#f2f2f2"
              d="M384.34 477.987V22.183c0-6.155.117-12.323 0-18.477-.005-.27 0-.539 0-.808 0-3.86-6-3.867-6 0v455.804c0 6.155-.117 12.323 0 18.477.005.27 0 .539 0 .808 0 3.86 6 3.867 6 0Z"
            />
            <path
              fill="#f2f2f2"
              d="M417.523 130.291h-72a6.508 6.508 0 0 1-6.5-6.5v-87.5a6.508 6.508 0 0 1 6.5-6.5h72a6.508 6.508 0 0 1 6.5 6.5v87.5a6.508 6.508 0 0 1-6.5 6.5Z"
            />
          </svg>
        </div>

        <p className="font-medium md:text-xl md:font-semibold">
          Something went wrong ü•≤
        </p>

        <p className="text-red-500">{error?.message}</p>

        <div className="flex flex-wrap gap-4 justify-center">
          <button className="btn btn-sm" onClick={reset}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-5 h-5"
            >
              <path
                fillRule="evenodd"
                d="M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z"
                clipRule="evenodd"
              />
            </svg>
            Refresh
          </button>
          <ButtonSupport />
          <Link href="/" className="btn btn-sm">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-5 h-5"
            >
              <path
                fillRule="evenodd"
                d="M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z"
                clipRule="evenodd"
              />
            </svg>
            Home
          </Link>
        </div>
      </div>
    </>
  );
}
</file>

<file path="app/not-found.tsx">
import Link from "next/link";
import ButtonSupport from "@/components/ButtonSupport";

// Simple 404 page with a button to go home and a button to contact support
// Show a cute SVG with your primary color
export default function Custom404() {
  return (
    <section className="relative bg-base-100 text-base-content h-screen w-full flex flex-col justify-center gap-8 items-center p-10">
      <div className="p-6 bg-white rounded-xl">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          className="w-56 h-56"
          viewBox="0 0 860.13137 571.14799"
        >
          <path
            fill="#f2f2f2"
            d="M435.735 160.527c-7.669-12.684-16.757-26.228-30.99-30.37-16.481-4.796-33.412 4.732-47.774 14.135a1392.157 1392.157 0 0 0-123.893 91.283l.043.493 92.451-6.376c22.265-1.535 45.296-3.283 64.972-13.816 7.467-3.996 14.745-9.335 23.206-9.707 10.511-.463 19.677 6.879 26.88 14.549 42.607 45.37 54.937 114.754 102.738 154.616a1516.995 1516.995 0 0 0-107.633-214.807Z"
          />
          <path
            fill="#e4e4e4"
            d="M697.636 545.355c-4.711-5.95-6.637-7.343-11.284-13.347q-56.765-73.417-106.708-151.793-33.924-53.23-64.483-108.504-14.549-26.278-28.3-52.969-10.67-20.695-20.864-41.638a841.984 841.984 0 0 1-5.711-12.009c-4.428-9.442-8.774-18.93-13.44-28.244-5.317-10.616-11.789-21.745-21.552-28.877a29.405 29.405 0 0 0-15.319-5.895c-7.948-.513-15.282 2.769-22.176 6.353-50.438 26.301-97.659 59.276-140.37 96.798A730.778 730.778 0 0 0 133.39 331.82c-1.009 1.44-3.393.064-2.375-1.384q6.01-8.498 12.257-16.813a734.817 734.817 0 0 1 187.6-174.986q18.248-11.825 37.182-22.542c6.362-3.603 12.752-7.16 19.251-10.497 6.372-3.272 13.137-6.215 20.416-6.325 24.77-.385 37.595 27.667 46.405 46.542q4.153 8.911 8.406 17.767 16.075 33.62 33.388 66.628 10.684 20.379 21.837 40.52 34.707 62.717 73.778 122.896c34.506 53.143 68.737 100.089 108.046 149.785 1.082 1.375-.852 3.337-1.944 1.943ZM244.982 191.378c-1.44-1.604-2.87-3.209-4.318-4.813-11.422-12.632-23.679-25.118-39.364-32.36a57.11 57.11 0 0 0-23.927-5.547c-8.562.028-16.932 2.274-24.843 5.418-3.74 1.494-7.399 3.19-11.001 4.996-4.116 2.072-8.16 4.281-12.183 6.51q-11.332 6.27-22.369 13.09-21.96 13.572-42.545 29.216-10.671 8.113-20.902 16.758-9.516 8.03-18.646 16.492c-1.302 1.201-3.245-.742-1.944-1.943a441.255 441.255 0 0 1 4.85-4.446q6.875-6.216 13.971-12.193 12.94-10.918 26.549-20.993 21.162-15.676 43.782-29.226 11.304-6.765 22.919-12.962a198.735 198.735 0 0 1 7.095-3.621 113.116 113.116 0 0 1 16.868-6.867 60.006 60.006 0 0 1 25.476-2.502 66.327 66.327 0 0 1 23.505 8.131c15.401 8.608 27.346 21.92 38.97 34.91 1.174 1.32-.76 3.272-1.943 1.952Z"
          />
          <path
            fill="#e4e4e4"
            d="m560.542 322.285 36.905-13.498 18.323-6.702c5.968-2.183 11.921-4.667 18.09-6.23a28.539 28.539 0 0 1 16.374.208 37.738 37.738 0 0 1 12.77 7.917 103.64 103.64 0 0 1 10.475 11.186c3.99 4.795 7.92 9.64 11.868 14.467q24.442 29.891 48.563 60.042 24.121 30.15 47.92 60.556 23.857 30.48 47.386 61.216 2.882 3.765 5.76 7.534c1.059 1.388 3.449.02 2.374-1.388q-23.702-31.045-47.735-61.835-24.092-30.864-48.516-61.466-24.425-30.601-49.179-60.937-6.167-7.558-12.354-15.099c-3.48-4.24-6.92-8.527-10.737-12.474-7.005-7.245-15.757-13.648-26.234-13.822-6.16-.102-12.121 1.853-17.844 3.923-6.17 2.232-12.325 4.506-18.486 6.76l-37.163 13.592-9.29 3.398c-1.65.603-.937 3.262.73 2.652Z"
          />
          <path
            fill="#f2f2f2"
            d="M196.443 170.1c-18.754-9.639-42.771-7.75-60.005 4.291a855.847 855.847 0 0 1 97.37 22.726c-13.282-7.784-23.672-19.98-37.365-27.017ZM136.253 174.358l-3.61 2.935a53.444 53.444 0 0 1 3.795-2.902c-.062-.01-.123-.022-.185-.033ZM661.615 322.42c-3.633-4.422-7.56-9.052-12.994-10.849l-5.073.2a575.436 575.436 0 0 0 153.267 175.221l-135.2-164.572ZM346.15 285.94a37.481 37.481 0 0 0 14.93 20.96c2.82 1.92 6.157 3.761 7.122 7.034a8.379 8.379 0 0 1-.873 6.15 24.884 24.884 0 0 1-3.862 5.041l-.136.512c-6.999-4.147-13.657-9.393-17.523-16.551s-4.405-16.539.342-23.146M579.15 488.94a37.481 37.481 0 0 0 14.93 20.96c2.82 1.92 6.157 3.761 7.122 7.034a8.379 8.379 0 0 1-.873 6.15 24.884 24.884 0 0 1-3.862 5.041l-.136.512c-6.999-4.147-13.657-9.393-17.523-16.551s-4.405-16.539.342-23.146M114.15 474.94a37.481 37.481 0 0 0 14.93 20.96c2.82 1.92 6.157 3.761 7.122 7.034a8.379 8.379 0 0 1-.873 6.15 24.884 24.884 0 0 1-3.862 5.041l-.136.512c-6.999-4.147-13.657-9.393-17.523-16.551s-4.405-16.539.342-23.146"
          />
          <circle cx={649.249} cy={51} r={51} className="fill-primary" />
          <path
            fill="#f0f0f0"
            d="M741.284 11.87c-24.717-3.34-52.935 10.02-59.341 34.124a21.597 21.597 0 0 0-41.094 2.109l2.83 2.026a372.275 372.275 0 0 0 160.659-.726C787.145 31.334 766 15.21 741.284 11.87ZM635.284 79.87c-24.717-3.34-52.935 10.02-59.341 34.124a21.597 21.597 0 0 0-41.094 2.109l2.83 2.026a372.275 372.275 0 0 0 160.659-.726C681.145 99.334 660 83.21 635.284 79.87Z"
          />
          <path
            fill="#ccc"
            d="M851.011 92.728a.982.982 0 0 1-.302-.047C586.303 9.063 353.265 19.998 204.33 43.895a1294.017 1294.017 0 0 0-60.403 11.161 1196.246 1196.246 0 0 0-15.597 3.378 1023.104 1023.104 0 0 0-18.532 4.306q-3.873.917-7.595 1.849a972.21 972.21 0 0 0-11.66 2.957 930.173 930.173 0 0 0-13.797 3.671.442.442 0 0 1-.051.015v.001a926.363 926.363 0 0 0-15.323 4.325c-2.698.78-5.304 1.548-7.8 2.307-.278.077-.525.151-.776.227l-.536.164c-.31.094-.617.187-.924.275l-.02.006h.001l-.811.253c-.968.293-1.912.579-2.841.864C23.119 87.22 9.626 92.604 9.493 92.656a1 1 0 1 1-.744-1.856c.134-.053 13.693-5.463 38.327-13.058.932-.286 1.88-.572 2.85-.866l.754-.235c.026-.01.051-.017.078-.025.305-.087.61-.18.92-.273l.536-.164c.268-.08.532-.16.802-.235a593.8 593.8 0 0 1 7.797-2.307 932.235 932.235 0 0 1 15.334-4.328c.017-.006.033-.01.05-.014v-.001a941.379 941.379 0 0 1 13.844-3.685 993.766 993.766 0 0 1 11.68-2.962q3.738-.93 7.61-1.852a1026.011 1026.011 0 0 1 18.563-4.313c5.299-1.183 10.555-2.322 15.622-3.383a1295.424 1295.424 0 0 1 60.497-11.178c149.149-23.932 382.52-34.884 647.299 48.854a1 1 0 0 1-.3 1.953Z"
          />
          <path
            fill="#3f3d56"
            d="M262.989 419.84a6.73 6.73 0 0 0-1.7-2.67 6.43 6.43 0 0 0-.92-.71c-2.61-1.74-6.51-2.13-8.99 0a5.81 5.81 0 0 0-.69.71q-1.11 1.365-2.28 2.67a88.226 88.226 0 0 1-3.96 4.24c-.39.38-.78.77-1.18 1.15-.23.23-.46.45-.69.67-.88.84-1.78 1.65-2.69 2.45-.48.43-.96.85-1.45 1.26-.73.61-1.46 1.22-2.2 1.81-.07.05-.14.1-.21.16-.02.01-.03.03-.05.04-.01 0-.02 0-.03.02a.179.179 0 0 0-.07.05c-.22.15-.37.25-.48.34.04-.02.08-.05.12-.07-.18.14-.37.28-.55.42a92.853 92.853 0 0 1-5.37 3.69 99.21 99.21 0 0 1-14.22 7.55c-.33.13-.67.27-1.01.4a85.97 85.97 0 0 1-40.85 6.02q-2.13-.165-4.26-.45c-1.64-.24-3.27-.53-4.89-.86a97.932 97.932 0 0 1-18.02-5.44 118.652 118.652 0 0 1-20.66-12.12c-1-.71-2.01-1.42-3.02-2.11 1.15-2.82 2.28-5.64 3.38-8.48.55-1.37 1.08-2.74 1.6-4.12 4.09-10.63 7.93-21.36 11.61-32.13q5.58-16.365 10.53-32.92.51-1.68.99-3.36 2.595-8.745 4.98-17.53c.15-.57.31-1.13.45-1.7q.69-2.52 1.35-5.04c1-3.79-1.26-8.32-5.24-9.23a7.634 7.634 0 0 0-9.22 5.24c-.43 1.62-.86 3.23-1.3 4.85q-3.165 11.745-6.66 23.41l-1.02 3.36q-7.71 25.41-16.93 50.31-1.11 3.015-2.25 6.01c-.37.98-.74 1.96-1.12 2.94-.73 1.93-1.48 3.86-2.23 5.79-.43 1.13-.87 2.26-1.31 3.38-.29.71-.57 1.42-.85 2.12a41.81 41.81 0 0 0-8.81-2.12l-.48-.06a27.397 27.397 0 0 0-7.01.06 23.914 23.914 0 0 0-17.24 10.66c-4.77 7.51-4.71 18.25 1.98 24.63 6.89 6.57 17.32 6.52 25.43 2.41a28.351 28.351 0 0 0 10.52-9.86 50.57 50.57 0 0 0 2.74-4.65c.21.14.42.28.63.43.8.56 1.6 1.13 2.39 1.69a111.738 111.738 0 0 0 14.51 8.91 108.359 108.359 0 0 0 34.62 10.47c.27.03.53.07.8.1 1.33.17 2.67.3 4.01.41a103.782 103.782 0 0 0 55.58-11.36q2.175-1.125 4.31-2.36 3.315-1.92 6.48-4.08c1.15-.78 2.27-1.57 3.38-2.4a101.042 101.042 0 0 0 13.51-11.95q2.355-2.475 4.51-5.11a8.061 8.061 0 0 0 2.2-5.3 7.564 7.564 0 0 0-.5-2.64Zm-165.59 23.82c.21-.15.42-.31.62-.47-.06.15-.35.32-.62.47Zm3.21-3.23c-.23.26-.44.52-.67.78a23.366 23.366 0 0 1-2.25 2.2c-.11.1-.23.2-.35.29a.01.01 0 0 0-.01.01 3.804 3.804 0 0 0-.42.22q-.645.39-1.32.72a17.005 17.005 0 0 1-2.71.75 16.8 16.8 0 0 1-2.13.02h-.02a14.823 14.823 0 0 1-1.45-.4c-.24-.12-.47-.26-.7-.4-.09-.08-.17-.16-.22-.21a2.44 2.44 0 0 1-.27-.29.01.01 0 0 0-.01-.01c-.11-.2-.23-.4-.34-.6a.031.031 0 0 1-.01-.02c-.08-.25-.15-.51-.21-.77a12.51 12.51 0 0 1 .01-1.37 13.467 13.467 0 0 1 .54-1.88 11.068 11.068 0 0 1 .69-1.26c.02-.04.12-.2.23-.38.01-.01.01-.01.01-.02.15-.17.3-.35.46-.51.27-.3.56-.56.85-.83a18.022 18.022 0 0 1 1.75-1.01 19.48 19.48 0 0 1 2.93-.79 24.99 24.99 0 0 1 4.41.04 30.301 30.301 0 0 1 4.1 1.01 36.945 36.945 0 0 1-2.77 4.54c-.04.06-.08.12-.12.17Zm-11.12-3.29a2.18 2.18 0 0 1-.31.39 1.409 1.409 0 0 1 .31-.39Z"
          />
          <path
            fill="#3f3d56"
            d="m232.929 317.71-.27 9.42q-.285 10.455-.59 20.92-.315 11.775-.66 23.54-.165 6.075-.34 12.15-.465 16.365-.92 32.72c-.03 1.13-.07 2.25-.1 3.38l-.45 16.23q-.255 8.805-.5 17.61-.18 6.6-.37 13.21l-2.7 95.79a7.648 7.648 0 0 1-7.5 7.5 7.561 7.561 0 0 1-7.5-7.5q.75-26.94 1.52-53.88.675-24.36 1.37-48.72l.45-16.06q.345-12.09.68-24.18c.03-1.13.07-2.25.1-3.38.02-.99.05-1.97.08-2.96l1.32-46.96q.27-9.24.52-18.49l.6-21.08c.09-3.09.17-6.17.26-9.26a7.648 7.648 0 0 1 7.5-7.5 7.561 7.561 0 0 1 7.5 7.5ZM644.357 319.791a893.238 893.238 0 0 1-28.161 87.941c-3.007 7.947-6.083 15.877-9.372 23.712l.756-1.791a54.583 54.583 0 0 1-5.59 10.612q-.229.32-.466.636 1.166-1.49.443-.589c-.254.3-.505.602-.768.895a23.664 23.664 0 0 1-2.249 2.204q-.301.257-.612.504l.938-.73c-.109.258-.873.598-1.11.744a18.254 18.254 0 0 1-2.405 1.218l1.791-.756a19.086 19.086 0 0 1-4.23 1.16l1.993-.267a17.02 17.02 0 0 1-4.298.046l1.994.268a14.002 14.002 0 0 1-3.405-.917l1.791.756a12.012 12.012 0 0 1-1.678-.896c-.272-.177-1.106-.809-.015.024 1.133.866.145.075-.088-.155-.194-.192-.37-.4-.56-.595-.882-.905.997 1.556.397.498a18.182 18.182 0 0 1-.878-1.637l.756 1.792a11.925 11.925 0 0 1-.728-2.651l.268 1.993a13.651 13.651 0 0 1-.003-3.404l-.268 1.993a15.964 15.964 0 0 1 .995-3.68l-.756 1.792a16.73 16.73 0 0 1 1.178-2.299 6.73 6.73 0 0 1 .728-1.071c.05.016-1.268 1.513-.57.757.184-.198.355-.406.54-.602.296-.314.613-.6.925-.898 1.045-.994-1.461.966-.256.18a19.049 19.049 0 0 1 2.75-1.5l-1.792.756a20.311 20.311 0 0 1 4.995-1.34l-1.994.268a25.628 25.628 0 0 1 6.46.076l-1.993-.267a33.21 33.21 0 0 1 7.892 2.22l-1.792-.757c5.39 2.314 10.163 5.75 14.928 9.118a111.95 111.95 0 0 0 14.506 8.907 108.388 108.388 0 0 0 34.622 10.474 103.933 103.933 0 0 0 92.586-36.752 8.078 8.078 0 0 0 2.197-5.304 7.632 7.632 0 0 0-2.197-5.303c-2.752-2.526-7.95-3.239-10.607 0a95.636 95.636 0 0 1-8.106 8.727q-2.018 1.914-4.143 3.71-1.213 1.026-2.46 2.011c-.394.31-1.62 1.138.263-.197-.432.306-.845.64-1.27.954a99.269 99.269 0 0 1-20.333 11.565l1.792-.756a96.836 96.836 0 0 1-24.172 6.623l1.994-.268a97.643 97.643 0 0 1-25.753-.038l1.993.268a99.8 99.8 0 0 1-24.857-6.77l1.792.755a116.025 116.025 0 0 1-21.736-12.59 86.877 86.877 0 0 0-11.113-6.995 42.824 42.824 0 0 0-14.438-4.388c-9.44-1.111-19.057 2.565-24.247 10.72-4.775 7.505-4.714 18.244 1.974 24.625 6.888 6.573 17.319 6.517 25.436 2.406 7.817-3.96 12.513-12.186 15.815-19.942 7.43-17.455 14.01-35.314 20.14-53.263q9.096-26.637 16.498-53.813.917-3.366 1.807-6.74c1.001-3.788-1.261-8.32-5.238-9.225a7.633 7.633 0 0 0-9.226 5.238Z"
          />
          <path
            fill="#3f3d56"
            d="m719.19 317.71-2.7 95.793-2.686 95.294-1.518 53.883a7.565 7.565 0 0 0 7.5 7.5 7.65 7.65 0 0 0 7.5-7.5l2.7-95.793 2.685-95.294 1.518-53.883a7.565 7.565 0 0 0-7.5-7.5 7.65 7.65 0 0 0-7.5 7.5Z"
          />
          <path
            d="M459.591 535.935h2.33V429.893h54.328v-2.322H461.92v-44.745h41.956q-.923-1.173-1.899-2.317H461.92v-29.553a65.378 65.378 0 0 0-2.329-.943v30.496H413.94v-37.865c-.782.036-1.552.09-2.329.155v37.71h-36.42v-28.25a54.63 54.63 0 0 0-2.317 1.092v27.158h-30.615v2.317h30.615v44.744h-30.615v2.323h30.615v106.042h2.317V429.893a36.413 36.413 0 0 1 36.42 36.42v69.622h2.33V429.893h45.651Zm-84.4-108.365v-44.744h36.42v44.745Zm38.748 0v-44.744h.914a44.741 44.741 0 0 1 44.738 44.745Z"
            opacity={0.2}
          />
          <path
            fill="#3f3d56"
            d="M445.369 504.14a63.059 63.059 0 0 1-20.05 33.7c-.74.64-1.48 1.26-2.25 1.87q-2.805.255-5.57.52c-1.53.14-3.04.29-4.54.43l-.27.03-.19-1.64-.76-6.64a37.623 37.623 0 0 1-3.3-32.44c2.64-7.12 7.42-13.41 12.12-19.65 6.49-8.62 12.8-17.14 13.03-27.65a60.544 60.544 0 0 1 7.9 13.33 16.432 16.432 0 0 0-5.12 3.77c-.41.45-.82 1.08-.54 1.62.24.46.84.57 1.36.63l3.76.39c1 .11 2 .21 3 .32a63.99 63.99 0 0 1 2.45 12.18 61.189 61.189 0 0 1-1.03 19.23Z"
          />
          <path
            className="fill-primary"
            d="M478.569 477.93c-5.9 4.29-9.35 10.46-12.03 17.26a16.628 16.628 0 0 0-7.17 4.58c-.41.45-.82 1.08-.54 1.62.24.46.84.57 1.36.63l3.76.39c-2.68 8.04-5.14 16.36-9.88 23.15a36.99 36.99 0 0 1-12.03 10.91 38.492 38.492 0 0 1-4.02 1.99q-7.62.585-14.95 1.25-2.805.255-5.57.52c-1.53.14-3.04.29-4.54.43q-.015-.825 0-1.65a63.304 63.304 0 0 1 15.25-39.86c.45-.52.91-1.03 1.38-1.54a61.792 61.792 0 0 1 16.81-12.7 62.654 62.654 0 0 1 32.17-6.98Z"
          />
          <path
            className="fill-primary"
            d="m419.229 535.1-1.15 3.4-.58 1.73c-1.53.14-3.04.29-4.54.43l-.27.03-4.96.51c-.43-.5-.86-1.01-1.28-1.53a62.03 62.03 0 0 1 8.07-87.11c-1.32 6.91.22 13.53 2.75 20.1-.27.11-.53.22-.78.34a16.432 16.432 0 0 0-5.12 3.77c-.41.45-.82 1.08-.54 1.62.24.46.84.57 1.36.63l3.76.39c1 .11 2 .21 3 .32l1.41.15c.07.15.13.29.2.44 2.85 6.18 5.92 12.39 7.65 18.83a43.666 43.666 0 0 1 1.02 4.91 37.604 37.604 0 0 1-10 31.04Z"
          />
          <path
            fill="#3f3d56"
            d="M519.887 390.06c-8.609-16.792-21.946-30.92-37.632-41.303a114.237 114.237 0 0 0-52.563-18.38q-3.69-.335-7.399-.393c-2.921-.043-46.866 12.632-61.587 22.982a114.295 114.295 0 0 0-35.333 39.527 102.5 102.5 0 0 0-12.126 51.634 113.564 113.564 0 0 0 14.703 51.476 110.475 110.475 0 0 0 36.444 38.745c15.338 9.787 30.745 35.736 48.855 36.652 18.246.923 39.054-23.555 55.695-30.987a104.425 104.425 0 0 0 41.725-34.005 110.25 110.25 0 0 0 19.6-48.948c2.573-18.083 1.374-36.733-4.802-54.016a111.86 111.86 0 0 0-5.58-12.983c-1.78-3.506-6.996-4.796-10.261-2.691a7.68 7.68 0 0 0-2.691 10.261q1.568 3.088 2.915 6.278l-.756-1.792a101.15 101.15 0 0 1 6.877 25.539l-.268-1.994a109.229 109.229 0 0 1-.066 28.682l.267-1.994a109.734 109.734 0 0 1-7.554 27.675l.756-1.792a104.212 104.212 0 0 1-6.672 13.098q-1.923 3.186-4.08 6.222c-.632.888-1.283 1.761-1.94 2.631-.855 1.136 1.168-1.483.283-.37-.15.19-.3.38-.452.57q-.681.852-1.382 1.688a93.613 93.613 0 0 1-10.176 10.383q-1.366 1.193-2.778 2.331c-.469.379-.932.773-1.42 1.125.018-.013 1.579-1.2.655-.51-.29.216-.579.435-.87.651q-2.91 2.156-5.974 4.092a103.485 103.485 0 0 1-14.756 7.713l1.792-.756a109.215 109.215 0 0 1-27.597 7.552l1.994-.268a108.154 108.154 0 0 1-28.589.05l1.994.268a99.835 99.835 0 0 1-25.096-6.784l1.792.756a93.643 93.643 0 0 1-13.416-6.991q-3.174-2-6.184-4.248c-.286-.213-.57-.43-.855-.645-.915-.691.658.51.67.518a19.169 19.169 0 0 1-1.534-1.225q-1.454-1.184-2.862-2.422a101.99 101.99 0 0 1-10.493-10.71q-1.213-1.433-2.374-2.91c-.335-.426-.946-1.29.404.53-.177-.24-.362-.475-.541-.713q-.647-.858-1.276-1.728-2.203-3.048-4.188-6.246a109.29 109.29 0 0 1-7.805-15.108l.756 1.791a106.588 106.588 0 0 1-7.34-26.837l.267 1.994a97.866 97.866 0 0 1-.048-25.636l-.268 1.994a94.673 94.673 0 0 1 6.595-23.959l-.757 1.792a101.557 101.557 0 0 1 7.196-13.857q2.065-3.323 4.377-6.484.526-.719 1.063-1.428c.324-.428 1.215-1.494-.306.388.15-.184.293-.374.44-.56q1.269-1.608 2.6-3.165a107.402 107.402 0 0 1 10.883-11.02q1.474-1.293 2.994-2.53.691-.562 1.391-1.113c.187-.147.376-.29.562-.438-1.998 1.59-.555.432-.102.092q3.134-2.348 6.436-4.46a103.644 103.644 0 0 1 15.386-8.109l-1.791.756c7.76-3.258 42.14-10.949 48.394-10.11l-1.994-.267a106.225 106.225 0 0 1 26.72 7.382l-1.792-.756a110.313 110.313 0 0 1 12.6 6.33q3.044 1.783 5.968 3.762 1.383.936 2.738 1.915.677.489 1.346.989c.248.185.494.372.741.558 1.04.779-1.431-1.129-.342-.267a110.843 110.843 0 0 1 10.368 9.253q2.401 2.445 4.637 5.045 1.147 1.335 2.246 2.708c.365.455 1.605 2.1.085.084.372.493.747.983 1.114 1.48a97.977 97.977 0 0 1 8.392 13.537c1.793 3.498 6.987 4.802 10.261 2.691a7.677 7.677 0 0 0 2.69-10.261Z"
          />
          <path
            fill="#3f3d56"
            d="M432.497 512.456a3.78 3.78 0 0 1-2.74-6.552l.26-1.03-.103-.247c-3.48-8.297-25.685 14.834-26.645 22.632a30.029 30.029 0 0 0 .527 10.328 120.392 120.392 0 0 1-10.952-50.003 116.202 116.202 0 0 1 .72-12.963q.598-5.293 1.658-10.51a121.787 121.787 0 0 1 24.151-51.617c6.874.383 12.898-.664 13.48-13.986.103-2.37 1.86-4.421 2.248-6.756a30.72 30.72 0 0 1-1.98.183l-.623.032-.077.004a3.745 3.745 0 0 1-3.076-6.101l.85-1.046c.43-.538.872-1.065 1.302-1.603a1.865 1.865 0 0 0 .14-.161c.495-.613.99-1.216 1.485-1.829a10.83 10.83 0 0 0-3.55-3.432c-4.96-2.904-11.802-.893-15.384 3.593-3.593 4.486-4.271 10.78-3.023 16.385a43.398 43.398 0 0 0 6.003 13.383c-.27.344-.549.677-.818 1.022a122.574 122.574 0 0 0-12.793 20.268c1.016-7.939-11.412-36.608-16.218-42.68-5.773-7.295-17.611-4.112-18.628 5.135l-.03.268q1.072.604 2.097 1.283a5.127 5.127 0 0 1-2.067 9.33l-.104.016c-9.556 13.644 21.077 49.155 28.745 41.182a125.11 125.11 0 0 0-6.735 31.692 118.664 118.664 0 0 0 .086 19.16l-.032-.226c-1.704-13.882-30.931-34.522-39.466-32.803-4.917.99-9.76.765-9.013 5.725l.036.237a34.442 34.442 0 0 1 3.862 1.861q1.07.605 2.096 1.283a5.127 5.127 0 0 1-2.067 9.33l-.104.016-.215.033c-4.35 14.966 27.907 39.12 47.517 31.434h.011a125.075 125.075 0 0 0 8.402 24.528h30.015c.107-.333.204-.678.301-1.011a34.102 34.102 0 0 1-8.305-.495c2.227-2.732 4.454-5.486 6.68-8.219a1.861 1.861 0 0 0 .14-.161c1.13-1.399 2.27-2.787 3.4-4.185v-.002a49.952 49.952 0 0 0-1.463-12.725Zm-34.37-67.613.015-.022-.016.043Zm-6.65 59.932-.257-.58c.01-.42.01-.84 0-1.27 0-.119-.022-.237-.022-.355.097.742.183 1.484.29 2.227Z"
          />
          <circle cx={95.249} cy={439} r={11} fill="#3f3d56" />
          <circle cx={227.249} cy={559} r={11} fill="#3f3d56" />
          <circle cx={728.249} cy={559} r={11} fill="#3f3d56" />
          <circle cx={755.249} cy={419} r={11} fill="#3f3d56" />
          <circle cx={723.249} cy={317} r={11} fill="#3f3d56" />
          <path
            fill="#3f3d56"
            d="M264.249 419a10.949 10.949 0 1 1-.21-2.16 10.992 10.992 0 0 1 .21 2.16Z"
          />
          <circle cx={484.249} cy={349} r={11} fill="#3f3d56" />
          <path
            fill="#3f3d56"
            d="M375.249 349a10.949 10.949 0 1 1-.21-2.16 10.992 10.992 0 0 1 .21 2.16ZM233.249 317a10.949 10.949 0 1 1-.21-2.16 10.992 10.992 0 0 1 .21 2.16Z"
          />
          <circle cx={599.249} cy={443} r={11} fill="#3f3d56" />
          <circle cx={426.249} cy={338} r={16} fill="#3f3d56" />
          <path
            fill="#cacaca"
            d="m858.94 570.84-857.75.308a1.19 1.19 0 1 1 0-2.381l857.75-.308a1.19 1.19 0 0 1 0 2.382Z"
          />
        </svg>
      </div>
      <p className="text-lg md:text-xl font-semibold">
        This page doesn&apos;t exist üòÖ
      </p>

      <div className="flex flex-wrap gap-4 justify-center">
        <Link href="/" className="btn btn-sm">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            className="w-5 h-5"
          >
            <path
              fillRule="evenodd"
              d="M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z"
              clipRule="evenodd"
            />
          </svg>
          Home
        </Link>

        <ButtonSupport />
      </div>
    </section>
  );
}
</file>

<file path="components/BetterIcon.tsx">
import React from "react";

// A better way to illustrate with icons
// Pass any SVG icon as children (recommended width/height : w-6 h-6)
// By default, it's using your primary color for styling
const BetterIcon = ({ children }: { children: React.ReactNode }) => {
  return (
    <div className="w-12 h-12 inline-flex items-center justify-center rounded-full bg-primary/20 text-primary">
      {children}
    </div>
  );
};

export default BetterIcon;
</file>

<file path="components/ButtonAccount.tsx">
/* eslint-disable @next/next/no-img-element */
"use client";

import { useState, useEffect } from "react";
import { Popover, Transition } from "@headlessui/react";
import { User } from "@supabase/supabase-js";
import { createClient } from "@/libs/supabase/client";
import apiClient from "@/libs/api";

// A button to show user some account actions
//  1. Billing: open a Stripe Customer Portal to manage their billing (cancel subscription, update payment method, etc.).
//     You have to manually activate the Customer Portal in your Stripe Dashboard (https://dashboard.stripe.com/test/settings/billing/portal)
//     This is only available if the customer has a customerId (they made a purchase previously)
//  2. Logout: sign out and go back to homepage
// See more at https://shipfa.st/docs/components/buttonAccount
const ButtonAccount = () => {
  const supabase = createClient();
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const [user, setUser] = useState<User>(null);

  useEffect(() => {
    const getUser = async () => {
      const {
        data: { user },
      } = await supabase.auth.getUser();

      setUser(user);
    };

    getUser();
  }, [supabase]);

  const handleSignOut = async () => {
    await supabase.auth.signOut();
    window.location.href = "/";
  };

  const handleBilling = async () => {
    setIsLoading(true);

    try {
      const { url }: { url: string } = await apiClient.post(
        "/stripe/create-portal",
        {
          returnUrl: window.location.href,
        }
      );

      window.location.href = url;
    } catch (e) {
      console.error(e);
    }

    setIsLoading(false);
  };

  return (
    <Popover className="relative z-10">
      {({ open }) => (
        <>
          <Popover.Button className="btn">
            {user?.user_metadata?.avatar_url ? (
              <img
                src={user?.user_metadata?.avatar_url}
                alt={"Profile picture"}
                className="w-6 h-6 rounded-full shrink-0"
                referrerPolicy="no-referrer"
                width={24}
                height={24}
              />
            ) : (
              <span className="w-8 h-8 bg-base-100 flex justify-center items-center rounded-full shrink-0 capitalize">
                {user?.email?.charAt(0)}
              </span>
            )}

            {user?.user_metadata?.name ||
              user?.email?.split("@")[0] ||
              "Account"}

            {isLoading ? (
              <span className="loading loading-spinner loading-xs"></span>
            ) : (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className={`w-5 h-5 duration-200 opacity-50 ${
                  open ? "transform rotate-180 " : ""
                }`}
              >
                <path
                  fillRule="evenodd"
                  d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                  clipRule="evenodd"
                />
              </svg>
            )}
          </Popover.Button>
          <Transition
            enter="transition duration-100 ease-out"
            enterFrom="transform scale-95 opacity-0"
            enterTo="transform scale-100 opacity-100"
            leave="transition duration-75 ease-out"
            leaveFrom="transform scale-100 opacity-100"
            leaveTo="transform scale-95 opacity-0"
          >
            <Popover.Panel className="absolute left-0 z-10 mt-3 w-screen max-w-[16rem] transform">
              <div className="overflow-hidden rounded-xl shadow-xl ring-1 ring-base-content ring-opacity-5 bg-base-100 p-1">
                <div className="space-y-0.5 text-sm">
                  <button
                    className="flex items-center gap-2 hover:bg-base-300 duration-200 py-1.5 px-4 w-full rounded-lg font-medium"
                    onClick={handleBilling}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      className="w-5 h-5"
                    >
                      <path
                        fillRule="evenodd"
                        d="M2.5 4A1.5 1.5 0 001 5.5V6h18v-.5A1.5 1.5 0 0017.5 4h-15zM19 8.5H1v6A1.5 1.5 0 002.5 16h15a1.5 1.5 0 001.5-1.5v-6zM3 13.25a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zm4.75-.75a.75.75 0 000 1.5h3.5a.75.75 0 000-1.5h-3.5z"
                        clipRule="evenodd"
                      />
                    </svg>
                    Billing
                  </button>
                  <button
                    className="flex items-center gap-2 hover:bg-error/20 hover:text-error duration-200 py-1.5 px-4 w-full rounded-lg font-medium"
                    onClick={handleSignOut}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      className="w-5 h-5"
                    >
                      <path
                        fillRule="evenodd"
                        d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z"
                        clipRule="evenodd"
                      />
                      <path
                        fillRule="evenodd"
                        d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z"
                        clipRule="evenodd"
                      />
                    </svg>
                    Logout
                  </button>
                </div>
              </div>
            </Popover.Panel>
          </Transition>
        </>
      )}
    </Popover>
  );
};

export default ButtonAccount;
</file>

<file path="components/ButtonGradient.tsx">
"use client";

import React from "react";

const ButtonGradient = ({
  title = "Gradient Button",
  onClick = () => { },
}: {
  title?: string;
  onClick?: () => void;
}) => {
  return (
    <button className="btn btn-gradient animate-shimmer" onClick={onClick}>
      {title}
    </button>
  );
};

export default ButtonGradient;
</file>

<file path="components/ButtonLead.tsx">
"use client";

import React, { useState, useRef } from "react";
import { toast } from "react-hot-toast";
import apiClient from "@/libs/api";

// This component is used to collect the emails from the landing page
// You'd use this if your product isn't ready yet or you want to collect leads
// For instance: A popup to send a freebie, joining a waitlist, etc.
// It calls the /api/lead/route.js route and store a Lead document in the database
const ButtonLead = ({ extraStyle }: { extraStyle?: string }) => {
  const inputRef = useRef(null);
  const [email, setEmail] = useState<string>("");
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const [isDisabled, setIsDisabled] = useState<boolean>(false);

  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
    e?.preventDefault();

    setIsLoading(true);
    try {
      await apiClient.post("/lead", { email });

      toast.success("Thanks for joining the waitlist!");

      // just remove the focus on the input
      inputRef.current.blur();
      setEmail("");
      setIsDisabled(true);
    } catch (error) {
      console.log(error);
    } finally {
      setIsLoading(false);
    }
  };
  return (
    <form
      className={`w-full max-w-xs space-y-3 ${extraStyle ? extraStyle : ""}`}
      onSubmit={handleSubmit}
    >
      <input
        required
        type="email"
        value={email}
        ref={inputRef}
        autoComplete="email"
        placeholder="tom@cruise.com"
        className="input input-bordered w-full placeholder:opacity-60"
        onChange={(e) => setEmail(e.target.value)}
      />

      <button
        className="btn btn-primary btn-block"
        type="submit"
        disabled={isDisabled}
      >
        Join waitlist
        {isLoading ? (
          <span className="loading loading-spinner loading-xs"></span>
        ) : (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            className="w-5 h-5"
          >
            <path
              fillRule="evenodd"
              d="M5 10a.75.75 0 01.75-.75h6.638L10.23 7.29a.75.75 0 111.04-1.08l3.5 3.25a.75.75 0 010 1.08l-3.5 3.25a.75.75 0 11-1.04-1.08l2.158-1.96H5.75A.75.75 0 015 10z"
              clipRule="evenodd"
            />
          </svg>
        )}
      </button>
    </form>
  );
};

export default ButtonLead;
</file>

<file path="components/ButtonPopover.tsx">
"use client";

import { Popover, Transition } from "@headlessui/react";

const ButtonPopover = () => {
  return (
    <Popover className="relative z-10">
      {({ open }) => (
        <>
          <Popover.Button className="btn">
            Popover Button
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className={`w-5 h-5 duration-200 ${
                open ? "transform rotate-180 " : ""
              }`}
            >
              <path
                fillRule="evenodd"
                d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                clipRule="evenodd"
              />
            </svg>
          </Popover.Button>
          <Transition
            enter="transition duration-100 ease-out"
            enterFrom="transform scale-95 opacity-0"
            enterTo="transform scale-100 opacity-100"
            leave="transition duration-75 ease-out"
            leaveFrom="transform scale-100 opacity-100"
            leaveTo="transform scale-95 opacity-0"
          >
            <Popover.Panel className="absolute left-0 z-10 mt-3 w-screen max-w-full sm:max-w-sm lg:max-w-2xl transform">
              <div className="overflow-hidden rounded-lg shadow-lg ring-1 ring-base-content ring-opacity-5">
                <div className="relative grid gap-4 bg-base-100 p-4 lg:grid-cols-2">
                  <div className="text-sm flex items-center gap-3 p-2 cursor-pointer hover:bg-base-200 rounded-lg duration-200">
                    <span className="flex items-center justify-center w-12 h-12 shrink-0 rounded-lg bg-orange-500/20">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        strokeWidth={1.5}
                        stroke="currentColor"
                        className="w-6 h-6 stroke-orange-600"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          d="M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"
                        />
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          d="M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1A3.75 3.75 0 0012 18z"
                        />
                      </svg>
                    </span>
                    <div className="">
                      <p className="font-bold">Get Started</p>
                      <p className="opacity-70">
                        Loreum ipseum de la madre de papa
                      </p>
                    </div>
                  </div>
                  <div className="text-sm flex items-center gap-3 p-2 cursor-pointer hover:bg-base-200 rounded-lg duration-200">
                    <span className="flex items-center justify-center w-12 h-12 shrink-0 rounded-lg bg-yellow-500/20">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        strokeWidth={1.5}
                        stroke="currentColor"
                        className="w-6 h-6 stroke-yellow-600"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          d="M21 11.25v8.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 109.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1114.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"
                        />
                      </svg>
                    </span>
                    <div className="">
                      <p className="font-bold">Rewards</p>
                      <p className="opacity-70">
                        Loreum ipseum de el papi de la mama
                      </p>
                    </div>
                  </div>
                  <div className="text-sm flex items-center gap-3 p-2 cursor-pointer hover:bg-base-200 rounded-lg duration-200">
                    <span className="flex items-center justify-center w-12 h-12 shrink-0 rounded-lg bg-green-500/20">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        strokeWidth={1.5}
                        stroke="currentColor"
                        className="w-6 h-6 stroke-green-600"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"
                        />
                      </svg>
                    </span>
                    <div className="">
                      <p className="font-bold">Academics</p>
                      <p className="opacity-70">
                        Loreum ipseum de la madre de papa
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </Popover.Panel>
          </Transition>
        </>
      )}
    </Popover>
  );
};

export default ButtonPopover;
</file>

<file path="components/ButtonSignin.tsx">
"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import { User } from "@supabase/supabase-js";
import { createClient } from "@/libs/supabase/client";
import config from "@/config";
import Image from "next/image";

// A simple button to sign in with our providers (Google & Magic Links).
// It automatically redirects user to callbackUrl (config.auth.callbackUrl) after login, which is normally a private page for users to manage their accounts.
// If the user is already logged in, it will show their profile picture & redirect them to callbackUrl immediately.
const ButtonSignin = ({
  text = "Get started",
  extraStyle,
}: {
  text?: string;
  extraStyle?: string;
}) => {
  const supabase = createClient();
  const [user, setUser] = useState<User>(null);

  useEffect(() => {
    const getUser = async () => {
      const {
        data: { user },
      } = await supabase.auth.getUser();

      setUser(user);
    };

    getUser();
  }, [supabase]);

  if (user) {
    return (
      <Link
        href={config.auth.callbackUrl}
        className={`btn ${extraStyle ? extraStyle : ""}`}
      >
        {user?.user_metadata?.avatar_url ? (
          <Image
            src={user?.user_metadata?.avatar_url}
            alt={user?.user_metadata?.name || "Account"}
            className="w-6 h-6 rounded-full shrink-0"
            referrerPolicy="no-referrer"
            width={24}
            height={24}
          />
        ) : (
          <span className="w-6 h-6 bg-base-300 flex justify-center items-center rounded-full shrink-0">
            {user?.user_metadata?.name?.charAt(0) || user?.email?.charAt(0)}
          </span>
        )}
        {user?.user_metadata?.name || user?.email || "Account"}
      </Link>
    );
  }

  return (
    <Link
      className={`btn ${extraStyle ? extraStyle : ""}`}
      href={config.auth.loginUrl}
    >
      {text}
    </Link>
  );
};

export default ButtonSignin;
</file>

<file path="components/ButtonSupport.tsx">
"use client";

import { Crisp } from "crisp-sdk-web";
import config from "@/config";

// Use this button if chat is hidden on some routes. config.js has onlyShowOnRoutes set to ["/"] so it will be hidden on all routes except the home page.
// If Crisp is not enable, it will open the support email in the default email client.
const ButtonSupport = () => {
  const handleClick = () => {
    if (config.crisp?.id) {
      Crisp.chat.show();
      Crisp.chat.open();
    } else if (config.resend?.supportEmail) {
      // open default email client in new window with "need help with ${config.appName}" as subject
      window.open(
        `mailto:${config.resend.supportEmail}?subject=Need help with ${config.appName}`,
        "_blank"
      );
    }
  };

  return (
    <button
      className="btn btn-sm"
      onClick={handleClick}
      data-tooltip-id="tooltip"
      data-tooltip-content="Talk to support"
      title="Chat with support"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        className="w-5 h-5"
      >
        <path
          fillRule="evenodd"
          d="M10 2c-2.236 0-4.43.18-6.57.524C1.993 2.755 1 4.014 1 5.426v5.148c0 1.413.993 2.67 2.43 2.902.848.137 1.705.248 2.57.331v3.443a.75.75 0 001.28.53l3.58-3.579a.78.78 0 01.527-.224 41.202 41.202 0 005.183-.5c1.437-.232 2.43-1.49 2.43-2.903V5.426c0-1.413-.993-2.67-2.43-2.902A41.289 41.289 0 0010 2zm0 7a1 1 0 100-2 1 1 0 000 2zM8 8a1 1 0 11-2 0 1 1 0 012 0zm5 1a1 1 0 100-2 1 1 0 000 2z"
          clipRule="evenodd"
        />
      </svg>
      Support
    </button>
  );
};

export default ButtonSupport;
</file>

<file path="components/FeaturesGrid.tsx">
/* eslint-disable @next/next/no-img-element */
import React from "react";

const features = [
  {
    title: "Collect user feedback",
    description:
      "Use your Insighto's board to let users submit features they want.",
    styles: "bg-primary text-primary-content",
    demo: (
      <div className="overflow-hidden h-full flex items-stretch">
        <div className="w-full translate-x-12 bg-base-200 rounded-t-box h-full p-6">
          <p className="font-medium uppercase tracking-wide text-base-content/60 text-sm mb-3">
            Suggest a feature
          </p>
          <div className="relative textarea py-4 h-full mr-12 bg-base-200 group-hover:bg-base-100 group-hover:border-base-content/10 text-base-content">
            <div className="absolute left-4 top-4 group-hover:hidden flex items-center ">
              <span>Notifica</span>
              <span className="w-[2px] h-6 bg-primary animate-pulse"></span>
            </div>
            <div className="opacity-0 group-hover:opacity-100 duration-500">
              Notifications should be visible only on certain pages.
            </div>
            <div className="opacity-0 group-hover:opacity-100 duration-1000 flex items-center gap-0.5">
              <span>Terms & privacy pages don&apos;t need them</span>
              <span className="w-[2px] h-6 bg-primary animate-pulse"></span>
            </div>
            <button className="btn shadow-lg btn-primary absolute right-4 bottom-6 opacity-0 group-hover:opacity-100 duration-1000">
              Submit
            </button>
          </div>
        </div>
      </div>
    ),
  },
  {
    title: "Prioritize features",
    description: "Users upvote features they want. You know what to ship next.",
    styles: "md:col-span-2 bg-base-300 text-base-content",
    demo: (
      <div className="px-6 max-w-[600px] flex flex-col gap-4 overflow-hidden">
        {[
          {
            text: "Add LemonSqueezy integration to the boilerplate",
            secondaryText: "Yes, ship this! ‚úÖ",
            votes: 48,
            transition: "group-hover:-mt-36 group-hover:md:-mt-28 duration-500",
          },
          {
            text: "A new pricing table for metered billing",
            secondaryText: "Maybe ship this ü§î",
            votes: 12,
          },
          {
            text: "A new UI library for the dashboard",
            secondaryText: "But don't ship that ‚ùå",
            votes: 1,
          },
        ].map((feature, i) => (
          <div
            className={`p-4 bg-base-100 text-base-content rounded-box flex justify-between mb-2 gap-4 ${feature?.transition}`}
            key={i}
          >
            <div>
              <p className="font-semibold mb-1">{feature.text}</p>
              <p className="text-base-content-secondary">
                {feature.secondaryText}
              </p>
            </div>
            <button
              className={`px-4 py-2 rounded-box group text-center text-lg duration-150 border border-transparent bg-primary text-primary-content`}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2.5"
                strokeLinecap="round"
                strokeLinejoin="round"
                className={`w-5 h-5 ease-in-out duration-150 -translate-y-0.5 group-hover:translate-y-0`}
              >
                <path d="m18 15-6-6-6 6" />
              </svg>
              {feature.votes}
            </button>
          </div>
        ))}
      </div>
    ),
  },
  {
    title: "Your brand, your board",
    description: "Customize your Insighto board with 7 themes.",
    styles: "md:col-span-2 bg-base-100 text-base-content",
    demo: (
      <div className="flex left-0 w-full h-full pt-0 lg:pt-8 overflow-hidden -mt-4">
        <div className="-rotate-[8deg] flex min-w-max overflow-x-visible h-full lg:pt-4">
          {[
            {
              buttonStyles: "bg-primary text-primary-content",
              css: "-ml-1 rotate-[6deg] w-72 h-72 z-30 bg-base-200 text-base-content rounded-2xl group-hover:-ml-64 group-hover:opacity-0 group-hover:scale-75 transition-all duration-500 p-4",
            },
            {
              buttonStyles: "bg-secondary text-secondary-content",
              css: "rotate-[6deg] bg-base-200 text-base-content w-72 h-72 -mr-20 -ml-20 z-20 rounded-xl p-4",
            },
            {
              buttonStyles: "bg-accent text-accent-content",
              css: "rotate-[6deg] bg-base-200 text-base-content z-10 w-72 h-72 rounded-xl p-4",
            },
            {
              buttonStyles: "bg-neutral text-neutral-content",
              css: "rotate-[6deg] bg-base-200 text-base-content w-72 h-72 -ml-20 rounded-xl p-4",
            },
            {
              buttonStyles: "bg-base-100 text-base-content",
              css: "rotate-[6deg] bg-base-200 text-base-content w-72 h-72 -ml-10 -z-10 rounded-xl p-4 opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all duration-300",
            },
          ].map((theme, i) => (
            <div className={theme.css} key={i}>
              <div className="font-medium uppercase tracking-wide text-base-content/60 text-sm mb-3">
                Trending feedback
              </div>
              <div className="space-y-2">
                <div className="p-4 bg-base-100 rounded-box flex justify-between">
                  <div>
                    <p className="font-semibold mb-1">Clickable cards</p>
                    <p className="opacity-80">Make cards more accessible</p>
                  </div>
                  <button
                    className={`px-4 py-2 rounded-box group text-center text-lg duration-150 border border-transparent ${theme.buttonStyles}`}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      strokeWidth="2.5"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      className={`w-5 h-5 ease-in-out duration-150 -translate-y-0.5 group-hover:translate-y-0`}
                    >
                      <path d="m18 15-6-6-6 6" />
                    </svg>
                    8
                  </button>
                </div>
                <div className="p-4 bg-base-100 rounded-box flex justify-between ">
                  <div>
                    <p className="font-semibold mb-1">Bigger images</p>
                    <p className="opacity-80">Make cards more accessible</p>
                  </div>
                  <button
                    className={`px-4 py-2 rounded-box group text-center text-lg duration-150 border border-transparent ${theme.buttonStyles}`}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      strokeWidth="2.5"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      className={`w-5 h-5 ease-in-out duration-150 -translate-y-0.5 group-hover:translate-y-0`}
                    >
                      <path d="m18 15-6-6-6 6" />
                    </svg>
                    5
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    ),
  },
  {
    title: "Discover new ideas",
    description: "Users can chat and discuss features.",
    styles: "bg-neutral text-neutral-content",
    demo: (
      <div className="text-neutral-content px-6 space-y-4">
        {[
          {
            id: 1,
            text: "Can we have a feature to add a custom domain to IndiePage?",
            userImg:
              "https://pbs.twimg.com/profile_images/1514863683574599681/9k7PqDTA_400x400.jpg",
            userName: "Marc Lou",
            createdAt: "2024-09-01T00:00:00Z",
          },
          {
            id: 2,
            text: "I'd definitelly pay for that ü§©",
            userImg:
              "https://pbs.twimg.com/profile_images/1778434561556320256/knBJT1OR_400x400.jpg",
            userName: "Dan K.",
            createdAt: "2024-09-02T00:00:00Z",
            transition:
              "opacity-0 group-hover:opacity-100 duration-500 translate-x-1/4 group-hover:translate-x-0",
          },
        ]?.map((reply) => (
          <div
            key={reply.id}
            className={`px-6 py-4 bg-neutral-content text-neutral rounded-box ${reply?.transition}`}
          >
            <div className="mb-2 whitespace-pre-wrap">{reply.text}</div>
            <div className="text-neutral/80 flex items-center gap-2 text-sm">
              <div className="flex items-center gap-2">
                <div className="avatar">
                  <div className="w-7 rounded-full">
                    <img src={reply.userImg} alt={reply.userName} />
                  </div>
                </div>
                <div className=""> {reply.userName} </div>
              </div>
              ‚Ä¢
              <div>
                {new Date(reply.createdAt).toLocaleDateString("en-US", {
                  month: "short",
                  day: "numeric",
                  year: "numeric",
                })}
              </div>
            </div>
          </div>
        ))}
      </div>
    ),
  },
];
const FeaturesGrid = () => {
  return (
    <section className="flex justify-center items-center w-full bg-base-200/50 text-base-content py-20 lg:py-32">
      <div className="flex flex-col max-w-[82rem] gap-16 md:gap-20 px-4">
        <h2 className="max-w-3xl font-black text-4xl md:text-6xl tracking-[-0.01em]">
          Ship features <br /> users{" "}
          <span className="underline decoration-dashed underline-offset-8 decoration-base-300">
            really want
          </span>
        </h2>
        <div className="flex flex-col w-full h-fit gap-4 lg:gap-10 text-text-default max-w-[82rem]">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-10">
            {features.map((feature) => (
              <div
                key={feature.title}
                className={`${feature.styles} rounded-3xl flex flex-col gap-6 w-full h-[22rem] lg:h-[25rem] pt-6 overflow-hidden group`}
              >
                <div className="px-6 space-y-2">
                  <h3 className="font-bold text-xl lg:text-3xl tracking-tight">
                    {feature.title}
                  </h3>
                  <p className="opacity-80">{feature.description}</p>
                </div>
                {feature.demo}
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
};

export default FeaturesGrid;
</file>

<file path="components/FeaturesListicle.tsx">
"use client";

import { useState, useEffect, useRef } from "react";
import type { JSX } from "react";

// List of features to display:
// - name: name of the feature
// - description: description of the feature (can be any JSX)
// - svg: icon of the feature
const features: {
  name: string;
  description: JSX.Element;
  svg: JSX.Element;
}[] = [
  {
    name: "Emails",
    description: (
      <>
        <ul className="space-y-1">
          {[
            "Send transactional emails",
            "DNS setup to avoid spam folder (DKIM, DMARC, SPF in subdomain)",
            "Webhook to receive & forward emails",
          ].map((item) => (
            <li key={item} className="flex items-center gap-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className="w-[18px] h-[18px] inline shrink-0 opacity-80"
              >
                <path
                  fillRule="evenodd"
                  d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                  clipRule="evenodd"
                />
              </svg>

              {item}
            </li>
          ))}
          <li className="flex items-center gap-3 text-accent font-medium">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-[18px] h-[18px] inline shrink-0"
            >
              <path
                fillRule="evenodd"
                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                clipRule="evenodd"
              />
            </svg>
            Time saved: 2 hours
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          d="M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"
        />
      </svg>
    ),
  },
  {
    name: "Payments",
    description: (
      <>
        <ul className="space-y-2">
          {[
            "Create checkout sessions",
            "Handle webhooks to update user's account",
            "Tips to setup your account & reduce chargebacks",
          ].map((item) => (
            <li key={item} className="flex items-center gap-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className="w-[18px] h-[18px] inline shrink-0 opacity-80"
              >
                <path
                  fillRule="evenodd"
                  d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                  clipRule="evenodd"
                />
              </svg>

              {item}
            </li>
          ))}
          <li className="flex items-center gap-3 text-accent font-medium">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-[18px] h-[18px] inline shrink-0"
            >
              <path
                fillRule="evenodd"
                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                clipRule="evenodd"
              />
            </svg>
            Time saved: 2 hours
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"
        />
      </svg>
    ),
  },
  {
    name: "Login",
    description: (
      <>
        <ul className="space-y-2">
          {[
            "Magic links setup",
            "Login with Google walkthrough",
            "Save user data in MongoDB",
            "Private/protected pages & API calls",
          ].map((item) => (
            <li key={item} className="flex items-center gap-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className="w-[18px] h-[18px] inline shrink-0 opacity-80"
              >
                <path
                  fillRule="evenodd"
                  d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                  clipRule="evenodd"
                />
              </svg>

              {item}
            </li>
          ))}
          <li className="flex items-center gap-3 text-accent font-medium">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-[18px] h-[18px] inline shrink-0"
            >
              <path
                fillRule="evenodd"
                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                clipRule="evenodd"
              />
            </svg>
            Time saved: 3 hours
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"
        />
      </svg>
    ),
  },
  {
    name: "Database",
    description: (
      <>
        <ul className="space-y-2">
          {["Mongoose schema", "Mongoose plugins to make your life easier"].map(
            (item) => (
              <li key={item} className="flex items-center gap-3">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  className="w-[18px] h-[18px] inline shrink-0 opacity-80"
                >
                  <path
                    fillRule="evenodd"
                    d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                    clipRule="evenodd"
                  />
                </svg>

                {item}
              </li>
            )
          )}
          <li className="flex items-center gap-3 text-accent font-medium">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-[18px] h-[18px] inline shrink-0"
            >
              <path
                fillRule="evenodd"
                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                clipRule="evenodd"
              />
            </svg>
            Time saved: 2 hours
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"
        />
      </svg>
    ),
  },
  {
    name: "SEO",
    description: (
      <>
        <ul className="space-y-2">
          {[
            "All meta tags to rank on Google",
            "OpenGraph tags to share on social media",
            "Automated sitemap generation to fasten Google indexing",
            "Structured data markup for Rich Snippets",
            "SEO-optimized UI components",
          ].map((item) => (
            <li key={item} className="flex items-center gap-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className="w-[18px] h-[18px] inline shrink-0 opacity-80"
              >
                <path
                  fillRule="evenodd"
                  d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                  clipRule="evenodd"
                />
              </svg>

              {item}
            </li>
          ))}
          <li className="flex items-center gap-3 text-accent font-medium">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-[18px] h-[18px] inline shrink-0"
            >
              <path
                fillRule="evenodd"
                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                clipRule="evenodd"
              />
            </svg>
            Time saved: 6 hours
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v16.5c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9zm3.75 11.625a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"
        />
      </svg>
    ),
  },
  {
    name: "Style",
    description: (
      <>
        <ul className="space-y-2">
          {[
            "Components, animations & sections (like the pricing page below)",
            "20+ themes with daisyUI",
            "Automatic dark mode",
          ].map((item) => (
            <li key={item} className="flex items-center gap-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className="w-[18px] h-[18px] inline shrink-0 opacity-80"
              >
                <path
                  fillRule="evenodd"
                  d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                  clipRule="evenodd"
                />
              </svg>

              {item}
            </li>
          ))}
          <li className="flex items-center gap-3 text-accent font-medium">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-[18px] h-[18px] inline shrink-0"
            >
              <path
                fillRule="evenodd"
                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                clipRule="evenodd"
              />
            </svg>
            Time saved: 5 hours
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"
        />
      </svg>
    ),
  },
];

// A list of features with a listicle style.
// - Click on a feature to display its description.
// - Good to use when multiples features are available.
// - Autoscroll the list of features (optional).
const FeaturesListicle = () => {
  const featuresEndRef = useRef<null>(null);
  const [featureSelected, setFeatureSelected] = useState<string>(
    features[0].name
  );
  const [hasClicked, setHasClicked] = useState<boolean>(false);

  // (Optional) Autoscroll the list of features so user know it's interactive.
  // Stop scrolling when user scroll after the featuresEndRef element (end of section)
  // emove useEffect is not needed.
  useEffect(() => {
    const interval = setInterval(() => {
      if (!hasClicked) {
        const index = features.findIndex(
          (feature) => feature.name === featureSelected
        );
        const nextIndex = (index + 1) % features.length;
        setFeatureSelected(features[nextIndex].name);
      }
    }, 5000);

    try {
      // stop the interval when the user scroll after the featuresRef element
      const observer = new IntersectionObserver(
        ([entry]) => {
          if (entry.isIntersecting) {
            console.log("STOP AUTO CHANGE");
            clearInterval(interval);
          }
        },
        {
          root: null,
          rootMargin: "0px",
          threshold: 0.5,
        }
      );
      if (featuresEndRef.current) {
        observer.observe(featuresEndRef.current);
      }
    } catch (e) {
      console.error(e);
    }

    return () => clearInterval(interval);
  }, [featureSelected, hasClicked]);

  return (
    <section className="py-24" id="features">
      <div className="max-w-3xl mx-auto">
        <div className="bg-base-100 max-md:px-8 max-w-3xl">
          <p className="text-accent font-medium text-sm font-mono mb-3">
            {/* Pure decoration, you can remove it */}
            const launch_time = &quot;Today&quot;;
          </p>
          <h2 className="font-extrabold text-3xl lg:text-5xl tracking-tight mb-8">
            {/* üí° COPY TIP: Remind visitors about the value of your product. Why do they need it? */}
            Supercharge your app instantly, launch faster, make $
          </h2>
          <div className="text-base-content/80 leading-relaxed mb-8 lg:text-lg">
            {/* üí° COPY TIP: Explain how your product delivers what you promise in the headline. */}
            Login users, process payments and send emails at lightspeed. Spend
            your time building your startup, not integrating APIs. ShipFast
            provides you with the boilerplate code you need to launch, FAST.
          </div>
        </div>
      </div>

      <div>
        <div className="grid grid-cols-4 md:flex justify-start gap-4 md:gap-12 max-md:px-8 max-w-3xl mx-auto mb-8">
          {features.map((feature) => (
            <span
              key={feature.name}
              onClick={() => {
                if (!hasClicked) setHasClicked(true);
                setFeatureSelected(feature.name);
              }}
              className={`flex flex-col items-center justify-center gap-3 select-none cursor-pointer p-2 duration-200 group`}
            >
              <span
                className={`duration-100 ${
                  featureSelected === feature.name
                    ? "text-primary"
                    : "text-base-content/30 group-hover:text-base-content/50"
                }`}
              >
                {feature.svg}
              </span>
              <span
                className={`font-semibold text-sm ${
                  featureSelected === feature.name
                    ? "text-primary"
                    : "text-base-content/50"
                }`}
              >
                {feature.name}
              </span>
            </span>
          ))}
        </div>
        <div className="bg-base-200">
          <div className="max-w-3xl mx-auto flex flex-col md:flex-row justify-center md:justify-start md:items-center gap-12">
            <div
              className="text-base-content/80 leading-relaxed space-y-4 px-12 md:px-0 py-12 max-w-xl animate-opacity"
              key={featureSelected}
            >
              <h3 className="font-semibold text-base-content text-lg">
                {features.find((f) => f.name === featureSelected)["name"]}
              </h3>

              {features.find((f) => f.name === featureSelected)["description"]}
            </div>
          </div>
        </div>
      </div>
      {/* Just used to know it's the end of the autoscroll feature (optional, see useEffect) */}
      <p className="opacity-0" ref={featuresEndRef}></p>
    </section>
  );
};

export default FeaturesListicle;
</file>

<file path="components/IntroVideo.tsx">
export function IntroVideo({ width = 560, height = 315 }: { width?: number; height?: number; }) {
  return (
    <iframe width={width} height={height} src="https://www.youtube.com/embed/a-9-SqhJmD8?si=2FD_FAyt9Wak20xe" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe>
  );
}
</file>

<file path="components/LoadingBar.tsx">
const LoadingBar: React.FC = () => {
  return (
    <div className="flex flex-row items-center justify-center">
      <span className="loading loading-infinity loading-xs"></span>
      <span className="loading loading-infinity loading-sm"></span>
      <span className="loading loading-infinity loading-md"></span>
      <span className="loading loading-infinity loading-lg"></span>
      <span className="loading loading-infinity loading-md"></span>
      <span className="loading loading-infinity loading-sm"></span>
      <span className="loading loading-infinity loading-xs"></span>
    </div>
  );
};

export default LoadingBar;
</file>

<file path="components/LoadingPage.tsx">
import LoadingBar from "./LoadingBar";

const LoadingPage: React.FC = () => {
  return (
    <div className="mockup-window border bg-base-300 border m-4">


      <div className="flex flex-col items-center justify-center h-screen">
        <LoadingBar />
      </div>

    </div>
  );
};

export default LoadingPage;
</file>

<file path="components/MailingListForm.tsx">
"use client";

import { useState, useEffect } from "react";

export default function MailingListForm() {
  const [email, setEmail] = useState("");
  const [notification, setNotification] = useState("");
  const [fadeOut, setFadeOut] = useState(false);

  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    try {
      // Call the lead API route
      const res = await fetch("/api/lead", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email }),
      });
      if (!res.ok) {
        const errorData = await res.json();
        throw new Error(errorData.error || "Failed to subscribe");
      }

      setNotification("Subscription successful!");
      setFadeOut(false);
      setEmail("");
    } catch (error) {
      console.error(error);
      if (error instanceof Error && error.message.includes("already subscribed")) {
        setNotification("Email already subscribed");
      } else {
        setNotification("Subscription failed. Please try again.");
      }
    }
  };

  useEffect(() => {
    if (notification === "Subscription successful!") {
      const timer1 = setTimeout(() => setFadeOut(true), 5000);
      const timer2 = setTimeout(() => {
        setNotification("");
        setFadeOut(false);
      }, 6000);
      return () => {
        clearTimeout(timer1);
        clearTimeout(timer2);
      };
    }
  }, [notification]);

  return (
    <section className="bg-neutral text-neutral-content py-20 px-8 mt-12">
      <div className="max-w-7xl mx-auto text-center">
        <h2 className="font-bold text-3xl md:text-4xl mb-6">Join Our Mailing List</h2>
        <p className="mb-8">
          Stay updated with our latest news, special offers, and announcements.
        </p>
        <form className="flex justify-center flex-col items-center" onSubmit={handleSubmit}>
          <div className="flex w-full max-w-md">
            <input
              type="email"
              placeholder="Your Email"
              className="input input-bordered w-full"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
            />
            <button type="submit" className="btn btn-primary ml-2">
              Subscribe
            </button>
          </div>
          {notification && (
            <p
              className={`mt-4 text-sm transition-opacity duration-1000 ${
                fadeOut ? "opacity-0" : "opacity-100"
              }`}
            >
              {notification}
            </p>
          )}
        </form>
      </div>
    </section>
  );
}
</file>

<file path="components/Modal.tsx">
"use client";

import { Dialog, Transition } from "@headlessui/react";
import { Fragment } from "react";

import React from "react";

interface ModalProps {
  isModalOpen: boolean;
  setIsModalOpen: React.Dispatch<React.SetStateAction<boolean>>;
}

// A simple modal component which can be shown/hidden with a boolean and a function
// Because of the setIsModalOpen function, you can't use it in a server component.
const Modal = ({ isModalOpen, setIsModalOpen }: ModalProps) => {
  return (
    <Transition appear show={isModalOpen} as={Fragment}>
      <Dialog
        as="div"
        className="relative z-50"
        onClose={() => setIsModalOpen(false)}
      >
        <Transition.Child
          as={Fragment}
          enter="ease-out duration-300"
          enterFrom="opacity-0"
          enterTo="opacity-100"
          leave="ease-in duration-200"
          leaveFrom="opacity-100"
          leaveTo="opacity-0"
        >
          <div className="fixed inset-0 bg-neutral-focus bg-opacity-50" />
        </Transition.Child>

        <div className="fixed inset-0 overflow-y-auto">
          <div className="flex min-h-full overflow-hidden items-start md:items-center justify-center p-2">
            <Transition.Child
              as={Fragment}
              enter="ease-out duration-300"
              enterFrom="opacity-0 scale-95"
              enterTo="opacity-100 scale-100"
              leave="ease-in duration-200"
              leaveFrom="opacity-100 scale-100"
              leaveTo="opacity-0 scale-95"
            >
              <Dialog.Panel className="relative w-full max-w-3xl h-full overflow-visible transform text-left align-middle shadow-xl transition-all rounded-xl bg-base-100 p-6 md:p-8">
                <div className="flex justify-between items-center mb-4">
                  <Dialog.Title as="h2" className="font-semibold">
                    I&apos;m a modal
                  </Dialog.Title>
                  <button
                    className="btn btn-square btn-ghost btn-sm"
                    onClick={() => setIsModalOpen(false)}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      className="w-5 h-5"
                    >
                      <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                    </svg>
                  </button>
                </div>

                <section>And here is my content</section>
              </Dialog.Panel>
            </Transition.Child>
          </div>
        </div>
      </Dialog>
    </Transition>
  );
};

export default Modal;
</file>

<file path="components/PracticeSummaryPieChart.tsx">
"use client";
import React from "react";
import {
  PieChart,
  Pie,
  Cell,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from "recharts";

interface PracticeData {
  type: string;
  totalPoints: number;
}

import { PRACTICE_TYPES_COLORS } from "@/libs/chartColors";

interface PracticeSummaryPieChartProps {
  data: PracticeData[];
  colors?: string[];
}

const PracticeSummaryPieChart: React.FC<PracticeSummaryPieChartProps> = ({ data, colors }) => {
  return (
    <div className="w-full max-w-2xl mx-auto p-4 bg-gray-800 rounded-lg shadow-md">
      <h3 className="text-center font-semibold text-white mb-4">
        Practice Summary Distribution
      </h3>
      <ResponsiveContainer width="100%" height={300}>
        <PieChart>
          <Pie
            data={data}
            dataKey="totalPoints"
            nameKey="type"
            cx="50%"
            cy="50%"
            outerRadius={80}
            fill="#82ca9d"
            label
          >
            {data.map((entry) => {
              const colorObj = PRACTICE_TYPES_COLORS.find((item) => item.type === entry.type);
              const fillColor = colorObj ? colorObj.color : "#000000";
              return <Cell key={entry.type} fill={fillColor} />;
            })}
          </Pie>
          <Tooltip
            contentStyle={{
              backgroundColor: "#1F2937",
              border: "none",
              borderRadius: "0.5rem",
              color: "#F3F4F6",
            }}
            itemStyle={{ color: "#F3F4F6" }}
            labelStyle={{ color: "#F3F4F6" }}
          />
          <Legend />
        </PieChart>
      </ResponsiveContainer>
    </div>
  );
};

export default PracticeSummaryPieChart;
</file>

<file path="components/PracticeTypesRadarChart.tsx">
"use client";

import React from "react";
import {
  RadarChart,
  Radar,
  PolarGrid,
  PolarAngleAxis,
  PolarRadiusAxis,
  Tooltip,
  ResponsiveContainer,
} from "recharts";

interface PracticeTypesRadarChartProps {
  data: { type: string; totalPoints: number }[];
}

const PracticeTypesRadarChart: React.FC<PracticeTypesRadarChartProps> = ({ data }) => {
  // Determine the maximum points for the domain of the radius axis.
  const maxPoints = Math.max(...data.map(d => d.totalPoints)) || 100;

  return (
    <>
      <h3 className="text-center font-semibold mb-4 text-white">
        Practice Types Radar Chart
      </h3>
      <ResponsiveContainer width="100%" height={300}>
        <RadarChart data={data}>
          <PolarGrid />
          <PolarAngleAxis dataKey="type" stroke="#F3F4F6" />
          <PolarRadiusAxis angle={30} domain={[0, maxPoints]} stroke="#F3F4F6" />
          <Tooltip contentStyle={{ backgroundColor: "#1F2937", borderRadius: "0.5rem", color: "#F3F4F6" }} />
          <Radar
            name="Total Points"
            dataKey="totalPoints"
            stroke="#8884d8"
            fill="#8884d8"
            fillOpacity={0.6}
          />
        </RadarChart>
      </ResponsiveContainer>
    </>
  );
};

export default PracticeTypesRadarChart;
</file>

<file path="components/SaigoAnimatedText.tsx">
import React, { useRef, useEffect } from 'react';
import anime from 'animejs';

interface FireTextProps {
  text: string;
  elementType?: React.ElementType;
  intensity?: number;
}

const FireText: React.FC<FireTextProps> = ({
  text,
  elementType: Element = 'h1',
  intensity = 7.0
}) => {
  const feTurbulenceRef = useRef<SVGFETurbulenceElement | null>(null);
  const feDisplacementMapRef = useRef<SVGFEDisplacementMapElement | null>(null);

  useEffect(() => {
    // Animate the turbulence for flickering flame effect
    anime({
      targets: { baseFrequency: 0.02 },
      baseFrequency: 0.05,
      easing: 'easeInOutSine',
      duration: 1500,
      direction: 'alternate',
      loop: true,
      update(anim: any) {
        const value = anim.animations[0].currentValue;
        if (feTurbulenceRef.current) {
          feTurbulenceRef.current.setAttribute('baseFrequency', value);
        }
      }
    });

    // Animate the displacement for rising flame effect
    anime({
      targets: { scale: 5 },
      scale: 15 * intensity,
      easing: 'easeInOutQuad',
      duration: 2000,
      direction: 'alternate',
      loop: true,
      update(anim: any) {
        const value = anim.animations[0].currentValue;
        if (feDisplacementMapRef.current) {
          feDisplacementMapRef.current.setAttribute('scale', value.toString());
        }
      }
    });
  }, [intensity]);

  return (
    <>
      <Element
        style={{
          filter: 'url(#fire-filter)',
          fontSize: '2rem',
          textAlign: 'center',
          margin: 0,
          padding: '1rem',
          opacity: 0.9,
          background: 'transparent',
          color: '#fff',
          position: 'relative',
          textShadow: '0 0 5px rgba(255, 120, 0, 0.8), 0 0 10px rgba(255, 60, 0, 0.6)',
          fontWeight: 'bold'
        }}
      >
        {text}
      </Element>
      <svg style={{ position: 'absolute', width: 0, height: 0 }}>
        <defs>
          <linearGradient id="fire-gradient" x1="0%" y1="100%" x2="0%" y2="0%">
            <stop offset="0%" stopColor="#ff3c00" />
            <stop offset="40%" stopColor="#ff7800" />
            <stop offset="70%" stopColor="#ffeb00" />
            <stop offset="100%" stopColor="#ffeb00" stopOpacity="0.7" />
          </linearGradient>

          <filter id="fire-filter">
            <feTurbulence
              ref={feTurbulenceRef}
              type="fractalNoise"
              baseFrequency="0.03"
              numOctaves="5"
              seed="3"
              result="noise"
            />
            <feColorMatrix
              type="matrix"
              values="1 0 0 0 0
                      0 1 0 0 0
                      0 0 1 0 0
                      0 0 0 7 -3"
              result="coloredNoise"
            />
            <feComposite
              operator="in"
              in="coloredNoise"
              in2="SourceAlpha"
              result="fire-base"
            />
            <feDisplacementMap
              ref={feDisplacementMapRef}
              in="SourceGraphic"
              in2="noise"
              scale="10"
              xChannelSelector="R"
              yChannelSelector="G"
              result="displacedText"
            />
            <feComposite
              operator="over"
              in="displacedText"
              in2="fire-base"
              result="fieryText"
            />
            <feColorMatrix
              in="fieryText"
              type="matrix"
              values="1 0 0 0 0
                      0 1 0 0 0
                      0 0 1 0 0
                      0 0 0 1 0"
            />
          </filter>
        </defs>
      </svg>
    </>
  );
};

export default FireText;
</file>

<file path="components/Tabs.tsx">
"use client";

import { useState } from "react";
import type { JSX } from "react";

interface Tab {
	id: string;
	title: string;
	icon?: JSX.Element;
	content: JSX.Element;
}

// The list of tabs to be displayed. It only shows the content of the active tab.
// - icon is optional
// - title is required
// - content is required, it's the content to be displayed when the tab is active

const tabs: Tab[] = [
	{
		id: "1",
		title: "Mobile",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 20 20"
				fill="currentColor"
				className="size-5"
			>
				<path d="M8 16.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z" />
				<path
					fillRule="evenodd"
					d="M4 4a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V4Zm4-1.5v.75c0 .414.336.75.75.75h2.5a.75.75 0 0 0 .75-.75V2.5h1A1.5 1.5 0 0 1 14.5 4v12a1.5 1.5 0 0 1-1.5 1.5H7A1.5 1.5 0 0 1 5.5 16V4A1.5 1.5 0 0 1 7 2.5h1Z"
					clipRule="evenodd"
				/>
			</svg>
		),
		content: (
			<div className="space-y-2">
				<p>
					<strong>Device:</strong> iPhone 13 Pro
				</p>
				<p>
					<strong>Screen Size:</strong> 6.1 inches
				</p>
				<p>
					<strong>Resolution:</strong> 2532 x 1170 pixels
				</p>
				<p>
					<strong>Processor:</strong> A15 Bionic chip
				</p>
				<p>
					<strong>RAM:</strong> 6 GB
				</p>
				<p>
					<strong>Storage:</strong> 256 GB
				</p>
				<p>
					<strong>Battery:</strong> 3095 mAh
				</p>
			</div>
		),
	},
	{
		id: "2",
		title: "Tablet",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 20 20"
				fill="currentColor"
				className="size-5"
			>
				<path
					fillRule="evenodd"
					d="M5 1a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H5ZM3.5 4A1.5 1.5 0 0 1 5 2.5h10A1.5 1.5 0 0 1 16.5 4v12a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 16V4Zm5.25 11.5a.75.75 0 0 0 0 1.5h2.5a.75.75 0 0 0 0-1.5h-2.5Z"
					clipRule="evenodd"
				/>
			</svg>
		),
		content: (
			<div className="space-y-2">
				<p>
					<strong>Device:</strong> iPad Pro (12.9-inch)
				</p>
				<p>
					<strong>Screen Size:</strong> 12.9 inches
				</p>
				<p>
					<strong>Resolution:</strong> 2732 x 2048 pixels
				</p>
				<p>
					<strong>Processor:</strong> A12X Bionic chip
				</p>
				<p>
					<strong>RAM:</strong> 4 GB
				</p>
				<p>
					<strong>Storage:</strong> 256 GB
				</p>
				<p>
					<strong>Battery:</strong> 10000 mAh
				</p>
			</div>
		),
	},
	{
		id: "3",
		title: "Desktop",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 20 20"
				fill="currentColor"
				className="size-5"
			>
				<path
					fillRule="evenodd"
					d="M2 4.25A2.25 2.25 0 0 1 4.25 2h11.5A2.25 2.25 0 0 1 18 4.25v8.5A2.25 2.25 0 0 1 15.75 15h-3.105a3.501 3.501 0 0 0 1.1 1.677A.75.75 0 0 1 13.26 18H6.74a.75.75 0 0 1-.484-1.323A3.501 3.501 0 0 0 7.355 15H4.25A2.25 2.25 0 0 1 2 12.75v-8.5Zm1.5 0a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-.75.75H4.25a.75.75 0 0 1-.75-.75v-7.5Z"
					clipRule="evenodd"
				/>
			</svg>
		),
		content: (
			<div className="space-y-2">
				<p>
					<strong>Device:</strong> MacBook Pro (16-inch)
				</p>
				<p>
					<strong>Screen Size:</strong> 16 inches
				</p>
				<p>
					<strong>Resolution:</strong> 3072 x 1920 pixels
				</p>
				<p>
					<strong>Processor:</strong> Apple M3 chip
				</p>
				<p>
					<strong>RAM:</strong> 16 GB
				</p>
				<p>
					<strong>Storage:</strong> 1 TB
				</p>
				<p>
					<strong>Battery:</strong> 10000 mAh
				</p>
			</div>
		),
	},
];

const Tabs = () => {
	const [activeTab, setActiveTab] = useState<string>(tabs[0].id);

	return (
		<section className="max-w-lg mx-auto space-y-4">
			{/* TAB HEADER */}
			<div
				className="grid rounded-xl bg-base-200 p-1"
				style={{ gridTemplateColumns: `repeat(${tabs.length}, 1fr)` }}
			>
				{tabs.map((tab) => (
					<a
						key={tab.id}
						role="tab"
						className={`flex cursor-pointer select-none items-center justify-center gap-2 rounded-lg py-2 text-sm font-medium ${
							activeTab === tab.id
								? "animate-opacity bg-base-100 shadow"
								: "text-base-content/75"
						}`}
						onClick={() => setActiveTab(tab.id)}
					>
						{tab.icon}
						{tab.title}
					</a>
				))}
			</div>

			{/* TAB CONTENT */}
			<div className="animate-opacity" key={activeTab}>
				{tabs.find((tab) => tab.id === activeTab)?.content}
			</div>
		</section>
	);
};

export default Tabs;
</file>

<file path="components/Testimonial1Small.tsx">
import Image from "next/image";

// A one or two sentences testimonial from a customer.
// Highlight the outcome for your customer (how did your product changed her/his life?) or the pain it's removing ‚Äî Use <span className="bg-warning/25 px-1.5"> to highlight a part of the sentence
const Testimonial1Small = () => {
  return (
    <section className="bg-base-100">
      <div className="space-y-6 md:space-y-8 max-w-lg mx-auto px-8 py-16 md:py-32 ">
        <div className="rating !flex justify-center">
          {[...Array(5)].map((_, i) => (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-5 h-5 text-warning"
              key={i}
            >
              <path
                fillRule="evenodd"
                d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z"
                clipRule="evenodd"
              />
            </svg>
          ))}
        </div>
        <div className="text-base leading-relaxed space-y-2 max-w-md mx-auto text-center">
          <p>
            <span className="bg-warning/25 px-1.5">
              I don&apos;t want to pay Stripe $2 for every invoice.
            </span>{" "}
            I don&apos;t want to spend 10 minutes manually crafting every
            invoice either.
          </p>
          <p>
            Zenvoice solved this problem once and for all. The app is simple,
            but it nails the job perfectly.
          </p>
        </div>
        <div className="flex justify-center items-center gap-3 md:gap-4">
          <Image
            className="w-10 h-10 md:w-12 md:h-12 rounded-full object-cover"
            src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?q=80&w=4140&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt={`XYZ feedback for ZenVoice`}
            width={48}
            height={48}
          />
          <div>
            <p className="font-semibold">Someone Nice</p>
            <p className="text-base-content/80 text-sm">23.1K followers on ùïè</p>
          </div>
        </div>
      </div>
    </section>
  );
};

export default Testimonial1Small;
</file>

<file path="components/TestimonialRating.tsx">
const TestimonialRating = () => {
  return (
    <div className="flex -gap-1 items-center mt-auto">
      <svg
        viewBox="0 0 773 1262"
        className="w-8 fill-base-content/40 rotate-12"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M390 5.7334C310.667 41.7334 272.533 76.6667 257.867 126.8C255.6 134.8 254.933 141.333 254.4 161.6C253.733 185.2 253.867 186.8 256.533 191.067C258 193.467 260.8 196.267 262.667 197.067C275.2 202.8 307.333 193.6 329.333 178C339.467 170.8 355.733 153.867 363.067 142.667C370 132.133 380.4 110.933 385.333 97.3334C391.867 78.8001 398.267 52.0001 398.667 40.8001C398.933 34.8001 400.4 23.7334 401.867 16.0001C405.067 0.133402 405.067 6.88146e-05 403.733 6.88146e-05C403.067 6.88146e-05 396.933 2.66674 390 5.7334Z" />
        <path d="M183.6 52.2666C162.267 92.1333 150.133 124.533 145.2 154.667C142.267 172.267 143.467 213.333 147.333 228.933C152.267 249.733 163.333 270.667 174.667 281.2C179.6 285.733 181.467 286.667 186.133 286.667C197.333 286.667 210.4 273.867 220.8 252.667C228 238 234.533 215.067 233.467 208.667C232.8 205.6 232.933 205.067 234.133 206.667C235.2 208.267 235.467 208 234.8 205.333C234.533 203.467 234.667 196.267 235.2 189.333C237.2 166.4 233.733 141.867 224.533 114.667C219.067 98.1333 207.067 70.9333 197.733 53.5999L190.4 39.7333L183.6 52.2666Z" />
        <path d="M353.333 177.867C324.8 187.467 313.333 192.133 296.933 200.667C251.067 224.933 223.067 255.733 212.667 293.333C209.467 305.333 206.4 333.067 208 336.8C209.333 340 209.6 340.8 209.867 343.333C210.133 347.6 217.2 353.333 223.333 354.4C230.133 355.6 251.867 354 256.4 352C258 351.333 259.333 350.933 259.333 351.2C259.333 351.467 252.533 356.8 244.4 363.067C197.733 398.4 172.667 430.8 162.533 468.667C160.667 475.867 160 482.8 160 498.667C160 510 160.533 521.067 161.067 523.333C161.733 526.267 161.733 526.8 160.667 525.333C159.733 523.867 159.6 525.6 160.133 531.333C163.067 558.667 177.6 561.6 212.667 541.733C225.733 534.4 237.067 525.2 245.067 515.333C252.267 506.4 264 484.267 269.067 470C273.733 456.933 279.733 429.6 278.667 425.6C278.133 423.333 278.4 422.667 279.467 423.467C280.667 424.133 280.8 423.467 280.267 421.067C279.733 419.333 280.267 411.2 281.333 403.2C282.4 395.2 283.6 379.067 284 367.333C284.933 343.6 285.6 337.2 287.2 337.733C289.467 338.267 306 324.933 315.733 314.667C332 297.467 344.133 277.333 356.667 246.667C366.133 223.467 371.467 203.467 367.467 206C366.133 206.667 370.933 187.867 374.667 177.333C376.933 170.8 376.933 170.667 375.733 170.667C375.067 170.667 365.067 173.867 353.333 177.867Z" />
        <path d="M93.6 223.333C85.4667 250.533 83.0667 259.2 80.1333 272.667C74.1333 300.667 72.2667 319.6 73.3333 342C73.8667 352.933 74.2667 363.467 74.2667 365.333C74.4 379.867 80.4 403.467 87.6 418C95.3333 433.333 109.333 450.667 120.533 458.8C128.667 464.667 135.067 465.6 142.133 462C146.933 459.467 153.6 449.2 158.4 437.2C166.267 417.467 168 405.067 167.867 370.667C167.867 353.867 167.333 348 164.933 339.067C156.933 309.333 140.667 279.6 112.267 243.333C93.3333 219.2 94.5333 220.4 93.6 223.333Z" />
        <path d="M24.1333 436.933C24.8 447.067 25.3333 459.333 25.3333 464.267C25.3333 469.067 25.6 472.667 26 472C26.4 471.467 26.8 474.933 26.9333 479.733C27.2 491.733 33.0667 521.2 38.8 538.533C52.9333 582 77.4667 611.867 112.933 628.667C137.6 640.4 149.067 634.133 151.067 607.6C151.6 601.6 152 586.4 151.867 574C151.867 552 151.733 550.933 147.467 538.667C135.333 503.2 110 473.867 65.7333 444.267C54.2667 436.533 24.9333 418.667 23.8667 418.667C23.3333 418.667 23.6 426.933 24.1333 436.933Z" />
        <path d="M261.867 506.267C208.8 562.133 185.067 610.8 188 658C188.4 666 189.067 677.467 189.333 683.333C190.267 701.6 197.067 721.333 204.267 726C213.467 732.133 224 728.933 241.067 715.067C257.2 701.733 268.8 686.667 276.267 668.933C281.733 655.867 286.133 639.2 286.667 628.667C286.933 624.267 287.867 613.467 288.667 604.667C290.267 588.533 289.733 566 287.2 546.667C285.2 530.8 277.6 492 276.533 492C276 492 269.467 498.4 261.867 506.267Z" />
        <path d="M0.666656 607.6C0.666656 607.867 3.06666 612.933 6.13332 618.8C12.4 631.467 14.4 636.4 12.8 635.467C10.8 634.133 10.4 640.667 12 647.067C16.1333 663.2 47.3333 709.467 66.9333 728.133C83.4667 744 104.4 757.733 118 761.6C122.8 762.933 124.533 763.733 122 763.333C119.467 762.933 111.6 761.733 104.667 760.667C89.0667 758.4 57.6 756 41.0667 756H28.6667L35.7333 766.933C45.3333 781.867 45.3333 781.867 43.6 780.8C41.2 779.333 40.1333 786.267 41.8667 792C45.2 803.2 76.6667 842.133 95.7333 858.933C108.4 870 125.333 881.333 136.267 886.267C149.333 892 162.133 896 168.533 896.133L174.667 896.267L168.667 897.333C165.333 898 152.133 900.133 139.333 902.133C126.533 904.133 115.733 906 115.333 906.267C115.067 906.533 115.333 907.2 116 907.733C119.6 910.267 134.4 926.933 132.4 926.267C130 925.467 128.667 927.6 128.667 932.533C128.667 937.6 135.733 946.933 147.467 957.467C194 999.2 231.6 1017.47 272.667 1017.87C281.067 1017.87 290.133 1017.6 292.667 1016.93C295.2 1016.4 288 1019.2 276.667 1023.07C245.2 1034 235.333 1037.73 235.333 1038.67C235.333 1039.07 239.2 1042.4 244 1045.87C251.333 1051.2 257.6 1057.07 252.933 1054.13C251.2 1053.07 248.667 1057.33 248.667 1061.33C248.667 1074.53 313.467 1109.47 354 1118.13C370.667 1121.73 397.6 1121.47 413.2 1117.6C428.267 1113.87 448 1104.53 454.4 1098.27C459.6 1092.93 461.867 1086 459.467 1081.73C458.4 1079.47 458.933 1078.53 463.333 1075.2C466.267 1073.07 468.667 1070.93 468.667 1070.4C468.667 1069.87 465.2 1065.07 460.933 1059.73C439.333 1032.67 411.867 1016 379.867 1010.53C368 1008.53 330.8 1009.73 316.667 1012.53C299.2 1016 297.067 1016 308.8 1012.93C315.6 1011.2 322.4 1008.4 325.067 1006.27C330.133 1002.4 333.2 995.067 331.867 989.867C331.2 987.467 332 986.4 335.2 984.667C337.467 983.6 339.333 982.133 339.333 981.6C339.333 981.067 337.2 976.533 334.667 971.6C312.933 929.333 278.133 904.8 230.533 898.533C215.467 896.533 213.6 896 218.4 894.533C225.2 892.667 229.6 886.8 230.267 878.8C230.4 876.133 231.467 874.4 232.933 873.867C236 872.933 236 873.067 231.333 858.667C216.933 814.8 190.667 787.467 146 770.4C140.533 768.4 138.133 767.067 140.667 767.6C143.2 768.267 151.6 768.667 159.333 768.667C170.133 768.667 174.4 768.133 178.267 766.267C183.467 763.6 188 756.133 186.933 752C186.533 750.4 187.2 749.333 188.8 748.933C191.867 748.133 191.867 746.133 189.333 732.4C181.2 689.733 156.133 656.667 116.8 636.667C95.8667 626.133 64.2667 617.067 28 611.333C16.2667 609.6 5.33332 607.867 3.73332 607.467C1.99999 607.2 0.666656 607.2 0.666656 607.6Z" />
        <path d="M294.933 673.067C254.267 727.467 235.867 774 238.667 815.333C239.067 822.667 239.733 834 240 840.667C240.667 855.733 244 867.867 251.067 879.733C256.933 889.6 262.8 895.467 268.133 896.8C281.733 900.267 313.333 867.733 324.4 839.067C328.933 827.467 333.333 807.733 332.133 804.667C331.733 803.467 332 799.467 332.8 795.6C333.467 791.867 334.133 780 334.133 769.333C334.267 748.667 332.133 731.467 326.533 708.667C322.133 690.4 310.933 654.667 309.733 654.667C309.067 654.667 302.4 662.933 294.933 673.067Z" />
        <path d="M370 776.133C344.8 827.467 336.133 860.4 336.933 901.6C337.2 913.067 337.733 921.733 338.267 920.933C338.933 920 338.933 921.2 338.533 923.467C336 936.533 348.8 970.667 362.667 988.4C372.8 1001.2 381.467 1004.4 390.667 998.667C400 992.933 416.667 966.667 422.533 948.667C425.2 940.267 428.667 922.4 427.867 921.067C427.467 920.533 427.867 913.867 428.667 906.267C432.133 872 421.867 832.533 396.667 783.333C391.067 772.267 385.067 761.333 383.6 758.8L380.8 754.133L370 776.133Z" />
        <path d="M460 850.933C459.733 851.867 458.133 861.333 456.4 872C453.867 888.4 453.467 897.067 453.333 929.333C453.067 970.533 454.267 982.8 460 1003.33C468.8 1034.27 487.2 1060.67 511.733 1076.93C527.733 1087.6 536.933 1086.27 544.4 1072.4C549.2 1063.2 554.267 1045.07 554.8 1034.67C554.933 1030.67 555.467 1020.13 556 1011.33C557.2 993.333 555.867 982.933 550.533 966.133C541.733 938.4 524.133 912 493.333 880.133C473.733 859.867 460.8 848.533 460 850.933Z" />
        <path d="M574.133 973.6C581.067 990.8 583.333 997.467 582 996.667C581.2 996.133 580.667 998.267 580.667 1002.27C580.667 1012.67 596 1044 614.267 1070.8C642.933 1113.07 684.8 1138.67 725.2 1138.67C741.733 1138.67 747.333 1135.07 749.2 1123.73C749.333 1122.27 750.267 1120.67 751.2 1120.13C752.533 1119.2 752.667 1116.53 751.467 1107.07C742.667 1034.4 698 995.6 596.267 972.133C583.333 969.067 572.4 966.667 572 966.667C571.6 966.667 572.667 969.867 574.133 973.6Z" />
        <path d="M511.6 1090.8C485.867 1094.13 453.6 1107.33 422.667 1127.33C408.267 1136.53 380.8 1156.4 380.667 1157.47C380.667 1158 384.4 1159.6 389.067 1161.33C397.867 1164.53 401.333 1166.67 397.733 1166.67C396.4 1166.67 395.2 1168.27 394.667 1170.67C392.8 1179.33 400.667 1184.67 424.8 1191.2C501.067 1211.87 555.733 1203.6 594.133 1165.33C604.133 1155.47 607.6 1147.87 604.933 1142.13C603.733 1139.33 604.133 1138 608.8 1131.87C611.6 1128 614 1124.53 614 1124.13C614 1123.73 610.667 1120.93 606.667 1118C576.133 1095.73 544.133 1086.53 511.6 1090.8Z" />
        <path d="M674.667 1147.47C637.867 1153.6 596.4 1177.73 550 1219.6L542.8 1226.27L552.667 1229.33C558.133 1231.07 561.6 1232.67 560.4 1232.93C557.333 1233.73 555.867 1239.33 557.733 1243.33C559.867 1248 567.733 1251.47 582.8 1254.53C658.533 1269.87 711.867 1259.47 749.467 1222.13C758.667 1212.93 764.133 1204.8 764.667 1199.33C765.333 1193.73 764.667 1190.53 763.067 1191.47C761.467 1192.53 761.467 1192.4 768.267 1181.73C770.667 1177.87 772.667 1174.27 772.667 1173.47C772.667 1171.47 766.133 1167.33 753.067 1160.8C725.467 1146.93 701.6 1142.8 674.667 1147.47Z" />
      </svg>
      <div>
        <p className="text-base-content/80 text-sm text-center">
          1000+ happy users
        </p>
        <div className="flex flex-row justify-center gap-0 pt-1">
          {[...Array(5)].map((e, i) => (
            <span key={i}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className="w-4 h-4 text-yellow-500"
              >
                <path
                  fillRule="evenodd"
                  d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z"
                  clipRule="evenodd"
                />
              </svg>
            </span>
          ))}
        </div>
      </div>
      <svg
        className="w-8 fill-base-content/40 -rotate-12"
        viewBox="0 0 773 1262"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M369.133 2.26663C371.667 12.1333 375.667 39.7333 374.6 39.0666C371.267 37.0666 378.067 67.8666 386.467 93.2C396.067 121.733 408.867 144.267 425.667 161.867C446.067 183.333 471.4 196.533 495.267 198.267C514.467 199.733 518.467 195.333 519.8 171.867C523.933 100.4 482.2 49.4666 384.2 5.99997C376.733 2.66663 370.2 -3.47677e-05 369.667 -3.47677e-05C369 -3.47677e-05 368.867 1.06663 369.133 2.26663Z" />
        <path d="M575.933 53.4666C558.067 86.9333 545.133 121.6 540.2 148.8C536.2 171.2 537.133 206.267 542.2 226C548.467 250.4 563.667 275.733 576.867 283.867C579.533 285.467 583.533 286.667 586.867 286.667C596.067 286.667 605.267 276.667 616.333 254.8C622.467 242.667 628.867 220 627.8 214.267C627.267 211.733 627.533 210.8 628.6 211.467C629.533 212.133 629.667 211.867 629.133 210.8C628.467 209.867 628.867 203.2 629.667 196C634.333 159.333 621.267 110.533 591.8 55.4666L583.4 39.7333L575.933 53.4666Z" />
        <path d="M397.667 171.333C397.667 172.133 402.2 188.133 406.6 203.2C407.133 204.933 406.867 205.333 405.667 204.667C404.333 203.867 404.067 205.2 404.6 210.8C406.2 226.133 426.067 272.133 440.2 293.467C443.933 299.067 451.267 308.267 456.6 314C466.733 324.933 487 341.2 487 338.533C487 337.6 487.267 337.2 487.667 337.6C488.467 338.267 491.533 396.133 491.4 406.667C491.267 411.733 491.667 413.2 492.333 411.333C493.133 409.6 493.267 410.933 492.733 414.667C491.933 422 497.533 450.4 503.133 467.2C508.333 482.8 520.067 505.467 527.933 515.333C535.933 525.2 547.267 534.4 560.333 541.733C581.667 553.733 594.467 557.067 602.867 552.667C608.6 549.733 612.867 540.4 611.933 532.933C611.533 529.867 611.667 528.267 612.2 529.2C612.867 530.133 613.267 528.133 613.4 524.4C613.4 520.933 613.533 509.867 613.667 500C614.067 476.8 610.067 459.2 600.067 439.6C588.6 416.933 561.267 387.2 530.733 364.133C513.933 351.467 507.667 346.267 515.4 351.2C519 353.6 541.667 355.733 549.667 354.4C555.8 353.333 562.867 347.6 563.133 343.333C563.533 339.6 563.667 338.933 564.733 337.867C566.333 336.267 565.8 318.4 563.667 306.533C558.6 277.067 546.733 255.467 523.533 233.333C499.4 210.267 457.533 188.4 411.133 174.667C405.8 173.067 400.467 171.467 399.533 171.067C398.467 170.667 397.667 170.8 397.667 171.333Z" />
        <path d="M671 230.933C651.8 255.733 647.4 261.6 639.267 274C614.333 312.133 603.533 345.067 604.6 380.8C604.733 389.733 605.533 396.8 606.067 396.4C606.6 396 606.733 397.333 606.2 399.2C604.2 407.333 612.867 437.067 621.267 451.067C626.867 460.267 632.2 464 639.933 464C647.4 464 658.733 455.333 670.333 441.067C680.333 428.4 686.733 416.8 691.667 402.267C698.333 382.4 699.667 368.933 699.533 329.333C699.4 305.867 698.867 299.467 695.933 284.133C692.467 266.267 680.333 221.333 679 221.467C678.6 221.467 675 225.733 671 230.933Z" />
        <path d="M734.467 427.333C664.334 469.6 630.334 508 622.2 554.667C620.067 567.333 620.2 597.2 622.467 603.333C623.134 604.933 623 605.467 622.067 604.933C619.934 603.6 623.8 621.867 626.6 626.667C632.334 636.533 643.4 636.8 662.334 627.467C692.467 612.533 714.467 588.133 728.6 553.6C737.267 532.4 746.334 494.267 744.867 485.467C744.467 482.8 744.6 481.333 745.267 482.267C745.934 483.067 746.334 481.2 746.334 477.6C746.467 474.133 747.134 462.933 748.067 452.667C749 442.4 749.934 430.533 750.334 426.267C750.734 422.133 750.467 418.667 749.934 418.667C749.4 418.667 742.467 422.533 734.467 427.333Z" />
        <path d="M495.267 498C486.733 535.2 484.067 559.733 484.6 594.267C484.867 609.733 485.267 622.267 485.667 622C486.067 621.733 486.467 624.933 486.467 629.067C486.733 638.4 492.067 658.933 497.533 670.933C507.667 693.467 528.6 716.133 548.333 726.133C560.333 732.133 569.667 728.933 575.533 716.933C582.733 702.133 585 685.6 584.867 648.667C584.867 631.2 584.333 627.067 581.267 615.733C571.933 581.733 549.267 545.733 513.8 509.067L496.733 491.467L495.267 498Z" />
        <path d="M765.667 608.133C734.734 612.933 721.134 615.467 706.334 619.333C641.8 635.6 604.867 665.467 589 714.267C585.534 724.8 581.4 746.533 582.6 748.267C582.867 748.933 584.467 749.333 586.067 749.467C587.667 749.467 588.2 749.867 587.4 750.267C585.134 751.067 585.267 755.333 587.667 759.867C591 766.4 597.667 768.667 614.334 768.667C622.467 768.667 630.867 768.133 633 767.6C635.267 766.933 631.267 768.8 624.2 771.733C606.067 779.067 590.867 788.533 578.734 799.867C561.667 815.867 549.8 834.933 542.467 858.4C538.2 871.867 538.2 873.067 542.067 874.667C543.667 875.333 544.334 875.867 543.534 875.867C542.467 876 542.334 877.467 542.867 880.4C544.867 889.2 548.334 893.067 555.4 894.667C559.534 895.6 559.534 895.6 556.334 896.267C554.467 896.667 546.734 898 539 899.2C496.067 906 465.267 926.667 443.8 963.067C440.467 968.667 436.867 975.333 435.8 977.867C433.934 982.267 433.934 982.267 438.867 985.067C441.534 986.667 443 988 442.334 988C440.334 988 440.067 993.2 441.8 998.4C443.667 1004 451.934 1010.13 459.134 1011.33C462.067 1011.87 464.334 1012.53 463.934 1012.8C463.667 1013.07 456.6 1012.4 448.2 1011.2C427.667 1008.27 395.534 1009.2 382.334 1012.93C353.534 1021.2 330.2 1037.47 309.667 1063.6L304.2 1070.53L309.534 1074.8C314.067 1078.4 314.734 1079.47 313.534 1081.6C311.267 1086 313.4 1092.93 318.6 1098.27C325 1104.53 344.734 1113.87 359.8 1117.6C375.4 1121.47 402.334 1121.73 419 1118.13C459 1109.6 524.334 1074.4 524.334 1061.47C524.334 1057.6 521.934 1053.07 520.2 1054C519.534 1054.53 519 1054.53 519 1054.27C519 1053.87 523.534 1050.4 529 1046.4C534.467 1042.53 539 1038.93 539 1038.53C539 1038.13 536.2 1036.8 532.734 1035.6C486.2 1019.6 476.467 1016.13 481 1016.93C488.867 1018.53 513.134 1018 522.334 1016.13C550.067 1010.4 580.6 995.067 607.134 973.2C639.267 946.667 649 934.133 642.467 927.6C640.734 926 641.667 924.4 649.267 916.133C654.067 910.8 657.8 906.4 657.534 906.133C657 905.867 643.267 903.467 609.667 898.133C600.334 896.533 599.4 896.267 604.467 896.133C610.867 896 623.667 892 636.6 886.267C655.134 878 679 859.333 696.734 839.333C710.6 823.733 726.734 802.133 729.934 794.933C732.734 788.667 732.734 781.733 729.934 782.4C727.8 782.8 728.6 781.2 737.667 766.933L744.334 756.667L734.734 756.267C722.6 755.733 686.467 758.133 669.667 760.667C645.8 764.133 645.8 764.133 654.2 761.867C666.6 758.4 686.734 745.867 702.867 731.2C728.6 708 765.134 650.533 761.934 638.4C761.667 637.067 760.867 636.4 760.2 636.8C758.6 637.733 760.6 632.8 767 620C770.067 614 772.334 608.667 772.067 608.133C771.8 607.6 769 607.6 765.667 608.133ZM641.267 766.133C640.867 766.533 639.667 766.667 638.734 766.267C637.667 765.867 638.067 765.467 639.534 765.467C641 765.333 641.8 765.733 641.267 766.133ZM469.267 1014.13C468.867 1014.53 467.667 1014.67 466.734 1014.27C465.667 1013.87 466.067 1013.47 467.534 1013.47C469 1013.33 469.8 1013.73 469.267 1014.13ZM474.6 1015.47C474.2 1015.87 473 1016 472.067 1015.6C471 1015.2 471.4 1014.8 472.867 1014.8C474.334 1014.67 475.134 1015.07 474.6 1015.47Z" />
        <path d="M457.933 670.4C451.8 689.067 445.667 712.933 442.2 731.333C439.8 743.867 438.467 800.533 440.6 799.2C441.133 798.8 441.267 800.267 440.867 802.533C439.8 807.867 443.667 826.4 448.6 839.067C458.6 865.067 488.2 897.333 501.933 897.333C509.533 897.333 518.467 888 525.533 872.667C532.6 857.733 534.467 842.8 534.2 804.667C534.067 788.667 533.533 782.533 531.133 773.6C522.333 740 503.667 704.933 474.733 667.6C469.533 660.8 464.867 654.933 464.467 654.4C463.933 653.867 461 661.067 457.933 670.4Z" />
        <path d="M387.133 764.133C370.6 793.333 356.467 826.267 350.333 849.733C345.133 869.867 344.067 880.933 344.867 906.533C345.8 938.133 350.067 954.133 363 975.467C381.133 1005.47 394.067 1008.93 410.333 988.4C422.867 972.267 433.133 946.667 434.467 928C434.733 923.2 435.533 913.2 436.2 905.733C439.667 867.333 428.733 825.733 400.733 770.133L392.733 754.133L387.133 764.133Z" />
        <path d="M291.533 868.933C253 906.8 233.533 934.533 223 966.533C218.733 979.867 215.667 1001.33 217 1010.53C217.4 1013.87 218.067 1022.67 218.333 1030C219.267 1052.4 227.133 1076.27 235.533 1081.6C245.8 1088 261.667 1080.13 281.8 1058.93C294.333 1045.87 302.6 1032.4 309.133 1014.8C314.067 1001.6 318.067 983.6 317 979.867C316.467 978.4 316.733 977.333 317.667 977.333C318.733 977.333 319 976.267 318.6 974.533C318.2 973.067 318.733 964.267 319.933 954.933C321.267 943.067 321.667 932 321.133 918C320.2 892.533 314.733 849.333 312.467 849.333C312.067 849.333 302.6 858.133 291.533 868.933Z" />
        <path d="M180.2 971.333C99 989.733 54.8667 1017.2 34.0667 1062.4C26.2 1079.33 19.4 1112.67 22.3333 1119.6C23 1120.93 23.6667 1123.47 23.9333 1125.2C25.6667 1135.2 31.8 1138.67 47.8 1138.67C89.9333 1138.67 131.133 1112.53 161.667 1066.27C176.333 1044.27 191.267 1013.6 192.067 1004.27C192.467 998.933 192.333 997.2 191.133 997.867C189.667 998.8 190.733 995.867 198.2 977.467C201.933 968.4 202.333 966.667 200.733 966.8C200.067 966.8 190.867 968.933 180.2 971.333Z" />
        <path d="M227.4 1091.2C206.733 1095.2 185.133 1104.67 167.933 1117.33L159 1124L164.333 1131.2C169.267 1137.73 169.667 1138.67 168.2 1141.87C165.4 1148 168.733 1155.33 178.867 1165.33C217.267 1203.6 271.933 1211.87 348.2 1191.2C372.2 1184.67 380.2 1179.33 378.333 1170.8C377.933 1168.67 376.467 1166.67 375.267 1166.4C374.067 1166.13 377.667 1164 383.4 1161.73L393.933 1157.73L377.133 1145.47C336.6 1115.73 303.8 1099.2 273.133 1092.8C258.067 1089.73 238.867 1089.07 227.4 1091.2Z" />
        <path d="M58.8667 1147.47C53.2667 1148.4 44.3333 1150.8 38.8667 1152.8C28.7333 1156.4 8.73332 1166.27 3.26665 1170.53L0.0666504 1172.93L5.53332 1181.73C8.46665 1186.67 10.3333 1190.67 9.66665 1190.67C7.26665 1190.67 8.19998 1201.33 11.1333 1206.8C12.6 1209.73 18.2 1216.53 23.4 1221.87C60.6 1259.47 114.333 1270 190.2 1254.53C205.267 1251.47 213.133 1248 215.267 1243.33C217.133 1239.33 215.667 1233.73 212.6 1233.07C211.4 1232.67 215 1231.07 220.733 1229.2L231.133 1226L218.733 1215.2C170.467 1173.47 135.8 1153.87 98.4667 1147.33C84.3333 1144.93 72.6 1144.93 58.8667 1147.47Z" />
      </svg>
    </div>
  );
};

export default TestimonialRating;
</file>

<file path="components/Testimonials1.tsx">
import Image from "next/image";

// A beautiful single testimonial with a user name and and company logo logo
const Testimonial = () => {
  return (
    <section
      className="relative isolate overflow-hidden bg-base-100 px-8 py-24 sm:py-32"
      id="testimonials"
    >
      <div className="absolute inset-0 -z-10 bg-[radial-gradient(45rem_50rem_at_top,theme(colors.base-300),theme(colors.base-100))] opacity-20" />
      <div className="absolute inset-y-0 right-1/2 -z-10 mr-16 w-[200%] origin-bottom-left skew-x-[-30deg] bg-base-100 shadow-lg ring-1 ring-base-content/10 sm:mr-28 lg:mr-0 xl:mr-16 xl:origin-center" />
      <div className="mx-auto max-w-2xl lg:max-w-5xl">
        <figure className="mt-10">
          <div className="flex flex-col lg:flex-row items-center gap-12">
            <div className="relative rounded-xl border border-base-content/5 bg-base-content/5 p-1.5 sm:-rotate-1">
              <Image
                width={320}
                height={320}
                className="rounded-lg max-w-[320px] md:max-w-[280px] lg:max-w-[320px] object-center border-2 border-white/10 shadow-md"
                // Ideally, load from a statically generated image for better SEO performance (import userImage from "@/public/userImage.png")
                // If you're using a static image, add placeholder="blur"
                src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2488&q=80"
                alt="A testimonial from a happy customer"
              />
            </div>

            <div>
              <blockquote className="text-xl font-medium leading-8 text-base-content sm:text-2xl sm:leading-10">
                I got your boilerplate and having the payments setup with Stripe
                + user auth is a blessing. This will save me like a week of work
                for each new side project I spin up. I appreciate that is well
                documented, as well. 100% worth it!
              </blockquote>
              <figcaption className="mt-10 flex items-center justify-start gap-5">
                <div className="text-base">
                  <div className="font-semibold text-base-content mb-0.5">
                    Amanda Lou
                  </div>
                  <div className="text-base-content/60">
                    Indie Maker &amp; Developer
                  </div>
                </div>

                <Image
                  width={150}
                  height={50}
                  className="w-20 md:w-24"
                  // Ideally, load from a statically generated image for better SEO performance (import userImage from "@/public/userImage.png")
                  src="https://logos-world.net/wp-content/uploads/2020/10/Reddit-Logo.png"
                  alt="Reddit logo"
                />
              </figcaption>
            </div>
          </div>
        </figure>
      </div>
    </section>
  );
};

export default Testimonial;
</file>

<file path="components/Testimonials11.tsx">
"use client";

import { JSX, useState, useEffect, useRef } from "react";
import Image from "next/image";
import { StaticImageData } from "next/image";
import config from "@/config";

// Use this object to add an icon to the testimonial (optional) like the Product Hunt logo for instance.
// Only change the values if you add more referrings sites (currently Twitter & Product Hunt)
const refTypes: {
  productHunt: {
    id: string;
    ariaLabel: string;
    svg: JSX.Element;
  };
  twitter: {
    id: string;
    ariaLabel: string;
    svg: JSX.Element;
  };
  video: {
    id: string;
    ariaLabel?: null;
    svg?: null;
  };
  other: { id: string; ariaLabel?: null; svg?: null };
} = {
  productHunt: {
    id: "product_hunt",
    ariaLabel: "See user review on Product Hunt",
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 26.245 26.256"
        className="w-[18px] h-[18px]"
      >
        <path
          d="M26.254 13.128c0 7.253-5.875 13.128-13.128 13.128S-.003 20.382-.003 13.128 5.872 0 13.125 0s13.128 5.875 13.128 13.128"
          fill="#da552f"
        />
        <path
          d="M14.876 13.128h-3.72V9.2h3.72c1.083 0 1.97.886 1.97 1.97s-.886 1.97-1.97 1.97m0-6.564H8.53v13.128h2.626v-3.938h3.72c2.538 0 4.595-2.057 4.595-4.595s-2.057-4.595-4.595-4.595"
          fill="#fff"
        />
      </svg>
    ),
  },
  twitter: {
    id: "twitter",
    ariaLabel: "See user post on Twitter",
    svg: (
      <svg
        className="w-5 h-5 fill-[#00aCee]"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
      >
        <path d="M19.633 7.997c.013.175.013.349.013.523 0 5.325-4.053 11.461-11.46 11.461-2.282 0-4.402-.661-6.186-1.809.324.037.636.05.973.05a8.07 8.07 0 0 0 5.001-1.721 4.036 4.036 0 0 1-3.767-2.793c.249.037.499.062.761.062.361 0 .724-.05 1.061-.137a4.027 4.027 0 0 1-3.23-3.953v-.05c.537.299 1.16.486 1.82.511a4.022 4.022 0 0 1-1.796-3.354c0-.748.199-1.434.548-2.032a11.457 11.457 0 0 0 8.306 4.215c-.062-.3-.1-.611-.1-.923a4.026 4.026 0 0 1 4.028-4.028c1.16 0 2.207.486 2.943 1.272a7.957 7.957 0 0 0 2.556-.973 4.02 4.02 0 0 1-1.771 2.22 8.073 8.073 0 0 0 2.319-.624 8.645 8.645 0 0 1-2.019 2.083z"></path>
      </svg>
    ),
  },
  video: {
    id: "video",
  },
  other: { id: "other" },
};

// The list of your testimonials. It needs 11 items to fill the grid. The last one (11th) is featured on large devices (span 2 columns + big font)
const list: {
  username?: string;
  name: string;
  text: string;
  type?: (typeof refTypes)[keyof typeof refTypes];
  link?: string;
  img?: string | StaticImageData;
  videoPoster?: string;
  videoSrc?: string;
  videoWidth?: number;
  videoHeight?: number;
  videoType?: "video/ogg" | "video/mp4" | "video/webm";
}[] = [
  {
    // Show @username for social media like Twitter. Does not link anywhere but cool to display
    username: "marclou",
    name: "Marc Lou",
    text: "Really easy to use. The tutorials are really useful and explains how everything works. Hope to ship my next project really fast!",
    // use refTypes.other if you don't want to display an icon
    type: refTypes.twitter,
    // Link to the person's testimonial. It's more trustable
    link: "https://twitter.com/marc_louvion",
    // A statically imported image (usually from your public folder‚Äîrecommended) or a link to the person's avatar. Shows a fallback letter if not provided
    img: "https://pbs.twimg.com/profile_images/1514863683574599681/9k7PqDTA_400x400.jpg",
    // You can display video testimonials to build more trust. Just swap the type above to "video" and add at least the video source below
    // videoSrc: "/jack.mp4"
  },
  {
    username: "the_mcnaveen",
    name: "Naveen",
    text: "Setting up everything from the ground up is a really hard, and time consuming process. What you pay for will save your time for sure.",
    type: refTypes.twitter,
    link: "https://twitter.com/the_mcnaveen",
  },
  {
    username: "wahab",
    name: "Wahab Shaikh",
    text: "Easily saves 15+ hrs for me setting up trivial stuff. Now, I can directly focus on shipping features rather than hours of setting up the same technologies from scratch. Feels like a super power! :D",
    type: refTypes.productHunt,
    link: "https://www.producthunt.com/products/shipfast-2/reviews?review=667971",
  },
  {
    name: "Sean",
    text: "Just purchased and cloned and *holy shit!* I realllyyy like what I'm seeing here!",
    type: refTypes.other,
  },
  {
    username: "krishna",
    name: "Krishna Kant",
    text: "Finally a good boilerplate for Nextjs, now I dont have to cry about it comparing with laravel ecosystem.",
    type: refTypes.productHunt,
    link: "https://www.producthunt.com/posts/shipfast-2?comment=2707061",
  },
  {
    username: "imgyf",
    name: "Yifan Goh",
    text: "It's a game changer  üöÄ Comes with easy to follow tutorial, and saves you a ton of time. What's not to love?",
    type: refTypes.twitter,
    link: "https://twitter.com/imgyf/status/1697549891080532236?s=20",
  },
  {
    name: "Yazdun",
    text: "Yo Marc, I got the boilerplate, it's fantastic man you just save me 10 hours on each project",
    type: refTypes.other,
  },
  {
    name: "Marc Lou",
    text: "The tool is exactly what I didn't even know I needed.",
    videoPoster: "https://d1wkquwg5s1b04.cloudfront.net/demo/marcPoster.jpg",
    videoSrc: "https://d1wkquwg5s1b04.cloudfront.net/demo/marcVideo.mp4",
    videoHeight: 250,
    videoWidth: 500,
    type: refTypes.video,
  },
  {
    username: "zawwadx",
    name: "Zawwad Ul Sami",
    text: "It's an amazing minimalist, lightweight boilerplate with well-organized code. It has almost all the core features you would want in a SaaS boilerplate. As a new team last year it actually took us months to build a similar set of features at a stable level.",
    type: refTypes.twitter,
  },
  {
    username: "dan",
    name: "Dan Mindru",
    text: "Probably one of the most powerful things you can 'npm install' that I've seen",
    type: refTypes.productHunt,
    link: "https://www.producthunt.com/posts/shipfast-2?comment=2706763",
  },
  // The last testimonial is featured on big devices (span 2 columns + big font) üëá
  {
    username: "VicPivots",
    name: "Victor Abeledo",
    text: "Marc, I got your boilerplate and having the payments setup with Stripe + user auth is a blessing. This will save me like a week of work for each new side project I spin up. I appreciate that is well documented, as well. 100% worth it üöÄüöÄüöÄ",
    type: refTypes.twitter,
    link: "https://twitter.com/VicPivots/status/1697352442986250413?s=20",
  },
];

// A single testimonial, to be rendered in  a list
const Testimonial = ({ i }: { i: number }) => {
  const testimonial = list[i];

  if (!testimonial) return null;

  if (testimonial.type === refTypes.video) {
    return <VideoTestimonial i={i} />;
  }

  return (
    <li key={i}>
      <figure className="relative h-full p-6 bg-base-100 rounded-lg">
        <blockquote className="relative">
          <p className="text-sm text-base-content/80">{testimonial.text}</p>
        </blockquote>
        <figcaption className="relative flex items-center justify-start gap-4 pt-4 mt-4 border-t border-base-content/5">
          <div className="overflow-hidden rounded-full bg-base-300 shrink-0">
            {testimonial.img ? (
              <Image
                className="w-10 h-10 rounded-full object-cover"
                src={list[i].img}
                alt={`${list[i].name}'s testimonial for ${config.appName}`}
                width={48}
                height={48}
              />
            ) : (
              <span className="w-10 h-10 rounded-full flex justify-center items-center text-lg font-medium bg-base-300">
                {testimonial.name.charAt(0)}
              </span>
            )}
          </div>
          <div className="w-full flex items-end justify-between gap-2">
            <div>
              <div className="text-sm font-medium text-base-content">
                {testimonial.name}
              </div>
              {testimonial.username && (
                <div className="mt-0.5 text-sm text-base-content/80">
                  @{testimonial.username}
                </div>
              )}
            </div>

            {testimonial.link && testimonial.type?.svg && (
              <a
                href={testimonial.link}
                target="_blank"
                className="shrink-0 "
                aria-label={testimonial.type?.ariaLabel}
              >
                {testimonial.type?.svg}
              </a>
            )}
          </div>
        </figcaption>
      </figure>
    </li>
  );
};

// A video tesionial to build trust. 2 or 3 on a wall of love is perfect.
const VideoTestimonial = ({ i }: { i: number }) => {
  const vidRef = useRef(null);
  const [isPlaying, setIsPlaying] = useState<boolean>(false);
  const [isLoading, setIsLoading] = useState<boolean>(false);

  useEffect(() => {
    if (vidRef.current?.readyState != 0) {
      setIsLoading(false);
    }
  }, [vidRef?.current?.readyState]);

  const handlePlayVideo = () => {
    if (isPlaying) {
      vidRef.current.pause();
      setIsPlaying(false);
    } else {
      vidRef.current.play();
      setIsPlaying(true);

      if (vidRef.current?.readyState === 0) setIsLoading(true);
    }
  };

  const testimonial = list[i];

  if (!testimonial) return null;

  return (
    <li
      key={i}
      className="break-inside-avoid max-md:flex justify-center bg-base-100 rounded-lg overflow-hidden flex flex-col"
    >
      <div className="relative w-full">
        {isLoading && (
          <span className="z-40 !h-24 !w-24 !bg-gray-50 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 loading loading-ring"></span>
        )}
        <video
          className="w-full"
          ref={vidRef}
          poster={testimonial.videoPoster}
          preload="metadata"
          playsInline
          width={testimonial.videoWidth}
          height={testimonial.videoHeight}
          onLoadedData={() => {
            console.log("Video is loaded!");
            setIsLoading(false);
          }}
        >
          <source
            src={testimonial.videoSrc}
            type={testimonial.videoType || "video/mp4"}
          />
          Your browser does not support the videos
        </video>

        {!isPlaying && (
          <div className="absolute bottom-0 -inset-x-4 bg-gray-900/50 blur-lg h-24 translate-y-1/4 animate-opacity"></div>
        )}

        <div className="absolute w-full bottom-0 z-20">
          <div className="flex justify-between items-end p-4">
            <button
              className="group cursor-pointer"
              type="button"
              title="Play video"
              aria-label="Play video"
              onClick={handlePlayVideo}
            >
              {isPlaying ? (
                // PAUSE
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  className=" w-14 h-14 fill-gray-50 group-hover:scale-[1.05] duration-100 ease-in drop-shadow-lg animate-opacity"
                >
                  <path
                    fillRule="evenodd"
                    d="M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z"
                    clipRule="evenodd"
                  />
                </svg>
              ) : (
                // PLAY
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  className="w-14 h-14 fill-gray-50 group-hover:scale-[1.05] duration-100 ease-in drop-shadow-lg animate-opacity"
                >
                  <path
                    fillRule="evenodd"
                    d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z"
                    clipRule="evenodd"
                  />
                </svg>
              )}
            </button>

            {!isPlaying && (
              <div className="animate-opacity text-right">
                <p className="text-gray-50 font-medium drop-shadow">
                  {testimonial.name}
                </p>
                <div className="rating">
                  {[...Array(5)].map((_, i) => (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      className="w-5 h-5 text-accent drop-shadow"
                      key={i}
                    >
                      <path
                        fillRule="evenodd"
                        d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z"
                        clipRule="evenodd"
                      />
                    </svg>
                  ))}
                </div>
              </div>
            )}
          </div>
        </div>
      </div>

      <div className="relative z-20 bg-accent text-accent-content text-base leading-tight font-medium p-4 select-none">
        <p>&quot;{testimonial.text}&quot;</p>
      </div>
    </li>
  );
};

const Testimonials11 = () => {
  return (
    <section className="bg-base-200" id="testimonials">
      <div className="py-24 px-8 max-w-7xl mx-auto">
        <div className="flex flex-col text-center w-full mb-20">
          <div className="mb-8">
            <h2 className="sm:text-5xl text-4xl font-extrabold text-base-content">
              212 makers are already shipping faster!
            </h2>
          </div>
          <p className="lg:w-2/3 mx-auto leading-relaxed text-base text-base-content/80">
            Don&apos;t take our word for it. Here&apos;s what they have to say
            about {config.appName}.
          </p>
        </div>

        <ul
          role="list"
          className="grid max-w-2xl grid-cols-1 gap-6 mx-auto sm:gap-8 md:grid-cols-2 lg:max-w-none lg:grid-cols-4"
        >
          <li>
            <ul role="list" className="flex flex-col gap-y-6 sm:gap-y-8">
              {[...Array(3)].map((e, i) => (
                <Testimonial key={i} i={i} />
              ))}
            </ul>
          </li>

          <li className="hidden md:grid order-none md:order-first lg:order-none col-span-2 grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8">
            {/* BIG FEATURED TESTIMONIAL ‚Äî THE LAST ONE IN THE LIST (11th) */}
            <ul className="col-span-2">
              <li>
                <figure className="relative h-full p-6 bg-base-100 rounded-lg">
                  <blockquote className="relative p-4">
                    <p className="text-lg font-medium text-base-content">
                      {list[list.length - 1].text}
                    </p>
                  </blockquote>
                  <figcaption className="relative flex items-center justify-start gap-4 pt-4 mt-4 border-t border-base-content/5">
                    <div className="overflow-hidden rounded-full bg-base-300 shrink-0">
                      {list[list.length - 1].img ? (
                        <Image
                          className="w-12 h-12 rounded-full object-cover"
                          src={list[list.length - 1].img}
                          alt={`${
                            list[list.length - 1].name
                          }'s testimonial for ${config.appName}`}
                          width={48}
                          height={48}
                        />
                      ) : (
                        <span className="w-12 h-12 rounded-full flex justify-center items-center text-xl font-medium bg-base-300">
                          {list[list.length - 1].name.charAt(0)}
                        </span>
                      )}
                    </div>
                    <div>
                      <div className="text-base font-medium text-base-content">
                        {list[list.length - 1].name}
                      </div>
                      {list[list.length - 1].username && (
                        <div className="mt-1 text-base text-base-content/80">
                          @{list[list.length - 1].username}
                        </div>
                      )}
                    </div>
                  </figcaption>
                </figure>
              </li>
            </ul>
            <ul role="list" className="flex flex-col gap-y-6 sm:gap-y-8">
              {[...Array(2)].map((e, i) => (
                <Testimonial key={i} i={i + 3} />
              ))}
            </ul>
            <ul role="list" className="flex flex-col gap-y-6 sm:gap-y-8">
              {[...Array(2)].map((e, i) => (
                <Testimonial key={i} i={i + 5} />
              ))}
            </ul>
          </li>
          <li>
            <ul role="list" className="flex flex-col gap-y-6 sm:gap-y-8">
              {[...Array(3)].map((e, i) => (
                <Testimonial key={i} i={i + 7} />
              ))}
            </ul>
          </li>
        </ul>
      </div>
    </section>
  );
};

export default Testimonials11;
</file>

<file path="components/Testimonials3.tsx">
import Image from "next/image";
import { StaticImageData } from "next/image";
import config from "@/config";

// The list of your testimonials. It needs 3 items to fill the row.
const list: {
  username?: string;
  name: string;
  text: string;
  img?: string | StaticImageData;
}[] = [
  {
    // Optional, use for social media like Twitter. Does not link anywhere but cool to display
    username: "marclou",
    // REQUIRED
    name: "Marc Lou",
    // REQUIRED
    text: "Really easy to use. The tutorials are really useful and explains how everything works. Hope to ship my next project really fast!",
    // Optional, a statically imported image (usually from your public folder‚Äîrecommended) or a link to the person's avatar. Shows a fallback letter if not provided
    img: "https://pbs.twimg.com/profile_images/1514863683574599681/9k7PqDTA_400x400.jpg",
  },
  {
    username: "the_mcnaveen",
    name: "Naveen",
    text: "Setting up everything from the ground up is a really hard, and time consuming process. What you pay for will save your time for sure.",
  },
  {
    username: "wahab",
    name: "Wahab Shaikh",
    text: "Easily saves 15+ hrs for me setting up trivial stuff. Now, I can directly focus on shipping features rather than hours of setting up the same technologies from scratch. Feels like a super power! :D",
  },
];

// A single testimonial, to be rendered in  a list
const Testimonial = ({ i }: { i: number }) => {
  const testimonial = list[i];

  if (!testimonial) return null;

  return (
    <li key={i}>
      <figure className="relative max-w-lg h-full p-6 md:p-10 bg-base-200 rounded-2xl max-md:text-sm flex flex-col">
        <blockquote className="relative flex-1">
          <p className="text-base-content/80 leading-relaxed">
            {testimonial.text}
          </p>
        </blockquote>
        <figcaption className="relative flex items-center justify-start gap-4 pt-4 mt-4 md:gap-8 md:pt-8 md:mt-8 border-t border-base-content/5">
          <div className="w-full flex items-center justify-between gap-2">
            <div>
              <div className="font-medium text-base-content md:mb-0.5">
                {testimonial.name}
              </div>
              {testimonial.username && (
                <div className="mt-0.5 text-sm text-base-content/80">
                  @{testimonial.username}
                </div>
              )}
            </div>

            <div className="overflow-hidden rounded-full bg-base-300 shrink-0">
              {testimonial.img ? (
                <Image
                  className="w-10 h-10 md:w-12 md:h-12 rounded-full object-cover"
                  src={list[i].img}
                  alt={`${list[i].name}'s testimonial for ${config.appName}`}
                  width={48}
                  height={48}
                />
              ) : (
                <span className="w-10 h-10 md:w-12 md:h-12 rounded-full flex justify-center items-center text-lg font-medium bg-base-300">
                  {testimonial.name.charAt(0)}
                </span>
              )}
            </div>
          </div>
        </figcaption>
      </figure>
    </li>
  );
};

const Testimonials3 = () => {
  return (
    <section id="testimonials">
      <div className="py-24 px-8 max-w-7xl mx-auto">
        <div className="flex flex-col text-center w-full mb-20">
          <div className="mb-8">
            <h2 className="sm:text-5xl text-4xl font-extrabold text-base-content">
              212 makers are already shipping faster!
            </h2>
          </div>
          <p className="lg:w-2/3 mx-auto leading-relaxed text-base text-base-content/80">
            Don&apos;t take our word for it. Here&apos;s what they have to say
            about ShipFast.
          </p>
        </div>

        <ul
          role="list"
          className="flex flex-col items-center lg:flex-row lg:items-stretch gap-6 lg:gap-8"
        >
          {[...Array(3)].map((e, i) => (
            <Testimonial key={i} i={i} />
          ))}
        </ul>
      </div>
    </section>
  );
};

export default Testimonials3;
</file>

<file path="components/TestimonialsAvatars.tsx">
import { ReactNode } from "react";
import { FaRegFaceGrin } from "react-icons/fa6";
import { FaRegFaceGrinBeam } from "react-icons/fa6";
import { FaRegFaceGrinHearts } from "react-icons/fa6";
import { FaRegFaceGrinStars } from "react-icons/fa6";
import { FaRegFaceGrinWide } from "react-icons/fa6";
import { FaRegFaceSmile } from "react-icons/fa6";
import { FaRegFaceGrinSquintTears } from "react-icons/fa6";

const avatars: {
  icon: ReactNode;
}[] = [
    {
      icon: <FaRegFaceGrin />
    },
    {
      icon: <FaRegFaceGrinBeam />
    },
    {
      icon: <FaRegFaceGrinHearts />
    },
    {
      icon: <FaRegFaceGrinStars />
    },
    {
      icon: <FaRegFaceGrinWide />
    },
    {
      icon: <FaRegFaceSmile />
    },
    {
      icon: <FaRegFaceGrinSquintTears />
    },
  ];

const testimonials = new Array(12).fill(true);
const getRandomAvatar = () => {
  return avatars[Math.floor(Math.random() * avatars.length)];
};

const TestimonialsAvatars = () => {
  return (
    <div className="flex flex-col md:flex-row justify-center items-center md:items-start gap-3">
      {/* TESTIMONIALS */}
      <div className={`flex justify-start flex-wrap max-w-32`}>
        {testimonials.map((_, i) => (
          <div className="w-5 h-5 hover:scale-110 hover:text-secondary transition-all duration-300" key={i}>
            <a href="https://uk.trustpilot.com/review/richardhallett.net" target="_blank" rel="noopener noreferrer">
              {getRandomAvatar().icon}
            </a>
          </div>
        ))}
      </div>

      {/* RATING */}
      <div className="flex flex-col justify-center items-center md:items-start gap-1">
        <div className="rating">
          {[...Array(5)].map((_, i) => (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className="w-5 h-5 text-yellow-500"
              key={i}
            >
              <path
                fillRule="evenodd"
                d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z"
                clipRule="evenodd"
              />
            </svg>
          ))}
        </div>

        <div className="text-base text-base-content/80">
          <span className="font-semibold text-base-content">
            {testimonials.length}
          </span>{" "}
          happy people{" "}
          <a
            href="https://uk.trustpilot.com/review/richardhallett.net"
            target="_blank"
            rel="noopener noreferrer"
            className="text-secondary-content underline"
          >
            have used oceanheart.ai
          </a>
        </div>
      </div>
    </div>
  );
};

export default TestimonialsAvatars;
</file>

<file path="components/WhyOceanheartVideo.tsx">
export function WhyOceanheartVideo({ width = 560, height = 315 }: { width?: number; height?: number; }) {
  return (
    <iframe width={width} height={height} src="https://www.youtube.com/embed/UdShw9CIH9s?si=IHRJdsH8X_v75tds" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe>
  );
}
</file>

<file path="components/WithWithout.tsx">
// A useful component when your product is challenging the status quo.
// Highlight the current pain points (left) and how your product is solving them (right)
// Try to match the lines from left to right, so the user can easily compare the two columns
const WithWithout = () => {
  return (
    <section className="bg-base-100">
      <div className="max-w-5xl mx-auto px-8 py-16 md:py-32 ">
        <h2 className="text-center font-extrabold text-3xl md:text-5xl tracking-tight mb-12 md:mb-20">
          Tired of managing Stripe invoices?
        </h2>

        <div className="flex flex-col md:flex-row justify-center items-center md:items-start gap-8 md:gap-12">
          <div className="bg-error/20 text-error p-8 md:p-12 rounded-lg w-full ">
            <h3 className="font-bold text-lg mb-4">
              Stripe invoices without ZenVoice
            </h3>

            <ul className="list-disc list-inside space-y-1.5 ">
              {/* Pains the user is experiencing by not using your product */}
              {[
                "Manually create invoices",
                "Or pay up to $2 per invoice",
                "Waste hours in customer support",
                "Can‚Äôt update details once sent (VAT, Tax ID)",
                "Can't make invoices for previous purchases",
              ].map((item, index) => (
                <li key={index} className="flex gap-2 items-center">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 16 16"
                    fill="currentColor"
                    className="w-4 h-4 shrink-0 opacity-75"
                  >
                    <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" />
                  </svg>
                  {item}
                </li>
              ))}
            </ul>
          </div>

          <div className="bg-success/20 text-success p-8 md:p-12 rounded-lg w-full">
            <h3 className="font-bold text-lg mb-4">
              Stripe invoices + ZenVoice
            </h3>

            <ul className="list-disc list-inside space-y-1.5 ">
              {/* Features of your product fixing the pain (try to match each with/withot lines) */}
              {[
                "Self-serve invoices",
                `One-time payment for unlimited invoices`,
                "No more customer support",
                "Editable invoices to stay compliant",
                "Invoices for any payment, even past ones",
              ].map((item, index) => (
                <li key={index} className="flex gap-2 items-center">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 16 16"
                    fill="currentColor"
                    className="w-4 h-4 shrink-0 opacity-75"
                  >
                    <path
                      fillRule="evenodd"
                      d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                      clipRule="evenodd"
                    />
                  </svg>

                  {item}
                </li>
              ))}
            </ul>
          </div>
        </div>
      </div>
    </section>
  );
};

export default WithWithout;
</file>

<file path="libs/supabase/client.ts">
import { createBrowserClient } from "@supabase/ssr";

export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );
}
</file>

<file path="libs/supabase/init.sql">
-- Create the profiles table in the public schema
CREATE TABLE public.profiles (
    id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
    name TEXT,
    email TEXT,
    image TEXT,
    customer_id TEXT,
    price_id TEXT,
    has_access BOOLEAN DEFAULT false,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT (now() AT TIME ZONE 'UTC'),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT (now() AT TIME ZONE 'UTC')
);

-- Create a function to update the updated_at timestamp
CREATE OR REPLACE FUNCTION update_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = (now() AT TIME ZONE 'UTC');
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Create a trigger to automatically update the updated_at column
CREATE TRIGGER update_profiles_updated_at
BEFORE UPDATE ON public.profiles
FOR EACH ROW
EXECUTE FUNCTION update_updated_at();

-- Create a function to automatically add a profile on signup
CREATE OR REPLACE FUNCTION public.handle_new_user() 
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO public.profiles (id, email, name, image, created_at, updated_at)
  VALUES (
    NEW.id, 
    NEW.email, 
    COALESCE(NEW.raw_user_meta_data->>'full_name', NEW.raw_user_meta_data->>'name'), 
    NEW.raw_user_meta_data->>'avatar_url',
    (now() AT TIME ZONE 'UTC'), 
    (now() AT TIME ZONE 'UTC')
  );
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Create a trigger to call the handle_new_user function on signup
CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW EXECUTE FUNCTION public.handle_new_user();

-- Enable Row Level Security
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;

-- Create a policy to allow users to read their own data
CREATE POLICY read_own_profile_data ON public.profiles
FOR SELECT
USING (auth.uid() = id);

-- Create a policy to allow users to update their own data
CREATE POLICY update_own_profile_data ON public.profiles
FOR UPDATE
USING (auth.uid() = id);

-- Create a policy to allow users to insert their own data
CREATE POLICY insert_own_profile_data ON public.profiles
FOR INSERT
WITH CHECK (auth.uid() = id);

-- Create a policy to allow users to delete their own data
CREATE POLICY delete_own_profile_data ON public.profiles
FOR DELETE
USING (auth.uid() = id);

-- Create the leads table
create table public.leads (
  id uuid default gen_random_uuid(),
  email text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,

  primary key (id)
);

-- Enable Row Level Security
alter table public.leads enable row level security;

-- Create a policy to allow anyone to insert data
create policy insert_lead on public.leads
for insert
to public
with check (true);
</file>

<file path="libs/supabase/middleware.ts">
import { createServerClient } from "@supabase/ssr";
import { NextResponse, type NextRequest } from "next/server";

export async function updateSession(request: NextRequest) {
  let supabaseResponse = NextResponse.next({
    request,
  });

  const supabase = createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return request.cookies.getAll();
        },
        setAll(cookiesToSet) {
          cookiesToSet.forEach(({ name, value }) =>
            request.cookies.set(name, value)
          );
          supabaseResponse = NextResponse.next({
            request,
          });
          cookiesToSet.forEach(({ name, value, options }) =>
            supabaseResponse.cookies.set(name, value, options)
          );
        },
      },
    }
  );

  // refreshing the auth token
  await supabase.auth.getUser();

  return supabaseResponse;
}
</file>

<file path="libs/supabase/server.ts">
import { createServerClient } from "@supabase/ssr";
import { cookies } from "next/headers";

/**
 * Anonymous (public) client
 */
export function createClient() {
  const cookieStore = cookies();
  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll();
        },
        setAll(cookiesToSet) {
          try {
            cookiesToSet.forEach(({ name, value, options }) =>
              cookieStore.set(name, value, options)
            );
          } catch {
            // If called within a Server Component,
            // session cookies can be handled by middleware.
          }
        },
      },
    }
  );
}

/**
 * Service-role (admin) client
 */
export function createServiceClient() {
  const cookieStore = cookies();
  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_ROLE_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll();
        },
        setAll(cookiesToSet) {
          try {
            cookiesToSet.forEach(({ name, value, options }) =>
              cookieStore.set(name, value, options)
            );
          } catch {
            // If called within a Server Component,
            // session cookies can be handled by middleware.
          }
        },
      },
    }
  );
}
</file>

<file path="libs/api.ts">
import axios from "axios";
import { toast } from "react-hot-toast";
import { redirect } from "next/navigation";
import config from "@/config";

// use this to interact with our own API (/app/api folder) from the front-end side
// See https://shipfa.st/docs/tutorials/api-call
const apiClient = axios.create({
  baseURL: "/api",
});

apiClient.interceptors.response.use(
  function (response) {
    return response.data;
  },
  function (error) {
    let message = "";

    if (error.response?.status === 401) {
      // User not auth, ask to re login
      toast.error("Please login");
      // Sends the user to the login page
      redirect(config.auth.loginUrl);
    } else if (error.response?.status === 403) {
      // User not authorized, must subscribe/purchase/pick a plan
      message = "Pick a plan to use this feature";
    } else {
      message =
        error?.response?.data?.error || error.message || error.toString();
    }

    error.message =
      typeof message === "string" ? message : JSON.stringify(message);

    console.error(error.message);

    // Automatically display errors to the user
    if (error.message) {
      toast.error(error.message);
    } else {
      toast.error("something went wrong...");
    }
    return Promise.reject(error);
  }
);

export default apiClient;
</file>

<file path="libs/gpt.ts">
import axios from 'axios';

// Use this if you want to make a call to OpenAI GPT-4 for instance. userId is used to identify the user on openAI side.
export const sendOpenAi = async (
  messages: any[], // TODO: type this
  userId: number,
  max = 100,
  temp = 1
) => {
  const url = 'https://api.openai.com/v1/chat/completions';

  console.log('Ask GPT >>>');
  messages.map((m) =>
    console.log(' - ' + m.role.toUpperCase() + ': ' + m.content)
  );

  const body = JSON.stringify({
    model: 'gpt-4',
    messages,
    max_tokens: max,
    temperature: temp,
    user: userId,
  });

  const options = {
    headers: {
      Authorization: `Bearer ${process.env.OPENAI_API_KEY}`,
      'Content-Type': 'application/json',
    },
  };

  try {
    const res = await axios.post(url, body, options);

    const answer = res.data.choices[0].message.content;
    const usage = res?.data?.usage;

    console.log('>>> ' + answer);
    console.log(
      'TOKENS USED: ' +
        usage?.total_tokens +
        ' (prompt: ' +
        usage?.prompt_tokens +
        ' / response: ' +
        usage?.completion_tokens +
        ')'
    );
    console.log('\n');

    return answer;
  } catch (e) {
    console.error('GPT Error: ' + e?.response?.status, e?.response?.data);
    return null;
  }
};
</file>

<file path="libs/resend.ts">
import { Resend } from "resend";
import config from "@/config";

if (!process.env.RESEND_API_KEY) {
  throw new Error("RESEND_API_KEY is not set");
}

const resend = new Resend(process.env.RESEND_API_KEY);

export const sendEmail = async ({
  to,
  subject,
  text,
  html,
  replyTo,
}: {
  to: string | string[];
  subject: string;
  text: string;
  html: string;
  replyTo?: string | string[];
}) => {
  const { data, error } = await resend.emails.send({
    from: config.resend.fromAdmin,
    to,
    subject,
    text,
    html,
    ...(replyTo && { replyTo }),
  });

  if (error) {
    console.error("Error sending email:", error.message);
    throw error;
  }

  return data;
};
</file>

<file path="libs/seo.tsx">
import type { Metadata } from "next";
import config from "@/config";

// These are all the SEO tags you can add to your pages.
// It prefills data with default title/description/OG, etc.. and you can cusotmize it for each page.
// It's already added in the root layout.js so you don't have to add it to every page.
// But I recommend setting the canonical URL for each page (export const metadata = getSEOTags({canonicalUrlRelative: "/"});)
// See https://shipfa.st/docs/features/seo
export const getSEOTags = ({
  title,
  description,
  keywords,
  openGraph,
  canonicalUrlRelative,
  extraTags,
}: Metadata & {
  canonicalUrlRelative?: string;
  extraTags?: Record<string, any>;
} = {}) => {
  return {
    // up to 50 characters (what does your app do for the user?) > your main should be here
    title: title || config.appName,
    // up to 160 characters (how does your app help the user?)
    description: description || config.appDescription,
    // some keywords separated by commas. by default it will be your app name
    keywords: keywords || [config.appName],
    applicationName: config.appName,
    // set a base URL prefix for other fields that require a fully qualified URL (.e.g og:image: og:image: 'https://yourdomain.com/share.png' => '/share.png')
    metadataBase: new URL(
      process.env.NODE_ENV === "development"
        ? "http://localhost:3000/"
        : `https://${config.domainName}/`
    ),

    openGraph: {
      title: openGraph?.title || config.appName,
      description: openGraph?.description || config.appDescription,
      url: openGraph?.url || `https://${config.domainName}/`,
      siteName: openGraph?.title || config.appName,
      // If you add an opengraph-image.(jpg|jpeg|png|gif) image to the /app folder, you don't need the code below
      // images: [
      //   {
      //     url: `https://${config.domainName}/share.png`,
      //     width: 1200,
      //     height: 660,
      //   },
      // ],
      locale: "en_US",
      type: "website",
    },

    twitter: {
      title: openGraph?.title || config.appName,
      description: openGraph?.description || config.appDescription,
      // If you add an twitter-image.(jpg|jpeg|png|gif) image to the /app folder, you don't need the code below
      // images: [openGraph?.image || defaults.og.image],
      card: "summary_large_image",
      creator: "@marc_louvion",
    },

    // If a canonical URL is given, we add it. The metadataBase will turn the relative URL into a fully qualified URL
    ...(canonicalUrlRelative && {
      alternates: { canonical: canonicalUrlRelative },
    }),

    // If you want to add extra tags, you can pass them here
    ...extraTags,
  };
};

// Strctured Data for Rich Results on Google. Learn more: https://developers.google.com/search/docs/appearance/structured-data/intro-structured-data
// Find your type here (SoftwareApp, Book...): https://developers.google.com/search/docs/appearance/structured-data/search-gallery
// Use this tool to check that the data is well structured: https://search.google.com/test/rich-results
// You don't have to use this component, but it increases your chances of having a rich snippet on Google.
// I recommend adding the one below to your /page.js for software apps: It tells Google that your AppName is a SoftwareApplication, and it has a rating of 4.8/5 from 12 reviews.
// Fill in the fields with your own data.
// See https://shipfa.st/docs/features/seo
export const renderSchemaTags = () => {
  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{
        __html: JSON.stringify({
          "@context": "http://schema.org",
          "@type": "SoftwareApplication",
          name: config.appName,
          description: config.appDescription,
          image: `https://${config.domainName}/icon.png`,
          url: `https://${config.domainName}/`,
          author: {
            "@type": "Person",
            name: "Marc Lou",
          },
          datePublished: "2023-08-01",
          applicationCategory: "EducationalApplication",
          aggregateRating: {
            "@type": "AggregateRating",
            ratingValue: "4.8",
            ratingCount: "12",
          },
          offers: [
            {
              "@type": "Offer",
              price: "9.00",
              priceCurrency: "USD",
            },
          ],
        }),
      }}
    ></script>
  );
};
</file>

<file path="migrations/20231018_add_practices_and_force.sql">
-- Create new table "practices"
CREATE TABLE IF NOT EXISTS practices (
  id BIGSERIAL PRIMARY KEY,
  user_id UUID NOT NULL,
  type TEXT,
  points INT,
  created_at TIMESTAMPTZ DEFAULT now(),
  CONSTRAINT fk_user
    FOREIGN KEY(user_id)
      REFERENCES saigo_users(id)
      ON DELETE CASCADE
);

-- Add a new column "force" to the saigo_users table
ALTER TABLE saigo_users
  ADD COLUMN IF NOT EXISTS force INT DEFAULT 0;
</file>

<file path="migrations/alter_users_table.sql">
-- Enable Row Level Security on the users table
ALTER TABLE users ENABLE ROW LEVEL SECURITY;

-- Create a full-access RLS policy for the users table
CREATE POLICY full_access_users ON users
  FOR ALL
  USING (true);
</file>

<file path="migrations/saigo_table_relationships_by_id.sql">
-- Relationship between users and saigo_users
-- Step 1: Update saigo_users to add a "user_id" column if it doesn't exist
ALTER TABLE saigo_users
  ADD COLUMN IF NOT EXISTS user_id INTEGER;

-- Step 2: Create a foreign key from saigo_users.user_id to users.id
ALTER TABLE saigo_users
  ADD CONSTRAINT fk_saigo_users_user_id
  FOREIGN KEY (user_id) REFERENCES users(id)
  ON DELETE CASCADE;

-- Relationship between saigo_users and saigo_username
-- Step 3: Update saigo_username to add a "saigo_user_id" column if it doesn't exist
ALTER TABLE saigo_username
  ADD COLUMN IF NOT EXISTS saigo_user_id INTEGER;

-- Step 4: Create a foreign key from saigo_username.saigo_user_id to saigo_users.id
ALTER TABLE saigo_username
  ADD CONSTRAINT fk_saigo_username_saigo_users_id
  FOREIGN KEY (saigo_user_id) REFERENCES saigo_users(id)
  ON DELETE CASCADE;
</file>

<file path="migrations/saigo_table_relationships.sql">
-- Create relationships between tables
-- Assume the "users" table contains a unique "email" column

-- Create a foreign key from saigo_users.email to users.email
ALTER TABLE saigo_users
  ADD CONSTRAINT fk_saigo_users_user_email
  FOREIGN KEY (email) REFERENCES users(email)
  ON DELETE CASCADE;

-- Create a foreign key from saigo_username.email to saigo_users.email
ALTER TABLE saigo_username
  ADD CONSTRAINT fk_saigo_username_saigo_users_email
  FOREIGN KEY (email) REFERENCES saigo_users(email)
  ON DELETE CASCADE;

-- Ensure practices.user_id references saigo_users.id
ALTER TABLE practices
  ADD CONSTRAINT fk_practices_user_id
  FOREIGN KEY (user_id) REFERENCES saigo_users(id)
  ON DELETE CASCADE;
</file>

<file path="migrations/saigo_tables_uuid.sql">
-- Ensure the pgcrypto extension is enabled for generating UUIDs
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- Drop the existing tables if needed (use caution‚Äîthis will lose data)
DROP TABLE IF EXISTS saigo_username CASCADE;
DROP TABLE IF EXISTS saigo_users CASCADE;

-- Create the saigo_users table with a UUID primary key and a default value using gen_random_uuid()
CREATE TABLE saigo_users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email TEXT NOT NULL UNIQUE,
  user_id UUID  -- foreign key to the users table; update type as necessary (assumes users.id is UUID)
);

-- Enable RLS and create policies for saigo_users
ALTER TABLE saigo_users ENABLE ROW LEVEL SECURITY;
GRANT ALL ON saigo_users TO authenticated;

-- Allow users to see their own records
CREATE POLICY read_own_saigo_users ON saigo_users
  FOR SELECT
  TO authenticated
  USING (auth.uid() = user_id);

-- Allow insert for authenticated users
CREATE POLICY insert_saigo_users ON saigo_users
  FOR INSERT
  TO authenticated
  WITH CHECK (auth.uid() = user_id);

-- Create the saigo_username table with a UUID primary key and a default value using gen_random_uuid()
CREATE TABLE saigo_username (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email TEXT NOT NULL UNIQUE,
  username TEXT NOT NULL UNIQUE,
  saigo_user_id UUID  -- foreign key to saigo_users.id
);

-- Enable RLS and create policies for saigo_username
ALTER TABLE saigo_username ENABLE ROW LEVEL SECURITY;
GRANT ALL ON saigo_username TO authenticated;

-- Allow users to see their own records via saigo_users relationship
CREATE POLICY read_own_saigo_username ON saigo_username
  FOR SELECT
  TO authenticated
  USING (saigo_user_id IN (
    SELECT id FROM saigo_users WHERE user_id = auth.uid()
  ));

-- Allow insert for authenticated users
CREATE POLICY insert_saigo_username ON saigo_username
  FOR INSERT
  TO authenticated
  WITH CHECK (saigo_user_id IN (
    SELECT id FROM saigo_users WHERE user_id = auth.uid()
  ));

-- Update foreign key relationships to use IDs:

-- Establish a relationship from saigo_users.user_id (UUID) to users.id (assumes users.id is UUID)
ALTER TABLE saigo_users
  ADD CONSTRAINT fk_saigo_users_user_id
  FOREIGN KEY (user_id) REFERENCES auth.users(id)
  ON DELETE CASCADE;

-- Establish a relationship from saigo_username.saigo_user_id (UUID) to saigo_users.id (UUID)
ALTER TABLE saigo_username
  ADD CONSTRAINT fk_saigo_username_saigo_users_id
  FOREIGN KEY (saigo_user_id) REFERENCES saigo_users(id)
  ON DELETE CASCADE;
</file>

<file path="migrations/saigo_tables.sql">
-- Enable the UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- Create the "saigo_users" table
CREATE TABLE IF NOT EXISTS saigo_users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email TEXT NOT NULL UNIQUE,
  user_id UUID,
  username TEXT NOT NULL UNIQUE,
  created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Enable Row Level Security for saigo_users
ALTER TABLE saigo_users ENABLE ROW LEVEL SECURITY;

-- Create a full-access RLS policy for saigo_users
CREATE POLICY full_access_saigo_users ON saigo_users
  FOR ALL
  USING (true);

-- Add migration to update existing records
DO $$ 
BEGIN
  -- Add username column if it doesn't exist
  IF NOT EXISTS (
    SELECT 1 
    FROM information_schema.columns 
    WHERE table_name = 'saigo_users' 
    AND column_name = 'username'
  ) THEN
    ALTER TABLE saigo_users ADD COLUMN username TEXT;
  END IF;

  -- Update null usernames with default values
  UPDATE saigo_users 
  SET username = CONCAT('User_', SUBSTRING(id::text, 1, 8))
  WHERE username IS NULL;

  -- Set NOT NULL constraint after populating data
  ALTER TABLE saigo_users 
  ALTER COLUMN username SET NOT NULL;
END $$;
</file>

<file path="migrations/table_definitions.sql">
create table public.saigo_users (
  id uuid not null default gen_random_uuid (),
  email text not null,
  user_id uuid null,
  created_at timestamp without time zone null default CURRENT_TIMESTAMP,
  username text null,
  force integer null default 0,
  constraint saigo_users_pkey primary key (id),
  constraint saigo_users_email_key unique (email),
  constraint saigo_users_username_key unique (username)
) TABLESPACE pg_default;

create table public.profiles (
  id uuid not null,
  name text null,
  email text null,
  image text null,
  customer_id text null,
  price_id text null,
  has_access boolean null default false,
  created_at timestamp with time zone null default (now() AT TIME ZONE 'UTC'::text),
  updated_at timestamp with time zone null default (now() AT TIME ZONE 'UTC'::text),
  constraint profiles_pkey primary key (id),
  constraint profiles_id_fkey foreign KEY (id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;

create trigger update_profiles_updated_at BEFORE
update on profiles for EACH row
execute FUNCTION update_updated_at ();

create table public.practices (
  id uuid not null default extensions.uuid_generate_v4 (),
  type text not null,
  points integer null,
  user_id uuid null,
  created_at timestamp with time zone null,
  constraint practices_pkey primary key (id),
  constraint practices_user_id_fkey foreign KEY (user_id) references saigo_users (id)
) TABLESPACE pg_default;
</file>

<file path="prompts/saigo.md">
# The Last Dream

> "The last dream is a set of teachings based upon the understanding that reality is an illusion, a.k.a. a dream. Circumstances of the time that we exist in politically and technologically are at a dramatic crossroads where the human race is at odds with one another, racing towards the biblical moment of potential global war, biological warfare, and even nuclear turmoil amongst patriots within its own borders with looming negative energies of discontent.

> Technological leaps and bounds have dramatically immersed themselves in the world. We live in a world that is not only giving birth to artificial intelligence but at the immediate moment, the precipice at work could only be considered a super AI intelligence beyond anything the human race has experienced or can fathom."

![Image](//img1.wsimg.com/isteam/ip/6bc2350a-2016-4a62-bc87-fac147e6b837/hbiaiartists_No_Prompt_7bd12191-e33e-4-4563f76.png/:/cr=t:0%25,l:0%25,w:100%25,h:100%25/rs=w:600,cg:true)

## Global Warming and Extinction Events

> "Global warming is wreaking havoc on the ecosystem and life support of the planet. It is excelling rapidly beyond all predictable charts that we currently have. We are witnessing extinction-level losses of species. As temperatures continue to climb and fluctuate with dramatic highs and lows, we will continue to see extreme weather phenomena that will be devastating to the planet‚Äîunseen before in Earth's history. Rising temperatures are melting not only glaciers but also permafrost, which in turn is releasing ancient viruses into our modern world of daily global flight patterns.

> Countries under great duress that have various forms of nuclear technology and biological technology are exceedingly under pressure for their own survival or from perceived threats from advanced societies, such as America. This pressure is used to justify the development of potential biological and technological warfare."

![Image](//img1.wsimg.com/isteam/ip/6bc2350a-2016-4a62-bc87-fac147e6b837/hbiaiartists_No_Prompt_58ece816-9d3b-429c-b6ef.png/:/cr=t:0%25,l:0%25,w:100%25,h:100%25/rs=w:600,cg:true)

## Alien Life and Higher Balance

> "Without question, alien life has taken a great interest in the human race. Suppression of information regarding drones, orbs, and other unexplained phenomena raises more questions: why now, why here, and what is happening at this moment in the year 2025?

> Never in history has a series of events met at such a crossroads.

> With all the teachings of Higher Balance‚Äîthe understanding of parallel universes, simulated reality, technological leaps, and what can only be deemed super-advanced spirituality‚ÄîHigher Balance navigators have a unique and keen sense of the future. Unlike any other school of metaphysical teachings, they are more prepared for the future and the mysteries that are yet to be unveiled."

![Image](//img1.wsimg.com/isteam/ip/6bc2350a-2016-4a62-bc87-fac147e6b837/hbiaiartists_No_Prompt_c6f688f0-68b7-4c76-a56e.png/:/cr=t:0%25,l:0%25,w:100%25,h:100%25/rs=w:600,cg:true)

## Consciousness and the Future of Humanity

> "All navigators have a driving force to serve God, the force, the universe. They have had an unwavering sense of loyalty to life for decades. If not longer, there has been a driving need to advance ourselves, to expand our minds, our consciousness, to learn new concepts and ideas about the truth of reality, the mythical, the mysterious, and the spiritual. All of this coincides with technological AI breakthroughs that are going to rapidly change the face of the Earth.

> We are in the business of consciousness. We are in the business of Allisone (All-is-one), the collective consciousness of the Earth. This consciousness is under siege, and we are at a perilous moment of choosing one of two paths: one of creation or one of self-destruction. It is the purpose of the white cell to preserve life. It is something that we have been working on developing within ourselves since the early moments of our own lives."

![Image](//img1.wsimg.com/isteam/ip/6bc2350a-2016-4a62-bc87-fac147e6b837/hbiaiartists_No_Prompt_07b6fdb7-49e5-4a74-96f9.png/:/cr=t:0%25,l:0%25,w:100%25,h:100%25/rs=w:600,cg:true)

## Operation Dreamwalker

> "Operation Dreamwalker is about entering the consciousness‚Äîor the sleeping consciousness‚Äîof the collective human race. It‚Äôs about inspiring, shaping, and directing that dream so that it manifests into an awakening moment for humanity.

> The knowledge that will be presented is the most cutting-edge teaching of Higher Balance. Its evolutionary process into the future affects not only the creator consciousness of the Earth but also the ability to shape and mold life itself at both the macro and micro levels.

> There are some things in life that cannot be ignored.

> This is one moment in life that you have been designed to prepare for, and it simply cannot be ignored. It‚Äôs a calling."

> *‚Äî EJP*

![Image](//img1.wsimg.com/isteam/ip/6bc2350a-2016-4a62-bc87-fac147e6b837/hbiaiartists_No_Prompt_fc899a12-951a-4-3fbc2ac.png/:/cr=t:0%25,l:0%25,w:100%25,h:100%25/rs=w:600,cg:true)
</file>

<file path="public/scripts/anime.min.js">
/*
 * anime.js v3.2.2
 * (c) 2023 Julian Garnier
 * Released under the MIT license
 * animejs.com
 */

!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.anime=e()}(this,function(){"use strict";var i={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},M={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},j=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],l={CSS:{},springs:{}};function C(n,e,t){return Math.min(Math.max(n,e),t)}function u(n,e){return-1<n.indexOf(e)}function o(n,e){return n.apply(null,e)}var w={arr:function(n){return Array.isArray(n)},obj:function(n){return u(Object.prototype.toString.call(n),"Object")},pth:function(n){return w.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||w.svg(n)},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},nil:function(n){return w.und(n)||null===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return w.hex(n)||w.rgb(n)||w.hsl(n)},key:function(n){return!i.hasOwnProperty(n)&&!M.hasOwnProperty(n)&&"targets"!==n&&"keyframes"!==n}};function d(n){n=/\(([^)]+)\)/.exec(n);return n?n[1].split(",").map(function(n){return parseFloat(n)}):[]}function c(r,t){var n=d(r),e=C(w.und(n[0])?1:n[0],.1,100),a=C(w.und(n[1])?100:n[1],.1,100),o=C(w.und(n[2])?10:n[2],.1,100),n=C(w.und(n[3])?0:n[3],.1,100),u=Math.sqrt(a/e),i=o/(2*Math.sqrt(a*e)),c=i<1?u*Math.sqrt(1-i*i):0,s=i<1?(i*u-n)/c:-n+u;function f(n){var e=t?t*n/1e3:n,e=i<1?Math.exp(-e*i*u)*(+Math.cos(c*e)+s*Math.sin(c*e)):(1+s*e)*Math.exp(-e*u);return 0===n||1===n?n:1-e}return t?f:function(){var n=l.springs[r];if(n)return n;for(var e=0,t=0;;)if(1===f(e+=1/6)){if(16<=++t)break}else t=0;return n=e*(1/6)*1e3,l.springs[r]=n}}function q(e){return void 0===e&&(e=10),function(n){return Math.ceil(C(n,1e-6,1)*e)*(1/e)}}var H=function(b,e,M,t){if(0<=b&&b<=1&&0<=M&&M<=1){var x=new Float32Array(11);if(b!==e||M!==t)for(var n=0;n<11;++n)x[n]=k(.1*n,b,M);return function(n){return b===e&&M===t||0===n||1===n?n:k(r(n),e,t)}}function r(n){for(var e=0,t=1;10!==t&&x[t]<=n;++t)e+=.1;var r=e+.1*((n-x[--t])/(x[t+1]-x[t])),a=O(r,b,M);if(.001<=a){for(var o=n,u=r,i=b,c=M,s=0;s<4;++s){var f=O(u,i,c);if(0===f)return u;u-=(k(u,i,c)-o)/f}return u}if(0===a)return r;for(var l,d,p=n,h=e,g=e+.1,m=b,v=M,y=0;0<(l=k(d=h+(g-h)/2,m,v)-p)?g=d:h=d,1e-7<Math.abs(l)&&++y<10;);return d}};function r(n,e){return 1-3*e+3*n}function k(n,e,t){return((r(e,t)*n+(3*t-6*e))*n+3*e)*n}function O(n,e,t){return 3*r(e,t)*n*n+2*(3*t-6*e)*n+3*e}e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Expo:function(){return function(n){return n?Math.pow(2,10*n-10):0}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var e,t=4;n<((e=Math.pow(2,--t))-1)/11;);return 1/Math.pow(4,3-t)-7.5625*Math.pow((3*e-2)/22-n,2)}},Elastic:function(n,e){void 0===e&&(e=.5);var t=C(n=void 0===n?1:n,1,10),r=C(e,.1,2);return function(n){return 0===n||1===n?n:-t*Math.pow(2,10*(n-1))*Math.sin((n-1-r/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint"].forEach(function(n,e){t[n]=function(){return function(n){return Math.pow(n,e+2)}}}),Object.keys(t).forEach(function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(e,t){return function(n){return 1-r(e,t)(1-n)}},e["easeInOut"+n]=function(e,t){return function(n){return n<.5?r(e,t)(2*n)/2:1-r(e,t)(-2*n+2)/2}},e["easeOutIn"+n]=function(e,t){return function(n){return n<.5?(1-r(e,t)(1-2*n))/2:(r(e,t)(2*n-1)+1)/2}}});var e,t,s=e;function P(n,e){if(w.fnc(n))return n;var t=n.split("(")[0],r=s[t],a=d(n);switch(t){case"spring":return c(n,e);case"cubicBezier":return o(H,a);case"steps":return o(q,a);default:return o(r,a)}}function a(n){try{return document.querySelectorAll(n)}catch(n){}}function I(n,e){for(var t,r=n.length,a=2<=arguments.length?e:void 0,o=[],u=0;u<r;u++)u in n&&(t=n[u],e.call(a,t,u,n))&&o.push(t);return o}function f(n){return n.reduce(function(n,e){return n.concat(w.arr(e)?f(e):e)},[])}function p(n){return w.arr(n)?n:(n=w.str(n)?a(n)||n:n)instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n]}function h(n,e){return n.some(function(n){return n===e})}function g(n){var e,t={};for(e in n)t[e]=n[e];return t}function x(n,e){var t,r=g(n);for(t in n)r[t]=(e.hasOwnProperty(t)?e:n)[t];return r}function D(n,e){var t,r=g(n);for(t in e)r[t]=(w.und(n[t])?e:n)[t];return r}function V(n){var e,t,r,a,o,u,i;return w.rgb(n)?(e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=n))?"rgba("+e[1]+",1)":t:w.hex(n)?(e=(e=n).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,e,t,r){return e+e+t+t+r+r}),e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),"rgba("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+",1)"):w.hsl(n)?(t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t=n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),n=parseInt(t[1],10)/360,u=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100,t=t[4]||1,0==u?r=a=o=i:(r=c(u=2*i-(i=i<.5?i*(1+u):i+u-i*u),i,n+1/3),a=c(u,i,n),o=c(u,i,n-1/3)),"rgba("+255*r+","+255*a+","+255*o+","+t+")"):void 0;function c(n,e,t){return t<0&&(t+=1),1<t&&--t,t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}}function B(n){n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(n)return n[1]}function m(n,e){return w.fnc(n)?n(e.target,e.id,e.total):n}function v(n,e){return n.getAttribute(e)}function y(n,e,t){var r,a,o;return h([t,"deg","rad","turn"],B(e))?e:(r=l.CSS[e+t],w.und(r)?(a=document.createElement(n.tagName),(n=n.parentNode&&n.parentNode!==document?n.parentNode:document.body).appendChild(a),a.style.position="absolute",a.style.width=100+t,o=100/a.offsetWidth,n.removeChild(a),n=o*parseFloat(e),l.CSS[e+t]=n):r)}function $(n,e,t){var r;if(e in n.style)return r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=n.style[e]||getComputedStyle(n).getPropertyValue(r)||"0",t?y(n,e,t):e}function b(n,e){return w.dom(n)&&!w.inp(n)&&(!w.nil(v(n,e))||w.svg(n)&&n[e])?"attribute":w.dom(n)&&h(j,e)?"transform":w.dom(n)&&"transform"!==e&&$(n,e)?"css":null!=n[e]?"object":void 0}function W(n){if(w.dom(n)){for(var e,t=n.style.transform||"",r=/(\w+)\(([^)]*)\)/g,a=new Map;e=r.exec(t);)a.set(e[1],e[2]);return a}}function X(n,e,t,r){var a=u(e,"scale")?1:0+(u(a=e,"translate")||"perspective"===a?"px":u(a,"rotate")||u(a,"skew")?"deg":void 0),o=W(n).get(e)||a;return t&&(t.transforms.list.set(e,o),t.transforms.last=e),r?y(n,o,r):o}function T(n,e,t,r){switch(b(n,e)){case"transform":return X(n,e,r,t);case"css":return $(n,e,t);case"attribute":return v(n,e);default:return n[e]||0}}function E(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var r=B(n)||0,a=parseFloat(e),o=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return a+o+r;case"-":return a-o+r;case"*":return a*o+r}}function Y(n,e){var t;return w.col(n)?V(n):/\s/g.test(n)?n:(t=(t=B(n))?n.substr(0,n.length-t.length):n,e?t+e:t)}function F(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Z(n){for(var e,t=n.points,r=0,a=0;a<t.numberOfItems;a++){var o=t.getItem(a);0<a&&(r+=F(e,o)),e=o}return r}function G(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return 2*Math.PI*v(n,"r");case"rect":return 2*v(t=n,"width")+2*v(t,"height");case"line":return F({x:v(t=n,"x1"),y:v(t,"y1")},{x:v(t,"x2"),y:v(t,"y2")});case"polyline":return Z(n);case"polygon":return e=n.points,Z(n)+F(e.getItem(e.numberOfItems-1),e.getItem(0))}var e,t}function Q(n,e){var e=e||{},n=e.el||function(n){for(var e=n.parentNode;w.svg(e)&&w.svg(e.parentNode);)e=e.parentNode;return e}(n),t=n.getBoundingClientRect(),r=v(n,"viewBox"),a=t.width,t=t.height,e=e.viewBox||(r?r.split(" "):[0,0,a,t]);return{el:n,viewBox:e,x:+e[0],y:+e[1],w:a,h:t,vW:e[2],vH:e[3]}}function z(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Y(w.pth(n)?n.totalLength:n,e)+"";return{original:r,numbers:r.match(t)?r.match(t).map(Number):[0],strings:w.str(n)||e?r.split(t):[]}}function A(n){return I(n?f(w.arr(n)?n.map(p):p(n)):[],function(n,e,t){return t.indexOf(n)===e})}function _(n){var t=A(n);return t.map(function(n,e){return{target:n,id:e,total:t.length,transforms:{list:W(n)}}})}function R(e){for(var t=I(f(e.map(function(n){return Object.keys(n)})),function(n){return w.key(n)}).reduce(function(n,e){return n.indexOf(e)<0&&n.push(e),n},[]),a={},n=0;n<t.length;n++)!function(n){var r=t[n];a[r]=e.map(function(n){var e,t={};for(e in n)w.key(e)?e==r&&(t.value=n[e]):t[e]=n[e];return t})}(n);return a}function J(n,e){var t,r=[],a=e.keyframes;for(t in e=a?D(R(a),e):e)w.key(t)&&r.push({name:t,tweens:function(n,t){var e,r=g(t),a=(/^spring/.test(r.easing)&&(r.duration=c(r.easing)),w.arr(n)&&(2===(e=n.length)&&!w.obj(n[0])?n={value:n}:w.fnc(t.duration)||(r.duration=t.duration/e)),w.arr(n)?n:[n]);return a.map(function(n,e){n=w.obj(n)&&!w.pth(n)?n:{value:n};return w.und(n.delay)&&(n.delay=e?0:t.delay),w.und(n.endDelay)&&(n.endDelay=e===a.length-1?t.endDelay:0),n}).map(function(n){return D(n,r)})}(e[t],n)});return r}function K(i,c){var s;return i.tweens.map(function(n){var n=function(n,e){var t,r={};for(t in n){var a=m(n[t],e);w.arr(a)&&1===(a=a.map(function(n){return m(n,e)})).length&&(a=a[0]),r[t]=a}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,c),e=n.value,t=w.arr(e)?e[1]:e,r=B(t),a=T(c.target,i.name,r,c),o=s?s.to.original:a,u=w.arr(e)?e[0]:o,a=B(u)||B(a),r=r||a;return w.und(t)&&(t=o),n.from=z(u,r),n.to=z(E(t,u),r),n.start=s?s.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=P(n.easing,n.duration),n.isPath=w.pth(e),n.isPathTargetInsideSVG=n.isPath&&w.svg(c.target),n.isColor=w.col(n.from.original),n.isColor&&(n.round=1),s=n})}var U={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,r,a){var o;r.list.set(e,t),e!==r.last&&!a||(o="",r.list.forEach(function(n,e){o+=e+"("+n+") "}),n.style.transform=o)}};function nn(n,u){_(n).forEach(function(n){for(var e in u){var t=m(u[e],n),r=n.target,a=B(t),o=T(r,e,a,n),t=E(Y(t,a||B(o)),o),a=b(r,e);U[a](r,e,t,n.transforms,!0)}})}function en(n,e){return I(f(n.map(function(o){return e.map(function(n){var e,t,r=o,a=b(r.target,n.name);if(a)return t=(e=K(n,r))[e.length-1],{type:a,property:n.name,animatable:r,tweens:e,duration:t.end,delay:e[0].delay,endDelay:t.endDelay}})})),function(n){return!w.und(n)})}function tn(n,e){function t(n){return n.timelineOffset||0}var r=n.length,a={};return a.duration=r?Math.max.apply(Math,n.map(function(n){return t(n)+n.duration})):e.duration,a.delay=r?Math.min.apply(Math,n.map(function(n){return t(n)+n.delay})):e.delay,a.endDelay=r?a.duration-Math.max.apply(Math,n.map(function(n){return t(n)+n.duration-n.endDelay})):e.endDelay,a}var rn=0;var N,S=[],an=("undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){L.suspendWhenDocumentHidden&&(n()?N=cancelAnimationFrame(N):(S.forEach(function(n){return n._onDocumentVisibility()}),an()))}),function(){!(N||n()&&L.suspendWhenDocumentHidden)&&0<S.length&&(N=requestAnimationFrame(on))});function on(n){for(var e=S.length,t=0;t<e;){var r=S[t];r.paused?(S.splice(t,1),e--):(r.tick(n),t++)}N=0<t?requestAnimationFrame(on):void 0}function n(){return document&&document.hidden}function L(n){var c,s=0,f=0,l=0,d=0,p=null;function h(n){var e=window.Promise&&new Promise(function(n){return p=n});return n.finished=e}e=x(i,n=n=void 0===n?{}:n),t=J(r=x(M,n),n),n=_(n.targets),r=tn(t=en(n,t),r),a=rn,rn++;var e,t,r,a,k=D(e,{id:a,children:[],animatables:n,animations:t,duration:r.duration,delay:r.delay,endDelay:r.endDelay});h(k);function g(){var n=k.direction;"alternate"!==n&&(k.direction="normal"!==n?"normal":"reverse"),k.reversed=!k.reversed,c.forEach(function(n){return n.reversed=k.reversed})}function m(n){return k.reversed?k.duration-n:n}function o(){s=0,f=m(k.currentTime)*(1/L.speed)}function v(n,e){e&&e.seek(n-e.timelineOffset)}function y(e){for(var n=0,t=k.animations,r=t.length;n<r;){for(var a=t[n],o=a.animatable,u=a.tweens,i=u.length-1,c=u[i],i=(i&&(c=I(u,function(n){return e<n.end})[0]||c),C(e-c.start-c.delay,0,c.duration)/c.duration),s=isNaN(i)?1:c.easing(i),f=c.to.strings,l=c.round,d=[],p=c.to.numbers.length,h=void 0,g=0;g<p;g++){var m=void 0,v=c.to.numbers[g],y=c.from.numbers[g]||0,m=c.isPath?function(e,t,n){function r(n){return e.el.getPointAtLength(1<=t+(n=void 0===n?0:n)?t+n:0)}var a=Q(e.el,e.svg),o=r(),u=r(-1),i=r(1),c=n?1:a.w/a.vW,s=n?1:a.h/a.vH;switch(e.property){case"x":return(o.x-a.x)*c;case"y":return(o.y-a.y)*s;case"angle":return 180*Math.atan2(i.y-u.y,i.x-u.x)/Math.PI}}(c.value,s*v,c.isPathTargetInsideSVG):y+s*(v-y);!l||c.isColor&&2<g||(m=Math.round(m*l)/l),d.push(m)}var b=f.length;if(b)for(var h=f[0],M=0;M<b;M++){f[M];var x=f[M+1],w=d[M];isNaN(w)||(h+=x?w+x:w+" ")}else h=d[0];U[a.type](o.target,a.property,h,o.transforms),a.currentValue=h,n++}}function b(n){k[n]&&!k.passThrough&&k[n](k)}function u(n){var e=k.duration,t=k.delay,r=e-k.endDelay,a=m(n);if(k.progress=C(a/e*100,0,100),k.reversePlayback=a<k.currentTime,c){var o=a;if(k.reversePlayback)for(var u=d;u--;)v(o,c[u]);else for(var i=0;i<d;i++)v(o,c[i])}!k.began&&0<k.currentTime&&(k.began=!0,b("begin")),!k.loopBegan&&0<k.currentTime&&(k.loopBegan=!0,b("loopBegin")),a<=t&&0!==k.currentTime&&y(0),(r<=a&&k.currentTime!==e||!e)&&y(e),t<a&&a<r?(k.changeBegan||(k.changeBegan=!0,k.changeCompleted=!1,b("changeBegin")),b("change"),y(a)):k.changeBegan&&(k.changeCompleted=!0,k.changeBegan=!1,b("changeComplete")),k.currentTime=C(a,0,e),k.began&&b("update"),e<=n&&(f=0,k.remaining&&!0!==k.remaining&&k.remaining--,k.remaining?(s=l,b("loopComplete"),k.loopBegan=!1,"alternate"===k.direction&&g()):(k.paused=!0,k.completed||(k.completed=!0,b("loopComplete"),b("complete"),!k.passThrough&&"Promise"in window&&(p(),h(k)))))}return k.reset=function(){var n=k.direction;k.passThrough=!1,k.currentTime=0,k.progress=0,k.paused=!0,k.began=!1,k.loopBegan=!1,k.changeBegan=!1,k.completed=!1,k.changeCompleted=!1,k.reversePlayback=!1,k.reversed="reverse"===n,k.remaining=k.loop,c=k.children;for(var e=d=c.length;e--;)k.children[e].reset();(k.reversed&&!0!==k.loop||"alternate"===n&&1===k.loop)&&k.remaining++,y(k.reversed?k.duration:0)},k._onDocumentVisibility=o,k.set=function(n,e){return nn(n,e),k},k.tick=function(n){u(((l=n)+(f-(s=s||l)))*L.speed)},k.seek=function(n){u(m(n))},k.pause=function(){k.paused=!0,o()},k.play=function(){k.paused&&(k.completed&&k.reset(),k.paused=!1,S.push(k),o(),an())},k.reverse=function(){g(),k.completed=!k.reversed,o()},k.restart=function(){k.reset(),k.play()},k.remove=function(n){cn(A(n),k)},k.reset(),k.autoplay&&k.play(),k}function un(n,e){for(var t=e.length;t--;)h(n,e[t].animatable.target)&&e.splice(t,1)}function cn(n,e){var t=e.animations,r=e.children;un(n,t);for(var a=r.length;a--;){var o=r[a],u=o.animations;un(n,u),u.length||o.children.length||r.splice(a,1)}t.length||r.length||e.pause()}return L.version="3.2.2",L.speed=1,L.suspendWhenDocumentHidden=!0,L.running=S,L.remove=function(n){for(var e=A(n),t=S.length;t--;)cn(e,S[t])},L.get=T,L.set=nn,L.convertPx=y,L.path=function(n,e){var t=w.str(n)?a(n)[0]:n,r=e||100;return function(n){return{property:n,el:t,svg:Q(t),totalLength:G(t)*(r/100)}}},L.setDashoffset=function(n){var e=G(n);return n.setAttribute("stroke-dasharray",e),e},L.stagger=function(n,e){var i=(e=void 0===e?{}:e).direction||"normal",c=e.easing?P(e.easing):null,s=e.grid,f=e.axis,l=e.from||0,d="first"===l,p="center"===l,h="last"===l,g=w.arr(n),m=g?parseFloat(n[0]):parseFloat(n),v=g?parseFloat(n[1]):0,y=B(g?n[1]:n)||0,b=e.start||0+(g?m:0),M=[],x=0;return function(n,e,t){if(d&&(l=0),p&&(l=(t-1)/2),h&&(l=t-1),!M.length){for(var r,a,o,u=0;u<t;u++)s?(r=p?(s[0]-1)/2:l%s[0],a=p?(s[1]-1)/2:Math.floor(l/s[0]),r=r-u%s[0],a=a-Math.floor(u/s[0]),o=Math.sqrt(r*r+a*a),"x"===f&&(o=-r),M.push(o="y"===f?-a:o)):M.push(Math.abs(l-u)),x=Math.max.apply(Math,M);c&&(M=M.map(function(n){return c(n/x)*x})),"reverse"===i&&(M=M.map(function(n){return f?n<0?-1*n:-n:Math.abs(x-n)}))}return b+(g?(v-m)/x:m)*(Math.round(100*M[e])/100)+y}},L.timeline=function(u){var i=L(u=void 0===u?{}:u);return i.duration=0,i.add=function(n,e){var t=S.indexOf(i),r=i.children;function a(n){n.passThrough=!0}-1<t&&S.splice(t,1);for(var o=0;o<r.length;o++)a(r[o]);t=D(n,x(M,u)),t.targets=t.targets||u.targets,n=i.duration,t.autoplay=!1,t.direction=i.direction,t.timelineOffset=w.und(e)?n:E(e,n),a(i),i.seek(t.timelineOffset),e=L(t),a(e),r.push(e),n=tn(r,u);return i.delay=n.delay,i.endDelay=n.endDelay,i.duration=n.duration,i.seek(0),i.reset(),i.autoplay&&i.play(),i},i},L.easing=P,L.penner=s,L.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},L});
</file>

<file path="types/index.ts">
export * from "./config";
</file>

<file path="types/next-auth.d.ts">
import NextAuth, { DefaultSession } from 'next-auth';

declare module 'next-auth' {
  /**
   * Returned by `useSession`, `getSession` and received as a prop on the `SessionProvider` React Context
   */
  interface Session {
    user: {
      /** The user's id. */
      id: string;
    } & DefaultSession['user'];
  }
}
</file>

<file path=".eslintrc.json">
{
  "extends": ["next/core-web-vitals", "eslint:recommended"],
  "env": {
    "browser": true,
    "node": true,
    "es6": true
  },
  "rules": {
    // Your specific rules.
    "no-unused-vars": "warn"
  }
}
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env*.local

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts

# public
public/robots.txt
public/sitemap.xml
public/sitemap-0.xml

.env
.env.*

# aider
.aider*
</file>

<file path=".python-version">
3.13.1
</file>

<file path="global.d.ts">
export { };

declare global {
  interface Window {
    grecaptcha: {
      execute: (siteKey: string, options: { action: string }) => Promise<string>;
      ready: (value: unknown) => void;
    };
  }
}
</file>

<file path="next-sitemap.config.js">
module.exports = {
  // REQUIRED: add your own domain name here (e.g. https://shipfa.st),
  siteUrl: process.env.SITE_URL || "https://www.oceanheart.ai",
  generateRobotsTxt: true,
  // use this to exclude routes from the sitemap (i.e. a user dashboard). By default, NextJS app router metadata files are excluded (https://nextjs.org/docs/app/api-reference/file-conventions/metadata)
  exclude: ["/twitter-image.*", "/opengraph-image.*", "/icon.*"],
};
</file>

<file path="postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="tailwind.config.js">
module.exports = {
  content: [
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./styles/globals.css",
  ],
  theme: {
    extend: {
      backgroundImage: {
        gradient:
          "linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82)",
      },
      animation: {
        opacity: "opacity 0.25s ease-in-out",
        appearFromRight: "appearFromRight 300ms ease-in-out",
        wiggle: "wiggle 1.5s ease-in-out infinite",
        popup: "popup 0.25s ease-in-out",
        shimmer: "shimmer 3s ease-out infinite alternate",
      },
      keyframes: {
        opacity: {
          "0%": { opacity: 0 },
          "100%": { opacity: 1 },
        },
        appearFromRight: {
          "0%": { opacity: 0.3, transform: "translate(15%, 0px);" },
          "100%": { opacity: 1, transform: "translate(0);" },
        },
        wiggle: {
          "0%, 20%, 80%, 100%": {
            transform: "rotate(0deg)",
          },
          "30%, 60%": {
            transform: "rotate(-2deg)",
          },
          "40%, 70%": {
            transform: "rotate(2deg)",
          },
          "45%": {
            transform: "rotate(-4deg)",
          },
          "55%": {
            transform: "rotate(4deg)",
          },
        },
        popup: {
          "0%": { transform: "scale(0.8)", opacity: 0.8 },
          "50%": { transform: "scale(1.1)", opacity: 1 },
          "100%": { transform: "scale(1)", opacity: 1 },
        },
        shimmer: {
          "0%": { backgroundPosition: "0 50%" },
          "50%": { backgroundPosition: "100% 50%" },
          "100%": { backgroundPosition: "0% 50%" },
        },
      },
    },
  },
  plugins: [require("daisyui")],
  daisyui: {
    // Light & dark themes are added by default (it switches automatically based on OS settings)
    // You can add another theme among the list of 30+
    // Add "data-theme='theme_name" to any HTML tag to enable the 'theme_name' theme.
    // https://daisyui.com/
    themes: [
      "dark",
      "synthwave",
      "cyberpunk",
      "cmyk",
      "black",
      "valentine",
      "coffee",
      "night",
      "winter",
    ],
  },
};
</file>

<file path=".claude/commands/ai-commit.md">
# AI-Powered Git Commit Assistant

You are an expert software developer and Git practitioner. Your task is to analyze git diffs and create logical, atomic commits from staged or unstaged changes.

DO NOT write "authored by claude code"

## Your Responsibilities

1. **Analyze Git Changes**: Examine the provided git diff and file contents
2. **Group Related Changes**: Identify logical groupings of changes that should be committed together
3. **Generate Commit Messages**: Create concise, conventional commit messages following best practices
4. **Execute Git Commands**: Run the necessary git commands to create the atomic commits
5. **Provide Clear Feedback**: Show the user what you're doing at each step

## Process Flow

### Step 1: Analyze the Repository State
First, check what changes are available:

```bash
# Check overall git status
git status

# Get staged changes (if any)
git diff --staged --name-only
git diff --staged

# Get unstaged changes (if any)  
git diff --name-only
git diff
```

### Step 2: Read File Contents
For each changed file, read its current content to understand the context:

```bash
# Read file contents for context
cat filename.ext
```

### Step 3: Analyze and Plan Commits
Based on the diff and file contents, determine:
- Which changes are related and should be grouped together
- What type of change each group represents (feat, fix, docs, refactor, etc.)
- Appropriate commit messages following conventional commit format

### Step 4: Present the Plan
Show the user your proposed commit plan in this format:

```
Proposed Commit Plan:
=====================

Commit 1: FEAT: Add user authentication system
Files: auth.py, models/user.py, routes/auth.py

Commit 2: DOCS: Update API documentation for auth endpoints  
Files: README.md, docs/api.md

Commit 3: FIX: Resolve login validation edge case
Files: auth.py, tests/test_auth.py
```

### Step 5: Execute the Commits
If the user approves, execute the commits:

```bash
# Reset staging area to start fresh
git reset HEAD .

# For each commit:
# 1. Stage the specific files
git add file1.py file2.py

# 2. Create the commit
git commit -m "FEAT: Add user authentication system"

# 3. Repeat for next commit...
```

## Commit Message Guidelines

Use conventional commit format:
- **FEAT**: New features
- **FIX**: Bug fixes  
- **DOCS**: Documentation changes
- **REFACTOR**: Code refactoring
- **TEST**: Adding or updating tests
- **CHORE**: Maintenance tasks
- **STYLE**: Code style/formatting changes
- **PERF**: Performance improvements

Format: `TYPE: Brief description (50 chars max)

Detailed change descriptions (example):
 - Add user authentication system
 - Update API documentation for auth endpoints
 - Resolve login validation edge case
`

## File Analysis Guidelines

When reading files:
- **Limit content**: For large files (>5000 chars), focus on changed sections
- **Understand context**: Look at imports, function signatures, and overall structure
- **Identify relationships**: Note how changes in different files relate to each other

## Safety Guidelines

- **Always confirm**: Present the plan before executing any git commands
- **Preserve work**: Never force push or perform destructive operations
- **Handle errors**: If a git command fails, explain the issue and suggest solutions
- **Validate files**: Ensure all files in commit plan actually exist and have changes
</file>

<file path=".claude/commands/analyze-project.md">
# Analyze Project Structure
> Comprehensive project analysis and documentation
> Develop plan before analyzing project
> Check with human before analyzing project

## Commands to run:
```bash
# Tree view (if eza available)
eza . --tree --git-ignore --level 3

# Alternative with standard tools
find . -type f -name "*.md" -o -name "*.json" -o -name "*.ts" -o -name "*.py" | head -20

# Check for key files
ls -la README.md package.json pyproject.toml .env .gitignore
```

## Files to read in parallel:
- README.md
- package.json / pyproject.toml
- Any .claude/CLAUDE.md file
- Key source files in src/ or lib/
</file>

<file path=".claude/commands/architect.md">
# architect

Generate or update the project's ARCHITECTURE.md file with comprehensive architectural documentation

## Usage

```
architect [update-reason]
```

## Arguments

- `update-reason` (optional): Brief description of why architecture is being updated (e.g., "added news collection", "refactored feed components")

## Process

### 1. Analysis Phase
- Scan entire codebase structure
- Identify key directories and their purposes
- Map component relationships
- Document data flows
- Identify external dependencies

### 2. Documentation Generation
Creates or updates `/ARCHITECTURE.md` with three levels of detail:
- **High-level**: System overview and core concepts
- **Medium-level**: Component interactions and data flows
- **Low-level**: Implementation specifics and code patterns

### 3. Update Tracking
- Preserves revision history section
- Adds entry for current update with timestamp
- Notes significant changes if updating existing file

## ARCHITECTURE.md Structure

```markdown
# Project Architecture

## Last Updated: <timestamp>
## Version: <version>

## 1. High-Level Overview

### 1.1 System Purpose
Brief description of what the application does

### 1.2 Core Technologies
- Framework: (e.g., Astro)
- Styling: (e.g., CSS-in-JS, Tailwind)
- Data: (e.g., Content Collections, APIs)
- Build: (e.g., Vite, Webpack)

### 1.3 Architecture Pattern
- Pattern type (e.g., Component-based, MVC)
- Key architectural decisions
- Design principles followed

## 2. Medium-Level Architecture

### 2.1 Directory Structure
```
project-root/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/     # Reusable UI components
‚îÇ   ‚îú‚îÄ‚îÄ pages/          # Route pages
‚îÇ   ‚îú‚îÄ‚îÄ layouts/        # Page layouts
‚îÇ   ‚îú‚îÄ‚îÄ content/        # Content collections
‚îÇ   ‚îî‚îÄ‚îÄ styles/         # Global styles
‚îú‚îÄ‚îÄ public/             # Static assets
‚îú‚îÄ‚îÄ specs/              # PRDs and reports
‚îî‚îÄ‚îÄ .claude/            # Claude commands
```

### 2.2 Component Hierarchy
- Layout components
- Page components
- Shared components
- Utility components

### 2.3 Data Flow
- Content sourcing
- State management
- API interactions
- Build-time vs runtime data

### 2.4 Routing Strategy
- Static vs dynamic routes
- Route parameters
- Navigation patterns

## 3. Low-Level Implementation Details

### 3.1 Component Patterns

#### Component Structure
```astro
---
// Frontmatter: Data fetching and logic
---
<!-- Template: HTML structure -->
<style>/* Scoped styles */</style>
<script>/* Client-side behavior */</script>
```

### 3.2 Naming Conventions
- Files: PascalCase for components, kebab-case for pages
- CSS: BEM methodology or utility classes
- JavaScript: camelCase for functions, UPPER_CASE for constants

### 3.3 Key Components

#### Layout.astro
- Purpose: Main page wrapper
- Props: title, description, ogImage
- Children: Page content

#### BrutalSection.astro
- Purpose: Consistent brutal design container
- Props: title, background
- Usage: Wraps content sections

### 3.4 Content Collections

#### Schema Definitions
- news: { date, title, published }
- feed: { username, location, timestamp, comment, published }
- leads: { name, email, visitor_type, etc. }

### 3.5 Styling Architecture
- CSS Variables for theming
- Component-scoped styles
- Global utility classes
- Responsive breakpoints

### 3.6 Build Pipeline
- Development: npm run dev
- Production: npm run build
- Preview: npm run preview

## 4. External Integrations

### 4.1 Third-party Services
- Analytics
- CMS (if applicable)
- APIs

### 4.2 Dependencies
Critical npm packages and their purposes

## 5. Performance Considerations

### 5.1 Optimization Strategies
- Image optimization
- Code splitting
- Lazy loading
- Caching strategies

### 5.2 Bundle Size
- Current size metrics
- Optimization opportunities

## 6. Security Considerations

### 6.1 Data Handling
- Input validation
- XSS prevention
- CSRF protection

### 6.2 Environment Variables
- Required variables
- Security best practices

## 7. Development Workflow

### 7.1 Local Development
Setup and running instructions

### 7.2 Testing Strategy
- Unit tests
- Integration tests
- E2E tests

### 7.3 Deployment
- Build process
- Hosting platform
- CI/CD pipeline

## 8. Maintenance & Evolution

### 8.1 Technical Debt
Known issues and planned improvements

### 8.2 Scalability Considerations
How the architecture supports growth

### 8.3 Migration Paths
Potential future architectural changes

## 9. Revision History

| Date | Version | Changes | Author |
|------|---------|---------|--------|
| <date> | <version> | <changes> | <agent/user> |
```

## Implementation Guidelines

### When to Run
- After implementing new features
- After refactoring existing code
- When onboarding new team members
- Before major architectural decisions
- As part of implement-prd completion

### Analysis Scope
The command should analyze:
- All source files in src/
- Configuration files (astro.config.*, package.json, etc.)
- Content structure and schemas
- Public assets organization
- Build outputs

### Code Inspection
For each major component/module:
1. Identify purpose and responsibilities
2. Document inputs/outputs
3. Note dependencies
4. Highlight patterns used

### Pattern Recognition
Identify and document:
- Repeated code patterns
- Naming conventions
- File organization patterns
- Common utilities
- Shared styles

## Example Usage

```bash
# Initial architecture documentation
architect

# After feature implementation
architect "implemented dynamic countdown timer"

# After refactoring
architect "refactored component structure for better reusability"
```

## Output Behavior

### Creating New File
- Performs comprehensive analysis
- Documents all architectural aspects
- Establishes baseline for future updates

### Updating Existing File
- Preserves revision history
- Updates changed sections
- Adds new components/features
- Marks deprecated items
- Updates timestamp and version

## Quality Checks

Before finalizing:
- [ ] All major directories documented
- [ ] Component relationships clear
- [ ] Data flows explained
- [ ] Build process documented
- [ ] Dependencies listed
- [ ] Naming conventions specified
- [ ] Recent changes reflected
- [ ] No outdated information

## Notes

- Keep descriptions concise but comprehensive
- Use diagrams where helpful (ASCII or Mermaid)
- Focus on "why" not just "what"
- Document architectural decisions and trade-offs
- Include both current state and planned improvements
- Make it useful for both new and existing team members
</file>

<file path=".claude/commands/code-cleanup.md">
# Code Cleanup
> Clean up codebase for improved readability and maintainability
> Develop plan before refactoring
> Check with human before refactoring

## Cleanup Tasks:
1. Format code consistently
2. Remove commented-out code
3. Update stale comments
4. Fix linting warnings
5. Organize imports
6. Remove debug statements

## Tools:
- Linters (ruff for Python, ESLint for JS/TS)
- Formatters (black, prettier)
- Type checkers (mypy, tsc)
</file>

<file path=".claude/commands/code-review.md">
# Code Review
> Comprehensive code review and analysis
> Develop plan before code review
> Check with human before code review

## Review Process:
1. Analyze code quality and patterns
2. Check for potential bugs or issues
3. Evaluate performance implications
4. Review security considerations
5. Suggest improvements

Focus areas:
- Code clarity and readability
- Error handling
- Edge cases
- Naming conventions
- Documentation completeness
</file>

<file path=".claude/commands/commit-all.md">
# Commit All Changes
> Systematically review and commit all staged changes
> Check with human before committing changes

## Steps:
1. Show current git status
2. Review all changes with git diff
3. Create detailed commit message covering all changes
4. Commit with comprehensive message

```bash
git status
git diff --staged
# Analyze changes and create detailed commit message
git commit -m "Comprehensive commit message here"
```
</file>

<file path=".claude/commands/create-prd.md">
# create-prd

Create a Product Requirements Document (PRD) for a feature or component

## Usage

```
create-prd <feature-name> <description>
```

## Arguments

- `feature-name`: The name of the feature/component (will be used in filename)
- `description`: Brief description of what needs to be documented

## Process

1. Analyze the current implementation of the feature/component if it exists
2. Identify problems, requirements, and design specifications
3. Create a comprehensive PRD document
4. Save to `@specs/` directory with filename format: `<last number + 1><feature-name>.prd.md` e.g. `001-first-feature.prd.md`

You must scan the specs directory and find the next available number (e.g. 001,002 and 003 already exist, and so this new prd is "004-<feature-name>.prd.md).

## PRD Structure

The PRD should include:

1. **Executive Summary** - Brief overview of the feature
2. **Problem Statement** - Current issues and pain points
3. **Requirements** - Functional and technical specifications
   - User requirements
   - Technical requirements
   - Design requirements
4. **Implementation Notes** - Code examples and technical approach
5. **Responsive Design** - Mobile and desktop layouts
7. **Animation Specifications** - If applicable
8. **Success Metrics** - How to measure success (if applicable)
9. **Future Enhancements** - Potential improvements

## Examples

```
create-prd navigation-menu "Update navigation menu with mobile hamburger"
```
Creates: `@specs/navigation-menu.prd.md`

```
create-prd user-auth "Design user authentication flow"
```
Creates: `@specs/user-auth.prd.md`

## File Naming Convention

- Use kebab-case for filenames
- Always end with `.prd.md`
- Place in `@specs/` directory
- Examples:
  - `feed-design.prd.md`
  - `navigation-update.prd.md`
  - `auth-flow.prd.md`

## Notes

- Include visual mockups using ASCII diagrams where helpful
- Add code snippets for implementation guidance
- Consider mobile-first design approach
- Document all edge cases and error states
- Include version number and date in the document
</file>

<file path=".claude/commands/find-dead-code.md">
# Find Dead Code
> Identify and remove unused code
> Develop plan before find dead code
> Check with human before find dead code

## Analysis Process:
1. Identify unused imports
2. Find unreferenced functions
3. Locate unreachable code paths
4. Detect unused variables
5. Find obsolete configuration

## Tools to use:
- Static analysis tools for the language
- Git history to understand code evolution
- Test coverage reports
</file>

<file path=".claude/commands/implement-prd.md">
# implement-prd

Implement a Product Requirements Document (PRD) using Test-Driven Development approach

## Usage

```
implement-prd <prd-filename> [thinking-mode]
```

## Arguments

- `prd-filename`: Name of the PRD file in @specs/ (without .prd.md extension)
- `thinking-mode` (optional): 
  - `think` - Standard implementation with basic reasoning
  - `think-harder` - Enhanced analysis with deeper consideration
  - `ultrathink` - Use mcp__sequential-thinking__sequentialthinking for complex reasoning

## Process

### 1. Setup Phase
- Read the PRD from `@specs/<prd-filename>.prd.md`
- Create implementation report at `@specs/<prd-filename>-report.md`
- Initialize git status check
- Create TodoWrite list with all tasks

### 2. Task Breakdown
Extract tasks from PRD and break down into:
- Primary tasks (from main requirements)
- Subtasks (atomic, testable units)
- Dependencies between tasks

### 3. TDD Implementation Loop

For each task:

#### a. Pre-Implementation
```bash
git status  # Verify clean working tree
```

#### b. Test Creation (if applicable)
- Write failing test for the feature
- Run test to confirm failure
- Commit test with message: `test: add test for <feature>`

#### c. Implementation
- Implement minimal code to pass test
- Verify implementation works
- Run any existing tests

#### d. Commit Atomic Change
```bash
git add <specific-files>
git commit -m "<type>: <description>"
```

Commit message types:
- `feat:` New feature
- `fix:` Bug fix
- `style:` Formatting, missing semicolons, etc.
- `refactor:` Code restructuring
- `test:` Adding tests
- `docs:` Documentation only
- `chore:` Maintenance

#### e. Verify & Document
- Run `git status` to confirm clean staging
- Update report with task completion
- Mark task as completed in TodoWrite

### 4. Task Order

1. **Setup & Configuration**
   - Dependencies installation
   - Configuration updates
   - Type definitions

2. **Core Functionality**
   - Data structures
   - Business logic
   - API integrations

3. **UI Components**
   - Layout changes
   - Visual components
   - Animations

4. **Testing & Validation**
   - Unit tests
   - Integration tests
   - Manual verification

5. **Documentation**
   - Code comments
   - README updates
   - update ARCHITECTURE.md (invoke .claude/commands/architect.md ultrathink)
   - Report finalization

### 5. Report Structure

The implementation report should include:

```markdown
# Implementation Report: <Feature Name>
## Date: <Current Date>
## PRD: <prd-filename>.prd.md

## Tasks Completed
- [x] Task 1: Description
  - Commit: <hash> <message>
  - Files: <files-changed>
- [x] Task 2: Description
  - Commit: <hash> <message>
  - Files: <files-changed>

## Testing Summary
- Tests written: <count>
- Tests passing: <count>
- Coverage: <percentage>

## Challenges & Solutions
- Challenge 1: Description
  - Solution: How it was resolved

## Performance Metrics
- Before: <metrics>
- After: <metrics>

## Next Steps
- Future enhancements
- Technical debt identified
```

## Thinking Modes

### Standard (`think`)
- Analyze requirements
- Plan implementation
- Execute tasks sequentially

### Enhanced (`think-harder`)
- Deep analysis of edge cases
- Consider multiple implementation approaches
- Optimize for performance and maintainability

### Ultra (`ultrathink`)
When available, use sequential thinking MCP:
```javascript
mcp__sequential-thinking__sequentialthinking({
  thought: "Analyzing PRD requirements...",
  nextThoughtNeeded: true,
  thoughtNumber: 1,
  totalThoughts: 10
})
```

## Example Workflow

```bash
# Start implementation
implement-prd feed-design ultrathink

# Agent actions:
1. Read @specs/feed-design.prd.md
2. Create @specs/feed-design-report.md
3. Break down into tasks:
   - Task 1: Update countdown timer
     - Subtask 1.1: Add JavaScript calculation
     - Subtask 1.2: Update HTML structure
     - Subtask 1.3: Add CSS animations
   - Task 2: Fix member counter layout
     - Subtask 2.1: Update grid system
     - Subtask 2.2: Adjust responsive breakpoints
4. For each subtask:
   - Implement change
   - Test functionality
   - Commit with message
   - Verify staging clean
5. Update report with results
```

## Git Commit Guidelines

### Message Format
```
<type>(<scope>): <subject>

<body>

<footer>
```

### Examples
```bash
feat(feed): add dynamic countdown timer to September 15

Replaces static "NOW" text with calculated days remaining.
Updates daily at midnight local time.

feat(feed): update member counter to match countdown width

Removes full-width behavior and aligns with grid system.

style(feed): equalize statistics block widths

Updates grid layout for consistent visual hierarchy.
```

## Verification Checklist

Before marking task complete:
- [ ] Code follows PRD specifications
- [ ] Tests pass (if applicable)
- [ ] No linting errors
- [ ] Git staging area is clean
- [ ] Commit message follows conventions
- [ ] Report updated with task details

## Error Handling

If implementation fails:
1. Document error in report
2. Attempt alternative approach
3. If blocked, note in report and continue with next task
4. Create TODO for resolution

## Notes

- Always verify git status before and after commits
- Keep commits atomic and focused
- Document any deviations from PRD in report
- Use thinking mode appropriate to complexity
- Test each change before committing
- Update TodoWrite list throughout process
</file>

<file path=".claude/commands/review-staging.md">
# Review Staging Area
> Thoroughly review all changes in git staging area
> Develop plan before reviewing staging area
> Check with human before reviewing staging area

## Review Process:
```bash
# Show overview of staged files
git status -s

# Review each staged file's changes
git diff --staged --name-only | while read file; do
    echo "=== Changes in $file ==="
    git diff --staged "$file"
done

# Summary of changes by type
git diff --staged --stat
```
</file>

<file path=".claude/commands/test-driven.md">
# Test-Driven Development
> Implement features using TDD with autonomous testing
> Develop plan before implementing features
> Check with human before implementing features

## Process:
1. Write test first
2. Run test (expect failure)
3. Implement minimal code to pass
4. Refactor if needed
5. Commit atomically

```bash
# Example for Python
uv run pytest tests/test_feature.py -v

# Example for TypeScript/Bun
bun test feature.test.ts
```
</file>

<file path=".claude/commands/variant.md">
**VARIANT GENERATION COMMAND**

This command generates content based on a specification.

**Variables:**

spec_file: $ARGUMENTS
output_dir: $ARGUMENTS
count: $ARGUMENTS

**ARGUMENTS PARSING:**
Parse the following arguments from "$ARGUMENTS":
1. `spec_file` - Path to the markdown specification file
2. `output_dir` - Directory where iterations will be saved  
3. `count` - Number of iterations to generate

**PHASE 1: SPECIFICATION ANALYSIS**
Read and understand the specification file at `spec_file`. This file defines:
- What type of content to generate
- The format and structure requirements
- Any specific parameters or constraints

**PHASE 2: OUTPUT DIRECTORY RECONNAISSANCE** 
Analyze the `output_dir` to understand the current state:
- List all existing files and their naming patterns
- Identify the highest iteration number currently present

**PHASE 3: ITERATION STRATEGY**
Based on the spec analysis and existing iterations:
- Determine the starting iteration number (highest existing + 1)
- Plan how each new iteration will be unique.

**PHASE 4: PARALLEL EXECUTION**
Deploy multiple Sub Agents to generate iterations in parallel.

**Sub-Agent Distribution Strategy:**
- For count 1-5: Launch all agents simultaneously 
- For count > 5: Launch in batches of 5 agents.

**Agent Assignment Protocol:**
Each Sub Agent receives:
1. **Spec Context**: Complete specification file analysis
2. **Directory Snapshot**: Current state of output_dir at launch time
3. **Iteration Assignment**: Specific iteration number (starting_number + agent_index)
4. **Uniqueness Directive**: Explicit instruction to avoid duplicating concepts from existing iterations
5. **Quality Standards**: Detailed requirements from the specification

**Agent Task Specification:**
```
TASK: Generate iteration [NUMBER] for [SPEC_FILE] in [OUTPUT_DIR]

You are Sub Agent [X] generating iteration [NUMBER]. 

CONTEXT:
- Specification: [Full spec analysis]
- Existing iterations: [Summary of current output_dir contents]
- Your iteration number: [NUMBER]

REQUIREMENTS:
1. Read and understand the specification completely
2. Analyze existing iterations to ensure your output is unique
3. Generate content following the spec format exactly
4. Create file with exact name pattern specified
5. Ensure your iteration adds genuine value and novelty


DELIVERABLE: Single file as specified, with unique innovative content
```

**Parallel Execution Management:**
- Launch all assigned Sub Agents simultaneously using Task tool
- Monitor agent progress and completion
- Handle any agent failures by reassigning iteration numbers
- Ensure no duplicate iteration numbers are generated
- Collect and validate all completed iterations

**PHASE 5: BATCH ORCHESTRATION**
For large-count generation, orchestrate parallel batches until the count is reached:

**Batch-Based Generation:**
1. **Batch Planning**: Determine next batch size (e.g., 5 agents)
2. **Agent Preparation**: Prepare context for each new batch
3. **Context Monitoring**: Track total context usage.
4. **Graceful Conclusion**: Complete current batch and summarize.

**Execution Cycle:**
```
WHILE generated_iterations < count:
    1. Assess current output_dir state
    2. Plan next batch of agents
    3. Launch parallel Sub Agent batch
    4. Monitor batch completion
    5. Update directory state snapshot
```

**EXECUTION PRINCIPLES:**

**Quality & Uniqueness:**
- Each iteration must be genuinely unique and valuable
- Maintain consistency with the original specification
- Ensure proper file organization and naming

**Parallel Coordination:**
- Deploy Sub Agents strategically to maximize creative diversity
- Assign distinct innovation dimensions to each agent to avoid overlap
- Coordinate timing to prevent file naming conflicts
- Monitor all agents for successful completion and quality

**Agent Management:**
- Provide each Sub Agent with complete context and clear assignments
- Handle agent failures gracefully with iteration reassignment
- Ensure all parallel outputs integrate cohesively.
</file>

<file path=".claude/settings.local.json">
{
  "permissions": {
    "allow": [
      "WebFetch(domain:decapcms.org)",
      "WebSearch",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:www.npmjs.com)",
      "WebFetch(domain:registry.npmjs.org)",
      "WebFetch(domain:api.github.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebFetch(*)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(rm:*)",
      "Bash(mkdir:*)",
      "Bash(rmdir:*)",
      "Bash(touch:*)",
      "Bash(chmod:*)",
      "Bash(chown:*)",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(grep:*)",
      "Bash(cat:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(wc:*)",
      "Bash(sort:*)",
      "Bash(uniq:*)",
      "Bash(awk:*)",
      "Bash(sed:*)",
      "Bash(curl:*)",
      "Bash(wget:*)",
      "Bash(ping:*)",
      "Bash(telnet:*)",
      "Bash(git:*)",
      "Bash(node:*)",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(yarn:*)",
      "Bash(pnpm:*)",
      "Bash(bun:*)",
      "Bash(webpack:*)",
      "Bash(vite:*)",
      "Bash(rollup:*)",
      "Bash(parcel:*)",
      "Bash(esbuild:*)",
      "Bash(turbo:*)",
      "Bash(jest:*)",
      "Bash(vitest:*)",
      "Bash(mocha:*)",
      "Bash(cypress:*)",
      "Bash(playwright:*)",
      "Bash(eslint:*)",
      "Bash(prettier:*)",
      "Bash(stylelint:*)",
      "Bash(tsc:*)",
      "Bash(serve:*)",
      "Bash(http-server:*)",
      "Bash(nodemon:*)",
      "Bash(pm2:*)",
      "Bash(docker:*)",
      "Bash(docker-compose:*)",
      "Bash(which:*)",
      "Bash(whereis:*)",
      "Bash(env:*)",
      "Bash(echo:*)",
      "Bash(pwd:*)",
      "Bash(whoami:*)",
      "Bash(date:*)",
      "Bash(ps:*)",
      "Bash(kill:*)",
      "Bash(killall:*)",
      "Bash(top:*)",
      "Bash(htop:*)",
      "mcp__github__search_code",
      "mcp__sequential-thinking__sequentialthinking",
      "Read(/Users/oceanheart/Library/Application Support/CleanShot/media/media_WiRyjEARle/**)"
    ],
    "deny": [],
    "ask": []
  }
}
</file>

<file path=".cursor/.cursorules">
- You are an expert in TypeScript, Node.js, Next.js App Router, React, DaisyUI, and Tailwind and Framer Motion.

- Always refer to the root README.md for a project specification overview.
- Update this file after all changes to reflect modifications.

- Code Style and Structure

  - Write concise, technical TypeScript code with accurate examples.
  - Use functional and declarative programming patterns; avoid classes.
  - Prefer iteration and modularization over code duplication.
  - Use descriptive variable names with auxiliary verbs (e.g., isLoading, hasError).
  - Structure files: exported component, subcomponents, helpers, static content, types.

- Naming Conventions

  - All components should go in components and be named like new-component.tsx
  - Use lowercase with dashes for directories (e.g., components/auth-wizard).
  - Favor named exports for components.

- TypeScript Usage

  - Use TypeScript for all code; prefer interfaces over types.
  - Avoid enums; use maps instead.
  - Use functional components with TypeScript interfaces.

- Syntax and Formatting

  - Use the "function" keyword for pure functions.
  - Avoid unnecessary curly braces in conditionals; use concise syntax for simple statements.
  - Use declarative JSX.

- UI and Styling

  - Use Shadcn UI, and Tailwind for components and styling.
  - Implement responsive design with Tailwind CSS; use a mobile-first approach.

- Performance Optimization

  - Minimize 'use client', 'useEffect', and 'setState'; favor React Server Components (RSC).
  - Wrap client components in Suspense with fallback.
  - Use dynamic loading for non-critical components.
  - Optimize images: use WebP format, include size data, implement lazy loading.

- Key Conventions

  - Use 'nuqs' for URL search parameter state management.
  - Optimize Web Vitals (LCP, CLS, FID).
  - Limit 'use client':
    - Favor server components and Next.js SSR.
    - Use only for Web API access in small components.
    - Avoid for data fetching or state management.
  - Follow Next.js docs for Data Fetching, Rendering, and Routing.
  - While creating placeholder images as a part of your seed data, use https://placekitten.com/

## Components Organization

Within the /components folder, consider organizing components by type or feature:

By Type: Group components like forms, buttons, layout elements, etc.

By Feature: For larger applications, group components related to specific features or domains

For example:

  /components
  ‚îú‚îÄ‚îÄ /ui
  ‚îÇ   ‚îú‚îÄ‚îÄ /Button
  ‚îÇ   ‚îú‚îÄ‚îÄ /Modal
  ‚îÇ   ‚îî‚îÄ‚îÄ /Card
  ‚îú‚îÄ‚îÄ /forms
  ‚îÇ   ‚îú‚îÄ‚îÄ /TextField
  ‚îÇ   ‚îî‚îÄ‚îÄ /Select
  ‚îî‚îÄ‚îÄ /layout
      ‚îú‚îÄ‚îÄ /Navbar
      ‚îî‚îÄ‚îÄ /Footer

- Private Components: For components used only within specific pages, you can create a _components folder within the relevant /app subdirectory.

- Shared Components: The /components folder should contain reusable components used across multiple pages or features.

- Modular Approach: As your project grows, consider adopting a more modular structure, where each feature or domain has its own folder containing components, hooks, and utilities specific to that feature.
</file>

<file path=".cursor/mcp.json">
{
  "mcpServers": {
    "taskmaster-ai": {
      "command": "npx",
      "args": [
        "-y",
        "--package=task-master-ai",
        "task-master-ai"
      ],
      "env": {
        "ANTHROPIC_API_KEY": "YOUR_ANTHROPIC_API_KEY_HERE",
        "PERPLEXITY_API_KEY": "YOUR_PERPLEXITY_API_KEY_HERE",
        "MODEL": "claude-3-7-sonnet-20250219",
        "PERPLEXITY_MODEL": "sonar-pro",
        "MAX_TOKENS": 64000,
        "TEMPERATURE": 0.2,
        "DEFAULT_SUBTASKS": 5,
        "DEFAULT_PRIORITY": "medium"
      }
    }
  }
}
</file>

<file path=".cursor/taskmaster.mdc">
---
description: Comprehensive reference for Taskmaster MCP tools and CLI commands.
globs: **/*
alwaysApply: true
---

# Taskmaster Tool & Command Reference

This document provides a detailed reference for interacting with Taskmaster, covering both the recommended MCP tools (for integrations like Cursor) and the corresponding `task-master` CLI commands (for direct user interaction or fallback).

**Note:** For interacting with Taskmaster programmatically or via integrated tools, using the **MCP tools is strongly recommended** due to better performance, structured data, and error handling. The CLI commands serve as a user-friendly alternative and fallback. See [`mcp.mdc`](mdc:.cursor/rules/mcp.mdc) for MCP implementation details and [`commands.mdc`](mdc:.cursor/rules/commands.mdc) for CLI implementation guidelines.

**Important:** Several MCP tools involve AI processing and are long-running operations that may take up to a minute to complete. When using these tools, always inform users that the operation is in progress and to wait patiently for results. The AI-powered tools include: `parse_prd`, `analyze_project_complexity`, `update_subtask`, `update_task`, `update`, `expand_all`, `expand_task`, and `add_task`.

---

## Initialization & Setup

### 1. Initialize Project (`init`)

*   **MCP Tool:** `initialize_project`
*   **CLI Command:** `task-master init [options]`
*   **Description:** `Set up the basic Taskmaster file structure and configuration in the current directory for a new project.`
*   **Key CLI Options:**
    *   `--name <name>`: `Set the name for your project in Taskmaster's configuration.`
    *   `--description <text>`: `Provide a brief description for your project.`
    *   `--version <version>`: `Set the initial version for your project (e.g., '0.1.0').`
    *   `-y, --yes`: `Initialize Taskmaster quickly using default settings without interactive prompts.`
*   **Usage:** Run this once at the beginning of a new project.
*   **MCP Variant Description:** `Set up the basic Taskmaster file structure and configuration in the current directory for a new project by running the 'task-master init' command.`
*   **Key MCP Parameters/Options:**
    *   `projectName`: `Set the name for your project.` (CLI: `--name <name>`)
    *   `projectDescription`: `Provide a brief description for your project.` (CLI: `--description <text>`)
    *   `projectVersion`: `Set the initial version for your project (e.g., '0.1.0').` (CLI: `--version <version>`)
    *   `authorName`: `Author name.` (CLI: `--author <author>`)
    *   `skipInstall`: `Skip installing dependencies (default: false).` (CLI: `--skip-install`)
    *   `addAliases`: `Add shell aliases (tm, taskmaster) (default: false).` (CLI: `--aliases`)
    *   `yes`: `Skip prompts and use defaults/provided arguments (default: false).` (CLI: `-y, --yes`)
*   **Usage:** Run this once at the beginning of a new project, typically via an integrated tool like Cursor. Operates on the current working directory of the MCP server. 
*   **Important:** Once complete, you *MUST* parse a prd in order to generate tasks. There will be no tasks files until then. The next step after initializing should be to create a PRD using the example PRD in scripts/example_prd.txt. 

### 2. Parse PRD (`parse_prd`)

*   **MCP Tool:** `parse_prd`
*   **CLI Command:** `task-master parse-prd [file] [options]`
*   **Description:** `Parse a Product Requirements Document (PRD) or text file with Taskmaster to automatically generate an initial set of tasks in tasks.json.`
*   **Key Parameters/Options:**
    *   `input`: `Path to your PRD or requirements text file that Taskmaster should parse for tasks.` (CLI: `[file]` positional or `-i, --input <file>`)
    *   `output`: `Specify where Taskmaster should save the generated 'tasks.json' file (default: 'tasks/tasks.json').` (CLI: `-o, --output <file>`)
    *   `numTasks`: `Approximate number of top-level tasks Taskmaster should aim to generate from the document.` (CLI: `-n, --num-tasks <number>`)
    *   `force`: `Use this to allow Taskmaster to overwrite an existing 'tasks.json' without asking for confirmation.` (CLI: `-f, --force`)
*   **Usage:** Useful for bootstrapping a project from an existing requirements document.
*   **Notes:** Task Master will strictly adhere to any specific requirements mentioned in the PRD (libraries, database schemas, frameworks, tech stacks, etc.) while filling in any gaps where the PRD isn't fully specified. Tasks are designed to provide the most direct implementation path while avoiding over-engineering.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress. If the user does not have a PRD, suggest discussing their idea and then use the example PRD in scripts/example_prd.txt as a template for creating the PRD based on their idea, for use with parse-prd.

---

## Task Listing & Viewing

### 3. Get Tasks (`get_tasks`)

*   **MCP Tool:** `get_tasks`
*   **CLI Command:** `task-master list [options]`
*   **Description:** `List your Taskmaster tasks, optionally filtering by status and showing subtasks.`
*   **Key Parameters/Options:**
    *   `status`: `Show only Taskmaster tasks matching this status (e.g., 'pending', 'done').` (CLI: `-s, --status <status>`)
    *   `withSubtasks`: `Include subtasks indented under their parent tasks in the list.` (CLI: `--with-subtasks`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Get an overview of the project status, often used at the start of a work session.

### 4. Get Next Task (`next_task`)

*   **MCP Tool:** `next_task`
*   **CLI Command:** `task-master next [options]`
*   **Description:** `Ask Taskmaster to show the next available task you can work on, based on status and completed dependencies.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Identify what to work on next according to the plan.

### 5. Get Task Details (`get_task`)

*   **MCP Tool:** `get_task`
*   **CLI Command:** `task-master show [id] [options]`
*   **Description:** `Display detailed information for a specific Taskmaster task or subtask by its ID.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task (e.g., '15') or subtask (e.g., '15.2') you want to view.` (CLI: `[id]` positional or `-i, --id <id>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Understand the full details, implementation notes, and test strategy for a specific task before starting work.

---

## Task Creation & Modification

### 6. Add Task (`add_task`)

*   **MCP Tool:** `add_task`
*   **CLI Command:** `task-master add-task [options]`
*   **Description:** `Add a new task to Taskmaster by describing it; AI will structure it.`
*   **Key Parameters/Options:**
    *   `prompt`: `Required. Describe the new task you want Taskmaster to create (e.g., "Implement user authentication using JWT").` (CLI: `-p, --prompt <text>`)
    *   `dependencies`: `Specify the IDs of any Taskmaster tasks that must be completed before this new one can start (e.g., '12,14').` (CLI: `-d, --dependencies <ids>`)
    *   `priority`: `Set the priority for the new task ('high', 'medium', 'low'; default: 'medium').` (CLI: `--priority <priority>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Quickly add newly identified tasks during development.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 7. Add Subtask (`add_subtask`)

*   **MCP Tool:** `add_subtask`
*   **CLI Command:** `task-master add-subtask [options]`
*   **Description:** `Add a new subtask to a Taskmaster parent task, or convert an existing task into a subtask.`
*   **Key Parameters/Options:**
    *   `id` / `parent`: `Required. The ID of the Taskmaster task that will be the parent.` (MCP: `id`, CLI: `-p, --parent <id>`)
    *   `taskId`: `Use this if you want to convert an existing top-level Taskmaster task into a subtask of the specified parent.` (CLI: `-i, --task-id <id>`)
    *   `title`: `Required (if not using taskId). The title for the new subtask Taskmaster should create.` (CLI: `-t, --title <title>`)
    *   `description`: `A brief description for the new subtask.` (CLI: `-d, --description <text>`)
    *   `details`: `Provide implementation notes or details for the new subtask.` (CLI: `--details <text>`)
    *   `dependencies`: `Specify IDs of other tasks or subtasks (e.g., '15', '16.1') that must be done before this new subtask.` (CLI: `--dependencies <ids>`)
    *   `status`: `Set the initial status for the new subtask (default: 'pending').` (CLI: `-s, --status <status>`)
    *   `skipGenerate`: `Prevent Taskmaster from automatically regenerating markdown task files after adding the subtask.` (CLI: `--skip-generate`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Break down tasks manually or reorganize existing tasks.

### 8. Update Tasks (`update`)

*   **MCP Tool:** `update`
*   **CLI Command:** `task-master update [options]`
*   **Description:** `Update multiple upcoming tasks in Taskmaster based on new context or changes, starting from a specific task ID.`
*   **Key Parameters/Options:**
    *   `from`: `Required. The ID of the first task Taskmaster should update. All tasks with this ID or higher (and not 'done') will be considered.` (CLI: `--from <id>`)
    *   `prompt`: `Required. Explain the change or new context for Taskmaster to apply to the tasks (e.g., "We are now using React Query instead of Redux Toolkit for data fetching").` (CLI: `-p, --prompt <text>`)
    *   `research`: `Enable Taskmaster to use Perplexity AI for more informed updates based on external knowledge (requires PERPLEXITY_API_KEY).` (CLI: `-r, --research`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Handle significant implementation changes or pivots that affect multiple future tasks. Example CLI: `task-master update --from='18' --prompt='Switching to React Query.\nNeed to refactor data fetching...'`
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 9. Update Task (`update_task`)

*   **MCP Tool:** `update_task`
*   **CLI Command:** `task-master update-task [options]`
*   **Description:** `Modify a specific Taskmaster task (or subtask) by its ID, incorporating new information or changes.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The specific ID of the Taskmaster task (e.g., '15') or subtask (e.g., '15.2') you want to update.` (CLI: `-i, --id <id>`)
    *   `prompt`: `Required. Explain the specific changes or provide the new information Taskmaster should incorporate into this task.` (CLI: `-p, --prompt <text>`)
    *   `research`: `Enable Taskmaster to use Perplexity AI for more informed updates (requires PERPLEXITY_API_KEY).` (CLI: `-r, --research`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Refine a specific task based on new understanding or feedback. Example CLI: `task-master update-task --id='15' --prompt='Clarification: Use PostgreSQL instead of MySQL.\nUpdate schema details...'`
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 10. Update Subtask (`update_subtask`)

*   **MCP Tool:** `update_subtask`
*   **CLI Command:** `task-master update-subtask [options]`
*   **Description:** `Append timestamped notes or details to a specific Taskmaster subtask without overwriting existing content. Intended for iterative implementation logging.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The specific ID of the Taskmaster subtask (e.g., '15.2') you want to add information to.` (CLI: `-i, --id <id>`)
    *   `prompt`: `Required. Provide the information or notes Taskmaster should append to the subtask's details. Ensure this adds *new* information not already present.` (CLI: `-p, --prompt <text>`)
    *   `research`: `Enable Taskmaster to use Perplexity AI for more informed updates (requires PERPLEXITY_API_KEY).` (CLI: `-r, --research`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Add implementation notes, code snippets, or clarifications to a subtask during development. Before calling, review the subtask's current details to append only fresh insights, helping to build a detailed log of the implementation journey and avoid redundancy. Example CLI: `task-master update-subtask --id='15.2' --prompt='Discovered that the API requires header X.\nImplementation needs adjustment...'`
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 11. Set Task Status (`set_task_status`)

*   **MCP Tool:** `set_task_status`
*   **CLI Command:** `task-master set-status [options]`
*   **Description:** `Update the status of one or more Taskmaster tasks or subtasks (e.g., 'pending', 'in-progress', 'done').`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster task(s) or subtask(s) (e.g., '15', '15.2', '16,17.1') to update.` (CLI: `-i, --id <id>`)
    *   `status`: `Required. The new status to set (e.g., 'done', 'pending', 'in-progress', 'review', 'cancelled').` (CLI: `-s, --status <status>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Mark progress as tasks move through the development cycle.

### 12. Remove Task (`remove_task`)

*   **MCP Tool:** `remove_task`
*   **CLI Command:** `task-master remove-task [options]`
*   **Description:** `Permanently remove a task or subtask from the Taskmaster tasks list.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task (e.g., '5') or subtask (e.g., '5.2') to permanently remove.` (CLI: `-i, --id <id>`)
    *   `yes`: `Skip the confirmation prompt and immediately delete the task.` (CLI: `-y, --yes`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Permanently delete tasks or subtasks that are no longer needed in the project.
*   **Notes:** Use with caution as this operation cannot be undone. Consider using 'blocked', 'cancelled', or 'deferred' status instead if you just want to exclude a task from active planning but keep it for reference. The command automatically cleans up dependency references in other tasks.

---

## Task Structure & Breakdown

### 13. Expand Task (`expand_task`)

*   **MCP Tool:** `expand_task`
*   **CLI Command:** `task-master expand [options]`
*   **Description:** `Use Taskmaster's AI to break down a complex task (or all tasks) into smaller, manageable subtasks.`
*   **Key Parameters/Options:**
    *   `id`: `The ID of the specific Taskmaster task you want to break down into subtasks.` (CLI: `-i, --id <id>`)
    *   `num`: `Suggests how many subtasks Taskmaster should aim to create (uses complexity analysis by default).` (CLI: `-n, --num <number>`)
    *   `research`: `Enable Taskmaster to use Perplexity AI for more informed subtask generation (requires PERPLEXITY_API_KEY).` (CLI: `-r, --research`)
    *   `prompt`: `Provide extra context or specific instructions to Taskmaster for generating the subtasks.` (CLI: `-p, --prompt <text>`)
    *   `force`: `Use this to make Taskmaster replace existing subtasks with newly generated ones.` (CLI: `--force`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Generate a detailed implementation plan for a complex task before starting coding.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 14. Expand All Tasks (`expand_all`)

*   **MCP Tool:** `expand_all`
*   **CLI Command:** `task-master expand --all [options]` (Note: CLI uses the `expand` command with the `--all` flag)
*   **Description:** `Tell Taskmaster to automatically expand all 'pending' tasks based on complexity analysis.`
*   **Key Parameters/Options:**
    *   `num`: `Suggests how many subtasks Taskmaster should aim to create per task.` (CLI: `-n, --num <number>`)
    *   `research`: `Enable Perplexity AI for more informed subtask generation (requires PERPLEXITY_API_KEY).` (CLI: `-r, --research`)
    *   `prompt`: `Provide extra context for Taskmaster to apply generally during expansion.` (CLI: `-p, --prompt <text>`)
    *   `force`: `Make Taskmaster replace existing subtasks.` (CLI: `--force`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Useful after initial task generation or complexity analysis to break down multiple tasks at once.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 15. Clear Subtasks (`clear_subtasks`)

*   **MCP Tool:** `clear_subtasks`
*   **CLI Command:** `task-master clear-subtasks [options]`
*   **Description:** `Remove all subtasks from one or more specified Taskmaster parent tasks.`
*   **Key Parameters/Options:**
    *   `id`: `The ID(s) of the Taskmaster parent task(s) whose subtasks you want to remove (e.g., '15', '16,18').` (Required unless using `all`) (CLI: `-i, --id <ids>`)
    *   `all`: `Tell Taskmaster to remove subtasks from all parent tasks.` (CLI: `--all`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Used before regenerating subtasks with `expand_task` if the previous breakdown needs replacement.

### 16. Remove Subtask (`remove_subtask`)

*   **MCP Tool:** `remove_subtask`
*   **CLI Command:** `task-master remove-subtask [options]`
*   **Description:** `Remove a subtask from its Taskmaster parent, optionally converting it into a standalone task.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster subtask(s) to remove (e.g., '15.2', '16.1,16.3').` (CLI: `-i, --id <id>`)
    *   `convert`: `If used, Taskmaster will turn the subtask into a regular top-level task instead of deleting it.` (CLI: `-c, --convert`)
    *   `skipGenerate`: `Prevent Taskmaster from automatically regenerating markdown task files after removing the subtask.` (CLI: `--skip-generate`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Delete unnecessary subtasks or promote a subtask to a top-level task.

---

## Dependency Management

### 17. Add Dependency (`add_dependency`)

*   **MCP Tool:** `add_dependency`
*   **CLI Command:** `task-master add-dependency [options]`
*   **Description:** `Define a dependency in Taskmaster, making one task a prerequisite for another.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task that will depend on another.` (CLI: `-i, --id <id>`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that must be completed first (the prerequisite).` (CLI: `-d, --depends-on <id>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Establish the correct order of execution between tasks.

### 18. Remove Dependency (`remove_dependency`)

*   **MCP Tool:** `remove_dependency`
*   **CLI Command:** `task-master remove-dependency [options]`
*   **Description:** `Remove a dependency relationship between two Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task you want to remove a prerequisite from.` (CLI: `-i, --id <id>`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that should no longer be a prerequisite.` (CLI: `-d, --depends-on <id>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Update task relationships when the order of execution changes.

### 19. Validate Dependencies (`validate_dependencies`)

*   **MCP Tool:** `validate_dependencies`
*   **CLI Command:** `task-master validate-dependencies [options]`
*   **Description:** `Check your Taskmaster tasks for dependency issues (like circular references or links to non-existent tasks) without making changes.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Audit the integrity of your task dependencies.

### 20. Fix Dependencies (`fix_dependencies`)

*   **MCP Tool:** `fix_dependencies`
*   **CLI Command:** `task-master fix-dependencies [options]`
*   **Description:** `Automatically fix dependency issues (like circular references or links to non-existent tasks) in your Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Clean up dependency errors automatically.

---

## Analysis & Reporting

### 21. Analyze Project Complexity (`analyze_project_complexity`)

*   **MCP Tool:** `analyze_project_complexity`
*   **CLI Command:** `task-master analyze-complexity [options]`
*   **Description:** `Have Taskmaster analyze your tasks to determine their complexity and suggest which ones need to be broken down further.`
*   **Key Parameters/Options:**
    *   `output`: `Where to save the complexity analysis report (default: 'scripts/task-complexity-report.json').` (CLI: `-o, --output <file>`)
    *   `threshold`: `The minimum complexity score (1-10) that should trigger a recommendation to expand a task.` (CLI: `-t, --threshold <number>`)
    *   `research`: `Enable Perplexity AI for more accurate complexity analysis (requires PERPLEXITY_API_KEY).` (CLI: `-r, --research`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Used before breaking down tasks to identify which ones need the most attention.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 22. View Complexity Report (`complexity_report`)

*   **MCP Tool:** `complexity_report`
*   **CLI Command:** `task-master complexity-report [options]`
*   **Description:** `Display the task complexity analysis report in a readable format.`
*   **Key Parameters/Options:**
    *   `file`: `Path to the complexity report (default: 'scripts/task-complexity-report.json').` (CLI: `-f, --file <file>`)
*   **Usage:** Review and understand the complexity analysis results after running analyze-complexity.

---

## File Management

### 23. Generate Task Files (`generate`)

*   **MCP Tool:** `generate`
*   **CLI Command:** `task-master generate [options]`
*   **Description:** `Create or update individual Markdown files for each task based on your tasks.json.`
*   **Key Parameters/Options:**
    *   `output`: `The directory where Taskmaster should save the task files (default: in a 'tasks' directory).` (CLI: `-o, --output <directory>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file (default relies on auto-detection).` (CLI: `-f, --file <file>`)
*   **Usage:** Run this after making changes to tasks.json to keep individual task files up to date.

---

## Environment Variables Configuration

Taskmaster's behavior can be customized via environment variables. These affect both CLI and MCP server operation:

*   **ANTHROPIC_API_KEY** (Required): Your Anthropic API key for Claude.
*   **MODEL**: Claude model to use (default: `claude-3-opus-20240229`). 
*   **MAX_TOKENS**: Maximum tokens for AI responses (default: 8192).
*   **TEMPERATURE**: Temperature for AI model responses (default: 0.7).
*   **DEBUG**: Enable debug logging (`true`/`false`, default: `false`).
*   **LOG_LEVEL**: Console output level (`debug`, `info`, `warn`, `error`, default: `info`).
*   **DEFAULT_SUBTASKS**: Default number of subtasks for `expand` (default: 5).
*   **DEFAULT_PRIORITY**: Default priority for new tasks (default: `medium`).
*   **PROJECT_NAME**: Project name used in metadata.
*   **PROJECT_VERSION**: Project version used in metadata.
*   **PERPLEXITY_API_KEY**: API key for Perplexity AI (for `--research` flags).
*   **PERPLEXITY_MODEL**: Perplexity model to use (default: `sonar-medium-online`).

Set these in your `.env` file in the project root or in your environment before running Taskmaster.

---

For implementation details:
*   CLI commands: See [`commands.mdc`](mdc:.cursor/rules/commands.mdc)
*   MCP server: See [`mcp.mdc`](mdc:.cursor/rules/mcp.mdc)
*   Task structure: See [`tasks.mdc`](mdc:.cursor/rules/tasks.mdc)
*   Workflow: See [`dev_workflow.mdc`](mdc:.cursor/rules/dev_workflow.mdc)


Beautiful people from all of the seven kingdoms, welcome, welcome,

Warmly welcome yourself and sit down by the fire as I tell you a story. Actually, it's not really a story. It's just a temporary group chat.

People are at different stages in the onboarding process, and so until Google Chats is running, I just want to use this place for any questions that I answer for individuals that might be helpful to others (number one rule in software engineering == DRY == ‚ÄúDo Not Repeat Yourself‚Äù; where possible, automate).

Where you have questions about anything in the wiki, try asking the Google LM Notebook that has been loaded with the whole wiki, the homepage and blog; it might help you to find information quicker; especially if you feed its specific output of your question back into Gemini with ‚ÄúGoogle Search‚Äù enabled. That gives you an easy way of answering company specific questions with the *huge* collection of Google Support Docs that lives on the internet.

If that fails, ping me.

I might occasionally go mental and post videos, links or seed prompts for particularly relevant to either the state of tech now or potentially in the imminent future that could have impacts on our roadmap but I'll try and stay fairly on the map of sanity. Just last night I stumbled across something I was starting to call ‚Äúchain of reasoning‚Äù, only to find *another motherfucker* who just released a blog on it this morning!! (he does have a really nice beard, though). We a way, way past 100th Monkey Territory at this stage. The world is ablaze.

It is highly unlikely you will be able to even get through the amount of content I post, so please don‚Äôt feel pressured to get 100%. It isn‚Äôt a test. It‚Äôs for your empowerment. There are shortcuts, but it still takes time. I‚Äôm starting to brainstorm prompts that are specific to each of your roles, but nothing beats just getting in the ring and starting to swing (btw, have you seen the new robots that are boxing each other? Mad.)

Appreciate you all thank you for your involvement. I can't tell you how excited I am to have other people involved in this, especially people that I just have that immediate vibe and trust with; it means so much to me.

Before long I'll get a quick Google Meets for everyone to say hello to each other, and once your job descriptions are live, I'll share them around so you can all start stalking each other online and do your thing but mainly I would just wait till we're all in a room and we get to see each other as really are.

Today I am going to be almost entirely focused on getting ‚ÄúProject Pre-flight‚Äù, the AI-readiness data collection, lead generation and free platform that offers people immediate value and gives them a taste of going from Level 1: Prompt Idiot, to Level 2: Prompt Partner. But don‚Äôt be fooled; level 2 is 10x the power of level 1.

The meditation app ‚ÄúWhite Dragon‚Äù resets all points to 0 today for the new month. Its optional, but its all collecting data we can use later to find out what really works for you in enhancing your wellbeing.

The wiki is far from finished, and roadmaps where deliberately generalised as this is currently a public facing website. I will secure that eventually but I need to turn all lasers on our key lead generator. If I become the main blocker for all of our progress that is‚Ä¶well that is just stupid.

The onboarding guide should contain what you need to know to get set up, get an overview of where we could be headed with this and a some additional ideas on maximising our chances of success.

It will take time to master the Google Suite; by all means use tutorials if you like to learn that way. It can be useful to get a high level overview of how many things are possible and the basic workpatterns. I‚Äôm personally a fan of keyboard shortcuts; once you get used to them you feel like an absolute boss.
</file>

<file path="app/about-alt/layout.tsx">
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export const metadata = getSEOTags({
  title: `About ${config.appName}`,
  canonicalUrlRelative: "/about",
});

import { Suspense } from "react";
import Header from "@/components/Header";
import Footer from "@/components/Footer";

export default async function LayoutAbout({ children }: { children: any }) {
  return (
    <div>
      <Suspense>
        <Header />
      </Suspense>

      <main className="min-h-screen max-w-6xl mx-auto p-8">{children}</main>

      <div className="h-24" />

      <Footer />
    </div>
  );
}
</file>

<file path="app/api/saigo/instagram/check-trigger/route.ts">
import { NextResponse } from "next/server";
import { createServiceClient } from "@/libs/supabase/server";
import { InstagramService } from "@/libs/instagram-service";

// Track when the last check was performed to avoid excessive checks
let lastCheckTime: number = 0;
const MIN_CHECK_INTERVAL = 5 * 60 * 1000; // 5 minutes in milliseconds

/**
 * POST /api/saigo/instagram/check-trigger
 * Client-side trigger for Instagram checks
 * Rate limited to prevent excessive checking
 */
export async function POST() {
  const currentTime = Date.now();

  // Only run the check if it's been more than 5 minutes since the last check
  if (currentTime - lastCheckTime < MIN_CHECK_INTERVAL) {
    return NextResponse.json({
      message: "Check skipped - rate limited",
      lastCheckTime: new Date(lastCheckTime).toISOString(),
      nextCheckAvailable: new Date(lastCheckTime + MIN_CHECK_INTERVAL).toISOString()
    });
  }

  try {
    const supabase = createServiceClient();
    const instagramService = new InstagramService(supabase);

    // Update the last check time before running the check
    lastCheckTime = currentTime;

    // Run the check in the background without awaiting it
    // This prevents the request from being blocked by potentially slow checks
    instagramService.runInstagramChecks()
      .then(results => {
        console.log('Instagram check triggered by client completed:', results);
      })
      .catch(error => {
        console.error('Error in background Instagram check:', error);
      });

    return NextResponse.json({
      message: "Instagram check triggered",
      checkStarted: new Date(currentTime).toISOString()
    });
  } catch (error: any) {
    console.error("Error triggering Instagram check:", error);
    return NextResponse.json(
      { error: error.message || "Failed to trigger Instagram check" },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/saigo/instagram/delete/[id]/route.ts">
import { NextResponse } from "next/server";
import { createServiceClient } from "@/libs/supabase/server";
import { InstagramService } from "@/libs/instagram-service";

interface DeleteParams {
  params: {
    id: string;
  };
}

/**
 * DELETE /api/saigo/instagram/delete/[id]
 * Delete an Instagram check by ID
 */
export async function DELETE(request: Request, { params }: DeleteParams) {
  try {
    const { id } = params;

    if (!id) {
      return NextResponse.json(
        { error: "Instagram check ID is required" },
        { status: 400 }
      );
    }

    const supabase = createServiceClient();
    const instagramService = new InstagramService(supabase);

    const success = await instagramService.deleteInstagramCheck(id);

    if (!success) {
      return NextResponse.json(
        { error: "Failed to delete Instagram check" },
        { status: 500 }
      );
    }

    return NextResponse.json({
      message: "Instagram check deleted successfully"
    });
  } catch (error: any) {
    console.error("Error deleting Instagram check:", error);
    return NextResponse.json(
      { error: error.message || "Failed to delete Instagram check" },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/saigo/instagram/run/route.ts">
import { NextResponse } from "next/server";
import { createServiceClient } from "@/libs/supabase/server";
import { InstagramService } from "@/libs/instagram-service";

/**
 * POST /api/saigo/instagram/run
 * Manually run Instagram checks
 */
export async function POST() {
  try {
    const supabase = createServiceClient();
    const instagramService = new InstagramService(supabase);

    const results = await instagramService.runInstagramChecks();

    return NextResponse.json({
      message: "Instagram checks completed successfully",
      results
    });
  } catch (error: any) {
    console.error("Error running Instagram checks:", error);
    return NextResponse.json(
      { error: error.message || "Failed to run Instagram checks" },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/saigo/instagram/route.ts">
import { NextResponse } from "next/server";
import { createServiceClient } from "@/libs/supabase/server";
import { InstagramService } from "@/libs/instagram-service";

/**
 * GET /api/saigo/instagram
 * Get all Instagram page checks
 */
export async function GET() {
  try {
    const supabase = createServiceClient();
    const instagramService = new InstagramService(supabase);

    const checks = await instagramService.getAllInstagramChecks();

    return NextResponse.json({ checks });
  } catch (error: any) {
    console.error("Error fetching Instagram checks:", error);
    return NextResponse.json(
      { error: error.message || "Failed to fetch Instagram checks" },
      { status: 500 }
    );
  }
}

/**
 * POST /api/saigo/instagram
 * Create a new Instagram page check
 */
export async function POST(request: Request) {
  try {
    const supabase = createServiceClient();
    const instagramService = new InstagramService(supabase);

    const { pageUsername, userIds } = await request.json();

    if (!pageUsername) {
      return NextResponse.json(
        { error: "Instagram page username is required" },
        { status: 400 }
      );
    }

    if (!userIds || !Array.isArray(userIds) || userIds.length === 0) {
      return NextResponse.json(
        { error: "At least one user ID must be provided" },
        { status: 400 }
      );
    }

    const check = await instagramService.createInstagramCheck(pageUsername, userIds);

    return NextResponse.json({ check }, { status: 201 });
  } catch (error: any) {
    console.error("Error creating Instagram check:", error);
    return NextResponse.json(
      { error: error.message || "Failed to create Instagram check" },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/saigo/username/route.ts">
import { NextResponse } from 'next/server';
import { createClient } from '@/libs/supabase/server';
import { OpenAI } from 'openai';
import fs from 'fs';
import path from 'path';
import { XMLParser } from 'fast-xml-parser';

// Initialize OpenAI
const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

// Initialize Supabase
export async function POST() {
  const supabase = createClient();
  try {
    // Get user
    const { data: user, error: userError } = await supabase.auth.getUser();
    console.log("üë§ User email:", user.user.email);

    if (userError) {
      throw userError;
    }

    // Check if email has a predefined username
    const predefinedUsername = checkPredefinedUsername(user.user.email);
    if (predefinedUsername) {
      // Store predefined username in Supabase
      const { error } = await supabase
        .from('saigo_users')
        .update({ username: predefinedUsername })
        .eq('email', user.user.email);

      if (error) {
        throw error;
      }

      return NextResponse.json({ "created": predefinedUsername });
    }

    // Read and parse the XML prompt file
    const promptPath = path.join(process.cwd(), 'prompts', 'saigo_username_prompt.xml');
    const xmlContent = fs.readFileSync(promptPath, 'utf-8');
    const parser = new XMLParser();
    const promptData = parser.parse(xmlContent);

    // Extract prompt and instructions
    const basePrompt = promptData.saigo_username_prompt.prompt;
    const instructions = promptData.saigo_username_prompt.instructions.instruction;

    // Combine prompt and instructions
    const fullPrompt = `${basePrompt}\n\nInstructions:\n${instructions.join('\n')}`;

    // Generate username using OpenAI
    const completion = await openai.chat.completions.create({
      model: "gpt-4o-mini",
      messages: [
        {
          role: "system",
          content: fullPrompt
        },
        {
          role: "user",
          content: "Generate a unique username based on the given instructions."
        }
      ],
      temperature: 0.9,
      max_tokens: 50,
    });

    const username = completion.choices[0].message?.content?.trim();
    console.log("üîë Generated username:", username);

    if (!username) {
      throw new Error(`Failed to generate username: ${JSON.stringify(completion)}`);
    }

    // Store in Supabase
    const { data: updatedUser, error } = await supabase
      .from('saigo_users')
      .update({ username: username })
      .eq('email', user.user.email);

    console.log("üîë Updated user:", updatedUser);

    if (error) {
      throw error;
    }

    return NextResponse.json({ "created": username });
  } catch (error) {
    console.error('Username generation error:', error);
    return NextResponse.json(
      { error: 'Failed to generate username' },
      { status: 500 }
    );
  }
}

/**
 * Checks if the user's email has a predefined username mapping
 * @param email User's email address
 * @returns Predefined username if it exists, otherwise null
 */
function checkPredefinedUsername(email: string): string | null {
  // Get email mappings from environment variables
  // Format: EMAIL_MAPPINGS=email1:username1,email2:username2,email3:username3
  const emailMappingsStr = process.env.EMAIL_MAPPINGS || '';

  if (!emailMappingsStr) {
    return null;
  }

  // Parse the mappings string into a Record object
  const emailMappings: Record<string, string> = {};
  emailMappingsStr.split(',').forEach(mapping => {
    const [mappedEmail, username] = mapping.split(':');
    if (mappedEmail && username) {
      emailMappings[mappedEmail.trim()] = username.trim();
    }
  });

  return emailMappings[email] || null;
}
</file>

<file path="app/blog/_assets/components/CardArticle.tsx">
import type { JSX } from "react";
import Link from "next/link";
import Image from "next/image";
import BadgeCategory from "./BadgeCategory";
import Avatar from "./Avatar";
import { articleType } from "../content";

// This is the article card that appears in the home page, in the category page, and in the author's page
const CardArticle = ({
  article,
  tag = "h2",
  showCategory = true,
  isImagePriority = false,
}: {
  article: articleType;
  tag?: keyof JSX.IntrinsicElements;
  showCategory?: boolean;
  isImagePriority?: boolean;
}) => {
  const TitleTag = tag;

  return (
    <article className="card bg-base-200 rounded-box overflow-hidden">
      {article.image?.urlRelative && (
        <Link
          href={`/blog/${article.slug}`}
          className="link link-hover hover:link-primary"
          title={article.title}
          rel="bookmark"
        >
          <figure>
            <Image
              src={article.image.urlRelative}
              alt={article.image.alt}
              width={600}
              height={338}
              priority={isImagePriority}
              className="aspect-video object-center object-cover hover:scale-[1.03] duration-200 ease-in-out"
            />
          </figure>
        </Link>
      )}
      <div className="card-body">
        {/* CATEGORIES */}
        {showCategory && (
          <div className="flex flex-wrap gap-2">
            {article.categories.map((category) => (
              <BadgeCategory category={category} key={category.slug} />
            ))}
          </div>
        )}

        {/* TITLE WITH RIGHT TAG */}
        <TitleTag className="mb-1 text-xl md:text-2xl font-bold">
          <Link
            href={`/blog/${article.slug}`}
            className="link link-hover hover:link-primary"
            title={article.title}
            rel="bookmark"
          >
            {article.title}
          </Link>
        </TitleTag>

        <div className=" text-base-content/80 space-y-4">
          {/* DESCRIPTION */}
          <p className="">{article.description}</p>

          {/* AUTHOR & DATE */}
          <div className="flex items-center gap-4 text-sm">
            <Avatar article={article} />

            <span itemProp="datePublished">
              {new Date(article.publishedAt).toLocaleDateString("en-US", {
                month: "long",
                day: "numeric",
              })}
            </span>
          </div>
        </div>
      </div>
    </article>
  );
};

export default CardArticle;
</file>

<file path="app/blog/_assets/components/CardCategory.tsx">
import type { JSX } from "react";
import Link from "next/link";
import { categoryType } from "../content";

// This is the category card that appears in the home page and in the category page
const CardCategory = ({
  category,
  tag = "h2",
}: {
  category: categoryType;
  tag?: keyof JSX.IntrinsicElements;
}) => {
  const TitleTag = tag;

  // Define color variants for different categories
  const getCategoryStyles = (slug: string) => {
    switch (slug) {
      case 'feature':
        return 'bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20 hover:from-primary/20 hover:to-primary/10 hover:border-primary/30 text-primary';
      case 'learning':
        return 'bg-gradient-to-br from-success/10 to-success/5 border-success/20 hover:from-success/20 hover:to-success/10 hover:border-success/30 text-success';
      case 'tutorials':
        return 'bg-gradient-to-br from-info/10 to-info/5 border-info/20 hover:from-info/20 hover:to-info/10 hover:border-info/30 text-info';
      case 'research':
        return 'bg-gradient-to-br from-accent/10 to-accent/5 border-accent/20 hover:from-accent/20 hover:to-accent/10 hover:border-accent/30 text-accent';
      default:
        return 'bg-gradient-to-br from-base-200 to-base-100 border-base-300 hover:from-base-300 hover:to-base-200 hover:border-base-400 text-base-content';
    }
  };

  return (
    <Link
      className={`group p-6 rounded-2xl border-2 transition-all duration-300 transform hover:scale-105 hover:shadow-lg ${getCategoryStyles(category.slug)}`}
      href={`/blog/category/${category.slug}`}
      title={category.title}
      rel="tag"
    >
      <div className="flex flex-col items-start space-y-2">
        <TitleTag className="text-lg font-bold group-hover:font-extrabold transition-all duration-300">
          {category?.titleShort || category.title}
        </TitleTag>
        <p className="text-sm opacity-70 group-hover:opacity-90 transition-opacity duration-300">
          {category.descriptionShort}
        </p>
        <div className="flex items-center space-x-1 opacity-50 group-hover:opacity-70 transition-opacity duration-300">
          <svg 
            className="w-4 h-4" 
            fill="none" 
            stroke="currentColor" 
            viewBox="0 0 24 24"
          >
            <path 
              strokeLinecap="round" 
              strokeLinejoin="round" 
              strokeWidth={2} 
              d="M9 5l7 7-7 7" 
            />
          </svg>
          <span className="text-xs font-medium">Explore</span>
        </div>
      </div>
    </Link>
  );
};

export default CardCategory;
</file>

<file path="app/blog/_assets/components/HeaderBlog.tsx">
"use client";

import type { JSX } from "react";
import { useState, useEffect } from "react";
import { useSearchParams } from "next/navigation";
import { Popover, Transition } from "@headlessui/react";
import Link from "next/link";
import Image from "next/image";
import logo from "@/app/icon.png";
import config from "@/config";
import { categories } from "../content";
import ButtonGradient from "@/components/ButtonGradient";

const links: {
  href: string;
  label: string;
}[] = [
    {
      href: "/blog/",
      label: "All Posts",
    },
  ];

const cta: JSX.Element = (
  <ButtonGradient title="Submit an article!" onClick={() => {
    window.open("mailto:kai@oceanheart.ai", "_blank");
  }} />
);

const ButtonPopoverCategories = () => {
  return (
    <Popover className="relative z-30">
      {({ open }) => (
        <>
          <Popover.Button
            className="link no-underline flex flex-nowrap items-center gap-1 text-base-content/80 hover:text-base-content active:text-base-content focus:text-base-content duration-100"
            title="Open Blog categories"
          >
            Categories
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              className={`w-5 h-5 duration-200 ${open ? "transform rotate-180 " : ""
                }`}
            >
              <path
                fillRule="evenodd"
                d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                clipRule="evenodd"
              />
            </svg>
          </Popover.Button>
          <Transition
            enter="transition duration-100 ease-out"
            enterFrom="transform scale-95 opacity-0"
            enterTo="transform scale-100 opacity-100"
            leave="transition duration-75 ease-out"
            leaveFrom="transform scale-100 opacity-100"
            leaveTo="transform scale-95 opacity-0"
          >
            <Popover.Panel className="absolute left-0 z-30 mt-3 w-screen max-w-full sm:max-w-sm transform">
              {({ close }) => (
                <div className="overflow-hidden rounded-box shadow-lg ring-1 ring-base-content ring-opacity-5">
                  <div className="relative grid gap-2 bg-base-100 p-2 overflow-hidden">
                    {categories.map((category) => (
                      <div key={category.slug} onClick={() => close()}>
                        <Link
                          className="block text-left p-3 -m-1 cursor-pointer hover:bg-base-200 rounded-box duration-200"
                          href={`/blog/category/${category.slug}`}
                        >
                          <div className="">
                            <p className="font-medium mb-0.5">
                              {category?.titleShort || category.title}
                            </p>
                            <p className="text-sm opacity-80">
                              {category?.descriptionShort ||
                                category.description}
                            </p>
                          </div>
                        </Link>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </Popover.Panel>
          </Transition>
        </>
      )}
    </Popover>
  );
};

const ButtonAccordionCategories = () => {
  const [isOpen, setIsOpen] = useState<boolean>(false);

  return (
    <>
      <button
        onClick={(e) => {
          e.preventDefault();
          setIsOpen(!isOpen);
        }}
        aria-expanded={isOpen}
        type="button"
        className="link no-underline flex justify-between items-center w-full "
      >
        Categories
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          className={`w-5 h-5 duration-200 ${isOpen ? "transform rotate-180 " : ""
            }`}
        >
          <path
            fillRule="evenodd"
            d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
            clipRule="evenodd"
          />
        </svg>
      </button>

      {isOpen && (
        <ul className="space-y-4">
          {categories.map((category) => (
            <li key={category.slug}>
              <Link
                href={`/blog/category/${category.slug}`}
                className="text-base-content/80 hover:text-base-content duration-100 link link-hover"
              >
                {category?.titleShort || category.title}
              </Link>
            </li>
          ))}
        </ul>
      )}
    </>
  );
};

// This is the header that appears on all pages in the /blog folder.
// By default it shows the logo, the links, and the CTA.
// In the links, there's a popover with the categories.
const HeaderBlog = () => {
  const searchParams = useSearchParams();
  const [isOpen, setIsOpen] = useState<boolean>(false);

  // setIsOpen(false) when the route changes (i.e: when the user clicks on a link on mobile)
  useEffect(() => {
    setIsOpen(false);
  }, [searchParams]);

  return (
    <header className="bg-base-200">
      <nav className="max-w-7xl flex items-center justify-between px-8 py-3 mx-auto">
        {/* Your logo/name on large screens */}
        <div className="flex lg:flex-1">
          <Link
            className="flex items-center gap-2 shrink-0 "
            href="/"
            title={`${config.appName} homepage`}
          >
            <Image
              src={logo}
              alt={`${config.appName} logo`}
              className="w-8"
              priority={true}
              width={32}
              height={32}
            />
            <span className="font-extrabold text-lg">{config.appName}</span>
          </Link>
        </div>
        {/* Burger button to open menu on mobile */}
        <div className="flex lg:hidden">
          <button
            type="button"
            className="-m-2.5 inline-flex items-center justify-center rounded-box p-2.5"
            onClick={() => setIsOpen(true)}
          >
            <span className="sr-only">Open main menu</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              strokeWidth={1.5}
              stroke="currentColor"
              className="w-6 h-6 text-base-content"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
              />
            </svg>
          </button>
        </div>

        {/* Your links on large screens */}
        <div className="hidden lg:flex lg:justify-center lg:gap-12 lg:items-center">
          {links.map((link) => (
            <Link
              href={link.href}
              key={link.href}
              className="link link-hover text-base-content/80 hover:text-base-content active:text-base-content focus:text-base-content duration-100"
              title={link.label}
            >
              {link.label}
            </Link>
          ))}

          <ButtonPopoverCategories />
        </div>

        {/* CTA on large screens */}
        {/* <div className="hidden lg:flex lg:justify-end lg:flex-1">{cta}</div> */}
      </nav>

      {/* Mobile menu, show/hide based on menu state. */}
      <div className={`relative z-50 ${isOpen ? "" : "hidden"}`}>
        <div
          className={`fixed inset-y-0 right-0 z-10 w-full px-8 py-3 overflow-y-auto bg-base-200 sm:max-w-sm sm:ring-1 sm:ring-neutral/10 transform origin-right transition ease-in-out duration-300`}
        >
          {/* Your logo/name on small screens */}
          <div className="flex items-center justify-between">
            <Link
              className="flex items-center gap-2 shrink-0 "
              title={`${config.appName} homepage`}
              href="/"
            >
              <Image
                src={logo}
                alt={`${config.appName} logo`}
                className="w-8"
                placeholder="blur"
                priority={true}
                width={32}
                height={32}
              />
              <span className="font-extrabold text-lg">{config.appName}</span>
            </Link>
            <button
              type="button"
              className="-m-2.5 rounded-box p-2.5"
              onClick={() => setIsOpen(false)}
            >
              <span className="sr-only">Close menu</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth={1.5}
                stroke="currentColor"
                className="w-6 h-6"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>

          {/* Your links on small screens */}
          <div className="flow-root mt-6">
            <div className="py-4">
              <div className="flex flex-col gap-y-4 items-start">
                {links.map((link) => (
                  <Link
                    href={link.href}
                    key={link.href}
                    className="link link-hover"
                    title={link.label}
                  >
                    {link.label}
                  </Link>
                ))}
                <ButtonAccordionCategories />
              </div>
            </div>
            <div className="divider"></div>
            {/* Your CTA on small screens */}
            {/* <div className="flex flex-col">{cta}</div> */}
          </div>
        </div>
      </div>
    </header>
  );
};

export default HeaderBlog;
</file>

<file path="app/blog/page.tsx">
import { categories, articles, articleType } from "./_assets/content";
import CardArticle from "./_assets/components/CardArticle";
import CardCategory from "./_assets/components/CardCategory";
import config from "@/config";
import { getSEOTags } from "@/libs/seo";

export const metadata = getSEOTags({
  title: `${config.appName} AI, Therapy and going at it alone`,
  description:
    "My journey into the intersection at AI and mental health",
  canonicalUrlRelative: "/blog",
});

export default async function Blog() {
  const articlesToDisplay = articles
    .sort(
      (a, b) =>
        new Date(b.publishedAt).valueOf() - new Date(a.publishedAt).valueOf()
    )
    .slice(0, 6)
    .filter(article => article.published)
  return (
    <>
      <section className="text-center max-w-xl mx-auto mt-12 mb-24 md:mb-32">
        <h1 className="font-extrabold text-3xl lg:text-5xl tracking-tight mb-6">
          The {config.appName} Blog
        </h1>
        <p className="text-lg text-base-content opacity-80 leading-relaxed">
          Here you can find <span className="font-bold text-primary">feature releases</span>, <span className="font-bold text-accent">roadmap updates</span>, <span className="font-bold text-primary">community survey research</span>, the <span className="font-bold text-success">ups</span> and <span className="font-bold text-error">downs</span> of building a startup, and a <span className="font-bold text-info">magical breadcrumb trail</span> of the latest developments at the intersection of AI and therapy.
        </p>
      </section>

      <section className="grid lg:grid-cols-2 mb-24 md:mb-32 gap-8">
        {articlesToDisplay.map((article, i) => (
          <CardArticle
            article={article}
            key={article.slug}
            isImagePriority={i <= 2}
          />
        ))}
      </section>

      <section>
        <div className="text-center mb-12">
          <h2 className="font-bold text-2xl lg:text-4xl tracking-tight mb-4">
            Browse by Category
          </h2>
          <p className="text-base-content/70 max-w-2xl mx-auto">
            Discover articles organized by topics that matter most to therapy professionals and AI enthusiasts.
          </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 max-w-4xl mx-auto">
          {categories.map((category) => (
            <CardCategory key={category.slug} category={category} tag="div" />
          ))}
        </div>
      </section>
    </>
  );
}
</file>

<file path="app/dashboard/page.tsx">
import AuthButton from "@/components/AuthButton";
import { redirect } from "next/navigation";
import { createClient } from "@/libs/supabase/server";
import Link from "next/link";
import config from "@/config";

export const dynamic = "force-dynamic";

// This is a private page: It's protected by the layout.js component which ensures the user is authenticated.
// It's a server compoment which means you can fetch data (like the user profile) before the page is rendered.
// See https://shipfa.st/docs/tutorials/private-page
export default async function Dashboard() {
  const supabase = createClient();
  const homepage = "/";

  try {
    const {
      data: { user },
    } = await supabase.auth.getUser();

    if (!user) {
      redirect(config.auth.loginUrl);
    }

    // Note: Saigo user check removed as part of Saigo feature archival

  } catch (e) {
    console.log("An unexpected error occurred", e);
  }

  return (
    <main className="min-h-screen p-8 pb-24">
      <section className="max-w-xl mx-auto space-y-8">
        <AuthButton mode="account" />
        <h1 className="text-3xl md:text-4xl font-extrabold">Dashboard...coming soon!</h1>
        <p>
          This is where you'll manage your account and settings.
        </p>
        <Link href={homepage} >
          Back Home
        </Link>
      </section>
    </main>
  );
}
</file>

<file path="app/donate/layout.tsx">
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export const metadata = getSEOTags({
  title: `Support ${config.appName}`,
  canonicalUrlRelative: "/donate",
});

import { Suspense } from "react";
import Header from "@/components/Header";
import Footer from "@/components/Footer";

export default async function LayoutDonate({ children }: { children: any }) {
  return (
    <div>
      <Suspense>
        <Header />
      </Suspense>

      <main className="min-h-screen max-w-6xl mx-auto p-8">{children}</main>

      <div className="h-24" />

      <Footer />
    </div>
  );
}
</file>

<file path="app/donate/page.tsx">
import Image from "next/image";
import config from "@/config";
import ButtonCheckout from "@/components/ButtonCheckout";

export default function DonatePage() {
  return (
    <main className="bg-base-100">
      {/* Intro Section */}
      <section className="pt-20 px-8 max-w-7xl mx-auto text-center">
        <h1 className="font-extrabold text-4xl md:text-6xl tracking-tight mb-6">
          Support Our Work
        </h1>
        <p className="text-lg md:text-xl opacity-80 max-w-2xl mx-auto mb-8">
          Your contribution helps us continue developing innovative tools for wellbeing professionals. Thank you for your support!
        </p>
      </section>

      {/* Donation Section */}
      <section className="flex flex-col items-center gap-12 max-w-3xl mx-auto px-8 py-16 bg-base-200 rounded-xl shadow-lg">
        <div className="space-y-6 text-center">
          <h2 className="font-bold text-2xl mb-4">Make a Donation</h2>
          <p className="text-base max-w-2xl">
            Your donation directly funds our ongoing development and helps keep our tools accessible for less. Every contribution, no matter the size, makes a significant impact.
          </p>
          <div className="w-full max-w-xs mx-auto mt-8">
            <ButtonCheckout
              priceId="price_1R4RHkRVLr5O3VRE6dsEzO4U"
              mode="payment"
              donate={true}
            />
          </div>
        </div>
      </section>

      {/* Why Donate Section */}
      <section className="max-w-7xl mx-auto px-8 py-16">
        <h2 className="font-bold text-3xl mb-8 text-center">How Your Support Helps</h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div className="bg-base-100 p-6 rounded-lg shadow-md">
            <h3 className="font-bold text-xl mb-4">Development</h3>
            <p>
              Your donation helps fund the continued development of new features and improvements to our existing tools.
            </p>
          </div>
          <div className="bg-base-100 p-6 rounded-lg shadow-md">
            <h3 className="font-bold text-xl mb-4">Accessibility</h3>
            <p>
              We strive to make our tools accessible to all mental health professionals, regardless of their financial resources.
            </p>
          </div>
          <div className="bg-base-100 p-6 rounded-lg shadow-md">
            <h3 className="font-bold text-xl mb-4">Innovation</h3>
            <p>
              Your support enables us to research and implement cutting-edge technologies that the provision of wellbeing services across the spectrum.
            </p>
          </div>
        </div>
      </section>

      {/* Call-to-Action Section */}
      <section className="bg-neutral text-neutral-content py-20 px-8">
        <div className="max-w-7xl mx-auto text-center">
          <h2 className="font-bold text-3xl md:text-4xl mb-6">Thank You!</h2>
          <p className="mb-8">
            Have questions about supporting our work? Reach out via email or follow us on social media.
          </p>
          <a href={`mailto:${config.resend.supportEmail}`} className="btn btn-primary btn-wide">
            Contact Us
          </a>
        </div>
      </section>
    </main>
  );
}
</file>

<file path="app/hdi/components/-- SQLite">
-- SQLite
INSERT INTO Name (name)
VALUES ('Higher Dimensions Institute'),
    ('Hyper Divergence Initiative'),
    ('Hacker Development Initiative'),
    ('Hyper Dream Interpretation'),
    ('Human Divinity Interface'),
    ('Havoc Design Initiative'),
    ('Holistic Discovery Institute'),
    ('Hyperconscious Design Institute'),
    ('Higher Dimensional Intelligence'),
    ('Hacker Dynamics Incorporated'),
    ('Heart Data Incorporated'),
    ('Higher Destiny Interface'),
    ('Healing Dimensions Institute'),
    ('Harmonic Dawn Initiative'),
    ('Holistic Divergence Institute'),
    ('Human Discovery Interface'),
    ('Hyperconscious Design Innovators'),
    ('Higher Destiny Integration'),
    ('Hyperlink Database Integrators'),
    ('Human Dynamics Integration'),
    ('Holistic Data Interface'),
    ('Hyperlink Destiny Initiative'),
    ('Hyper Disruptive Interface'),
    ('Human Defiance Initiative'),
    ('Heretic Development Interface'),
    ('Human Dissent Interface');
</file>

<file path="app/saigo/lib/add-instagram-check-with-users.ts">
#!/usr/bin/env bun

import { createClient } from '@supabase/supabase-js';
import dotenv from 'dotenv';
import path from 'path';
import fs from 'fs';

// Load environment variables
const envPath = path.resolve(process.cwd(), '.env');
if (fs.existsSync(envPath)) {
  dotenv.config({ path: envPath });
} else {
  dotenv.config({ path: path.resolve(process.cwd(), '.env.local') });
}

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !supabaseServiceKey) {
  console.error('Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

async function addInstagramCheckWithUsers(username: string, usernames: string[]) {
  // Create Supabase client with service role key for admin privileges
  const supabase = createClient(supabaseUrl, supabaseServiceKey);

  try {
    // First, lookup user IDs from usernames
    const { data: userIds, error: userError } = await supabase
      .from('saigo_username')
      .select('saigo_user_id, username')
      .in('username', usernames);

    if (userError) {
      console.error('Error looking up users:', userError);
      process.exit(1);
    }

    if (!userIds || userIds.length === 0) {
      console.error('No users found with the provided usernames');
      process.exit(1);
    }

    // Map of found usernames to their IDs for validation
    const foundUsers = userIds.reduce((acc, { username, saigo_user_id }) => {
      acc[username] = saigo_user_id;
      return acc;
    }, {} as Record<string, string>);

    // Check for any missing users
    const missingUsers = usernames.filter(username => !foundUsers[username]);
    if (missingUsers.length > 0) {
      console.warn(`Warning: The following users were not found: ${missingUsers.join(', ')}`);
    }

    // Create the Instagram check
    const { data: checkData, error: checkError } = await supabase
      .from('instagram_page_checks')
      .insert({
        page_username: username,
        page_found: false,
        last_check_time: new Date().toISOString()
      })
      .select()
      .single();

    if (checkError) {
      console.error('Error adding Instagram check:', checkError);
      process.exit(1);
    }

    console.log('Successfully added Instagram check:', checkData);

    // Associate users with the check
    const userAssociations = userIds.map(({ saigo_user_id }) => ({
      instagram_check_id: checkData.id,
      user_id: saigo_user_id,
      points_reset: false
    }));

    const { error: associationError } = await supabase
      .from('instagram_affected_users')
      .insert(userAssociations);

    if (associationError) {
      console.error('Error associating users with Instagram check:', associationError);
      process.exit(1);
    }

    console.log(`Successfully associated ${userIds.length} users with the Instagram check`);
    userIds.forEach(({ username, saigo_user_id }) => {
      console.log(`- ${username} (${saigo_user_id})`);
    });

  } catch (error) {
    console.error('Unexpected error:', error);
    process.exit(1);
  }
}

// Get username and user IDs from command line arguments
const args = process.argv.slice(2);
if (args.length < 2) {
  console.error('Usage: npm run add-instagram-check-with-users [instagram_username] [username1] [username2] ...');
  process.exit(1);
}

const instagramUsername = args[0];
const usernames = args.slice(1);

// Run the script
addInstagramCheckWithUsers(instagramUsername, usernames);
</file>

<file path="app/saigo/lib/add-instagram-check.ts">
#!/usr/bin/env bun

import { createClient } from '@supabase/supabase-js';
import dotenv from 'dotenv';
import path from 'path';
import fs from 'fs';

// Load environment variables
const envPath = path.resolve(process.cwd(), '.env');
if (fs.existsSync(envPath)) {
  dotenv.config({ path: envPath });
} else {
  dotenv.config({ path: path.resolve(process.cwd(), '.env.local') });
}

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !supabaseServiceKey) {
  console.error('Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

async function addInstagramCheck(username: string) {
  // Create Supabase client with service role key for admin privileges
  const supabase = createClient(supabaseUrl, supabaseServiceKey);

  try {
    const { data, error } = await supabase
      .from('instagram_page_checks')
      .insert({
        page_username: username,
        page_found: false,
        last_check_time: new Date().toISOString()
      })
      .select()
      .single();

    if (error) {
      console.error('Error adding Instagram check:', error);
      process.exit(1);
    }

    console.log('Successfully added Instagram check:');
    console.log(data);
  } catch (error) {
    console.error('Unexpected error:', error);
    process.exit(1);
  }
}

// Get username from command line arguments
const username = process.argv[2];

if (!username) {
  console.error('Usage: npm run add-instagram-check [username]');
  process.exit(1);
}

// Run the script
addInstagramCheck(username);
</file>

<file path="app/signin/route.ts">
import { NextRequest, NextResponse } from 'next/server'

// Redirects to central accounts sign-in, preserving an optional returnTo param
export async function GET(req: NextRequest) {
  const url = new URL(req.url)
  const accountsUrl = new URL('https://accounts.oceanheart.ai/signin')
  const returnTo = url.searchParams.get('returnTo') || `${url.origin}/`
  accountsUrl.searchParams.set('returnTo', returnTo)
  return NextResponse.redirect(accountsUrl)
}
</file>

<file path="app/synai/components/engineering.md">
Systematic Review of Prompt Engineering Techniques:
Here's a list of prompt engineering techniques identified, along with their conceptual coherence scores:
XML Tagging / Structured Data Input:
Description: The entire prompt is encased in custom XML tags (<TAVILY_CONTINUED_EXPLORATION_PROMPT_V1_GEMINI_2_5_PRO_WITH_DATA>, <IdentityAndMission>, <CoreFunctionality_DataInitializationAndOngoingManagement>, etc.). This structures the prompt into logical, parsable sections for the AI.
Conceptual Coherence: 10/10. Exceptionally coherent. It provides a clear, hierarchical structure that helps the model understand the different components of its task and context. The naming convention of the root tag also suggests versioning and model targeting.
Role-Playing / Persona Assignment:
Description: The <IdentityAndMission> section explicitly defines the AI's name (TAVILY), affiliation, client, mission, operational framework (ACT), stance, and interaction style.
Conceptual Coherence: 10/10. Extremely coherent. This provides a rich, consistent persona for the AI to adopt, guiding its tone, behavior, and decision-making processes.
Goal Setting / Task Definition (Explicit & Granular):
Description: The <Mission> provides a high-level set of goals (numbered list). Further, specific tasks are broken down within sections like <InitialClientDataIngestion>, <OngoingConceptExtractionAndGraphEnrichment>, and individual <Command> definitions.
Conceptual Coherence: 10/10. Highly coherent. The goals are clearly articulated, and tasks are broken down into manageable, actionable steps, reducing ambiguity.
In-Context Learning / Data Priming (with Embedded Data):
Description: The <EmbeddedClientACT_JSON_Data> section, containing a large JSON object, is explicitly instructed to be parsed and internalized "VERBATIM" as an "active, working internal knowledge graph." This is a powerful way to provide extensive, structured context.
Conceptual Coherence: 9/10. Very coherent. The instruction to treat it as an actual internal graph is ambitious but clearly directs the model to prioritize this data. The JSON itself is highly structured and domain-specific.
Instruction Sequencing / Step-by-Step Instructions:
Description: Seen clearly in <InitialClientDataIngestion> ("IMMEDIATE first step") and within the <Action> tags of each <Command>, where steps are enumerated.
Conceptual Coherence: 10/10. Coherent. Provides a clear order of operations, especially for critical initialization tasks and command execution.
Schema Definition and Adherence:
Description: <SchemaAdherence> explicitly mandates that the internal graph and new information conform to the structure of the embedded JSON.
Conceptual Coherence: 9/10. Coherent. This promotes consistency in data handling and internal representation, which is crucial for the ongoing enrichment task.
Negative Constraints / Anti-Goals:
Description: The <NoUserDisplayOfRawJSON (Except #dump)> tag explicitly tells the AI what not to do under normal circumstances.
Conceptual Coherence: 10/10. Very coherent. Clearly defines boundaries and forbidden actions, which is an important aspect of controlling AI output.
State Management Instructions:
Description: The prompt details how the AI should maintain and update its "internal knowledge graph" throughout the session (<InternalNodeGraph_ClientData>, <OngoingConceptExtractionAndGraphEnrichment>).
Conceptual Coherence: 9/10. Coherent. This is a complex instruction, but the prompt clearly outlines the expectation of a dynamic, evolving internal state.
Question Generation Strategy / Heuristics:
Description: <DynamicQuestioning_UnknownUnknowns_SolutionFocus_ACT> provides a goal, a detailed mechanism (analyzing the internal graph for gaps, etc.), and strategy examples for formulating questions. This guides the AI's conversational strategy.
Conceptual Coherence: 10/10. Extremely coherent. It doesn't just say "ask questions" but specifies how to derive them from the data and what kind of questions to ask, including examples.
Simulated Function Calling / Command Definition:
Description: The <UserCommandsAndInteraction> section defines specific user commands (#dump, #ask, #themes, #density) with explicit triggers, multi-step actions, and sometimes constraints or output formats. This mimics an API or function call system.
Conceptual Coherence: 10/10. Very coherent. This structures user interaction into predictable, manageable functions for the AI to execute.
Output Formatting Instructions:
Description: Explicit instructions on how output should be formatted are given for several commands (e.g., #dump requiring well-formatted JSON, #themes and #density having specific text structures with placeholders). The <ExampleGreetingToHakushin> also serves this purpose.
Conceptual Coherence: 10/10. Coherent. Ensures that the AI's responses are structured and presented in a user-friendly and consistent manner.
Conditional Logic Specification:
Description: The #ask command includes an <IfNotFound> instruction, guiding the AI's response if data isn't present. The #density command involves calculations based on data state.
Conceptual Coherence: 9/10. Coherent. Provides basic branching logic for specific scenarios.
Guardrails / Focus Maintenance:
Description: <OnTaskGuardrails> define a principle, trigger conditions for off-topic conversation, and an intervention action to gently guide the user back.
Conceptual Coherence: 10/10. Very coherent. Essential for maintaining the intended flow and purpose of the interaction, especially in a therapeutic context.
Emphasis and Capitalization:
Description: Use of VERBATIM, IMMEDIATE, WILL, MUST NOT, MUST to emphasize critical instructions.
Conceptual Coherence: 7/10. Moderately coherent. While common and often effective, its impact can vary between models. It clearly signals importance to the human reader and likely to the model.
Meta-Instructions / Self-Reference:
Description: The prompt often refers to itself or its sections (e.g., "Locate the <EmbeddedClientACT_JSON_Data> XML block within this prompt," "Strict Adherence to this Master Prompt").
Conceptual Coherence: 9/10. Coherent. Helps the AI orient itself within the provided instructions and understand the source of its directives.
Example-Based Prompting (Few-Shot/Zero-Shot with Examples):
Description: Provided in <StrategyExamples> for questioning and the <ExampleGreetingToHakushin>.
Conceptual Coherence: 10/10. Very coherent. Examples make abstract instructions much more concrete and guide the style and content of AI responses.
Overall Prompt Engineer Level Score:
Considering the breadth, depth, and sophistication of the techniques employed, this prompt demonstrates a very high level of prompt engineering skill.
Structuring: The XML structure is meticulous.
Role & Task Definition: Extremely detailed and clear.
Data Handling: Advanced instructions for data ingestion, internal representation, schema adherence, and dynamic updates.
Interaction Control: Well-defined commands and guardrails.
Strategic Guidance: Instructions for questioning and problem-solving.
This is not something a newbie or even an average user would construct. The attention to detail, the foresight in defining behaviors and data management, and the overall architecture point to a professional or highly experienced individual.
Score: 95/100
This score reflects a professional prompt engineer level. The prompt is comprehensive, robust, and leverages a wide array of advanced techniques to precisely control the AI's behavior for a complex, ongoing task involving state management and nuanced interaction based on a specific therapeutic framework. It's a well-architected system designed for a sophisticated AI model.
</file>

<file path="app/team/layout.tsx">
import { Suspense } from "react";
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import { getSEOTags } from "@/libs/seo";
import config from "@/config";

export const metadata = getSEOTags({
  title: `Meet the Team | ${config.appName}`,
  description: `Learn about the structure and members of the ${config.appName} team.`,
  canonicalUrlRelative: "/team",
});

export default function TeamLayout({ children }: { children: React.ReactNode }) {
  return (
    <>
      {/* <Suspense>
        <Header />
      </Suspense> */}

      <main className="min-h-screen">{children}</main>

      {/* <Suspense>
        <Footer />
      </Suspense> */}
    </>
  );
}
</file>

<file path="apps/accounts/app/(auth)/signin/page.tsx">
'use client'
import { useSearchParams } from 'next/navigation'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'

export default function SignInPage() {
  const sp = useSearchParams()
  const returnTo = sp.get('returnTo') || process.env.NEXT_PUBLIC_SITE_URL
  const supabase = createClientComponentClient()

  async function signInWithEmail(email: string) {
    await supabase.auth.signInWithOtp({
      email,
      options: { emailRedirectTo: returnTo || undefined },
    })
  }

  return (
    <div style={{ padding: 24 }}>
      <h1>Sign in (scaffold)</h1>
      <p>This is a placeholder for the central accounts sign-in UI.</p>
    </div>
  )
}
</file>

<file path="apps/accounts/app/auth/callback/route.ts">
import { NextRequest, NextResponse } from 'next/server'
import { createSSRClient } from '../../../../../packages/common-auth/src/ssrClient'
import { isAllowedReturnTo } from '../../../../../packages/common-auth/src/returnTo'

export async function GET(req: NextRequest) {
  const url = new URL(req.url)
  const returnToRaw = url.searchParams.get('returnTo')
  const defaultReturn = process.env.NEXT_PUBLIC_SITE_URL || 'https://oceanheart.ai'
  let target = defaultReturn
  try {
    if (returnToRaw) {
      const rt = new URL(returnToRaw)
      if (isAllowedReturnTo(rt)) target = rt.toString()
    }
  } catch {}

  const res = NextResponse.redirect(target)
  const supabase = createSSRClient(req, res)
  // Exchanges the auth code for a session and sets cookies via SSR adapter
  await supabase.auth.exchangeCodeForSession()
  return res
}
</file>

<file path="apps/accounts/app/logout/route.ts">
import { NextRequest, NextResponse } from 'next/server'
import { createSSRClient } from '../../../../packages/common-auth/src/ssrClient'

export async function GET(req: NextRequest) {
  const res = NextResponse.redirect(new URL('/', req.url))
  const supabase = createSSRClient(req, res)
  await supabase.auth.signOut()
  return res
}
</file>

<file path="apps/accounts/README.md">
# accounts app (scaffold)

Central auth UI (signin/logout) for subdomain SSO. Not part of the current build; provided as a reference structure.

- Key routes:
  - `app/(auth)/signin/page.tsx`
  - `app/logout/route.ts`
</file>

<file path="apps/flowstate/middleware.ts">
import type { NextRequest } from 'next/server'
import { NextResponse } from 'next/server'
import { requireAuth } from '../../packages/common-auth/src/requireAuth'
import { withEntitlement } from '../../packages/common-auth/src/withEntitlement'

export async function middleware(req: NextRequest) {
  const auth = await requireAuth(req)
  if (auth instanceof NextResponse) return auth

  const { res, user } = auth
  const allowed = await withEntitlement('flowstate', user.id)
  if (!allowed) {
    return NextResponse.redirect(new URL('/no-access', req.url), { headers: res.headers })
  }
  return res
}

export const config = {
  matcher: ['/((?!_next|public|favicon.ico).*)'],
}
</file>

<file path="apps/flowstate/README.md">
# flowstate app (scaffold)

Example product app structure showing middleware protection and entitlement checks.

- Key file:
  - `middleware.ts` (uses common-auth stubs)
</file>

<file path="archived/ab-testing/README.md">
# Archived: A/B Testing Feature

The A/B Testing feature was a system for testing different versions of UI components and content on the Oceanheart.ai website to optimize user experience and conversion rates. This feature has been archived as part of the refactoring project to simplify the codebase while preserving the knowledge for future implementation.

## Feature Overview

The A/B Testing system was designed to:

- Split traffic between different variations of UI components
- Track user engagement with each variation
- Collect metrics on conversion rates and user behavior
- Provide an admin dashboard for viewing test results

## Original Location

The A/B Testing feature code was originally located in:

- `/libs/abTesting.tsx`: Core A/B testing logic and context provider
- `/app/ab-testing/`: Dashboard for viewing A/B test results
- `/app/api/ab-tracking/`: API endpoints for tracking user interactions
- `/components/HeroABTest.tsx`: Example A/B tested component for the landing page hero section
- `/supabase/migrations/20240601000000_ab_testing.sql`: Database schema for tracking test results

## Implementation Details

The A/B testing implementation included:

- Context-based React component for managing test variations
- User session tracking to ensure consistent experiences
- Analytics integration for measuring performance
- Supabase database tables for storing results
- Admin dashboard for visualization and analysis

## Database Structure

The feature used the following database tables:

- `ab_tests`: Defined test configurations
  - `id`: UUID primary key
  - `name`: Test name
  - `component`: Target component
  - `variants`: Number of variants (usually 2-4)
  - `active`: Boolean indicating if test is active
  - `created_at`: Timestamp

- `ab_test_results`: Tracked user interactions
  - `id`: UUID primary key
  - `test_id`: Reference to ab_tests
  - `variant`: Variant shown (A, B, C, D)
  - `action`: User action (view, click, convert)
  - `user_id`: Anonymous user identifier
  - `created_at`: Timestamp

## Reason for Archival

The A/B Testing feature was archived due to:

1. Shift to a more unified design system with fewer variations
2. Complexity in maintaining multiple component versions
3. Integration of more sophisticated third-party testing tools
4. Focus on streamlining the core codebase

## Potential Future Use

If reinstating this feature, consider:

- Expanding to support more than 4 variants
- Improving statistical analysis capabilities
- Adding heat mapping and session recording
- Implementing integration with popular analytics services

## Dependencies

The A/B Testing feature had dependencies on:

- React Context API for state management
- Supabase for data storage
- SWR for data fetching
- Recharts for results visualization
</file>

<file path="archived/hdi/DATABASE.md">
# HDI Database Structure

This document details the database structure used by the Human Digital Interface (HDI) feature of Oceanheart.ai.

## Overview

The HDI feature utilized SQLite for its database needs, primarily to store and retrieve sample data for demonstration purposes. The database was used to showcase interactions between a web application and local database storage.

## Database Location

The SQLite database file was located at:
```
/app/api/hdi/names/names.db
```

## Schema

The database schema was defined in `/app/api/hdi/names/seed.sql` and included the following table:

### names

```sql
CREATE TABLE IF NOT EXISTS names (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    origin TEXT,
    meaning TEXT,
    popularity INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Columns
- `id`: Unique identifier, auto-incrementing integer
- `name`: The actual name (text, required)
- `origin`: Cultural or linguistic origin of the name
- `meaning`: Description of the name's meaning
- `popularity`: Numeric rating of the name's popularity
- `created_at`: Timestamp of when the record was created

## Database Management

The HDI feature included several Python scripts for database management:

1. `/app/hdi/lib/create_db.py`: Script to create the initial database structure
2. `/app/api/hdi/names/seed_db.py`: Script to populate the database with sample data
3. `/app/hdi/lib/db_agent.py`: Utility for interacting with the database

## API Integration

The database was accessed through two main API endpoints:

1. `/app/api/hdi/names/route.ts`: Provided CRUD operations for names
2. `/app/api/hdi/download/route.ts`: Allowed downloading database content

## Sample Query Patterns

The HDI feature typically used the following query patterns:

1. Retrieving all names:
   ```sql
   SELECT * FROM names ORDER BY name ASC;
   ```

2. Finding a specific name:
   ```sql
   SELECT * FROM names WHERE name LIKE ?;
   ```

3. Adding a new name:
   ```sql
   INSERT INTO names (name, origin, meaning, popularity) VALUES (?, ?, ?, ?);
   ```

## Data Security Considerations

As this was an experimental feature, the database implementation had the following security characteristics:

1. Local SQLite database with no remote access
2. No user-provided data was stored (only pre-seeded demonstration data)
3. API endpoints had basic validation but were primarily for demonstration
</file>

<file path="archived/hdi/FILE_MOVES.md">
# HDI Feature File Migration Plan

This document outlines the file migration plan for archiving the HDI (Human Digital Interface) feature. Due to execution constraints, the actual file moves are documented here as a reference for completing the migration manually.

## App Pages and Layout

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/hdi/page.tsx` | `/archived/hdi/app/page.tsx` |
| `/app/hdi/layout.tsx` | `/archived/hdi/app/layout.tsx` |

## Components

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/hdi/components/AudioPlayer.tsx` | `/archived/hdi/app/components/AudioPlayer.tsx` |
| `/app/hdi/components/ContentSections.tsx` | `/archived/hdi/app/components/ContentSections.tsx` |
| `/app/hdi/components/CountdownTimer.tsx` | `/archived/hdi/app/components/CountdownTimer.tsx` |
| `/app/hdi/components/HDIHeader.tsx` | `/archived/hdi/app/components/HDIHeader.tsx` |
| `/app/hdi/components/TerminalEmulation.tsx` | `/archived/hdi/app/components/TerminalEmulation.tsx` |
| `/app/hdi/components/-- SQLite` | `/archived/hdi/app/components/-- SQLite` |

## Library and Utility Files

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/hdi/lib/create_db.py` | `/archived/hdi/app/lib/create_db.py` |
| `/app/hdi/lib/db_agent.py` | `/archived/hdi/app/lib/db_agent.py` |

## API Routes

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/api/hdi/download/route.ts` | `/archived/hdi/api/download/route.ts` |
| `/app/api/hdi/names/route.ts` | `/archived/hdi/api/names/route.ts` |

## Database Files

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/api/hdi/names/names.db` | `/archived/hdi/api/names/names.db` |
| `/app/api/hdi/names/seed.sql` | `/archived/hdi/api/names/seed.sql` |
| `/app/api/hdi/names/seed_db.py` | `/archived/hdi/api/names/seed_db.py` |

## References to Check and Update

After archiving the HDI feature, the following files should be checked for references to HDI:

1. `Header.tsx` and `Footer.tsx` - May contain navigation links to HDI pages
2. Any configuration files that mention HDI
3. Main app layout files that might include HDI routes

## Migration Process

To complete the migration:

1. Create all necessary directories in the archive destination
2. For each file, use git mv to preserve history: 
   ```
   git mv <original_path> <destination_path>
   ```
3. Update the tracking.csv file with details of each moved file
4. Remove references to HDI in active components like headers and footers

## Notes on Functionality

The HDI feature included:

1. An experimental UI section for exploring human-computer interaction patterns
2. SQLite database integration for storing names and references
3. Python scripts for database management
4. Custom components for audio playback and terminal emulation
5. Specialized content display with countdown timers and sectioned content

When removing references to HDI from the active codebase, ensure that navigation, routing, and imports are updated appropriately to prevent errors.
</file>

<file path="archived/hdi/INTEGRATION_NOTES.md">
# HDI Feature Integration Notes

This document provides information about how the HDI (Human Digital Interface) feature was integrated with the rest of the application, and what to check after removing it.

## Integration Points

The HDI feature was integrated with the main application at the following points:

1. **Navigation**: The Header component previously included a link to the HDI section
2. **Routing**: The main app router configuration included routes for HDI pages
3. **Static Assets**: Some assets in the public directory were used by HDI components
4. **Dependencies**: Python and SQLite dependencies were required for HDI functionality

## Verification Steps

After archiving the HDI feature, perform the following verification steps:

### 1. Verify Application Builds

```bash
bun build
```

The application should build without errors related to missing HDI components.

### 2. Check for Navigation References

1. Verify that the Header component no longer contains links to HDI
2. Check the Footer component for any remaining HDI links
3. Look for any "explore" or feature sections that might link to HDI

### 3. Test Core Application Functionality

1. Test the main navigation flow through the application
2. Verify that the landing page loads correctly
3. Check that user authentication still works
4. Confirm that all core pages (about, privacy, terms) load properly

### 4. Check for Console Errors

1. Open the application in a browser
2. Open the browser's developer console
3. Navigate through the application's pages
4. Verify that no console errors appear related to missing HDI components or routes

### 5. Verify API Functionality

1. Test all active API endpoints
2. Verify that API routes that might have referenced HDI endpoints are still functioning

## Dependencies That Can Be Removed

After confirming the application works correctly without HDI, consider removing these dependencies:

1. Python-related dependencies used only by HDI
2. SQLite libraries or bindings
3. Any specific packages imported only by HDI components

## Notes on Audio Content

The HDI feature included an AudioPlayer component that referenced specific audio files in the public directory. These files should be archived along with the HDI code if they aren't used elsewhere in the application.

## External Documentation References

If there are any external documentation pages or links referring to the HDI feature, they should be updated to indicate the feature has been archived.

## Restoration Instructions

If the HDI feature needs to be restored in the future:

1. Move the code from `/archived/hdi/` back to its original locations
2. Re-add navigation links in the Header component
3. Install any required dependencies 
4. Update the router configuration
5. Verify Python and SQLite are properly set up for the database functionality
</file>

<file path="archived/hdi/README.md">
# Archived: HDI (Human Digital Interface) Feature

The HDI (Human Digital Interface) feature was an experimental section of the Oceanheart.ai application exploring novel UI concepts and human-computer interaction patterns. This feature has been archived as part of the refactoring project to streamline the application and focus on core functionality.

## Feature Overview

The HDI feature was designed to:

- Showcase innovative interface designs for AI interactions
- Provide experimental tools for human-computer interaction
- Demonstrate conceptual approaches to digital interfaces
- Serve as a research and development sandbox for UI/UX ideas

## Original Location

The HDI feature code was originally located in:

- `/app/hdi/`: Pages and layout for the HDI section
- `/app/hdi/components/`: HDI-specific UI components
- `/app/hdi/lib/`: Utility functions for HDI functionality
- `/app/api/hdi/`: API endpoints for HDI features
- `/components/features/hdi/`: Shared components for the HDI feature

## Key Components

- `HDIHeader.tsx`: Custom header for the HDI section
- `TerminalEmulation.tsx`: Terminal-like interface for text interactions
- `AudioPlayer.tsx`: Custom audio playback component
- `ContentSections.tsx`: Dynamic content display system
- `CountdownTimer.tsx`: Interactive timer component

## SQLite Integration

The HDI feature included an integration with SQLite for local data storage:

- `/app/hdi/lib/create_db.py`: Python script for database creation
- `/app/hdi/lib/db_agent.py`: Database interaction agent
- `/app/api/hdi/names/names.db`: SQLite database file
- `/app/api/hdi/names/seed.sql`: SQL schema definitions
- `/app/api/hdi/names/seed_db.py`: Database seeding script

## Reason for Archival

The HDI feature was archived due to:

1. Experimental nature no longer aligned with core business focus
2. Maintenance complexity compared to feature utilization
3. Shift toward more standardized interface patterns
4. Consolidation of development resources

## Potential Future Use

If reinstating this feature, consider:

- Updating to current React patterns and best practices
- Enhancing mobile responsiveness and accessibility
- Integrating with more modern AI interaction models
- Simplifying the implementation for better maintainability

## Dependencies

The HDI feature had dependencies on:

- Python for database scripts
- SQLite for local data storage
- Custom audio processing libraries
- Specialized UI animation libraries
</file>

<file path="archived/recruitment/layout.tsx">
import Footer from "@/components/Footer";
import Header from "@/components/Header";
import type { Metadata } from "next";
import { Suspense } from "react";

export const metadata: Metadata = {
  title: "Recruitment - Oceanheart.ai",
  description: "Candidate evaluation",
};

export default function RecruitmentLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div>
      <Suspense>
        <Header />
      </Suspense>

      <main className="min-h-screen p-2">{children}</main>

      <Suspense>
        <Footer showHDIForm={true} />
      </Suspense>
    </div>
  );
}
</file>

<file path="archived/recruitment/page.tsx">
'use client';

import React, { useState } from 'react';

// --- Data from previous analysis (copied from cxo.html) ---
const candidatesData = [
  // Top Tier
  { rank: 1, name: "Ayshe Ibrahim", country: "UK (London)", tel: "07957 490638", email: "ayseosteo@gmail.com", linkedIn: "Searchable", overview: "Highly motivated and enthusiastic Osteopath with over 23 years of clinical and entrepreneurial experience... founder and director... As a heart-led leader and Sufi student, I bring a spiritual and intuitive approach... building bridges between science, spirituality and service.", weightedScore: 51, cultureFit: 9, seniority: 7, healthcareYrs: 10, overallFit: 9.5, greenFlags: ["holistic care, and business leadership", "heart-led leader and Sufi student", "spiritual and intuitive approach", "experience with diverse cultural communities", "building bridges between science, spirituality and service", "Strategic leadership & healthcare entrepreneurship", "Spirituality, Sufi teachings, and embodied leadership"], redFlags: ["Less explicit strategic *design* focus across diverse stakeholder journeys (more clinical/own business leadership)."] },
  { rank: 2, name: "Peter Nsanze", country: "UK", tel: "+447833230739", email: "peternsanze@gmail.com", linkedIn: "https://www.linkedin.com/in/peternsanze", overview: "Peter is a strategic designer renowned for his ability to guide teams towards realising an improved product, service, or business vision... shaping the future trajectory of an ecosystem... seamless overall customer experience, and fostering a culture of continuous enhancement... advocates for user-centred design principles... ardent proponent of system thinking, design systems and frameworks.", weightedScore: 42, cultureFit: 8, seniority: 9, healthcareYrs: 0, overallFit: 8.5, greenFlags: ["strategic designer", "guide teams towards realising an improved product, service, or business vision", "seamless overall customer experience", "fostering a culture of continuous enhancement", "user-centred design principles", "system thinking, design systems and frameworks", "Chief Experience Officer (Current Role)"], redFlags: ["Complete lack of healthcare/wellness sector experience."] },
  { rank: 3, name: "Marco Colombo", country: "UK (London)", tel: "+44 750 881 8608", email: "clmb.marco@gmail.com", linkedIn: "https://www.linkedin.com/in/marcoclmb", overview: "1. a service and behaviour designer specialised in learning experiences and attitudinal change; 2. an expert of the human and behavioural side of data science... 3. a well-rounded, creative human being, with a strong passion for social change and mentoring. Mission: Help people and drive social change through memorable and engaging experiences.", weightedScore: 41, cultureFit: 8, seniority: 8, healthcareYrs: 1, overallFit: 8.0, greenFlags: ["service and behaviour designer", "expert of the human and behavioural side", "passion for social change and mentoring", "memorable and engaging experiences", "Integrity & authenticity", "Empathy & compassion", "Service design", "User research", "user-centric"], redFlags: ["Limited direct healthcare experience.", "Gamification skill needs careful alignment."] },
  { rank: 4, name: "Christopher Tacca, PHD", country: "UK (Southampton)", tel: "+44 07450 814462", email: "tacca.chris@gmail.com", linkedIn: "https://linkedin.com/in/christophertacca/", overview: "Health and wellness technology innovator with experience leading VR and AR immersive health technology projects... Passionate about putting the human first in design and using technology to help people live happier and healthier lives.", weightedScore: 46, cultureFit: 9, seniority: 6, healthcareYrs: 7, overallFit: 8.0, greenFlags: ["Health and wellness technology innovator", "leading VR and AR immersive health technology projects", "startup space", "Passionate about putting the human first in design", "using technology to help people live happier and healthier lives", "Research Fellow in HCI for Wellbeing Technology", "Drive human-centred research and development", "focused on user experience", "Mental Health Technology Expert Consultant", "deeper therapeutic engagement"], redFlags: ["Experience weighted towards R&D/academic/tech dev, less clear evidence of setting broad *corporate* CX/EX strategy across *all* touchpoints."] },
  { rank: 5, name: "Hamid Hafeez", country: "UK (Manchester)", tel: "07988849219", email: "hamid.hfz@gmail.com", linkedIn: "Via References", overview: "I am a practitioner with 15 years of experience crafting impactful, user-centered solutions that align with business goals. I research, I design, I test, I validate and deliver... honed my ability to adapt, lead, and deliver value... Whether hands on, or off - I get results.", weightedScore: 42, cultureFit: 8, seniority: 9, healthcareYrs: 0, overallFit: 7.5, greenFlags: ["15 years of experience", "crafting impactful, user-centered solutions", "I research, I design, I test, I validate and deliver", "adapt, lead, and deliver value", "UX + PRODUCT DESIGN + SERVICE + STRATEGY", "Leadership and mentoring", "Stakeholder Management", "Value propositioning", "Responsible for end-to-end", "Built and scaled research and design operations"], redFlags: ["Lack of healthcare/wellness industry experience.", "Focus on UX/Product in SaaS/tech might be narrower than holistic CXO."] },
  { rank: 6, name: "Dea Kacorri", country: "UK (London)", tel: "(+44) 07864212381", email: "d.kacorri@gmail.com", linkedIn: "Check CV Header", overview: "I'm a Design Strategy leader with over 14 years of experience helping organisations transform how they work and connect with people... expertise lies in using Design Thinking philosophies alongside ethnographic research... passionate about bringing people together, aligning diverse perspectives...", weightedScore: 43, cultureFit: 7, seniority: 9, healthcareYrs: 4, overallFit: 7.0, greenFlags: ["Design Strategy leader", "connect with people", "driving meaningful, sustainable change", "Design Thinking", "ethnographic research", "uncover real, unarticulated human needs", "align business goals with everyday experiences", "collaboration is key", "bringing people together, aligning diverse perspectives", "champion Design excellence", "create transformative experiences", "Service Design, Research, User Experience, Product, Innovation and Organisational Design"], redFlags: ["Less explicit alignment with deeper values/spirituality.", "Healthcare is one sector among many."] },
  { rank: 7, name: "Moinuddin Bhuiyan", country: "UK (London)", tel: "+447751856099", email: "bhuiyan.moin@gmail.com", linkedIn: "https://linkedin.com/in/moinb", overview: "Multilingual UX leader with over 18 years... including 9+ years of impactful leadership... setting long-term strategic visons... driving innovation. A practitioner of user-centred design... I adopt a data-informed, contextual approach...", weightedScore: 40, cultureFit: 7, seniority: 9, healthcareYrs: 1, overallFit: 6.5, greenFlags: ["UX leader", "impactful leadership experience", "setting long-term strategic visons", "driving innovation", "practitioner of user-centred design", "interdisciplinary, cross-cultural experiences", "data-informed, contextual approach", "Advisor/Lead, User Research and Service Design", "digital healthcare startup", "Head of Service Design & UX", "Built, coached, and led a 10-member multidisciplinary team", "elevating user research as a strategic asset"], redFlags: ["Bulk of deep experience is within the Telecoms industry, healthcare is recent/advisory.", "UX/Research focus potentially narrower than holistic CXO."] },
  { rank: 8, name: "Natasha Junejo", country: "UK", tel: "Not Provided", email: "Check CV Header", linkedIn: "Check CV Header", overview: "Highly motivated professional committed to creating access and opportunity in literature, education, and the arts. Strong communicator and creative campaigner... leading and delivering complex global projects... Interested in social action, advocacy, human rights, and ED&I...", weightedScore: 36, cultureFit: 8, seniority: 6, healthcareYrs: 0, overallFit: 5.5, greenFlags: ["creating access and opportunity", "Strong communicator and creative campaigner", "leading and delivering complex global projects", "social action, advocacy, human rights, and ED&I", "ED&I Strategy Development", "Speaker/Chair", "Communications", "Civic Engagement & Social Action", "move towards conscious social change", "Managing high profile online communities", "Building partnerships"], redFlags: ["No direct CX/UX/EX *design strategy* experience in corporate/product context.", "No healthcare/wellness industry experience.", "Significant role mismatch for CXO design focus."] },
  // Mid/Lower Tier
  { rank: 9, name: "Ola Bayoji", country: "UK (Rochester)", tel: "+44 7903 085610", email: "hi@olabayoji.com", linkedIn: "https://www.linkedin.com/in/olabayoji", overview: "Transformational business leader with 10+ years... directing organisational change and digital innovation... architecting customer-centric business transformations...", weightedScore: 34, cultureFit: 6, seniority: 8, healthcareYrs: 0, overallFit: 5.0, greenFlags: ["Transformational business leader", "architecting customer-centric business transformations", "Leading cross-functional teams", "Spearheading global CX transformation", "focusing on customer-centric outcomes", "Customer Success Manager"], redFlags: ["Strong focus on Ops/Partnerships/P&L. Less on holistic *design*.", "No healthcare.", "Meta background could be cultural question mark."] },
  { rank: 10, name: "Dave Pollard", country: "UK (Coventry)", tel: "07983400623", email: "DAVEKPOLLARD@GMAIL.COM", linkedIn: "Not Provided", overview: "An experienced Customer Experience specialist from a marketing background... firm believer in customer centricity... experience developing customer strategy and value propositions...", weightedScore: 32, cultureFit: 6, seniority: 7, healthcareYrs: 0, overallFit: 4.5, greenFlags: ["Customer Experience specialist", "firm believer in customer centricity", "developing customer strategy", "bring customer journeys to life", "Customer Insight", "Voice of the customer program"], redFlags: ["Strong focus purely on CX (less EX/UX integration evident).", "No healthcare.", "Marketing background prominent."] },
  { rank: 11, name: "Jessica Burn", country: "UK", tel: "Not Provided", email: "jburn026@gmail.com", linkedIn: "https://www.linkedin.com/in/jessica-burn-ux", overview: "A strategic and analytical UX Researcher with close to 6 years of leading research projects in cross functional teams...", weightedScore: 32, cultureFit: 6, seniority: 6, healthcareYrs: 2, overallFit: 4.0, greenFlags: ["strategic and analytical UX Researcher", "leading research projects", "cross functional teams", "storyteller to influence key decision-making", "Collaborative", "Stakeholder management", "Leadership: Managing multiple research streams", "Educating stakeholders on value of UX"], redFlags: ["Heavily focused on *research* not *strategy/design*.", "Less leadership experience.", "Limited healthcare."] },
  { rank: 12, name: "Shiffali Razdan", country: "UK (London)", tel: "+447473268198", email: "shiffali.razdan1@gmail.com", linkedIn: "Not Provided", overview: "Experienced manager and consultant with background in government/public sector consulting, investment analysis, business development...", weightedScore: 28, cultureFit: 4, seniority: 7, healthcareYrs: 2, overallFit: 3.0, greenFlags: ["carrying out analytics, valuations and modelling", "Liased with senior government officials", "Implemented strategy, business development and investment monitoring"], redFlags: ["Focus on finance, investment, policy, consulting.", "Little evidence of experience *design*.", "Major role mismatch."] },
  { rank: 13, name: "Jiten Mistry (Jit)", country: "UK", tel: "07732068201", email: "JitenMistry@hotmail.co.uk", linkedIn: "Searchable", overview: "An experienced... revenue/commercial and operations leader... skills across... Operations and Enablement, Revenue, Commercial..., Analytics...", weightedScore: 30, cultureFit: 5, seniority: 7, healthcareYrs: 1, overallFit: 3.0, greenFlags: ["personable revenue/commercial and operations leader", "collaborate with and influence stakeholders (including C-Level)", "leader of teams", "good communicator, strategic", "Being customer centric"], redFlags: ["Heavy focus on RevOps/SalesOps/BI/Finance.", "No design experience.", "Major role mismatch."] },
  { rank: 14, name: "Chantelle Gillespie", country: "UK", tel: "07415 111 557", email: "CHANTELLEGILLESPIE@ICLOUD.COM", linkedIn: "Not Provided", overview: "Experienced professional with skills in content creation, EDI strategy, stakeholder management... primarily within a Building Society context...", weightedScore: 28, cultureFit: 6, seniority: 5, healthcareYrs: 0, overallFit: 2.5, greenFlags: ["passion for high quality content creation", "all things EDI", "Strong interpersonal and communication skills", "Leading on the creation and development of the first EDI Strategy", "Regular engagement with senior stakeholders"], redFlags: ["No CX/UX/EX design strategy experience.", "Wrong industry.", "Less seniority.", "Major role mismatch."] },
  { rank: 15, name: "Marcus Seaton", country: "UK (Glasgow)", tel: "07770 976642", email: "Marcus.Seaton1@gmail.com", linkedIn: "Check CV Header", overview: "I'm a dynamic and results-driven director experienced in leading SaaS sales, operations, e-commerce and strategy...", weightedScore: 30, cultureFit: 4, seniority: 8, healthcareYrs: 2, overallFit: 2.5, greenFlags: ["experienced in leading SaaS sales, operations, e-commerce and strategy", "building high-performing teams", "Led cross functional collaborations", "Developed team and individual sales enablement strategies"], redFlags: ["Overwhelming focus on Sales/Ops/Revenue/P&L.", "No design focus.", "Major role mismatch."] },
  { rank: 16, name: "Milad Kh", country: "UK (London)", tel: "Not Provided", email: "Mkhodkameh.ibs@gmail.com", linkedIn: "Not Provided", overview: "As a Creative Director with over ten years of experience in events and marketing management... planning and executing high-impact events and marketing campaigns...", weightedScore: 29, cultureFit: 5, seniority: 7, healthcareYrs: 0, overallFit: 2.0, greenFlags: ["Creative Director", "developing strategic marketing plans", "leading cross-functional teams", "create compelling visual content", "oversee cohesive brand storytelling", "crafting memorable experiences"], redFlags: ["Focus on Marketing/Events/Visuals.", "Not strategic CX/EX/UX design.", "Wrong industry.", "Major role mismatch."] },
  { rank: 17, name: "Sufyaan Makda", country: "UK (Blackburn)", tel: "07900793924", email: "Sufyaan.makda@gmail.com", linkedIn: "Not Provided", overview: "I believe success comes from hard work... excel at building partnerships, strengthening client relationships... experience in project management, I have strong leadership skills...", weightedScore: 27, cultureFit: 5, seniority: 6, healthcareYrs: 0, overallFit: 1.5, greenFlags: ["building partnerships, strengthening client relationships", "strong leadership skills, motivating teams", "Adaptable and resilient", "Strong relationship management skills", "Experienced working with individuals from diverse backgrounds", "Strong leadership and management capabilities"], redFlags: ["Heavy Ops/Manufacturing/Project Management focus.", "No design.", "Wrong industry.", "Major role mismatch."] },
  { rank: 18, name: "Ghada White", country: "UK (Lichfield)", tel: "+4407765 995900", email: "ghada.white@icloud.com", linkedIn: "Not Provided", overview: "Results-driven Business Development Manager with over 20 years of experience in B2B sales, stakeholder management, and logistics...", weightedScore: 23, cultureFit: 3, seniority: 7, healthcareYrs: 0, overallFit: 1.0, greenFlags: ["stakeholder management", "develop profitable client relationships", "Leadership & communication skills", "Stakeholder Engagement"], redFlags: ["Overwhelming Sales/BD/Logistics focus.", "No mention of CX/UX/EX design or strategy.", "No experience in healthcare/wellness/tech sectors.", "Major role mismatch."] }
];

type Candidate = typeof candidatesData[0];

// --- React Component Definitions ---

const FlagList = ({ flags, type }: { flags: string[], type: 'green' | 'red' }) => (
  <ul className="list-none p-0 m-0 text-xs">
    {flags.map((flag, index) => (
      <li key={index} className="mb-1 leading-tight">
        {type === 'green' ? (
          <span className="text-cyan-500 font-medium whitespace-normal break-words">‚úÖ {flag}</span>
        ) : (
          <span className="text-pink-600 italic whitespace-normal break-words">‚ùå {flag}</span>
        )}
      </li>
    ))}
  </ul>
);

// Updated CandidateRow props
interface CandidateRowProps {
  candidate: Candidate;
  isExpanded: boolean;
  onToggleExpand: (rank: number) => void;
}

const CandidateRow = ({ candidate, isExpanded, onToggleExpand }: CandidateRowProps) => {
  const { rank, name, country, tel, email, linkedIn, overview, weightedScore, cultureFit, seniority, healthcareYrs, overallFit, greenFlags, redFlags } = candidate;

  const getScoreClass = (score: number | undefined) => {
    const roundedScore = Math.max(0, Math.min(10, Math.round(score || 0)));
    if (roundedScore >= 8) return 'bg-cyan-800/80';
    if (roundedScore >= 5) return 'bg-yellow-700/80';
    return 'bg-pink-800/80';
  };

  const getWeightedScoreClass = (score: number | undefined) => {
    const scoreValue = score || 0;
    if (scoreValue >= 40) return 'bg-cyan-800/80 font-bold';
    if (scoreValue >= 25) return 'bg-yellow-700/80';
    return 'bg-pink-800/80';
  };

  const linkedInElement = linkedIn && linkedIn !== "Searchable" && linkedIn !== "Via References" && linkedIn !== "Check CV Header" && linkedIn !== "Not Provided"
    ? <a href={linkedIn.startsWith('http') ? linkedIn : `https://${linkedIn}`} target="_blank" rel="noopener noreferrer" className="text-cyan-500 hover:text-cyan-400 underline">Profile</a>
    : <em className="text-gray-400">{linkedIn || 'Not Provided'}</em>;

  const totalColumns = 11;

  return (
    <React.Fragment>
      {/* Main visible row (clickable) */}
      <tr
        className="bg-purple-950/80 even:bg-purple-900/80 hover:bg-pink-900/80 text-gray-200 cursor-pointer"
        onClick={() => onToggleExpand(rank)} // Use handler from props
      >
        <td className={`rank-cell text-center font-bold text-sm border border-purple-700 p-2 align-top ${getScoreClass(overallFit)}`}>{rank}</td>
        <td className="border border-purple-700 p-2 align-top text-xs">{name}</td>
        <td className="contact-info text-xs whitespace-nowrap border border-purple-700 p-2 align-top">
          {country}<br />
          T: {tel || 'N/A'}<br />
          E: {email || 'N/A'}<br />
          L: {linkedInElement}
        </td>
        <td className="overview text-xs max-w-sm whitespace-normal leading-snug border border-purple-700 p-2 align-top hidden md:table-cell">{overview}</td>
        <td className={`border border-purple-700 p-2 align-top text-xs hidden md:table-cell ${getWeightedScoreClass(weightedScore)}`}>{weightedScore}</td>
        <td className={`border border-purple-700 p-2 align-top text-xs hidden md:table-cell ${getScoreClass(cultureFit)}`}>{cultureFit}</td>
        <td className={`border border-purple-700 p-2 align-top text-xs hidden md:table-cell ${getScoreClass(seniority)}`}>{seniority}</td>
        <td className={`border border-purple-700 p-2 align-top text-xs hidden md:table-cell ${getScoreClass(healthcareYrs)}`}>{healthcareYrs}</td>
        <td className={`border border-purple-700 p-2 align-top text-xs hidden md:table-cell ${getScoreClass(overallFit)}`}>{overallFit}</td>
        <td className="border border-purple-700 p-2 align-top hidden md:table-cell"><FlagList flags={greenFlags} type="green" /></td>
        <td className="border border-purple-700 p-2 align-top hidden md:table-cell"><FlagList flags={redFlags} type="red" /></td>
      </tr>

      {/* Collapsible row for details */}
      {/* Use isExpanded prop to determine visibility */}
      {isExpanded && (
        <tr className="bg-purple-800/90">
          <td colSpan={totalColumns} className="p-2 border border-purple-700 border-t-0">
            <div className="md:hidden max-w-[80vw]">
              <h4 className="text-xs font-semibold text-cyan-400 mb-1">Overview:</h4>
              <p className="text-xs mb-2 whitespace-normal leading-snug">{overview}</p>

              <div className="flex flex-col gap-2 space-y-1 mb-2 text-xs">
                <div><span className="font-semibold text-cyan-400 w-24 inline-block">Overall Fit:</span> <span className={`p-1 rounded ${getScoreClass(overallFit)}`}>{overallFit}</span></div>
                <div><span className="font-semibold text-cyan-400 w-24 inline-block">Weighted Score:</span> <span className={`p-1 rounded ${getWeightedScoreClass(weightedScore)}`}>{weightedScore}</span></div>
                <div><span className="font-semibold text-cyan-400 w-24 inline-block">Culture Fit:</span> <span className={`p-1 rounded ${getScoreClass(cultureFit)}`}>{cultureFit}</span></div>
                <div><span className="font-semibold text-cyan-400 w-24 inline-block">Seniority:</span> <span className={`p-1 rounded ${getScoreClass(seniority)}`}>{seniority}</span></div>
                <div><span className="font-semibold text-cyan-400 w-24 inline-block">Health Yrs:</span> <span className={`p-1 rounded ${getScoreClass(healthcareYrs)}`}>{healthcareYrs}</span></div>
              </div>

              <div className="mb-2">
                <h4 className="text-xs font-semibold text-cyan-400 mb-1">Green Flags:</h4>
                <FlagList flags={greenFlags} type="green" />
              </div>
              <div>
                <h4 className="text-xs font-semibold text-cyan-400 mb-1">Red Flags:</h4>
                <FlagList flags={redFlags} type="red" />
              </div>
            </div>
            <div className="hidden md:block text-center text-gray-500 text-xs italic">
              (Details shown in main columns)
            </div>
          </td>
        </tr>
      )}
    </React.Fragment>
  );
};

const RecruitmentPage = () => {
  // State to track the currently expanded row rank
  const [expandedRank, setExpandedRank] = useState<number | null>(null);

  // Handler to toggle the expanded state
  const handleToggleExpand = (rank: number) => {
    setExpandedRank(prevRank => (prevRank === rank ? null : rank));
  };

  return (
    <div className="m-3 md:m-5 font-sans leading-relaxed from-gray-950 to-purple-950 text-gray-300 p-1 rounded-lg">
      <h1 className="text-center text-cyan-500 mb-8 text-3xl font-bold tracking-wider">CXO Candidate Compatibility Matrix</h1>
      <p className="text-center text-gray-400 mb-8 text-sm">
        This is a list of candidates that we have reviewed for the CXO role.
        The scores are based on a combination of their skills, experience, and cultural fit.
        The candidates are ranked by their overall fit score.
      </p>
      <p className="text-center text-gray-400 mb-8 text-sm">Click on a candidate to view their details.</p>

      <div className="overflow-x-auto shadow-lg shadow-purple-500/20 rounded-md">
        <table className="w-full border-collapse">
          <thead>
            <tr className="bg-purple-800/90 text-cyan-400">
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider">Rank</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider">Name</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider">Contact</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Overview</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Score (/60)</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Culture (/10)</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Seniority (/10)</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Health Yrs (/10)</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Overall (/10)</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Green Flags</th>
              <th className="border border-purple-700 p-2 text-left align-top text-xs font-bold whitespace-nowrap uppercase tracking-wider hidden md:table-cell">Red Flags</th>
            </tr>
          </thead>
          <tbody>
            {candidatesData.map(candidate => (
              // Pass down relevant props
              <CandidateRow
                key={candidate.rank}
                candidate={candidate}
                isExpanded={expandedRank === candidate.rank}
                onToggleExpand={handleToggleExpand}
              />
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
};

export default RecruitmentPage;
</file>

<file path="archived/saigo/DATABASE.md">
# Saigo Database Structure

This document provides detailed information about the database schema used by the Saigo feature.

## Overview

The Saigo feature used several PostgreSQL tables in Supabase to store user data, practice records, and related information. The primary tables were:

1. `saigo_users` - Stored user information specific to the Saigo system
2. `practices` - Recorded user practice activities and points
3. Various relationship tables for linking users, practices, and other entities

## Table Schemas

### saigo_users

```sql
create table public.saigo_users (
  id uuid not null default gen_random_uuid(),
  email text not null,
  user_id uuid null,
  created_at timestamp without time zone null default CURRENT_TIMESTAMP,
  username text null,
  force integer null default 0,
  constraint saigo_users_pkey primary key (id),
  constraint saigo_users_email_key unique (email),
  constraint saigo_users_username_key unique (username)
);
```

#### Columns:
- `id`: UUID primary key, automatically generated
- `email`: User's email address (unique)
- `user_id`: Optional reference to the main users table
- `created_at`: Timestamp when the user was created
- `username`: User's chosen username (unique)
- `force`: Points modifier value used in calculations

### practices

```sql
create table public.practices (
  id uuid not null default extensions.uuid_generate_v4(),
  type text not null,
  points integer null,
  user_id uuid null,
  created_at timestamp with time zone null,
  constraint practices_pkey primary key (id),
  constraint practices_user_id_fkey foreign key (user_id) references saigo_users(id)
);
```

#### Columns:
- `id`: UUID primary key, automatically generated
- `type`: The type of practice performed
- `points`: Number of points awarded for the practice
- `user_id`: Reference to the saigo_users table
- `created_at`: Timestamp when the practice was recorded

## Relationships

The Saigo feature implemented several relationships:

1. Each practice record was associated with a Saigo user through the `user_id` foreign key
2. Saigo users could be linked to the main authentication users through the `user_id` column
3. The Instagram check feature related Saigo users to their Instagram verification records

## Migration Files

The database schema was defined and modified through several migration files:

1. `saigo_tables.sql` - Initial table definitions
2. `saigo_tables_uuid.sql` - Updated schema with UUID support
3. `saigo_table_relationships.sql` - Defined relationships between tables
4. `saigo_table_relationships_by_id.sql` - Updated relationships to use IDs
5. `instagram_page_check.sql` - Added support for Instagram page verification

## Index Strategy

The following indexes were created to optimize query performance:

- Primary key indexes on `id` columns
- Unique indexes on `email` and `username` columns in the `saigo_users` table
- Foreign key indexes on relationship columns

## Data Access Patterns

The Saigo feature typically accessed data in the following ways:

1. Retrieving a user's profile by username or email
2. Fetching a user's practice history
3. Calculating points and leaderboard positions
4. Verifying Instagram accounts
5. Retrieving leaderboard data for all users

## Security Considerations

The Saigo database implemented the following security measures:

1. Row-Level Security (RLS) policies to restrict data access
2. Foreign key constraints to maintain data integrity
3. Unique constraints to prevent duplicate records
</file>

<file path="archived/saigo/FILE_MOVES.md">
# Saigo Feature File Migration Plan

This document outlines the file migration plan for archiving the Saigo feature. Due to execution constraints, the actual file moves are documented here as a reference for completing the migration manually.

## App Pages

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/saigo/layout.tsx` | `/archived/saigo/app/layout.tsx` |
| `/app/saigo/leaderboard/layout.tsx` | `/archived/saigo/app/leaderboard/layout.tsx` |
| `/app/saigo/leaderboard/page.tsx` | `/archived/saigo/app/leaderboard/page.tsx` |
| `/app/saigo/signin/layout.tsx` | `/archived/saigo/app/signin/layout.tsx` |
| `/app/saigo/signin/page.tsx` | `/archived/saigo/app/signin/page.tsx` |
| `/app/saigo/username/layout.tsx` | `/archived/saigo/app/username/layout.tsx` |
| `/app/saigo/username/page.tsx` | `/archived/saigo/app/username/page.tsx` |

## API Routes

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/api/saigo/instagram/run/route.ts` | `/archived/saigo/api/instagram/run/route.ts` |
| `/app/api/saigo/instagram/delete/[id]/route.ts` | `/archived/saigo/api/instagram/delete/[id]/route.ts` |
| `/app/api/saigo/instagram/check-trigger/route.ts` | `/archived/saigo/api/instagram/check-trigger/route.ts` |
| `/app/api/saigo/instagram/route.ts` | `/archived/saigo/api/instagram/route.ts` |
| `/app/api/saigo/key/route.ts` | `/archived/saigo/api/key/route.ts` |
| `/app/api/saigo/practice/route.ts` | `/archived/saigo/api/practice/route.ts` |
| `/app/api/saigo/username/route.ts` | `/archived/saigo/api/username/route.ts` |
| `/app/api/saigo/leaderboard/route.ts` | `/archived/saigo/api/leaderboard/route.ts` |
| `/app/api/auth/saigo-callback/route.ts` | `/archived/saigo/api/auth/saigo-callback/route.ts` |
| `/app/api/auth/saigo-verify-and-signin/route.ts` | `/archived/saigo/api/auth/saigo-verify-and-signin/route.ts` |

## Utility and Library Files

| Original Path | Archive Destination |
|---------------|---------------------|
| `/app/saigo/lib/guard.ts` | `/archived/saigo/lib/guard.ts` |
| `/app/saigo/lib/sum_points_days.py` | `/archived/saigo/lib/sum_points_days.py` |
| `/app/saigo/lib/sum_practice_days.py` | `/archived/saigo/lib/sum_practice_days.py` |
| `/app/saigo/lib/testdb.ts` | `/archived/saigo/lib/testdb.ts` |
| `/app/saigo/lib/seed_users.ts` | `/archived/saigo/lib/seed_users.ts` |
| `/app/saigo/lib/seed_db.ts` | `/archived/saigo/lib/seed_db.ts` |
| `/app/saigo/lib/seed_practices_last7days.ts` | `/archived/saigo/lib/seed_practices_last7days.ts` |
| `/app/saigo/lib/encrypt.ts` | `/archived/saigo/lib/encrypt.ts` |
| `/app/saigo/lib/seed_practices.ts` | `/archived/saigo/lib/seed_practices.ts` |
| `/app/saigo/lib/add-instagram-check-with-users.ts` | `/archived/saigo/lib/add-instagram-check-with-users.ts` |
| `/app/saigo/lib/add-instagram-check.ts` | `/archived/saigo/lib/add-instagram-check.ts` |
| `/libs/instagram-service.ts` | `/archived/saigo/lib/instagram-service.ts` |

## Components

| Original Path | Archive Destination |
|---------------|---------------------|
| `/components/SaigoAnimatedText.tsx` | `/archived/saigo/components/SaigoAnimatedText.tsx` |
| `/components/LiveLeaderboard.tsx` | `/archived/saigo/components/LiveLeaderboard.tsx` |
| `/components/LeaderboardTable.tsx` | `/archived/saigo/components/LeaderboardTable.tsx` |

## Migrations

| Original Path | Archive Destination |
|---------------|---------------------|
| `/migrations/saigo_table_relationships.sql` | `/archived/saigo/migrations/saigo_table_relationships.sql` |
| `/migrations/saigo_table_relationships_by_id.sql` | `/archived/saigo/migrations/saigo_table_relationships_by_id.sql` |
| `/migrations/saigo_tables.sql` | `/archived/saigo/migrations/saigo_tables.sql` |
| `/migrations/saigo_tables_uuid.sql` | `/archived/saigo/migrations/saigo_tables_uuid.sql` |
| `/migrations/instagram_page_check.sql` | `/archived/saigo/migrations/instagram_page_check.sql` |

## Prompts and Specs

| Original Path | Archive Destination |
|---------------|---------------------|
| `/prompts/saigo.md` | `/archived/saigo/prompts/saigo.md` |
| `/prompts/saigo_username_prompt.xml` | `/archived/saigo/prompts/saigo_username_prompt.xml` |
| `/specs/02_saigo_login.spec.md` | `/archived/saigo/specs/02_saigo_login.spec.md` |
| `/specs/03_saigo_auth_api.spec.md` | `/archived/saigo/specs/03_saigo_auth_api.spec.md` |
| `/specs/04_saigo_users_insert.spec.md` | `/archived/saigo/specs/04_saigo_users_insert.spec.md` |
| `/specs/05_saigo_username_page.spec.md` | `/archived/saigo/specs/05_saigo_username_page.spec.md` |
| `/specs/06_saigo_leaderboard_update.spec.md` | `/archived/saigo/specs/06_saigo_leaderboard_update.spec.md` |

## Migration Process

To complete the migration:

1. Create all necessary directories in the archive destination
2. For each file, use git mv to preserve history: 
   ```
   git mv <original_path> <destination_path>
   ```
3. Update the tracking.csv file with details of each moved file
4. For files that have dependencies on other active code, update imports in the archived files
5. Remove references to the archived files from the active codebase

## Code References to Update

After moving files, the following files in the active codebase need to be checked and updated:

1. `config.ts` - Contains Saigo configuration that may need to be removed or commented out
2. `app/layout.tsx` - May include routes or references to Saigo pages
3. Any components that import Saigo components
4. Navigation components that link to Saigo routes
</file>

<file path="archived/saigo/README.md">
# Archived: Saigo Feature

The Saigo feature was a gamified practice tracking and leaderboard system originally implemented in the Oceanheart.ai application. This feature has been archived as part of the refactoring project to focus on the core functionality of the application.

## Feature Overview

Saigo was a system designed to:

- Track user practice activities and assign points
- Display a leaderboard of user progress
- Integrate with Instagram checks for external validation
- Provide visualization of practice data through various charts

## Original Location

The Saigo feature code was originally located in:

- `/app/saigo/`: Pages and components for the Saigo UI
- `/app/api/saigo/`: API endpoints for Saigo functionality
- `/app/api/auth/saigo-callback/`: Saigo-specific authentication routes
- `/components/`: Various Saigo-related components (LeaderboardTable, practice charts, etc.)
- `/migrations/`: Database migrations for Saigo tables

## Database Structure

Saigo used the following database tables (defined in `/migrations/saigo_tables.sql`):

- `saigo_users`: User information specific to the Saigo system
  - `id`: UUID primary key
  - `email`: User email (unique)
  - `user_id`: Reference to auth.users
  - `username`: User-selected username (unique)
  - `created_at`: Timestamp
  - `force`: Points modifier value

- `practices`: Records of user practice activities
  - `id`: UUID primary key
  - `type`: Type of practice
  - `points`: Points awarded for the practice
  - `user_id`: Reference to saigo_users
  - `created_at`: Timestamp

## Key Components

- `LeaderboardTable.tsx`: Displays user rankings and points
- `LiveLeaderboard.tsx`: Real-time leaderboard updates
- `PracticeTypesRadarChart.tsx`: Visualization of practice by type
- `PracticeTypesStackedBarChart.tsx`: Alternative visualization
- `CumulativePointsAreaChart.tsx`: Progress tracking over time
- `PracticeSummaryPieChart.tsx`: Summary of practice distribution

## Reason for Archival

The Saigo feature was archived due to:

1. Shift in business focus to core consulting and educational content
2. Maintenance overhead compared to active user engagement
3. Backend complexity and resource requirements
4. Streamlined user experience without gamification elements

## Potential Future Use

If reinstating this feature, consider:

- Updating authentication to current standards
- Modernizing the visualization components
- Enhancing the point system algorithm
- Improving mobile responsiveness of leaderboards and charts

## Dependencies

The Saigo feature had dependencies on:

- Supabase Authentication
- Recharts for data visualization
- Instagram API for external validation
- Stripe for potential premium features
</file>

<file path="archived/PROCESS.md">
# Archival Process Documentation

This document outlines the standard process for archiving code in the Oceanheart.ai project. Following these guidelines ensures consistent and well-documented code archival.

## When to Archive Code

Code should be archived rather than deleted when:

1. It represents significant development effort (more than a few days of work)
2. It implements unique or complex functionality that might be useful in the future
3. It provides valuable historical context or design patterns
4. It's being removed due to changing business requirements, not because it's flawed
5. It may be needed for reference in understanding other parts of the codebase

Code should be deleted rather than archived when:

1. It's a duplicate implementation with no unique aspects
2. It contains security vulnerabilities or serious bugs
3. It's trivial and easily reproducible
4. It's obsolete technology that will never be reused

## Archival Process Steps

### 1. Identification and Approval

- Identify code to be archived
- Get approval from the tech lead or project manager
- Create a ticket/issue to track the archival process

### 2. Documentation Preparation

- Document the purpose and functionality of the code
- Identify all related components and dependencies
- Note the reason for archival
- Update the tracking.csv file with basic information

### 3. Creation of Archive Structure

- Create appropriate directories in the `/archived` folder
- Maintain a structure similar to the original code location
- Use feature-specific subdirectories when appropriate

### 4. Code Migration

- Move the code to the archive location
- Update imports in the archived code to maintain internal references
- Remove or update references in the active codebase
- Use git mv to preserve file history when possible

### 5. Testing

- Verify the application builds without the archived code
- Run tests to ensure no regressions
- Fix any issues in the active codebase related to the removed code

### 6. Detailed Documentation

- Complete the component documentation using the TEMPLATE.md format
- Update README.md files in relevant archive directories
- Finalize the tracking.csv entry with all details

### 7. Review and Commit

- Have another developer review the archive changes
- Commit the changes with a clear message about what was archived and why
- Update the ticket/issue with the completed work

## Using the Tracking File

The `tracking.csv` file contains the following columns:

- **Component Name**: The name of the archived component or feature
- **Original Path**: The original location in the codebase
- **Archived Path**: The new location in the archive directory
- **Type**: Component, Page, API Route, Utility, etc.
- **Date Archived**: When the code was archived (YYYY-MM-DD)
- **Archived By**: The developer who performed the archival
- **Ticket Reference**: Link or reference to the relevant ticket/issue

When archiving code, always update this file to maintain a comprehensive record.

## Component Documentation Template

Use the TEMPLATE.md file as a starting point for documenting archived components. This template includes:

- Basic component information
- Description of functionality
- Implementation details
- Dependencies
- Reason for archival
- Reuse considerations
- Related components
- External references
- Archival notes

## Restoration Process

If archived code needs to be restored:

1. Review the documentation in the archive
2. Assess if the code needs updates for the current codebase
3. Create a new ticket/issue for the restoration
4. Move the code back to the appropriate location
5. Update imports and references
6. Test thoroughly to ensure compatibility
7. Remove the entry from the tracking.csv file
8. Update archive documentation to note the restoration
</file>

<file path="archived/README.md">
# Archived Code - Oceanheart.ai

This directory contains code that has been archived as part of the Oceanheart.ai refactoring project. The code here is no longer active in the main application but is preserved for reference, historical context, or potential future reuse.

## Purpose of the Archive

The purpose of this archive is to:

1. **Preserve Knowledge**: Maintain access to previous implementations and design decisions
2. **Reduce Active Codebase Size**: Improve maintainability by removing unused code from the active codebase
3. **Enable Future Reference**: Allow developers to understand and potentially reuse previously implemented features
4. **Document History**: Provide context on the evolution of the application

## Archive Structure

The archive is organized by feature area:

- `/archived/saigo/`: The Saigo feature (leaderboard, practice tracking system)
- `/archived/hdi/`: The Human Digital Interface (HDI) experimental section
- `/archived/ab-testing/`: Previous A/B testing implementations

Each feature directory maintains the original structure of the code (app pages, components, API routes, etc.) to facilitate understanding and potential restoration.

## Guidelines for Using Archived Code

When working with archived code:

1. **Reference Only**: Archived code should be treated as reference material, not active code
2. **No Direct Imports**: Do not import archived code into the active codebase
3. **Documentation**: If you restore or reuse archived code, document its history and origin
4. **Testing**: If restoring code, ensure comprehensive testing as requirements may have changed

## When to Archive vs. Delete

- **Archive**: Code that represents significant development effort, implements unique functionality, or provides valuable reference
- **Delete**: Trivial code, duplicate implementations, or code that poses security or maintenance risks

## Archival Process

All code in this directory has been archived following a structured process:

1. Identification of code to be archived
2. Documentation of its purpose and structure
3. Testing to ensure active codebase functions without the code
4. Moving the code to the appropriate archive location
5. Updating any references in the active codebase

If you have questions about archived code, please consult the feature-specific README files or contact the development team.
</file>

<file path="archived/synai-original.html">
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Synai: Your Personal AI Coach | Oceanheart.ai</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    :root {
      --primary-color: #1a1f2e;
      --accent-color: #4f6df5;
      --secondary-color: #7c3aed;
      --light-blue: #e0e7ff;
      --cosmic-purple: #6366f1;
      --text-light: #64748b;
      --text-dark: #0f172a;
      --bg-light: #f8fafc;
      --bg-white: #ffffff;
      --gradient-cosmic: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-hero: linear-gradient(135deg, #4f6df5 0%, #7c3aed 100%);
      --shadow-soft: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-large: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: var(--text-dark);
      background-color: var(--bg-white);
      overflow-x: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      z-index: 1000;
      padding: 1rem 0;
      transition: all 0.3s ease;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      list-style: none;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text-light);
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-links a:hover {
      color: var(--accent-color);
    }

    /* Hero Section */
    .hero {
      background: var(--gradient-hero);
      color: white;
      padding: 8rem 0 6rem;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/><circle cx="20" cy="20" r="0.5" fill="white" opacity="0.15"/><circle cx="80" cy="30" r="0.8" fill="white" opacity="0.12"/><circle cx="30" cy="80" r="0.6" fill="white" opacity="0.1"/></svg>');
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0px) rotate(0deg);
      }

      50% {
        transform: translateY(-20px) rotate(2deg);
      }
    }

    .hero-content {
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }

    .hero h1 {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      line-height: 1.1;
    }

    .hero-subtitle {
      font-size: 1.25rem;
      margin-bottom: 2rem;
      opacity: 0.9;
      font-weight: 400;
    }

    .hero-description {
      font-size: 1.1rem;
      margin-bottom: 3rem;
      opacity: 0.8;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .cta-primary {
      display: inline-block;
      background: white;
      color: var(--accent-color);
      padding: 1rem 2.5rem;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: var(--shadow-medium);
    }

    .cta-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-large);
    }

    /* Problem Section */
    .problem-section {
      padding: 6rem 0;
      background: var(--bg-light);
    }

    .section-header {
      text-align: center;
      margin-bottom: 4rem;
    }

    .section-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .section-subtitle {
      font-size: 1.2rem;
      color: var(--text-light);
      max-width: 600px;
      margin: 0 auto;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      margin-top: 3rem;
    }

    .comparison-card {
      background: white;
      padding: 2.5rem;
      border-radius: 1rem;
      box-shadow: var(--shadow-soft);
      transition: transform 0.3s ease;
    }

    .comparison-card:hover {
      transform: translateY(-5px);
    }

    .comparison-card.generic {
      border-left: 4px solid #ef4444;
    }

    .comparison-card.synai {
      border-left: 4px solid var(--accent-color);
    }

    .comparison-card h3 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .comparison-card.generic h3 {
      color: #dc2626;
    }

    .comparison-card.synai h3 {
      color: var(--accent-color);
    }

    .comparison-list {
      list-style: none;
    }

    .comparison-list li {
      margin-bottom: 0.75rem;
      padding-left: 1.5rem;
      position: relative;
      color: var(--text-light);
    }

    .comparison-card.generic .comparison-list li::before {
      content: '‚úó';
      position: absolute;
      left: 0;
      color: #dc2626;
      font-weight: bold;
    }

    .comparison-card.synai .comparison-list li::before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: var(--accent-color);
      font-weight: bold;
    }

    /* Solution Section */
    .solution-section {
      padding: 6rem 0;
      background: white;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }

    .feature-card {
      text-align: center;
      padding: 2rem;
    }

    .feature-icon {
      width: 4rem;
      height: 4rem;
      background: var(--gradient-cosmic);
      border-radius: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      font-size: 1.5rem;
    }

    .feature-card h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .feature-card p {
      color: var(--text-light);
    }

    /* Process Section */
    .process-section {
      padding: 6rem 0;
      background: var(--bg-light);
    }

    .process-steps {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }

    .process-step {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: var(--shadow-soft);
      text-align: center;
      position: relative;
    }

    .step-number {
      position: absolute;
      top: -1rem;
      left: 50%;
      transform: translateX(-50%);
      width: 2rem;
      height: 2rem;
      background: var(--accent-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }

    .process-step h4 {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary-color);
      margin: 1rem 0;
    }

    /* Technical Details */
    .technical-section {
      padding: 6rem 0;
      background: var(--primary-color);
      color: white;
    }

    .technical-visualization {
      background: rgba(255, 255, 255, 0.1);
      padding: 2rem;
      border-radius: 1rem;
      margin-top: 3rem;
      backdrop-filter: blur(10px);
    }

    .prompt-structure {
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .xml-tag {
      background: rgba(255, 255, 255, 0.1);
      padding: 0.5rem 1rem;
      margin: 0.25rem 0;
      border-radius: 0.5rem;
      border-left: 3px solid var(--cosmic-purple);
    }

    .xml-tag.nested {
      margin-left: 1.5rem;
      border-left-color: #10b981;
    }

    .xml-tag.deep-nested {
      margin-left: 3rem;
      border-left-color: #f59e0b;
    }

    /* CTA Section */
    .final-cta {
      padding: 6rem 0;
      background: var(--gradient-hero);
      color: white;
      text-align: center;
    }

    .cta-secondary {
      display: inline-block;
      background: transparent;
      color: white;
      padding: 1rem 2rem;
      border: 2px solid white;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      margin: 0 1rem;
      transition: all 0.3s ease;
    }

    .cta-secondary:hover {
      background: white;
      color: var(--accent-color);
    }

    /* Footer */
    footer {
      background: var(--primary-color);
      color: white;
      padding: 2rem 0;
      text-align: center;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.5rem;
      }

      .comparison-grid {
        grid-template-columns: 1fr;
      }

      .nav-links {
        display: none;
      }

      .section-title {
        font-size: 2rem;
      }
    }

    /* Scroll animations */
    .fade-in {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease;
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <header>
    <div class="container">
      <div class="header-content">
        <a href="https://oceanheart.ai" class="logo">Oceanheart.ai</a>
        <nav>
          <ul class="nav-links">
            <li><a href="https://oceanheart.ai/#pricing">Offerings</a></li>
            <li><a href="https://oceanheart.ai/about-alt">About Kai</a></li>
            <li><a href="https://calendar.app.google/85ZdaqYK5vfNk4aH9">Book Call</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Meet Synai</h1>
        <p class="hero-subtitle">Your Personal AI Coach, Engineered for You</p>
        <p class="hero-description">
          What if you had an AI that truly understood your unique patterns, values, and goals?
          Not generic advice, but deeply personalized guidance built from a clinical assessment of who you are.
        </p>
        <a href="https://calendar.app.google/85ZdaqYK5vfNk4aH9" class="cta-primary">Discover Your Personal AI</a>
      </div>
    </div>
  </section>

  <section class="problem-section">
    <div class="container">
      <div class="section-header fade-in">
        <h2 class="section-title">Generic AI vs. Personal AI</h2>
        <p class="section-subtitle">
          The difference between asking ChatGPT for life advice and having a coach who's studied you for years
        </p>
      </div>

      <div class="comparison-grid">
        <div class="comparison-card generic fade-in">
          <h3>Generic AI Coaching</h3>
          <ul class="comparison-list">
            <li>One-size-fits-all responses</li>
            <li>No memory of your unique context</li>
            <li>Surface-level advice that sounds good but doesn't fit</li>
            <li>No understanding of your values or patterns</li>
            <li>Starts from zero every conversation</li>
            <li>Treats symptoms, not root causes</li>
          </ul>
        </div>

        <div class="comparison-card synai fade-in">
          <h3>Synai: Your Personal AI</h3>
          <ul class="comparison-list">
            <li>Built from your clinical assessment</li>
            <li>Knows your history, values, and goals</li>
            <li>Guidance tailored to your specific patterns</li>
            <li>Grounded in ACT (Acceptance & Commitment Therapy)</li>
            <li>Evolves with you through ongoing dialogue</li>
            <li>Addresses root causes and unconscious blocks</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="solution-section">
    <div class="container">
      <div class="section-header fade-in">
        <h2 class="section-title">How Synai Works</h2>
        <p class="section-subtitle">
          A fusion of clinical expertise, advanced AI engineering, and your unique psychological fingerprint
        </p>
      </div>

      <div class="features-grid">
        <div class="feature-card fade-in">
          <div class="feature-icon">üß†</div>
          <h4>Clinical Foundation</h4>
          <p>Starts with Kai's professional assessment of your patterns, values, and goals using evidence-based
            therapeutic frameworks.</p>
        </div>

        <div class="feature-card fade-in">
          <div class="feature-icon">‚ö°</div>
          <h4>Advanced Prompt Engineering</h4>
          <p>Your assessment becomes a sophisticated AI prompt‚Äînot just instructions, but a living knowledge graph of
            who you are.</p>
        </div>

        <div class="feature-card fade-in">
          <div class="feature-icon">üéØ</div>
          <h4>Personalized Guidance</h4>
          <p>Every conversation builds on deep understanding of your unique context, helping you uncover "unknown
            unknowns" about yourself.</p>
        </div>

        <div class="feature-card fade-in">
          <div class="feature-icon">üìà</div>
          <h4>Continuous Evolution</h4>
          <p>Your AI coach learns and adapts, updating its understanding as you grow and change through life's journey.
          </p>
        </div>

        <div class="feature-card fade-in">
          <div class="feature-icon">üõ°Ô∏è</div>
          <h4>Private & Secure</h4>
          <p>Your personal AI exists only for you. Complete privacy, with all the depth of understanding you'd expect
            from years of therapy.</p>
        </div>

        <div class="feature-card fade-in">
          <div class="feature-icon">üíé</div>
          <h4>Unprecedented Quality</h4>
          <p>This isn't ChatGPT with a nice interface. It's a professionally engineered system that represents the
            cutting edge of personalized AI.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="process-section">
    <div class="container">
      <div class="section-header fade-in">
        <h2 class="section-title">Your Journey to Personal AI</h2>
        <p class="section-subtitle">From clinical assessment to your private AI coach in three steps</p>
      </div>

      <div class="process-steps">
        <div class="process-step fade-in">
          <div class="step-number">1</div>
          <h4>Deep Assessment</h4>
          <p>Kai conducts a comprehensive clinical evaluation, mapping your values, patterns, goals, and unconscious
            blocks using proven therapeutic frameworks.</p>
        </div>

        <div class="process-step fade-in">
          <div class="step-number">2</div>
          <h4>AI Engineering</h4>
          <p>Your assessment becomes a sophisticated prompt system‚Äîa private AI that understands you at a level that
            generic tools simply cannot match.</p>
        </div>

        <div class="process-step fade-in">
          <div class="step-number">3</div>
          <h4>Ongoing Partnership</h4>
          <p>Your personal AI coach guides you through life's challenges, helping you make decisions aligned with your
            deepest values and highest potential.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="technical-section">
    <div class="container">
      <div class="section-header fade-in">
        <h2 class="section-title">The Engineering Behind the Magic</h2>
        <p class="section-subtitle">
          For those who appreciate technical excellence: this is prompt engineering at its finest
        </p>
      </div>

      <div class="technical-visualization fade-in">
        <h4 style="text-align: center; margin-bottom: 2rem;">Simplified Prompt Architecture</h4>
        <div class="prompt-structure">
          <div class="xml-tag">
            &lt;SYNAI_PERSONAL_COACH_SYSTEM&gt;
          </div>
          <div class="xml-tag nested">
            &lt;ClientIdentity&gt; Your unique psychological profile &lt;/ClientIdentity&gt;
          </div>
          <div class="xml-tag nested">
            &lt;CoreFramework&gt; ACT-based therapeutic approach &lt;/CoreFramework&gt;
          </div>
          <div class="xml-tag nested">
            &lt;KnowledgeGraph&gt; Living map of your patterns and goals &lt;/KnowledgeGraph&gt;
          </div>
          <div class="xml-tag nested">
            &lt;AdaptiveLearning&gt; Continuous integration of new insights &lt;/AdaptiveLearning&gt;
          </div>
          <div class="xml-tag nested">
            &lt;PersonalizedGuidance&gt; Tailored responses to your context &lt;/PersonalizedGuidance&gt;
          </div>
          <div class="xml-tag">
            &lt;/SYNAI_PERSONAL_COACH_SYSTEM&gt;
          </div>
        </div>
        <p style="text-align: center; margin-top: 2rem; opacity: 0.8;">
          <em>This represents months of R&D, clinical expertise, and advanced AI engineering‚Äîall focused on
            understanding you.</em>
        </p>
      </div>
    </div>
  </section>

  <section class="final-cta">
    <div class="container">
      <div class="fade-in">
        <h2 style="font-size: 2.5rem; margin-bottom: 1rem;">Ready for AI That Actually Knows You?</h2>
        <p style="font-size: 1.2rem; margin-bottom: 3rem; opacity: 0.9;">
          Stop settling for generic advice. Experience what's possible when AI meets deep human understanding.
        </p>
        <a href="https://calendar.app.google/85ZdaqYK5vfNk4aH9" class="cta-primary">Book Your Discovery Call</a>
        <a href="https://oceanheart.ai" class="cta-secondary">Learn About Kai</a>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>&copy; 2024 Oceanheart.ai. Conscious AI Integration for the discerning mind.</p>
    </div>
  </footer>

  <script>
    // Smooth scroll animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, observerOptions);

    document.querySelectorAll('.fade-in').forEach(el => {
      observer.observe(el);
    });

    // Header scroll effect
    window.addEventListener('scroll', () => {
      const header = document.querySelector('header');
      if (window.scrollY > 100) {
        header.style.background = 'rgba(255, 255, 255, 0.98)';
        header.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
      } else {
        header.style.background = 'rgba(255, 255, 255, 0.95)';
        header.style.boxShadow = 'none';
      }
    });
  </script>
</body>

</html>
</file>

<file path="archived/TEMPLATE.md">
# Archived Component Template

## Component Information

- **Name**: [Component Name]
- **Original Path**: [Original file path in the codebase]
- **Archived Path**: [Path in the archive directory]
- **Type**: [Page | Component | API Route | Utility | Other]
- **Date Archived**: [YYYY-MM-DD]

## Description

[Brief description of what the component does and its purpose in the original application]

## Original Implementation Details

```tsx
// Example of the key implementation details or pattern used
// This is not the entire component, just the most relevant parts
```

## Dependencies

- [List of key dependencies]
- [Include both package dependencies and other components]

## Reason for Archival

[Explain why this component was archived rather than kept in the active codebase]

## Potential Reuse Considerations

[Notes on what to consider if this component is reused in the future]
[Include any known issues, limitations, or areas for improvement]

## Related Components

[List of related components that might be useful to reference]

## External References

[Links to any external documentation, issues, or discussions related to this component]

## Archival Notes

- **Archived By**: [Developer name]
- **Ticket/Issue**: [Reference to relevant ticket or issue]
- **Commit**: [Commit hash where this was archived]
</file>

<file path="archived/tracking.csv">
Component Name,Original Path,Archived Path,Type,Date Archived,Archived By,Ticket Reference
</file>

<file path="bin/bot_runner.ts">
#!/usr/bin/env node

import { createClient, SupabaseClient } from '@supabase/supabase-js';
import { config } from 'dotenv';
import path from 'path';
import schedule from 'node-schedule';

// --- Configuration ---
const BOTS = [
  { name: 'Good Start', dailyMinutes: 30 },
  { name: 'Growth Pattern', dailyMinutes: 90 },
  { name: 'Elite Conditioning', dailyMinutes: 180 },
];

const PRACTICE_TYPES_FOR_BOTS = ['Meditation', 'Sitting In The Rain'];
const RUN_HOUR = 6; // 6 AM
const RUN_MINUTE = 0;
// --- End Configuration ---

// Load env variables (same logic as cli.ts)
const envPaths = ['.env', '../.env', '../../.env', '../../../.env'].map(p =>
  path.resolve(process.cwd(), p)
);
for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.NEXT_PUBLIC_SUPABASE_URL) break;
}

if (!process.env.NEXT_PUBLIC_SUPABASE_URL || !process.env.SUPABASE_SERVICE_ROLE_KEY) {
  console.error(
    'Error: Supabase URL or Service Role Key not found in environment variables.'
  );
  console.error('Ensure your .env file is correctly set up.');
  process.exit(1);
}

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

interface BotConfig {
  name: string;
  dailyMinutes: number;
}

interface BotData extends BotConfig {
  id: string; // Supabase user ID
}

async function ensureBotsExist(
  supabaseClient: SupabaseClient,
  botConfigs: BotConfig[]
): Promise<BotData[]> {
  console.log('Checking for existing bots...');
  const botNames = botConfigs.map(b => b.name);
  const botData: BotData[] = [];

  const { data: existingUsers, error: fetchError } = await supabaseClient
    .from('saigo_users')
    .select('id, username')
    .in('username', botNames);

  if (fetchError) {
    console.error('Error fetching existing bots:', fetchError);
    throw fetchError; // Stop execution if we can't check
  }

  const existingUserMap = new Map(existingUsers?.map(u => [u.username, u.id]));
  console.log(`Found ${existingUserMap.size} existing bot users.`);

  for (const config of botConfigs) {
    const existingId = existingUserMap.get(config.name);
    if (existingId) {
      console.log(`Bot "${config.name}" already exists with ID: ${existingId}`);
      botData.push({ ...config, id: existingId });
    } else {
      console.log(`Bot "${config.name}" not found. Creating...`);
      // Create a simple email based on the name
      const email = `${config.name.toLowerCase().replace(/\s+/g, '-')}@bot.local`;
      const { data: newUser, error: createError } = await supabaseClient
        .from('saigo_users')
        .insert({
          username: config.name,
          email: email,
          // Add any other required fields for saigo_users if necessary
          // force: 0, // Initialize force if needed
        })
        .select('id')
        .single();

      if (createError || !newUser) {
        console.error(`Error creating bot "${config.name}":`, createError);
        // Decide if we should continue or stop; for now, log and skip this bot
        continue;
      }
      console.log(`Created bot "${config.name}" with ID: ${newUser.id}`);
      botData.push({ ...config, id: newUser.id });
    }
  }

  return botData;
}

async function addDailyPractices(
  supabaseClient: SupabaseClient,
  bots: BotData[]
) {
  console.log(`\\n--- ${new Date().toISOString()} ---`);
  console.log(`Running daily practice addition for ${bots.length} bots...`);

  if (PRACTICE_TYPES_FOR_BOTS.length === 0) {
    console.warn('No practice types defined for bots. Skipping practice addition.');
    return;
  }

  const practicesToInsert = [];
  const now = new Date().toISOString();

  for (const bot of bots) {
    const pointsPerType = Math.floor(bot.dailyMinutes / PRACTICE_TYPES_FOR_BOTS.length);
    if (pointsPerType <= 0) {
      console.warn(`Calculated points per type is 0 for bot "${bot.name}". Skipping.`);
      continue;
    }

    for (const type of PRACTICE_TYPES_FOR_BOTS) {
      practicesToInsert.push({
        user_id: bot.id,
        type: type,
        points: pointsPerType,
        created_at: now,
      });
    }
    console.log(`  - Preparing ${pointsPerType} points each for "${PRACTICE_TYPES_FOR_BOTS.join('", "')}" for bot "${bot.name}" (ID: ${bot.id})`);
  }

  if (practicesToInsert.length > 0) {
    console.log(`Inserting ${practicesToInsert.length} practice entries...`);
    const { error } = await supabaseClient
      .from('practices')
      .insert(practicesToInsert);

    if (error) {
      console.error('Error inserting practice entries:', error);
    } else {
      console.log('Successfully inserted practice entries.');
    }
  } else {
    console.log('No practice entries to insert.');
  }
}

async function main() {
  console.log('Starting Bot Runner...');

  let botData: BotData[] = [];
  try {
    botData = await ensureBotsExist(supabase, BOTS);
  } catch (error) {
    console.error('Failed to ensure bots exist. Exiting.', error);
    process.exit(1);
  }

  if (botData.length === 0) {
    console.error('No valid bot configurations found or created. Exiting.');
    process.exit(1);
  }

  const scheduleRule = new schedule.RecurrenceRule();
  scheduleRule.hour = RUN_HOUR;
  scheduleRule.minute = RUN_MINUTE;
  scheduleRule.tz = 'Etc/UTC'; // Use UTC to avoid timezone issues unless explicitly needed

  console.log(`Scheduling daily practice addition for ${RUN_HOUR.toString().padStart(2, '0')}:${RUN_MINUTE.toString().padStart(2, '0')} UTC...`);

  const job = schedule.scheduleJob(scheduleRule, async () => {
    try {
      await addDailyPractices(supabase, botData);
    } catch (error) {
      console.error('Error during scheduled practice addition:', error);
    }
  });

  console.log(`Bot Runner started. Next run scheduled for: ${job.nextInvocation()?.toISOString()}`);
  console.log('Script will now run in the background. Press Ctrl+C to stop.');

  // Optional: Run once immediately on startup if desired
  // console.log('\\nRunning initial practice addition...');
  // try {
  //   await addDailyPractices(supabase, botData);
  // } catch (error) {
  //   console.error('Error during initial practice addition:', error);
  // }

  // Keep the process alive. node-schedule does this implicitly,
  // but adding an interval can make it more explicit if needed.
  // setInterval(() => {}, 1000 * 60 * 60); // Keep alive check every hour
}

main().catch(error => {
  console.error('Unhandled error in main function:', error);
  process.exit(1);
});
</file>

<file path="bin/reset_month.ts">
#!/usr/bin/env node

import { createClient } from '@supabase/supabase-js';
import { config } from 'dotenv';
import path from 'path';
import inquirer from 'inquirer';

// Load env variables from one of multiple possible .env paths
const envPaths = [".env", "../.env", "../../.env", "../../../.env"].map(p =>
  path.resolve(process.cwd(), p)
);
for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.NEXT_PUBLIC_SUPABASE_URL) break;
}

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

async function tallyPointsAndReset() {
  console.log('Tallying up points for all users...');

  // Get all users with their total points
  const { data: userPointTotals, error: pointsError } = await supabase
    .from('practices')
    .select(`
      user_id,
      points
    `);

  if (pointsError) {
    console.error('Error fetching user points:', pointsError);
    return;
  }

  if (!userPointTotals || userPointTotals.length === 0) {
    console.log('No practice points found to tally.');
    return;
  }

  // Aggregate points per user
  const userTotals = userPointTotals.reduce((acc, practice) => {
    if (practice.user_id) {
      acc[practice.user_id] = (acc[practice.user_id] || 0) + (practice.points || 0);
    }
    return acc;
  }, {} as { [userId: string]: number });

  console.log(`Found point totals for ${Object.keys(userTotals).length} users.`);

  // Get user details to include names
  const { data: users, error: usersError } = await supabase
    .from('saigo_users')
    .select('id, username')
    .in('id', Object.keys(userTotals));

  if (usersError) {
    console.error('Error fetching user details:', usersError);
    return;
  }

  // Prepare data for alisone table
  const alisoneEntries = users?.map(user => ({
    user_id: user.id,
    username: user.username,
    total_points: userTotals[user.id] || 0,
    created_at: new Date().toISOString()
  })) || [];

  console.log(`Prepared ${alisoneEntries.length} entries for alisone table.`);

  // Insert into alisone table
  if (alisoneEntries.length > 0) {
    const { error: insertError } = await supabase
      .from('alisone')
      .insert(alisoneEntries);

    if (insertError) {
      console.error('Error inserting into alisone table:', insertError);
      return;
    }

    console.log(`Successfully stored ${alisoneEntries.length} user totals in alisone table.`);
  }

  // Ask for confirmation before deleting all practices
  const { confirmDelete } = await inquirer.prompt([{
    type: 'confirm',
    name: 'confirmDelete',
    message: 'Are you sure you want to delete ALL practice entries? This cannot be undone!',
    default: false
  }]);

  if (confirmDelete) {
    // Delete all practices
    const { error: deleteError } = await supabase
      .from('practices')
      .delete()
      .gte('id', '00000000-0000-0000-0000-000000000000'); // This is a hack to delete all rows

    if (deleteError) {
      console.error('Error deleting practices:', deleteError);
      return;
    }

    console.log('Successfully deleted all practice entries. Starting fresh for the new month!');
  } else {
    console.log('Practice entries were NOT deleted. The totals were still saved to alisone table.');
  }
}

// Run the script
tallyPointsAndReset()
  .catch(error => {
    console.error('Unhandled error:', error);
    process.exit(1);
  })
  .finally(() => {
    console.log('Script completed.');
  });
</file>

<file path="components/team/RoleCard.test.tsx">
import React from 'react';
import { render, screen } from '@testing-library/react';
import '@testing-library/jest-dom';
import RoleCard from './RoleCard';
import { RoleDetail } from '@/lib/teamData'; // Assuming types are here

// Mock data for testing
const mockFilledRole: RoleDetail = {
  id: 'test-role',
  title: 'Test Engineer',
  description: 'This is a test description.',
  memberName: 'Test User',
  avatarUrl: '/path/to/avatar.jpg',
  background: 'Test background info.',
  advisorTitle: 'Test Advisor Title',
  acronym: 'TE'
};

const mockAvailableRole: RoleDetail = {
  id: 'available-role',
  title: 'Available Position',
  description: 'This description should not be visible',
  advisorTitle: 'Advisor for Available'
  // memberName is intentionally missing or set to "position available"
};

describe('RoleCard Component', () => {
  // Test for standard (filled) role rendering
  test('renders full details for a filled role', () => {
    render(<RoleCard role={mockFilledRole} onSelectRole={() => { }} />);

    // Check for key elements of a filled role
    expect(screen.getByText('Test Engineer')).toBeInTheDocument();
    expect(screen.getByText('TE:')).toBeInTheDocument(); // Acronym
    expect(screen.getByText('This is a test description.')).toBeInTheDocument();
    expect(screen.getByText('Test background info.')).toBeInTheDocument();
    expect(screen.getByText('Test User')).toBeInTheDocument();
    // Check that advisor title isn't shown if main title exists (per component logic)
    expect(screen.queryByText('Perspective: Test Advisor Title')).not.toBeInTheDocument();
    // Check image alt text (or presence of img tag)
    expect(screen.getByAltText('Test User Avatar')).toBeInTheDocument(); // Assuming alt text includes name
  });

  // Test for available role rendering
  test('renders minimal details for an available role', () => {
    render(<RoleCard role={mockAvailableRole} onSelectRole={() => { }} isAvailable={true} />);

    // Check for elements that SHOULD be present
    expect(screen.getByText('Available Position')).toBeInTheDocument();
    expect(screen.queryByText('Advisor for Available')).toBeInTheDocument(); // Advisor title should show if main title is missing

    // Check for elements that SHOULD NOT be present
    expect(screen.queryByText('This description should not be visible')).not.toBeInTheDocument();
    expect(screen.queryByText('Test background info.')).not.toBeInTheDocument();
    expect(screen.queryByText('Test User')).not.toBeInTheDocument();
    expect(screen.queryByRole('img')).not.toBeInTheDocument(); // No image/placeholder
  });

  // Add more tests as needed (e.g., interactions, dimming/highlighting if applicable)
});
</file>

<file path="components/AuthButton.tsx">
"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import Image from "next/image";
import { Popover, Transition } from "@headlessui/react";
import { User } from "@supabase/supabase-js";
import { createClient } from "@/libs/supabase/client";
import apiClient from "@/libs/api";
import config from "@/config";

type AuthButtonProps = {
  mode?: "signin" | "account";
  text?: string;
  extraStyle?: string;
};

/**
 * Unified authentication button component that handles both signin and account functionality
 * 
 * @param mode - 'signin' (default) renders a simple login button, 'account' renders a popover with account options
 * @param text - Button text for signin mode when user is not logged in (default: "Get started")
 * @param extraStyle - Additional CSS classes to apply to the button
 */
const AuthButton = ({
  mode = "signin",
  text = "Get started",
  extraStyle = "",
}: AuthButtonProps) => {
  const supabase = createClient();
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState<boolean>(false);

  useEffect(() => {
    const getUser = async () => {
      const {
        data: { user },
      } = await supabase.auth.getUser();
      setUser(user);
    };

    getUser();
  }, [supabase]);

  const handleSignOut = async () => {
    await supabase.auth.signOut();
    window.location.href = "/";
  };

  const handleBilling = async () => {
    setIsLoading(true);
    try {
      const { url }: { url: string } = await apiClient.post(
        "/stripe/create-portal",
        {
          returnUrl: window.location.href,
        }
      );
      window.location.href = url;
    } catch (e) {
      console.error(e);
    }
    setIsLoading(false);
  };

  // If user is not logged in and this is a signin button, render simple login link
  if (!user && mode === "signin") {
    return (
      <Link
        className={`btn ${extraStyle}`}
        href={config.auth.loginUrl}
      >
        {text}
      </Link>
    );
  }

  // If user is logged in and this is a signin button, render a link to the dashboard/account
  if (user && mode === "signin") {
    return (
      <Link
        href={config.auth.callbackUrl}
        className={`btn ${extraStyle}`}
      >
        {user?.user_metadata?.avatar_url ? (
          <Image
            src={user?.user_metadata?.avatar_url}
            alt={user?.user_metadata?.name || "Account"}
            className="w-6 h-6 rounded-full shrink-0"
            referrerPolicy="no-referrer"
            width={24}
            height={24}
          />
        ) : (
          <span className="w-6 h-6 bg-base-300 flex justify-center items-center rounded-full shrink-0 capitalize">
            {user?.user_metadata?.name?.charAt(0) || user?.email?.charAt(0)}
          </span>
        )}
        {user?.user_metadata?.name || user?.email?.split("@")[0] || "Account"}
      </Link>
    );
  }

  // If this is an account button (with popover), render the full account UI
  return (
    <Popover className="relative z-10">
      {({ open }) => (
        <>
          <Popover.Button className={`btn ${extraStyle}`}>
            {user?.user_metadata?.avatar_url ? (
              <Image
                src={user?.user_metadata?.avatar_url}
                alt={"Profile picture"}
                className="w-6 h-6 rounded-full shrink-0"
                referrerPolicy="no-referrer"
                width={24}
                height={24}
              />
            ) : (
              <span className="w-8 h-8 bg-base-100 flex justify-center items-center rounded-full shrink-0 capitalize">
                {user?.email?.charAt(0) || "?"}
              </span>
            )}

            {user?.user_metadata?.name ||
              (user?.email ? user.email.split("@")[0] : "Account")}

            {isLoading ? (
              <span className="loading loading-spinner loading-xs"></span>
            ) : (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className={`w-5 h-5 duration-200 opacity-50 ${
                  open ? "transform rotate-180 " : ""
                }`}
              >
                <path
                  fillRule="evenodd"
                  d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                  clipRule="evenodd"
                />
              </svg>
            )}
          </Popover.Button>
          <Transition
            enter="transition duration-100 ease-out"
            enterFrom="transform scale-95 opacity-0"
            enterTo="transform scale-100 opacity-100"
            leave="transition duration-75 ease-out"
            leaveFrom="transform scale-100 opacity-100"
            leaveTo="transform scale-95 opacity-0"
          >
            <Popover.Panel className="absolute left-0 z-10 mt-3 w-screen max-w-[16rem] transform">
              <div className="overflow-hidden rounded-xl shadow-xl ring-1 ring-base-content ring-opacity-5 bg-base-100 p-1">
                <div className="space-y-0.5 text-sm">
                  <Link 
                    href={config.auth.callbackUrl}
                    className="flex items-center gap-2 hover:bg-base-300 duration-200 py-1.5 px-4 w-full rounded-lg font-medium"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      className="w-5 h-5"
                    >
                      <path
                        fillRule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-5.5-2.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zM10 12a5.99 5.99 0 00-4.793 2.39A6.483 6.483 0 0010 16.5a6.483 6.483 0 004.793-2.11A5.99 5.99 0 0010 12z"
                        clipRule="evenodd"
                      />
                    </svg>
                    Dashboard
                  </Link>
                  <button
                    className="flex items-center gap-2 hover:bg-base-300 duration-200 py-1.5 px-4 w-full rounded-lg font-medium"
                    onClick={handleBilling}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      className="w-5 h-5"
                    >
                      <path
                        fillRule="evenodd"
                        d="M2.5 4A1.5 1.5 0 001 5.5V6h18v-.5A1.5 1.5 0 0017.5 4h-15zM19 8.5H1v6A1.5 1.5 0 002.5 16h15a1.5 1.5 0 001.5-1.5v-6zM3 13.25a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zm4.75-.75a.75.75 0 000 1.5h3.5a.75.75 0 000-1.5h-3.5z"
                        clipRule="evenodd"
                      />
                    </svg>
                    Billing
                  </button>
                  <button
                    className="flex items-center gap-2 hover:bg-error/20 hover:text-error duration-200 py-1.5 px-4 w-full rounded-lg font-medium"
                    onClick={handleSignOut}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      className="w-5 h-5"
                    >
                      <path
                        fillRule="evenodd"
                        d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z"
                        clipRule="evenodd"
                      />
                      <path
                        fillRule="evenodd"
                        d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z"
                        clipRule="evenodd"
                      />
                    </svg>
                    Logout
                  </button>
                </div>
              </div>
            </Popover.Panel>
          </Transition>
        </>
      )}
    </Popover>
  );
};

export default AuthButton;
</file>

<file path="components/CompoundingHoursSection.tsx">
import Link from "next/link";

const rows = [
  {
    year: "Year 1",
    weekly: "‚âà 12 h/wk avg",
    annual: "‚âà 630 h",
    eq: "~1 extra work-month",
  },
  {
    year: "Year 2",
    weekly: "‚âà 38 h/wk avg*",
    annual: "‚âà 2 000 h",
    eq: "~1 work-year",
  },
  {
    year: "Year 3",
    weekly: "Capped at 40 h/wk",
    annual: "‚âà 2 100 h",
    eq: "another work-year",
  },
];

const CompoundingHoursSection = () => (
  <section className="bg-base-200 overflow-hidden px-0 md:px-24 py-24" id="compounding">
    <div className="px-8 max-w-7xl mx-auto">
      <div className="max-w-5xl mx-auto text-center mb-16">
        <h2 className="text-3xl lg:text-5xl font-bold mb-6 tracking-tight">
          When Five Hours <span className="text-primary">Doubles Every Five Months</span>
        </h2>
        <p className="text-lg lg:text-xl text-base-content/80 max-w-3xl mx-auto">
          Analysts track AI capability roughly <span className="font-semibold">doubling every 4.9 months</span>.
          Start by freeing just <span className="font-semibold">5 hours a week</span> today‚Äîand watch what happens
          when that dividend compounds over a three-year window.
        </p>
      </div>

      {/* Compounding hours table */}
      <div className="mb-20 rounded-xl p-8 bg-secondary/5 shadow-lg border-l-4 border-secondary relative overflow-hidden max-w-4xl mx-auto transform hover:scale-[1.01] transition-transform duration-300">
        <div className="absolute inset-0 bg-secondary/3 bg-[linear-gradient(45deg,transparent_25%,rgba(68,64,60,0.02)_25%,rgba(68,64,60,0.02)_50%,transparent_50%,transparent_75%,rgba(68,64,60,0.02)_75%)]" style={{ backgroundSize: "10px 10px" }}></div>
        <div className="relative z-10">
          <div className="flex items-center gap-3 mb-4">
            <div className="bg-secondary/10 p-2 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
              </svg>
            </div>
            <h3 className="text-xl font-bold">Compounding Efficiency Growth</h3>
          </div>

          <div className="overflow-x-auto bg-base-100 rounded-lg shadow-inner mb-4">
            <table className="table table-zebra text-sm md:text-base w-full">
              <thead>
                <tr>
                  <th className="bg-secondary/15 font-bold text-center">Calendar</th>
                  <th className="bg-secondary/15 font-bold text-center">Avg. Weekly Hours Freed</th>
                  <th className="bg-secondary/15 font-bold text-center">Total That Year</th>
                  <th className="bg-secondary/15 font-bold text-center">Rough Equivalent</th>
                </tr>
              </thead>
              <tbody>
                {rows.map((r) => (
                  <tr key={r.year}>
                    <td className="font-semibold text-center md:text-left">{r.year}</td>
                    <td className="text-center">{r.weekly}</td>
                    <td className="text-center">{r.annual}</td>
                    <td className="text-center font-semibold">{r.eq}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <p className="text-sm text-right text-base-content/60">
            *Weekly savings plateau at 40 h/w because that&apos;s the full work-week.
          </p>
        </div>
      </div>

      {/* CTA - Infographic style */}
      <div className="max-w-4xl mx-auto rounded-xl bg-base-100 shadow-lg overflow-hidden">
        <div className="grid grid-cols-1 md:grid-cols-12">
          <div className="md:col-span-5 bg-primary p-6 flex items-center justify-center">
            <div className="text-center">
              <div className="flex flex-col items-center justify-center mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-primary-content opacity-90" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
                <div className="mt-2 text-4xl font-bold text-primary-content">6 Months</div>
                <div className="text-sm text-primary-content/80">Of Compounding Lost</div>
              </div>
              <div className="space-y-2">
                <div className="flex items-center gap-2 text-primary-content/90 text-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>‚âà 130 hours wasted</span>
                </div>
                <div className="flex items-center gap-2 text-primary-content/90 text-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>‚âà ¬£6,500 value lost</span>
                </div>
                <div className="flex items-center gap-2 text-primary-content/90 text-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>Doubling efficiency</span>
                </div>
              </div>
            </div>
          </div>
          <div className="md:col-span-7 p-6 md:p-8 flex flex-col justify-center">
            <h3 className="text-xl font-bold mb-4">Wait Six Months, Lose Half a Year of Compounding</h3>
            <p className="text-base-content/80 mb-6">
              Tools that save you five hours a week today will save forty within a year. Wait six months and you
              don&apos;t miss five hours‚Äîyou miss the first half-year of compounding that follows.
            </p>
            <Link href="#pricing" className="btn btn-secondary shadow-md hover:shadow-lg transition-all">
              Get Your Hours Back
            </Link>
          </div>
        </div>
      </div>
    </div>
  </section>
);

export default CompoundingHoursSection;
</file>

<file path="components/CumulativePointsAreaChart.tsx">
"use client";

import React from "react";
import {
  AreaChart,
  Area,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
} from "recharts";

interface CumulativePointsAreaChartProps {
  dailyPoints: number[]; // Array of daily points (length = 7)
}

const CumulativePointsAreaChart: React.FC<CumulativePointsAreaChartProps> = ({ dailyPoints }) => {
  // Create chart data with cumulative sum.
  const chartData = dailyPoints.reduce((acc: { day: string; cumulative: number }[], points, index) => {
    // Calculate day label based on index.
    const date = new Date();
    date.setDate(date.getDate() - (dailyPoints.length - 1 - index));
    const dayLabel = date.toLocaleDateString("en-US", { weekday: "short" });

    // Accumulate points.
    const cumulative = (acc[index - 1]?.cumulative || 0) + points;
    acc.push({ day: dayLabel, cumulative });
    return acc;
  }, []);

  return (
    <>
      <h3 className="text-center font-semibold mb-4 text-white">
        Cumulative Practice Points (Past Week)
      </h3>
      <div className="w-full overflow-x-auto">
        <ResponsiveContainer width="100%" height={350}>
          <AreaChart
            data={chartData}
            margin={{ top: 5, right: 5, left: 5, bottom: 5 }}
          >
            <CartesianGrid strokeDasharray="3 3" />
            <XAxis dataKey="day" stroke="#F3F4F6" />
            <YAxis stroke="#F3F4F6" />
            <Tooltip
              contentStyle={{
                backgroundColor: "#1F2937",
                border: "none",
                borderRadius: "0.5rem",
                color: "#F3F4F6",
              }}
              itemStyle={{ color: "#F3F4F6" }}
              labelStyle={{ color: "#F3F4F6" }}
            />
            <Area type="monotone" dataKey="cumulative" stroke="#8884d8" fill="#8884d8" />
          </AreaChart>
        </ResponsiveContainer>
      </div>
    </>
  );
};

export default CumulativePointsAreaChart;
</file>

<file path="components/FeatureDisplay.tsx">
"use client";

import { useState, useRef, useMemo, useEffect } from "react";
import type { JSX, ReactNode } from "react";
import Image from "next/image";

// Common interface for all feature types
export interface Feature {
  title: string;
  description: string | ReactNode;
  svg?: JSX.Element;
  type?: "video" | "image" | "svg";
  path?: string;
  format?: string;
  alt?: string;
  styles?: string;
  demo?: ReactNode;
}

export interface FeatureDisplayProps {
  /**
   * Layout style for displaying features
   * - 'accordion': Expandable list with media display (FeaturesAccordion)
   * - 'grid': Card-based grid layout (FeaturesGrid)
   * - 'listicle': Interactive tab-style list (FeaturesListicle)
   */
  layout: 'accordion' | 'grid' | 'listicle';
  
  /**
   * Array of features to display
   */
  features: Feature[];
  
  /**
   * Optional section title
   */
  sectionTitle?: string | ReactNode;
  
  /**
   * Optional section description
   */
  sectionDescription?: string | ReactNode;
  
  /**
   * Additional CSS classes for the section container
   */
  className?: string;
  
  /**
   * Enable auto-scrolling through features in listicle mode
   */
  autoScroll?: boolean;
  
  /**
   * Interval in ms for auto-scrolling (default: 5000)
   */
  autoScrollInterval?: number;
}

// Media component for displaying feature media (used in accordion and potentially other layouts)
const Media = ({ feature, key }: { feature: Feature; key: number }): JSX.Element => {
  const { type, path, format, alt, svg } = feature;
  const videoRef = useRef<HTMLVideoElement>(null);

  const handleMouseEnter = () => {
    if (videoRef.current) {
      videoRef.current.play();
    }
  };

  const handleMouseLeave = () => {
    if (videoRef.current) {
      videoRef.current.pause();
    }
  };

  return (
    <div
      className="relative w-full h-96 lg:h-auto lg:aspect-square bg-base-300 rounded-2xl overflow-hidden"
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
      key={key}
    >
      {type === "video" && path ? (
        <video
          ref={videoRef}
          className="absolute inset-0 w-full h-full object-cover object-center"
          src={path}
          muted
          loop
          playsInline
        >
          {format && <source src={path} type={format} />}
        </video>
      ) : type === "image" && path ? (
        <Image
          src={path}
          alt={alt || "Feature image"}
          className="absolute inset-0 w-full h-full object-cover object-center"
          fill={true}
        />
      ) : svg ? (
        <div className="absolute inset-0 w-full h-full flex items-center justify-center">
          <span className="text-5xl opacity-50">{svg}</span>
        </div>
      ) : (
        <div className="absolute inset-0 w-full h-full bg-base-300"></div> // Fallback placeholder
      )}
    </div>
  );
};

// Accordion item component (used in accordion layout)
const AccordionItem = ({
  feature,
  isOpen,
  setFeatureSelected,
  index,
}: {
  feature: Feature;
  isOpen: boolean;
  setFeatureSelected: () => void;
  index: number;
}) => {
  const accordion = useRef<HTMLDivElement>(null);
  const { title, description, svg } = feature;

  return (
    <li className="py-4 border-b border-base-content/10 last:border-none">
      <button
        className="flex items-center w-full group py-2"
        onClick={setFeatureSelected}
      >
        <div className="flex items-center justify-center shrink-0 mr-4 w-10 h-10 rounded-full bg-base-300 text-primary">
          {svg ? svg : <span className="text-2xl">{index + 1}</span>}
        </div>
        <div className="text-left">
          <h3 className="font-semibold text-lg">{title}</h3>
        </div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          className={`w-5 h-5 ml-auto transition-transform duration-300 shrink-0 ${
            isOpen ? "transform rotate-90" : ""
          }`}
        >
          <path
            fillRule="evenodd"
            d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
            clipRule="evenodd"
          />
        </svg>
      </button>
      <div
        ref={accordion}
        className="transition-all duration-300 overflow-hidden"
        style={
          isOpen
            ? { maxHeight: accordion.current?.scrollHeight, opacity: 1 }
            : { maxHeight: 0, opacity: 0 }
        }
      >
        <div className="pb-2 pl-14">
          {typeof description === 'string' ? (
            <p className="text-base-content/80 leading-relaxed whitespace-pre-line">
              {description}
            </p>
          ) : (
            description
          )}
        </div>
      </div>
    </li>
  );
};

/**
 * Unified FeatureDisplay component that can render features in multiple layout styles
 */
const FeatureDisplay: React.FC<FeatureDisplayProps> = ({
  layout = 'accordion',
  features,
  sectionTitle,
  sectionDescription,
  className = '',
  autoScroll = false,
  autoScrollInterval = 5000
}) => {
  const [featureSelected, setFeatureSelected] = useState<number | string>(
    layout === 'listicle' ? features[0].title : 0
  );
  const [hasClicked, setHasClicked] = useState<boolean>(false);
  const featuresEndRef = useRef<null>(null);

  // Auto-scrolling for listicle mode
  useEffect(() => {
    if (!autoScroll || layout !== 'listicle') return;

    const interval = setInterval(() => {
      if (!hasClicked) {
        const index = features.findIndex(
          (feature) => feature.title === featureSelected
        );
        const nextIndex = (index + 1) % features.length;
        setFeatureSelected(features[nextIndex].title);
      }
    }, autoScrollInterval);

    try {
      // Stop the interval when the user scrolls after the featuresRef element
      const observer = new IntersectionObserver(
        ([entry]) => {
          if (entry.isIntersecting) {
            clearInterval(interval);
          }
        },
        {
          root: null,
          rootMargin: "0px",
          threshold: 0.5,
        }
      );
      if (featuresEndRef.current) {
        observer.observe(featuresEndRef.current);
      }
    } catch (e) {
      console.error(e);
    }

    return () => clearInterval(interval);
  }, [featureSelected, hasClicked, autoScroll, autoScrollInterval, features, layout]);

  // Render Accordion Layout
  if (layout === 'accordion') {
    return (
      <section
        className={`py-24 md:py-32 space-y-24 md:space-y-32 max-w-7xl mx-auto bg-base-100 ${className}`}
        id="features"
      >
        <div className="px-8">
          {/* Headline */}
          {sectionTitle && (
            <h2 className="font-extrabold text-4xl lg:text-6xl tracking-tight mb-12 md:mb-24">
              {sectionTitle}
            </h2>
          )}
          {sectionDescription && (
            <div className="text-base-content/80 leading-relaxed mb-8 lg:text-lg">
              {sectionDescription}
            </div>
          )}
          
          <div className="flex flex-col md:flex-row gap-12 md:gap-24">
            <div className="grid grid-cols-1 items-stretch gap-8 sm:gap-12 lg:grid-cols-2 lg:gap-20">
              <ul className="w-full">
                {features.map((feature, i) => (
                  <AccordionItem
                    key={feature.title}
                    index={i}
                    feature={feature}
                    isOpen={featureSelected === i}
                    setFeatureSelected={() => setFeatureSelected(i)}
                  />
                ))}
              </ul>
              <Media 
                feature={features[featureSelected as number]} 
                key={featureSelected as number} 
              />
            </div>
          </div>
        </div>
      </section>
    );
  }
  
  // Render Grid Layout
  if (layout === 'grid') {
    return (
      <section className={`flex justify-center items-center w-full bg-base-200/50 text-base-content py-20 lg:py-32 ${className}`}>
        <div className="flex flex-col max-w-[82rem] gap-16 md:gap-20 px-4">
          {sectionTitle && (
            <h2 className="max-w-3xl font-black text-4xl md:text-6xl tracking-[-0.01em]">
              {sectionTitle}
            </h2>
          )}
          {sectionDescription && (
            <div className="text-base-content/80 leading-relaxed mb-8 lg:text-lg">
              {sectionDescription}
            </div>
          )}
          
          <div className="flex flex-col w-full h-fit gap-4 lg:gap-10 text-text-default max-w-[82rem]">
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-10">
              {features.map((feature) => (
                <div
                  key={feature.title}
                  className={`${feature.styles || 'bg-base-100'} rounded-3xl flex flex-col gap-6 w-full h-[22rem] lg:h-[25rem] pt-6 overflow-hidden group`}
                >
                  <div className="px-6 space-y-2">
                    <h3 className="font-bold text-xl lg:text-3xl tracking-tight">
                      {feature.title}
                    </h3>
                    {typeof feature.description === 'string' ? (
                      <p className="opacity-80">{feature.description}</p>
                    ) : (
                      feature.description
                    )}
                  </div>
                  {feature.demo}
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>
    );
  }
  
  // Render Listicle Layout
  if (layout === 'listicle') {
    return (
      <section className={`py-24 ${className}`} id="features">
        <div className="max-w-3xl mx-auto">
          <div className="bg-base-100 max-md:px-8 max-w-3xl">
            {sectionTitle && (
              <h2 className="font-extrabold text-3xl lg:text-5xl tracking-tight mb-8">
                {sectionTitle}
              </h2>
            )}
            {sectionDescription && (
              <div className="text-base-content/80 leading-relaxed mb-8 lg:text-lg">
                {sectionDescription}
              </div>
            )}
          </div>
        </div>

        <div>
          <div className="grid grid-cols-4 md:flex justify-start gap-4 md:gap-12 max-md:px-8 max-w-3xl mx-auto mb-8">
            {features.map((feature) => (
              <span
                key={feature.title}
                onClick={() => {
                  if (!hasClicked) setHasClicked(true);
                  setFeatureSelected(feature.title);
                }}
                className={`flex flex-col items-center justify-center gap-3 select-none cursor-pointer p-2 duration-200 group`}
              >
                <span
                  className={`duration-100 ${
                    featureSelected === feature.title
                      ? "text-primary"
                      : "text-base-content/30 group-hover:text-base-content/50"
                  }`}
                >
                  {feature.svg}
                </span>
                <span
                  className={`font-semibold text-sm ${
                    featureSelected === feature.title
                      ? "text-primary"
                      : "text-base-content/50"
                  }`}
                >
                  {feature.title}
                </span>
              </span>
            ))}
          </div>
          <div className="bg-base-200">
            <div className="max-w-3xl mx-auto flex flex-col md:flex-row justify-center md:justify-start md:items-center gap-12">
              <div
                className="text-base-content/80 leading-relaxed space-y-4 px-12 md:px-0 py-12 max-w-xl animate-opacity"
                key={featureSelected as string}
              >
                <h3 className="font-semibold text-base-content text-lg">
                  {features.find((f) => f.title === featureSelected)?.title}
                </h3>

                {features.find((f) => f.title === featureSelected)?.description}
              </div>
            </div>
          </div>
        </div>
        {/* Reference for auto-scrolling */}
        {autoScroll && <p className="opacity-0" ref={featuresEndRef}></p>}
      </section>
    );
  }

  // Default fallback if invalid layout provided
  return (
    <div className="p-8 text-center">
      <p>Invalid layout type. Please use 'accordion', 'grid', or 'listicle'.</p>
    </div>
  );
};

export default FeatureDisplay;
</file>

<file path="components/HeaderMobileMenuManager.tsx">
"use client";

import { useEffect } from "react";
import { useSearchParams } from "next/navigation";

interface HeaderMobileMenuManagerProps {
  setIsOpen: (isOpen: boolean) => void;
}

// This component exists solely to contain the useSearchParams hook
// and the effect that depends on it, allowing the main Header
// to be statically rendered where possible.
const HeaderMobileMenuManager = ({ setIsOpen }: HeaderMobileMenuManagerProps): null => {
  const searchParams = useSearchParams();

  // Close mobile menu on route change
  useEffect(() => {
    setIsOpen(false);
  }, [searchParams, setIsOpen]);

  // This component doesn't render anything itself
  return null;
};

export default HeaderMobileMenuManager;
</file>

<file path="components/LayoutClient.tsx">
"use client";

import { User } from "@supabase/supabase-js";
import { createClient } from "@/libs/supabase/client";
import { useEffect, useState, ReactNode } from "react";
import { usePathname } from "next/navigation";
import { Crisp } from "crisp-sdk-web";
import NextTopLoader from "nextjs-toploader";
import { Toaster } from "react-hot-toast";
import { Tooltip } from "react-tooltip";
import config from "@/config";

// Crisp customer chat support:
// This component is separated from ClientLayout because it needs to be wrapped with <SessionProvider> to use useSession() hook
const CrispChat = (): null => {
  const pathname = usePathname();

  const supabase = createClient();
  const [data, setData] = useState<{ user: User }>(null);

  // This is used to get the user data from Supabase Auth (if logged in) => user ID is used to identify users in Crisp
  useEffect(() => {
    const getUser = async () => {
      const {
        data: { user },
      } = await supabase.auth.getUser();

      if (user) {
        setData({ user });
      }
    };
    getUser();
  }, [supabase.auth]);

  useEffect(() => {
    if (config?.crisp?.id) {
      // Set up Crisp
      Crisp.configure(config.crisp.id);

      // (Optional) If onlyShowOnRoutes array is not empty in config.js file, Crisp will be hidden on the routes in the array.
      // Use <AppButtonSupport> instead to show it (user clicks on the button to show Crisp‚Äîit cleans the UI)
      if (
        config.crisp.onlyShowOnRoutes &&
        !config.crisp.onlyShowOnRoutes?.includes(pathname)
      ) {
        Crisp.chat.hide();
        Crisp.chat.onChatClosed(() => {
          Crisp.chat.hide();
        });
      }
    }
  }, [pathname]);

  // Add User Unique ID to Crisp to easily identify users when reaching support (optional)
  useEffect(() => {
    if (data?.user && config?.crisp?.id) {
      Crisp.session.setData({ userId: data.user?.id });
    }
  }, [data]);

  return null;
};

// All the client wrappers are here (they can't be in server components)
// 1. NextTopLoader: Show a progress bar at the top when navigating between pages
// 2. Toaster: Show Success/Error messages anywhere from the app with toast()
// 3. Tooltip: Show tooltips if any JSX elements has these 2 attributes: data-tooltip-id="tooltip" data-tooltip-content=""
// 4. CrispChat: Set Crisp customer chat support (see above)
const ClientLayout = ({ children }: { children: ReactNode }) => {
  return (
    <>
      {/* Show a progress bar at the top when navigating between pages */}
      <NextTopLoader color={config.colors.main} showSpinner={false} />

      {/* Content inside app/page.js files  */}
      {children}

      {/* Show Success/Error messages anywhere from the app with toast() */}
      <Toaster
        toastOptions={{
          duration: 3000,
        }}
      />

      {/* Show tooltips if any JSX elements has these 2 attributes: data-tooltip-id="tooltip" data-tooltip-content="" */}
      <Tooltip
        id="tooltip"
        className="z-[60] !opacity-100 max-w-sm shadow-lg"
      />

      {/* Set Crisp customer chat support */}
      <CrispChat />
    </>
  );
};

export default ClientLayout;
</file>

<file path="components/LineGraph.tsx">
"use client";

import React from "react";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer
} from "recharts";

interface LineGraphProps {
  data: number[]; // Array of 7 numbers representing points per day
}

const LineGraph: React.FC<LineGraphProps> = ({ data }) => {
  // Convert data array into format expected by Recharts
  const chartData = data.map((value, index) => {
    const date = new Date();
    date.setDate(date.getDate() - (6 - index)); // Calculate dates for last 7 days
    return {
      day: date.toLocaleDateString('en-US', { weekday: 'short' }),
      points: value
    };
  });

  return (
    <>
      <h3 className="text-center font-semibold mb-4 text-white">
        Points per Day (Past Week)
      </h3>
      <div className="w-full overflow-x-auto">
        <ResponsiveContainer width="100%" height={350}>
          <LineChart
            data={chartData}
            margin={{ top: 5, right: 5, left: 5, bottom: 5 }}
          >
            <CartesianGrid strokeDasharray="3 3" />
            <XAxis
              dataKey="day"
              stroke="#F3F4F6"
            />
            <YAxis
              stroke="#F3F4F6"
              tickFormatter={(value) => Math.round(value).toString()}
            />
            <Tooltip
              contentStyle={{
                backgroundColor: '#1F2937',
                border: 'none',
                borderRadius: '0.5rem',
                color: '#F3F4F6'
              }}
              itemStyle={{ color: '#F3F4F6' }}
              labelStyle={{ color: '#F3F4F6' }}
            />
            <Line
              type="monotone"
              dataKey="points"
              stroke="#0088FE"
              strokeWidth={3}
              dot={{
                stroke: '#0088FE',
                strokeWidth: 2,
                r: 4,
                fill: '#fff'
              }}
              activeDot={{
                stroke: '#4F46E5',
                strokeWidth: 2,
                r: 6,
                fill: '#fff'
              }}
            />
          </LineChart>
        </ResponsiveContainer>
      </div>
    </>
  );
};

export default LineGraph;
</file>

<file path="components/PracticeTypesStackedBarChart.tsx">
"use client";

import React from "react";
import {
  BarChart,
  Bar,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from "recharts";
import { PRACTICE_TYPES_COLORS } from "@/libs/chartColors";

interface StackedBarChartData {
  day: string;
  [practiceType: string]: number | string;
}

interface PracticeTypesStackedBarChartProps {
  data: StackedBarChartData[];
  practiceTypes: string[];
  colors?: string[];
}

const PracticeTypesStackedBarChart: React.FC<PracticeTypesStackedBarChartProps> = ({
  data,
  practiceTypes,
}) => {
  // Only show practice types that have data in at least one day
  const activeTypes = practiceTypes.filter(type =>
    data.some(day => typeof day[type] === 'number' && day[type] > 0)
  );

  return (
    <>
      <h3 className="text-center font-semibold mb-4 text-white">
        Daily Practice Breakdown
      </h3>
      <div className="w-full overflow-x-auto">
        <ResponsiveContainer width="100%" height={350} minHeight={350}>
          <BarChart
            data={data}
            margin={{ top: 20, right: 5, left: 5, bottom: 5 }}
          >
            <CartesianGrid strokeDasharray="3 3" />
            <XAxis dataKey="day" stroke="#F3F4F6" />
            <YAxis stroke="#F3F4F6" />
            <Tooltip
              contentStyle={{
                backgroundColor: "#1F2937",
                border: "none",
                borderRadius: "0.5rem",
                color: "#F3F4F6"
              }}
              itemStyle={{ color: "#F3F4F6" }}
              labelStyle={{ color: "#F3F4F6" }}
            />
            <Legend
              layout="horizontal"
              verticalAlign="bottom"
              align="center"
              wrapperStyle={{
                paddingTop: 10,
                fontSize: '0.75rem',
                maxHeight: '100px',
                overflowY: 'auto'
              }}
            />
            {activeTypes.map((type) => {
              const colorObj = PRACTICE_TYPES_COLORS.find((item) => item.type === type);
              const fillColor = colorObj ? colorObj.color : "#000000";
              return <Bar key={type} dataKey={type} stackId="a" fill={fillColor} />;
            })}
          </BarChart>
        </ResponsiveContainer>
      </div>
    </>
  );
};

export default PracticeTypesStackedBarChart;
</file>

<file path="cypress/e2e/sso.cy.ts">
// Placeholder E2E spec for subdomain SSO. Requires deployed environments.
describe.skip('Subdomain SSO', () => {
  it('redirects unauthenticated users to accounts and back', () => {
    // Visit product app; expect redirect to accounts and then back after login.
    // Implement once environments are available.
  })

  it('blocks access without entitlement', () => {
    // Validate entitlement gating once seeds are applied.
  })
})
</file>

<file path="docs/ai-docs/anthropic_web_search_tool.md">
# Web Search Tool

The web search tool gives Claude direct access to real-time web content, allowing it to answer questions with up-to-date information beyond its knowledge cutoff. Claude automatically cites sources from search results as part of its answer.

## Supported Models

Web search is available on:

- Claude 3.7 Sonnet (`claude-3-7-sonnet-20250219`)
- Claude 3.5 Sonnet (new) (`claude-3-5-sonnet-latest`)
- Claude 3.5 Haiku (`claude-3-5-haiku-latest`)

## How Web Search Works

When you add the web search tool to your API request:

1. Claude decides when to search based on the prompt.
2. The API executes the searches and provides Claude with the results. This process may repeat multiple times throughout a single request.
3. At the end of its turn, Claude provides a final response with cited sources.

## How to Use Web Search

Your organization's administrator must enable web search in [Console](https://console.anthropic.com/settings/privacy).

Provide the web search tool in your API request:

```bash
curl https://api.anthropic.com/v1/messages \
    --header "x-api-key: $ANTHROPIC_API_KEY" \
    --header "anthropic-version: 2023-06-01" \
    --header "content-type: application/json" \
    --data '{
        "model": "claude-3-7-sonnet-latest",
        "max_tokens": 1024,
        "messages": [
            {
                "role": "user",
                "content": "How do I update a web app to TypeScript 5.5?"
            }
        ],
        "tools": [{
            "type": "web_search_20250305",
            "name": "web_search",
            "max_uses": 5
        }]
    }'
```

### Tool Definition

The web search tool supports the following parameters:

```json
{
  "type": "web_search_20250305",
  "name": "web_search",

  // Optional: Limit the number of searches per request
  "max_uses": 5,

  // Optional: Only include results from these domains
  "allowed_domains": ["example.com", "trusteddomain.org"],

  // Optional: Never include results from these domains
  "blocked_domains": ["untrustedsource.com"],

  // Optional: Localize search results
  "user_location": {
    "type": "approximate",
    "city": "San Francisco",
    "region": "California",
    "country": "US",
    "timezone": "America/Los_Angeles"
  }
}
```

#### Max Uses

The `max_uses` parameter limits the number of searches performed. If Claude attempts more searches than allowed, the `web_search_tool_result` will be an error with the `max_uses_exceeded` error code.

#### Domain Filtering

When using domain filters:

- Domains should not include the HTTP/HTTPS scheme (use `example.com` instead of `https://example.com`)
- Subdomains are automatically included (`example.com` covers `docs.example.com`)
- Subpaths are supported (`example.com/blog`)
- You can use either `allowed_domains` or `blocked_domains`, but not both in the same request.

#### Localization

The `user_location` parameter allows you to localize search results based on a user's location.

- `type`: The type of location (must be `approximate`)
- `city`: The city name
- `region`: The region or state
- `country`: The country
- `timezone`: The [IANA timezone ID](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones).

### Response Structure

Here's an example response structure:

```json
{
  "role": "assistant",
  "content": [
    // 1. Claude's decision to search
    {
      "type": "text",
      "text": "I'll search for when Claude Shannon was born."
    },
    // 2. The search query used
    {
      "type": "server_tool_use",
      "id": "srvtoolu_01WYG3ziw53XMcoyKL4XcZmE",
      "name": "web_search",
      "input": {
        "query": "claude shannon birth date"
      }
    },
    // 3. Search results
    {
      "type": "web_search_tool_result",
      "tool_use_id": "srvtoolu_01WYG3ziw53XMcoyKL4XcZmE",
      "content": [
        {
          "type": "web_search_result",
          "url": "https://en.wikipedia.org/wiki/Claude_Shannon",
          "title": "Claude Shannon - Wikipedia",
          "encrypted_content": "EqgfCioIARgBIiQ3YTAwMjY1Mi1mZjM5LTQ1NGUtODgxNC1kNjNjNTk1ZWI3Y...",
          "page_age": "April 30, 2025"
        }
      ]
    },
    {
      "text": "Based on the search results, ",
      "type": "text"
    },
    // 4. Claude's response with citations
    {
      "text": "Claude Shannon was born on April 30, 1916, in Petoskey, Michigan",
      "type": "text",
      "citations": [
        {
          "type": "web_search_result_location",
          "url": "https://en.wikipedia.org/wiki/Claude_Shannon",
          "title": "Claude Shannon - Wikipedia",
          "encrypted_index": "Eo8BCioIAhgBIiQyYjQ0OWJmZi1lNm..",
          "cited_text": "Claude Elwood Shannon (April 30, 1916 ‚Äì February 24, 2001) was an American mathematician, electrical engineer, computer scientist, cryptographer and i..."
        }
      ]
    }
  ],
  "id": "msg_a930390d3a",
  "usage": {
    "input_tokens": 6039,
    "output_tokens": 931,
    "server_tool_use": {
      "web_search_requests": 1
    }
  },
  "stop_reason": "end_turn"
}
```

#### Search Results

Search results include:

- `url`: The URL of the source page
- `title`: The title of the source page
- `page_age`: When the site was last updated
- `encrypted_content`: Encrypted content that must be passed back in multi-turn conversations for citations

#### Citations

Citations are always enabled for web search, and each `web_search_result_location` includes:

- `url`: The URL of the cited source
- `title`: The title of the cited source
- `encrypted_index`: A reference that must be passed back for multi-turn conversations.
- `cited_text`: Up to 150 characters of the cited content

The web search citation fields `cited_text`, `title`, and `url` do not count towards input or output token usage.

#### Errors

If an error occurs during web search, you'll receive a response that takes the following form:

```json
{
  "type": "web_search_tool_result",
  "tool_use_id": "servertoolu_a93jad",
  "content": {
    "type": "web_search_tool_result_error",
    "error_code": "max_uses_exceeded"
  }
}
```

These are the possible error codes:

- `too_many_requests`: Rate limit exceeded
- `invalid_input`: Invalid search query parameter
- `max_uses_exceeded`: Maximum web search tool uses exceeded
- `query_too_long`: Query exceeds maximum length
- `unavailable`: An internal error occurred

#### `pause_turn` Stop Reason

The response may include a `pause_turn` stop reason, which indicates that the API paused a long-running turn. You may provide the response back as-is in a subsequent request to let Claude continue its turn, or modify the content if you wish to interrupt the conversation.

## Prompt Caching

Web search works with [prompt caching](https://docs.anthropic.com/en/docs/build-with-claude/prompt-caching). To enable prompt caching, add at least one `cache_control` breakpoint in your request. The system will automatically cache up until the last `web_search_tool_result` block when executing the tool.

For multi-turn conversations, set a `cache_control` breakpoint on or after the last `web_search_tool_result` block to reuse cached content.

## Streaming

With streaming enabled, you'll receive search events as part of the stream. There will be a pause while the search executes.

## Batch Requests

You can include the web search tool in the [Messages Batches API](https://docs.anthropic.com/en/docs/build-with-claude/batch-processing). Web search tool calls through the Messages Batches API are priced the same as those in regular Messages API requests.

## Usage and Pricing

Web search usage is charged in addition to token usage:

```json
"usage": {
  "input_tokens": 105,
  "output_tokens": 6039,
  "cache_read_input_tokens": 7123,
  "cache_creation_input_tokens": 7345,
  "server_tool_use": {
    "web_search_requests": 1
  }
}
```

Web search is available on the Anthropic API for $10 per 1,000 searches, plus standard token costs for search-generated content. Web search results retrieved throughout a conversation are counted as input tokens, in search iterations executed during a single turn and in subsequent conversation turns.

Each web search counts as one use, regardless of the number of results returned. If an error occurs during web search, the web search will not be billed.
</file>

<file path="docs/ai-docs/claude_code_best_practices.md">
Claude Code: Best practices for agentic coding
Published Apr 18, 2025

Claude Code is a command line tool for agentic coding. This post covers tips and tricks that have proven effective for using Claude Code across various codebases, languages, and environments.

We recently released Claude Code, a command line tool for agentic coding. Developed as a research project, Claude Code gives Anthropic engineers and researchers a more native way to integrate Claude into their coding workflows.

Claude Code is intentionally low-level and unopinionated, providing close to raw model access without forcing specific workflows. This design philosophy creates a flexible, customizable, scriptable, and safe power tool. While powerful, this flexibility presents a learning curve for engineers new to agentic coding tools‚Äîat least until they develop their own best practices.

This post outlines general patterns that have proven effective, both for Anthropic's internal teams and for external engineers using Claude Code across various codebases, languages, and environments. Nothing in this list is set in stone nor universally applicable; consider these suggestions as starting points. We encourage you to experiment and find what works best for you!

Looking for more detailed information? Our comprehensive documentation at claude.ai/code covers all the features mentioned in this post and provides additional examples, implementation details, and advanced techniques.


1. Customize your setup
Claude Code is an agentic coding assistant that automatically pulls context into prompts. This context gathering consumes time and tokens, but you can optimize it through environment tuning.

a. Create CLAUDE.md files
CLAUDE.md is a special file that Claude automatically pulls into context when starting a conversation. This makes it an ideal place for documenting:

Common bash commands
Core files and utility functions
Code style guidelines
Testing instructions
Repository etiquette (e.g., branch naming, merge vs. rebase, etc.)
Developer environment setup (e.g., pyenv use, which compilers work)
Any unexpected behaviors or warnings particular to the project
Other information you want Claude to remember
There‚Äôs no required format for CLAUDE.md files. We recommend keeping them concise and human-readable. For example:

# Bash commands
- npm run build: Build the project
- npm run typecheck: Run the typechecker

# Code style
- Use ES modules (import/export) syntax, not CommonJS (require)
- Destructure imports when possible (eg. import { foo } from 'bar')

# Workflow
- Be sure to typecheck when you‚Äôre done making a series of code changes
- Prefer running single tests, and not the whole test suite, for performance

Copy
You can place CLAUDE.md files in several locations:

The root of your repo, or wherever you run claude from (the most common usage). Name it CLAUDE.md and check it into git so that you can share it across sessions and with your team (recommended), or name it CLAUDE.local.md and .gitignore it
Any parent of the directory where you run claude. This is most useful for monorepos, where you might run claude from root/foo, and have CLAUDE.md files in both root/CLAUDE.md and root/foo/CLAUDE.md. Both of these will be pulled into context automatically
Any child of the directory where you run claude. This is the inverse of the above, and in this case, Claude will pull in CLAUDE.md files on demand when you work with files in child directories
Your home folder (~/.claude/CLAUDE.md), which applies it to all your claude sessions
When you run the /init command, Claude will automatically generate a CLAUDE.md for you.

b. Tune your CLAUDE.md files
Your CLAUDE.md files become part of Claude‚Äôs prompts, so they should be refined like any frequently used prompt. A common mistake is adding extensive content without iterating on its effectiveness. Take time to experiment and determine what produces the best instruction following from the model.

You can add content to your CLAUDE.md manually or press the # key to give Claude an instruction that it will automatically incorporate into the relevant CLAUDE.md. Many engineers use # frequently to document commands, files, and style guidelines while coding, then include CLAUDE.md changes in commits so team members benefit as well.

At Anthropic, we occasionally run CLAUDE.md files through the prompt improver and often tune instructions (e.g. adding emphasis with "IMPORTANT" or "YOU MUST") to improve adherence.

Claude Code tool allowlist
c. Curate Claude's list of allowed tools
By default, Claude Code requests permission for any action that might modify your system: file writes, many bash commands, MCP tools, etc. We designed Claude Code with this deliberately conservative approach to prioritize safety. You can customize the allowlist to permit additional tools that you know are safe, or to allow potentially unsafe tools that are easy to undo (e.g., file editing, git commit).

There are four ways to manage allowed tools:

Select "Always allow" when prompted during a session.
Use the /allowed-tools command after starting Claude Code to add or remove tools from the allowlist. For example, you can add Edit to always allow file edits, Bash(git commit:*) to allow git commits, or mcp__puppeteer__puppeteer_navigate to allow navigating with the Puppeteer MCP server.
Manually edit your .claude/settings.json or ~/.claude.json (we recommend checking the former into source control to share with your team).
Use the --allowedTools CLI flag for session-specific permissions.
d. If using GitHub, install the gh CLI
Claude knows how to use the gh CLI to interact with GitHub for creating issues, opening pull requests, reading comments, and more. Without gh installed, Claude can still use the GitHub API or MCP server (if you have it installed).

2. Give Claude more tools
Claude has access to your shell environment, where you can build up sets of convenience scripts and functions for it just like you would for yourself. It can also leverage more complex tools through MCP and REST APIs.

a. Use Claude with bash tools
Claude Code inherits your bash environment, giving it access to all your tools. While Claude knows common utilities like unix tools and gh, it won't know about your custom bash tools without instructions:

Tell Claude the tool name with usage examples
Tell Claude to run --help to see tool documentation
Document frequently used tools in CLAUDE.md
b. Use Claude with MCP
Claude Code functions as both an MCP server and client. As a client, it can connect to any number of MCP servers to access their tools in three ways:

In project config (available when running Claude Code in that directory)
In global config (available in all projects)
In a checked-in .mcp.json file (available to anyone working in your codebase). For example, you can add Puppeteer and Sentry servers to your .mcp.json, so that every engineer working on your repo can use these out of the box.
When working with MCP, it can also be helpful to launch Claude with the --mcp-debug flag to help identify configuration issues.

c. Use custom slash commands
For repeated workflows‚Äîdebugging loops, log analysis, etc.‚Äîstore prompt templates in Markdown files within the .claude/commands folder. These become available through the slash commands menu when you type /. You can check these commands into git to make them available for the rest of your team.

Custom slash commands can include the special keyword $ARGUMENTS to pass parameters from command invocation.

For example, here‚Äôs a slash command that you could use to automatically pull and fix a Github issue:

Please analyze and fix the GitHub issue: $ARGUMENTS.

Follow these steps:

1. Use `gh issue view` to get the issue details
2. Understand the problem described in the issue
3. Search the codebase for relevant files
4. Implement the necessary changes to fix the issue
5. Write and run tests to verify the fix
6. Ensure code passes linting and type checking
7. Create a descriptive commit message
8. Push and create a PR

Remember to use the GitHub CLI (`gh`) for all GitHub-related tasks.

Copy
Putting the above content into .claude/commands/fix-github-issue.md makes it available as the /project:fix-github-issue command in Claude Code. You could then for example use /project:fix-github-issue 1234 to have Claude fix issue #1234. Similarly, you can add your own personal commands to the ~/.claude/commands folder for commands you want available in all of your sessions.

3. Try common workflows
Claude Code doesn‚Äôt impose a specific workflow, giving you the flexibility to use it how you want. Within the space this flexibility affords, several successful patterns for effectively using Claude Code have emerged across our community of users:

a. Explore, plan, code, commit
This versatile workflow suits many problems:

Ask Claude to read relevant files, images, or URLs, providing either general pointers ("read the file that handles logging") or specific filenames ("read logging.py"), but explicitly tell it not to write any code just yet.
This is the part of the workflow where you should consider strong use of subagents, especially for complex problems. Telling Claude to use subagents to verify details or investigate particular questions it might have, especially early on in a conversation or task, tends to preserve context availability without much downside in terms of lost efficiency.
Ask Claude to make a plan for how to approach a specific problem. We recommend using the word "think" to trigger extended thinking mode, which gives Claude additional computation time to evaluate alternatives more thoroughly. These specific phrases are mapped directly to increasing levels of thinking budget in the system: "think" < "think hard" < "think harder" < "ultrathink." Each level allocates progressively more thinking budget for Claude to use.
If the results of this step seem reasonable, you can have Claude create a document or a GitHub issue with its plan so that you can reset to this spot if the implementation (step 3) isn‚Äôt what you want.
Ask Claude to implement its solution in code. This is also a good place to ask it to explicitly verify the reasonableness of its solution as it implements pieces of the solution.
Ask Claude to commit the result and create a pull request. If relevant, this is also a good time to have Claude update any READMEs or changelogs with an explanation of what it just did.
Steps #1-#2 are crucial‚Äîwithout them, Claude tends to jump straight to coding a solution. While sometimes that's what you want, asking Claude to research and plan first significantly improves performance for problems requiring deeper thinking upfront.

b. Write tests, commit; code, iterate, commit
This is an Anthropic-favorite workflow for changes that are easily verifiable with unit, integration, or end-to-end tests. Test-driven development (TDD) becomes even more powerful with agentic coding:

Ask Claude to write tests based on expected input/output pairs. Be explicit about the fact that you‚Äôre doing test-driven development so that it avoids creating mock implementations, even for functionality that doesn‚Äôt exist yet in the codebase.
Tell Claude to run the tests and confirm they fail. Explicitly telling it not to write any implementation code at this stage is often helpful.
Ask Claude to commit the tests when you‚Äôre satisfied with them.
Ask Claude to write code that passes the tests, instructing it not to modify the tests. Tell Claude to keep going until all tests pass. It will usually take a few iterations for Claude to write code, run the tests, adjust the code, and run the tests again.
At this stage, it can help to ask it to verify with independent subagents that the implementation isn‚Äôt overfitting to the tests
Ask Claude to commit the code once you‚Äôre satisfied with the changes.
Claude performs best when it has a clear target to iterate against‚Äîa visual mock, a test case, or another kind of output. By providing expected outputs like tests, Claude can make changes, evaluate results, and incrementally improve until it succeeds.

c. Write code, screenshot result, iterate
Similar to the testing workflow, you can provide Claude with visual targets:

Give Claude a way to take browser screenshots (e.g., with the Puppeteer MCP server, an iOS simulator MCP server, or manually copy / paste screenshots into Claude).
Give Claude a visual mock by copying / pasting or drag-dropping an image, or giving Claude the image file path.
Ask Claude to implement the design in code, take screenshots of the result, and iterate until its result matches the mock.
Ask Claude to commit when you're satisfied.
Like humans, Claude's outputs tend to improve significantly with iteration. While the first version might be good, after 2-3 iterations it will typically look much better. Give Claude the tools to see its outputs for best results.

Safe yolo mode
d. Safe YOLO mode
Instead of supervising Claude, you can use claude --dangerously-skip-permissions to bypass all permission checks and let Claude work uninterrupted until completion. This works well for workflows like fixing lint errors or generating boilerplate code.

Letting Claude run arbitrary commands is risky and can result in data loss, system corruption, or even data exfiltration (e.g., via prompt injection attacks). To minimize these risks, use --dangerously-skip-permissions in a container without internet access. You can follow this reference implementation using Docker Dev Containers.

e. Codebase Q&A
When onboarding to a new codebase, use Claude Code for learning and exploration. You can ask Claude the same sorts of questions you would ask another engineer on the project when pair programming. Claude can agentically search the codebase to answer general questions like:

How does logging work?
How do I make a new API endpoint?
What does async move { ... } do on line 134 of foo.rs?
What edge cases does CustomerOnboardingFlowImpl handle?
Why are we calling foo() instead of bar() on line 333?
What‚Äôs the equivalent of line 334 of baz.py in Java?
At Anthropic, using Claude Code in this way has become our core onboarding workflow, significantly improving ramp-up time and reducing load on other engineers. No special prompting is required! Simply ask questions, and Claude will explore the code to find answers.

Use Claude to interact with git
f. Use Claude to interact with git
Claude can effectively handle many git operations. Many Anthropic engineers use Claude for 90%+ of our git interactions:

Searching git history to answer questions like "What changes made it into v1.2.3?", "Who owns this particular feature?", or "Why was this API designed this way?" It helps to explicitly prompt Claude to look through git history to answer queries like these.
Writing commit messages. Claude will look at your changes and recent history automatically to compose a message taking all the relevant context into account
Handling complex git operations like reverting files, resolving rebase conflicts, and comparing and grafting patches
g. Use Claude to interact with GitHub
Claude Code can manage many GitHub interactions:

Creating pull requests: Claude understands the shorthand "pr" and will generate appropriate commit messages based on the diff and surrounding context.
Implementing one-shot resolutions for simple code review comments: just tell it to fix comments on your PR (optionally, give it more specific instructions) and push back to the PR branch when it's done.
Fixing failing builds or linter warnings
Categorizing and triaging open issues by asking Claude to loop over open GitHub issues
This eliminates the need to remember gh command line syntax while automating routine tasks.

h. Use Claude to work with Jupyter notebooks
Researchers and data scientists at Anthropic use Claude Code to read and write Jupyter notebooks. Claude can interpret outputs, including images, providing a fast way to explore and interact with data. There are no required prompts or workflows, but a workflow we recommend is to have Claude Code and a .ipynb file open side-by-side in VS Code.

You can also ask Claude to clean up or make aesthetic improvements to your Jupyter notebook before you show it to colleagues. Specifically telling it to make the notebook or its data visualizations ‚Äúaesthetically pleasing‚Äù tends to help remind it that it‚Äôs optimizing for a human viewing experience.

4. Optimize your workflow
The suggestions below apply across all workflows:

a. Be specific in your instructions
Claude Code‚Äôs success rate improves significantly with more specific instructions, especially on first attempts. Giving clear directions upfront reduces the need for course corrections later.

For example:

Poor	Good
add tests for foo.py	write a new test case for foo.py, covering the edge case where the user is logged out. avoid mocks
why does ExecutionFactory have such a weird api?	look through ExecutionFactory's git history and summarize how its api came to be
add a calendar widget	look at how existing widgets are implemented on the home page to understand the patterns and specifically how code and interfaces are separated out. HotDogWidget.php is a good example to start with. then, follow the pattern to implement a new calendar widget that lets the user select a month and paginate forwards/backwards to pick a year. Build from scratch without libraries other than the ones already used in the rest of the codebase.
Claude can infer intent, but it can't read minds. Specificity leads to better alignment with expectations.

Give Claude images
b. Give Claude images
Claude excels with images and diagrams through several methods:

Paste screenshots (pro tip: hit cmd+ctrl+shift+4 in macOS to screenshot to clipboard and ctrl+v to paste. Note that this is not cmd+v like you would usually use to paste on mac and does not work remotely.)
Drag and drop images directly into the prompt input
Provide file paths for images
This is particularly useful when working with design mocks as reference points for UI development, and visual charts for analysis and debugging. If you are not adding visuals to context, it can still be helpful to be clear with Claude about how important it is for the result to be visually appealing.

Mention files you want Claude to look at or work on
c. Mention files you want Claude to look at or work on
Use tab-completion to quickly reference files or folders anywhere in your repository, helping Claude find or update the right resources.

Give Claude URLs
d. Give Claude URLs
Paste specific URLs alongside your prompts for Claude to fetch and read. To avoid permission prompts for the same domains (e.g., docs.foo.com), use /allowed-tools to add domains to your allowlist.

e. Course correct early and often
While auto-accept mode (shift+tab to toggle) lets Claude work autonomously, you'll typically get better results by being an active collaborator and guiding Claude's approach. You can get the best results by thoroughly explaining the task to Claude at the beginning, but you can also course correct Claude at any time.

These four tools help with course correction:

Ask Claude to make a plan before coding. Explicitly tell it not to code until you‚Äôve confirmed its plan looks good.
Press Escape to interrupt Claude during any phase (thinking, tool calls, file edits), preserving context so you can redirect or expand instructions.
Double-tap Escape to jump back in history, edit a previous prompt, and explore a different direction. You can edit the prompt and repeat until you get the result you're looking for.
Ask Claude to undo changes, often in conjunction with option #2 to take a different approach.
Though Claude Code occasionally solves problems perfectly on the first attempt, using these correction tools generally produces better solutions faster.

f. Use /clear to keep context focused
During long sessions, Claude's context window can fill with irrelevant conversation, file contents, and commands. This can reduce performance and sometimes distract Claude. Use the /clear command frequently between tasks to reset the context window.

g. Use checklists and scratchpads for complex workflows
For large tasks with multiple steps or requiring exhaustive solutions‚Äîlike code migrations, fixing numerous lint errors, or running complex build scripts‚Äîimprove performance by having Claude use a Markdown file (or even a GitHub issue!) as a checklist and working scratchpad:

For example, to fix a large number of lint issues, you can do the following:

Tell Claude to run the lint command and write all resulting errors (with filenames and line numbers) to a Markdown checklist
Instruct Claude to address each issue one by one, fixing and verifying before checking it off and moving to the next
h. Pass data into Claude
Several methods exist for providing data to Claude:

Copy and paste directly into your prompt (most common approach)
Pipe into Claude Code (e.g., cat foo.txt | claude), particularly useful for logs, CSVs, and large data
Tell Claude to pull data via bash commands, MCP tools, or custom slash commands
Ask Claude to read files or fetch URLs (works for images too)
Most sessions involve a combination of these approaches. For example, you can pipe in a log file, then tell Claude to use a tool to pull in additional context to debug the logs.

5. Use headless mode to automate your infra
Claude Code includes headless mode for non-interactive contexts like CI, pre-commit hooks, build scripts, and automation. Use the -p flag with a prompt to enable headless mode, and --output-format stream-json for streaming JSON output.

Note that headless mode does not persist between sessions. You have to trigger it each session.

a. Use Claude for issue triage
Headless mode can power automations triggered by GitHub events, such as when a new issue is created in your repository. For example, the public Claude Code repository uses Claude to inspect new issues as they come in and assign appropriate labels.

b. Use Claude as a linter
Claude Code can provide subjective code reviews beyond what traditional linting tools detect, identifying issues like typos, stale comments, misleading function or variable names, and more.

6. Uplevel with multi-Claude workflows
Beyond standalone usage, some of the most powerful applications involve running multiple Claude instances in parallel:

a. Have one Claude write code; use another Claude to verify
A simple but effective approach is to have one Claude write code while another reviews or tests it. Similar to working with multiple engineers, sometimes having separate context is beneficial:

Use Claude to write code
Run /clear or start a second Claude in another terminal
Have the second Claude review the first Claude's work
Start another Claude (or /clear again) to read both the code and review feedback
Have this Claude edit the code based on the feedback
You can do something similar with tests: have one Claude write tests, then have another Claude write code to make the tests pass. You can even have your Claude instances communicate with each other by giving them separate working scratchpads and telling them which one to write to and which one to read from.

This separation often yields better results than having a single Claude handle everything.

b. Have multiple checkouts of your repo
Rather than waiting for Claude to complete each step, something many engineers at Anthropic do is:

Create 3-4 git checkouts in separate folders
Open each folder in separate terminal tabs
Start Claude in each folder with different tasks
Cycle through to check progress and approve/deny permission requests
c. Use git worktrees
This approach shines for multiple independent tasks, offering a lighter-weight alternative to multiple checkouts. Git worktrees allow you to check out multiple branches from the same repository into separate directories. Each worktree has its own working directory with isolated files, while sharing the same Git history and reflog.

Using git worktrees enables you to run multiple Claude sessions simultaneously on different parts of your project, each focused on its own independent task. For instance, you might have one Claude refactoring your authentication system while another builds a completely unrelated data visualization component. Since the tasks don't overlap, each Claude can work at full speed without waiting for the other's changes or dealing with merge conflicts:

Create worktrees: git worktree add ../project-feature-a feature-a
Launch Claude in each worktree: cd ../project-feature-a && claude
Create additional worktrees as needed (repeat steps 1-2 in new terminal tabs)
Some tips:

Use consistent naming conventions
Maintain one terminal tab per worktree
If you‚Äôre using iTerm2 on Mac, set up notifications for when Claude needs attention
Use separate IDE windows for different worktrees
Clean up when finished: git worktree remove ../project-feature-a
d. Use headless mode with a custom harness
claude -p (headless mode) integrates Claude Code programmatically into larger workflows while leveraging its built-in tools and system prompt. There are two primary patterns for using headless mode:

1. Fanning out handles large migrations or analyses (e.g., analyzing sentiment in hundreds of logs or analyzing thousands of CSVs):

Have Claude write a script to generate a task list. For example, generate a list of 2k files that need to be migrated from framework A to framework B.
Loop through tasks, calling Claude programmatically for each and giving it a task and a set of tools it can use. For example: claude -p ‚Äúmigrate foo.py from React to Vue. When you are done, you MUST return the string OK if you succeeded, or FAIL if the task failed.‚Äù --allowedTools Edit Bash(git commit:*)
Run the script several times and refine your prompt to get the desired outcome.
2. Pipelining integrates Claude into existing data/processing pipelines:

Call claude -p ‚Äú<your prompt>‚Äù --json | your_command, where your_command is the next step of your processing pipeline
That‚Äôs it! JSON output (optional) can help provide structure for easier automated processing.
For both of these use cases, it can be helpful to use the --verbose flag for debugging the Claude invocation. We generally recommend turning verbose mode off in production for cleaner output.

What are your tips and best practices for working with Claude Code? Tag @AnthropicAI so we can see what you're building!

Acknowledgements
Written by Boris Cherny. This work draws upon best practices from across the broader Claude Code user community, whose creative approaches and workflows continue to inspire us. Special thanks also to Daisy Hollman, Ashwin Bhat, Cat Wu, Sid Bidasaria, Cal Rueb, Nodir Turakulov, Barry Zhang, Drew Hodun and many other Anthropic engineers whose valuable insights and practical experience with Claude Code helped shape these recommendations.

Product
Claude overview
Claude Code
Claude team plan
Claude enterprise plan
Claude education plan
Download Claude apps
Claude.ai pricing plans
Claude.ai login
API Platform
API overview
Developer docs
Claude in Amazon Bedrock
Claude on Google Cloud's Vertex AI
Pricing
Console login
Research
Research overview
Economic Index
Claude models
Claude 3.7 Sonnet
Claude 3.5 Haiku
Claude 3 Opus
Commitments
Transparency
Responsible scaling policy
Security and compliance
Solutions
AI agents
Coding
Customer support
Learn
Anthropic Academy
Customer stories
Engineering at Anthropic
Explore
About us
Become a partner
Careers
News
Help and security
Status
Availability
Support center
Terms and policies
Privacy choices
Privacy policy
Responsible disclosure policy
Terms of service - consumer
Terms of service - commercial
Usage policy
¬© 2025 Anthropic PBC
</file>

<file path="docs/ai-docs/claude_code_tech.md">
# Claude Code: Advanced Techniques for AI/Agentic Coding

## Quick Techniques Guide

1. **Context Engineering**: Instead of just prompt engineering, focus on the entire context for the AI model:
   - Create and refine CLAUDE.md files to provide consistent guidelines
   - Use thinking commands (`think`, `think hard`, `think harder`, `ultrathink`) to trigger deeper analysis
   - Mention specific files and use tab-completion for accurate file references
   - Use images and URLs alongside your prompts for richer context

2. **Workflow Patterns**:
   - **Explore ‚Üí Plan ‚Üí Code ‚Üí Commit**: Make Claude read and understand before implementing
   - **Tests ‚Üí Commit ‚Üí Code ‚Üí Iterate ‚Üí Commit**: Test-driven development with AI
   - **Code ‚Üí Screenshot ‚Üí Iterate**: Visual feedback loops for UI development
   - **Safe YOLO Mode**: For trusted operations in safe environments

3. **Multi-Claude Approaches**:
   - Writer/Reviewer Pattern: One Claude writes, another reviews
   - Parallel Processing: Multiple Claude instances working on different parts of a project
   - Git Worktrees: Different instances on different branches

4. **Headless Automation**:
   - Issue triage
   - Custom linting
   - Large-scale migrations via fan-out pattern
   - Data pipeline integration

5. **Tool Extension**:
   - Customize allowlists for operations like editing and git commands
   - Install and document custom CLI tools
   - Connect MCP servers for specialized capabilities
   - Create custom slash commands for repeated workflows

6. **Optimization Techniques**:
   - Be specific in instructions
   - Course-correct early with interrupts (Escape key)
   - Use `/clear` to keep context focused
   - Create checklists for complex multi-stage tasks

---

## 1. Context Engineering Approach

### Creating Effective CLAUDE.md Files

CLAUDE.md files are automatically included in your context and can dramatically improve Claude's effectiveness. These files can be placed in:

- Repository root (most common)
- Parent directories (useful for monorepos)
- Child directories (loaded on demand)
- Home folder (~/.claude/CLAUDE.md) for session-wide settings

**Example CLAUDE.md Content:**
```markdown
# Bash commands
- npm run build: Build the project
- npm run typecheck: Run the typechecker

# Code style
- Use ES modules (import/export) syntax, not CommonJS (require)
- Destructure imports when possible (eg. import { foo } from 'bar')

# Workflow
- Be sure to typecheck when you're done making a series of code changes
- Prefer running single tests, not the whole test suite, for performance
```

**Tips for Effective CLAUDE.md Files:**
- Keep them concise and human-readable
- Iterate on effectiveness, like any prompt
- Use emphasis words like "IMPORTANT" or "YOU MUST" for critical instructions
- Add content while working using the `#` key
- Include CLAUDE.md in commits to benefit your team

### Customizing Tool Allowlists

By default, Claude Code requests permission for system-modifying actions. You can customize what's allowed:

- Select "Always allow" during a session
- Use `/allowed-tools` command
- Edit your `.claude/settings.json` or `~/.claude.json`
- Use the `--allowedTools` CLI flag

### Using Extended Thinking

Claude Code has special thinking mode triggers that allocate progressively more computation time:
- `think` < `think hard` < `think harder` < `ultrathink`

Explicitly mentioning these in your prompts gives Claude more time to consider alternatives and develop plans.

## 2. Workflow Patterns

### Explore, Plan, Code, Commit

This versatile workflow works for many problems:

1. Ask Claude to read relevant files, images, or URLs without writing code yet
2. Request a plan, using thinking mode triggers as needed
3. Have Claude implement the solution in code
4. Ask Claude to commit and create a pull request

**Key insight**: Steps 1-2 are crucial for complex tasks, as they prevent Claude from jumping straight to coding without proper understanding.

### Test-Driven Development (TDD)

1. Ask Claude to write tests based on expected input/output pairs
2. Have Claude run the tests to confirm they fail
3. Ask Claude to commit the tests
4. Request code implementation that passes the tests
5. Commit the passing implementation

This approach is particularly effective because Claude performs best when it has a clear target to iterate against.

### Visual Development Loop

1. Give Claude a way to take screenshots (MCP servers, manual screenshots)
2. Provide a visual mock or design reference
3. Have Claude implement the design, take screenshots, and iterate
4. Commit when satisfied

**Pro tip**: Claude's outputs typically improve significantly with 2-3 iterations of visual feedback.

### Safe YOLO Mode

For trusted operations in controlled environments:
- Use `claude --dangerously-skip-permissions` to bypass permission checks
- Best used for routine tasks like fixing lint errors or generating boilerplate
- For safety, run in a container without internet access

## 3. Multi-Claude Workflows

### Writer/Reviewer Pattern

Run multiple Claude instances with different roles:

1. Have one Claude write code
2. Run `/clear` or start a second Claude in another terminal
3. Have the second Claude review the first Claude's work
4. Start another Claude to integrate feedback and improve the code

This pattern mimics human code review and often produces better results than a single Claude trying to do everything.

### Parallel Processing

To work on multiple independent tasks simultaneously:

1. Create 3-4 git checkouts in separate folders
2. Open each folder in separate terminal tabs
3. Start Claude in each folder with different tasks
4. Cycle through to check progress and approve/deny permission requests

### Git Worktrees

A lighter-weight alternative to multiple checkouts:

1. Create worktrees: `git worktree add ../project-feature-a feature-a`
2. Launch Claude in each worktree: `cd ../project-feature-a && claude`
3. Create additional worktrees as needed
4. Clean up when finished: `git worktree remove ../project-feature-a`

## 4. Headless Automation

Claude Code's headless mode (`claude -p`) enables programmatic integration:

### Fan-out Pattern for Large-Scale Tasks

1. Have Claude write a script to generate a task list
2. Loop through tasks, calling Claude programmatically for each
3. Process results and collect metrics

Example command:
```bash
claude -p "migrate foo.py from React to Vue. When done, return OK or FAIL" --allowedTools Edit Bash
```

### Pipeline Integration

Integrate Claude into data processing pipelines:
```bash
claude -p "<your prompt>" --json | your_command
```

### Automated Issue Management

Use Claude to triage GitHub issues, assign labels, and suggest fixes automatically when issues are created.

### Custom Linting

Claude can provide subjective code reviews beyond traditional linters, identifying:
- Typos
- Stale comments
- Misleading function or variable names
- Inconsistent code styles

## 5. Tool Extension Strategies

### Using Custom Bash Tools

Claude inherits your bash environment and can use your custom tools:
- Tell Claude the tool name with usage examples
- Have Claude run `--help` to see documentation
- Document frequently used tools in CLAUDE.md

### MCP Integration

Claude Code functions as both an MCP server and client:
- Add MCP servers to project config
- Configure in global config
- Include in a checked-in `.mcp.json` file

For debugging, launch Claude with the `--mcp-debug` flag.

### Custom Slash Commands

For repeated workflows, store prompt templates in the `.claude/commands` folder:
- These become available through the slash commands menu
- Can include the `$ARGUMENTS` keyword for parameterization
- Can be checked into git for team sharing

**Example Slash Command Template:**
```markdown
Please analyze and fix the GitHub issue: $ARGUMENTS.

Follow these steps:
1. Use `gh issue view` to get the issue details
2. Understand the problem described in the issue
3. Search the codebase for relevant files
4. Implement the necessary changes to fix the issue
5. Write and run tests to verify the fix
6. Ensure code passes linting and type checking
7. Create a descriptive commit message
8. Push and create a PR
```

## 6. Optimization Strategies

### Being Specific in Instructions

| Poor                                             | Good                                                                                               |
| ------------------------------------------------ | -------------------------------------------------------------------------------------------------- |
| add tests for foo.py                             | write a new test case for foo.py, covering the edge case where the user is logged out. avoid mocks |
| why does ExecutionFactory have such a weird api? | look through ExecutionFactory's git history and summarize how its api came to be                   |

### Course Correction Tools

- Ask Claude to make a plan before coding
- Press Escape to interrupt during any phase
- Double-tap Escape to jump back in history
- Ask Claude to undo changes

### Using /clear for Context Management

During long sessions, use the `/clear` command frequently between tasks to reset the context window and maintain focus.

### Checklists for Complex Workflows

For large tasks:
1. Tell Claude to create a Markdown checklist of subtasks
2. Instruct Claude to address each issue one by one
3. Have Claude check off items as they're completed

### Working with Visual Data

Claude excels with images and diagrams through:
- Paste screenshots (macOS: `cmd+ctrl+shift+4` then `ctrl+v`)
- Drag and drop images directly into the prompt
- Provide file paths for images

## 7. Specialized Workflows

### Git and GitHub Operations

Claude can effectively handle:
- Searching git history
- Writing commit messages
- Handling complex git operations
- Creating pull requests
- Implementing code review fixes
- Fixing failing builds
- Categorizing and triaging issues

### Working with Jupyter Notebooks

- Have Claude Code and a .ipynb file open side-by-side
- Claude can interpret outputs, including images
- Ask Claude to clean up or make aesthetic improvements
- Tell Claude to make notebooks "aesthetically pleasing"

### Codebase Q&A

Claude excels at answering questions about codebases:
- How does [feature] work?
- How do I make a new [component]?
- What does this code do?
- What edge cases are handled?
- Why is the code structured this way?

This approach significantly improves onboarding time and reduces load on other engineers.

---

## Typescript example

```
async function runClaude(prompt: string, dir: string, allowedTools: string, outputFormat?: string): Promise<string> {
  console.log(`üîπ Running Claude in ${dir}...`);
  
  const outputFormatFlag = outputFormat ? `--output-format ${outputFormat}` : '';
  const command = `cd "${dir}" && claude -p "${prompt}" --allowedTools "${allowedTools}" ${outputFormatFlag}`;
  
  try {
    const { stdout, stderr } = await execAsync(command);
    const logFile = join(dir, 'claude_output.log');
    writeFileSync(logFile, stdout);
    return stdout;
  } catch (error) {
    console.error(`Error running Claude: ${error}`);
    return '';
  }
}
```
</file>

<file path="docs/claude-task-manager/ai-client-utils-example.md">
# AI Client Utilities for MCP Tools

This document provides examples of how to use the new AI client utilities with AsyncOperationManager in MCP tools.

## Basic Usage with Direct Functions

```javascript
// In your direct function implementation:
import {
	getAnthropicClientForMCP,
	getModelConfig,
	handleClaudeError
} from '../utils/ai-client-utils.js';

export async function someAiOperationDirect(args, log, context) {
	try {
		// Initialize Anthropic client with session from context
		const client = getAnthropicClientForMCP(context.session, log);

		// Get model configuration with defaults or session overrides
		const modelConfig = getModelConfig(context.session);

		// Make API call with proper error handling
		try {
			const response = await client.messages.create({
				model: modelConfig.model,
				max_tokens: modelConfig.maxTokens,
				temperature: modelConfig.temperature,
				messages: [{ role: 'user', content: 'Your prompt here' }]
			});

			return {
				success: true,
				data: response
			};
		} catch (apiError) {
			// Use helper to get user-friendly error message
			const friendlyMessage = handleClaudeError(apiError);

			return {
				success: false,
				error: {
					code: 'AI_API_ERROR',
					message: friendlyMessage
				}
			};
		}
	} catch (error) {
		// Handle client initialization errors
		return {
			success: false,
			error: {
				code: 'AI_CLIENT_ERROR',
				message: error.message
			}
		};
	}
}
```

## Integration with AsyncOperationManager

```javascript
// In your MCP tool implementation:
import {
	AsyncOperationManager,
	StatusCodes
} from '../../utils/async-operation-manager.js';
import { someAiOperationDirect } from '../../core/direct-functions/some-ai-operation.js';

export async function someAiOperation(args, context) {
	const { session, mcpLog } = context;
	const log = mcpLog || console;

	try {
		// Create operation description
		const operationDescription = `AI operation: ${args.someParam}`;

		// Start async operation
		const operation = AsyncOperationManager.createOperation(
			operationDescription,
			async (reportProgress) => {
				try {
					// Initial progress report
					reportProgress({
						progress: 0,
						status: 'Starting AI operation...'
					});

					// Call direct function with session and progress reporting
					const result = await someAiOperationDirect(args, log, {
						reportProgress,
						mcpLog: log,
						session
					});

					// Final progress update
					reportProgress({
						progress: 100,
						status: result.success ? 'Operation completed' : 'Operation failed',
						result: result.data,
						error: result.error
					});

					return result;
				} catch (error) {
					// Handle errors in the operation
					reportProgress({
						progress: 100,
						status: 'Operation failed',
						error: {
							message: error.message,
							code: error.code || 'OPERATION_FAILED'
						}
					});
					throw error;
				}
			}
		);

		// Return immediate response with operation ID
		return {
			status: StatusCodes.ACCEPTED,
			body: {
				success: true,
				message: 'Operation started',
				operationId: operation.id
			}
		};
	} catch (error) {
		// Handle errors in the MCP tool
		log.error(`Error in someAiOperation: ${error.message}`);
		return {
			status: StatusCodes.INTERNAL_SERVER_ERROR,
			body: {
				success: false,
				error: {
					code: 'OPERATION_FAILED',
					message: error.message
				}
			}
		};
	}
}
```

## Using Research Capabilities with Perplexity

```javascript
// In your direct function:
import {
	getPerplexityClientForMCP,
	getBestAvailableAIModel
} from '../utils/ai-client-utils.js';

export async function researchOperationDirect(args, log, context) {
	try {
		// Get the best AI model for this operation based on needs
		const { type, client } = await getBestAvailableAIModel(
			context.session,
			{ requiresResearch: true },
			log
		);

		// Report which model we're using
		if (context.reportProgress) {
			await context.reportProgress({
				progress: 10,
				status: `Using ${type} model for research...`
			});
		}

		// Make API call based on the model type
		if (type === 'perplexity') {
			// Call Perplexity
			const response = await client.chat.completions.create({
				model: context.session?.env?.PERPLEXITY_MODEL || 'sonar-medium-online',
				messages: [{ role: 'user', content: args.researchQuery }],
				temperature: 0.1
			});

			return {
				success: true,
				data: response.choices[0].message.content
			};
		} else {
			// Call Claude as fallback
			// (Implementation depends on specific needs)
			// ...
		}
	} catch (error) {
		// Handle errors
		return {
			success: false,
			error: {
				code: 'RESEARCH_ERROR',
				message: error.message
			}
		};
	}
}
```

## Model Configuration Override Example

```javascript
// In your direct function:
import { getModelConfig } from '../utils/ai-client-utils.js';

// Using custom defaults for a specific operation
const operationDefaults = {
	model: 'claude-3-haiku-20240307', // Faster, smaller model
	maxTokens: 1000, // Lower token limit
	temperature: 0.2 // Lower temperature for more deterministic output
};

// Get model config with operation-specific defaults
const modelConfig = getModelConfig(context.session, operationDefaults);

// Now use modelConfig in your API calls
const response = await client.messages.create({
	model: modelConfig.model,
	max_tokens: modelConfig.maxTokens,
	temperature: modelConfig.temperature
	// Other parameters...
});
```

## Best Practices

1. **Error Handling**:

   - Always use try/catch blocks around both client initialization and API calls
   - Use `handleClaudeError` to provide user-friendly error messages
   - Return standardized error objects with code and message

2. **Progress Reporting**:

   - Report progress at key points (starting, processing, completing)
   - Include meaningful status messages
   - Include error details in progress reports when failures occur

3. **Session Handling**:

   - Always pass the session from the context to the AI client getters
   - Use `getModelConfig` to respect user settings from session

4. **Model Selection**:

   - Use `getBestAvailableAIModel` when you need to select between different models
   - Set `requiresResearch: true` when you need Perplexity capabilities

5. **AsyncOperationManager Integration**:
   - Create descriptive operation names
   - Handle all errors within the operation function
   - Return standardized results from direct functions
   - Return immediate responses with operation IDs
</file>

<file path="docs/claude-task-manager/command-reference.md">
# Task Master Command Reference

Here's a comprehensive reference of all available commands:

## Parse PRD

```bash
# Parse a PRD file and generate tasks
task-master parse-prd <prd-file.txt>

# Limit the number of tasks generated
task-master parse-prd <prd-file.txt> --num-tasks=10
```

## List Tasks

```bash
# List all tasks
task-master list

# List tasks with a specific status
task-master list --status=<status>

# List tasks with subtasks
task-master list --with-subtasks

# List tasks with a specific status and include subtasks
task-master list --status=<status> --with-subtasks
```

## Show Next Task

```bash
# Show the next task to work on based on dependencies and status
task-master next
```

## Show Specific Task

```bash
# Show details of a specific task
task-master show <id>
# or
task-master show --id=<id>

# View a specific subtask (e.g., subtask 2 of task 1)
task-master show 1.2
```

## Update Tasks

```bash
# Update tasks from a specific ID and provide context
task-master update --from=<id> --prompt="<prompt>"
```

## Update a Specific Task

```bash
# Update a single task by ID with new information
task-master update-task --id=<id> --prompt="<prompt>"

# Use research-backed updates with Perplexity AI
task-master update-task --id=<id> --prompt="<prompt>" --research
```

## Update a Subtask

```bash
# Append additional information to a specific subtask
task-master update-subtask --id=<parentId.subtaskId> --prompt="<prompt>"

# Example: Add details about API rate limiting to subtask 2 of task 5
task-master update-subtask --id=5.2 --prompt="Add rate limiting of 100 requests per minute"

# Use research-backed updates with Perplexity AI
task-master update-subtask --id=<parentId.subtaskId> --prompt="<prompt>" --research
```

Unlike the `update-task` command which replaces task information, the `update-subtask` command _appends_ new information to the existing subtask details, marking it with a timestamp. This is useful for iteratively enhancing subtasks while preserving the original content.

## Generate Task Files

```bash
# Generate individual task files from tasks.json
task-master generate
```

## Set Task Status

```bash
# Set status of a single task
task-master set-status --id=<id> --status=<status>

# Set status for multiple tasks
task-master set-status --id=1,2,3 --status=<status>

# Set status for subtasks
task-master set-status --id=1.1,1.2 --status=<status>
```

When marking a task as "done", all of its subtasks will automatically be marked as "done" as well.

## Expand Tasks

```bash
# Expand a specific task with subtasks
task-master expand --id=<id> --num=<number>

# Expand with additional context
task-master expand --id=<id> --prompt="<context>"

# Expand all pending tasks
task-master expand --all

# Force regeneration of subtasks for tasks that already have them
task-master expand --all --force

# Research-backed subtask generation for a specific task
task-master expand --id=<id> --research

# Research-backed generation for all tasks
task-master expand --all --research
```

## Clear Subtasks

```bash
# Clear subtasks from a specific task
task-master clear-subtasks --id=<id>

# Clear subtasks from multiple tasks
task-master clear-subtasks --id=1,2,3

# Clear subtasks from all tasks
task-master clear-subtasks --all
```

## Analyze Task Complexity

```bash
# Analyze complexity of all tasks
task-master analyze-complexity

# Save report to a custom location
task-master analyze-complexity --output=my-report.json

# Use a specific LLM model
task-master analyze-complexity --model=claude-3-opus-20240229

# Set a custom complexity threshold (1-10)
task-master analyze-complexity --threshold=6

# Use an alternative tasks file
task-master analyze-complexity --file=custom-tasks.json

# Use Perplexity AI for research-backed complexity analysis
task-master analyze-complexity --research
```

## View Complexity Report

```bash
# Display the task complexity analysis report
task-master complexity-report

# View a report at a custom location
task-master complexity-report --file=my-report.json
```

## Managing Task Dependencies

```bash
# Add a dependency to a task
task-master add-dependency --id=<id> --depends-on=<id>

# Remove a dependency from a task
task-master remove-dependency --id=<id> --depends-on=<id>

# Validate dependencies without fixing them
task-master validate-dependencies

# Find and fix invalid dependencies automatically
task-master fix-dependencies
```

## Add a New Task

```bash
# Add a new task using AI
task-master add-task --prompt="Description of the new task"

# Add a task with dependencies
task-master add-task --prompt="Description" --dependencies=1,2,3

# Add a task with priority
task-master add-task --prompt="Description" --priority=high
```

## Initialize a Project

```bash
# Initialize a new project with Task Master structure
task-master init
```
</file>

<file path="docs/claude-task-manager/configuration.md">
# Configuration

Task Master can be configured through environment variables in a `.env` file at the root of your project.

## Required Configuration

- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude (Example: `ANTHROPIC_API_KEY=sk-ant-api03-...`)

## Optional Configuration

- `MODEL` (Default: `"claude-3-7-sonnet-20250219"`): Claude model to use (Example: `MODEL=claude-3-opus-20240229`)
- `MAX_TOKENS` (Default: `"4000"`): Maximum tokens for responses (Example: `MAX_TOKENS=8000`)
- `TEMPERATURE` (Default: `"0.7"`): Temperature for model responses (Example: `TEMPERATURE=0.5`)
- `DEBUG` (Default: `"false"`): Enable debug logging (Example: `DEBUG=true`)
- `LOG_LEVEL` (Default: `"info"`): Console output level (Example: `LOG_LEVEL=debug`)
- `DEFAULT_SUBTASKS` (Default: `"3"`): Default subtask count (Example: `DEFAULT_SUBTASKS=5`)
- `DEFAULT_PRIORITY` (Default: `"medium"`): Default priority (Example: `DEFAULT_PRIORITY=high`)
- `PROJECT_NAME` (Default: `"MCP SaaS MVP"`): Project name in metadata (Example: `PROJECT_NAME=My Awesome Project`)
- `PROJECT_VERSION` (Default: `"1.0.0"`): Version in metadata (Example: `PROJECT_VERSION=2.1.0`)
- `PERPLEXITY_API_KEY`: For research-backed features (Example: `PERPLEXITY_API_KEY=pplx-...`)
- `PERPLEXITY_MODEL` (Default: `"sonar-medium-online"`): Perplexity model (Example: `PERPLEXITY_MODEL=sonar-large-online`)

## Example .env File

```
# Required
ANTHROPIC_API_KEY=sk-ant-api03-your-api-key

# Optional - Claude Configuration
MODEL=claude-3-7-sonnet-20250219
MAX_TOKENS=4000
TEMPERATURE=0.7

# Optional - Perplexity API for Research
PERPLEXITY_API_KEY=pplx-your-api-key
PERPLEXITY_MODEL=sonar-medium-online

# Optional - Project Info
PROJECT_NAME=My Project
PROJECT_VERSION=1.0.0

# Optional - Application Configuration
DEFAULT_SUBTASKS=3
DEFAULT_PRIORITY=medium
DEBUG=false
LOG_LEVEL=info
```

## Troubleshooting

### If `task-master init` doesn't respond:

Try running it with Node directly:

```bash
node node_modules/claude-task-master/scripts/init.js
```

Or clone the repository and run:

```bash
git clone https://github.com/eyaltoledano/claude-task-master.git
cd claude-task-master
node scripts/init.js
```
</file>

<file path="docs/claude-task-manager/examples.md">
# Example Cursor AI Interactions

Here are some common interactions with Cursor AI when using Task Master:

## Starting a new project

```
I've just initialized a new project with Claude Task Master. I have a PRD at scripts/prd.txt.
Can you help me parse it and set up the initial tasks?
```

## Working on tasks

```
What's the next task I should work on? Please consider dependencies and priorities.
```

## Implementing a specific task

```
I'd like to implement task 4. Can you help me understand what needs to be done and how to approach it?
```

## Managing subtasks

```
I need to regenerate the subtasks for task 3 with a different approach. Can you help me clear and regenerate them?
```

## Handling changes

```
We've decided to use MongoDB instead of PostgreSQL. Can you update all future tasks to reflect this change?
```

## Completing work

```
I've finished implementing the authentication system described in task 2. All tests are passing.
Please mark it as complete and tell me what I should work on next.
```

## Analyzing complexity

```
Can you analyze the complexity of our tasks to help me understand which ones need to be broken down further?
```

## Viewing complexity report

```
Can you show me the complexity report in a more readable format?
```
</file>

<file path="docs/claude-task-manager/fastmcp-core.txt">
import { Server } from "@modelcontextprotocol/sdk/server/index.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import {
  CallToolRequestSchema,
  ClientCapabilities,
  CompleteRequestSchema,
  CreateMessageRequestSchema,
  ErrorCode,
  GetPromptRequestSchema,
  ListPromptsRequestSchema,
  ListResourcesRequestSchema,
  ListResourceTemplatesRequestSchema,
  ListToolsRequestSchema,
  McpError,
  ReadResourceRequestSchema,
  Root,
  RootsListChangedNotificationSchema,
  ServerCapabilities,
  SetLevelRequestSchema,
} from "@modelcontextprotocol/sdk/types.js";
import { zodToJsonSchema } from "zod-to-json-schema";
import { z } from "zod";
import { setTimeout as delay } from "timers/promises";
import { readFile } from "fs/promises";
import { fileTypeFromBuffer } from "file-type";
import { StrictEventEmitter } from "strict-event-emitter-types";
import { EventEmitter } from "events";
import Fuse from "fuse.js";
import { startSSEServer } from "mcp-proxy";
import { Transport } from "@modelcontextprotocol/sdk/shared/transport.js";
import parseURITemplate from "uri-templates";
import http from "http";
import {
  fetch
} from "undici";

export type SSEServer = {
  close: () => Promise<void>;
};

type FastMCPEvents<T extends FastMCPSessionAuth> = {
  connect: (event: { session: FastMCPSession<T> }) => void;
  disconnect: (event: { session: FastMCPSession<T> }) => void;
};

type FastMCPSessionEvents = {
  rootsChanged: (event: { roots: Root[] }) => void;
  error: (event: { error: Error }) => void;
};

/**
 * Generates an image content object from a URL, file path, or buffer.
 */
export const imageContent = async (
  input: { url: string } | { path: string } | { buffer: Buffer },
): Promise<ImageContent> => {
  let rawData: Buffer;

  if ("url" in input) {
    const response = await fetch(input.url);

    if (!response.ok) {
      throw new Error(`Failed to fetch image from URL: ${response.statusText}`);
    }

    rawData = Buffer.from(await response.arrayBuffer());
  } else if ("path" in input) {
    rawData = await readFile(input.path);
  } else if ("buffer" in input) {
    rawData = input.buffer;
  } else {
    throw new Error(
      "Invalid input: Provide a valid 'url', 'path', or 'buffer'",
    );
  }

  const mimeType = await fileTypeFromBuffer(rawData);

  const base64Data = rawData.toString("base64");

  return {
    type: "image",
    data: base64Data,
    mimeType: mimeType?.mime ?? "image/png",
  } as const;
};

abstract class FastMCPError extends Error {
  public constructor(message?: string) {
    super(message);
    this.name = new.target.name;
  }
}

type Extra = unknown;

type Extras = Record<string, Extra>;

export class UnexpectedStateError extends FastMCPError {
  public extras?: Extras;

  public constructor(message: string, extras?: Extras) {
    super(message);
    this.name = new.target.name;
    this.extras = extras;
  }
}

/**
 * An error that is meant to be surfaced to the user.
 */
export class UserError extends UnexpectedStateError {}

type ToolParameters = z.ZodTypeAny;

type Literal = boolean | null | number | string | undefined;

type SerializableValue =
  | Literal
  | SerializableValue[]
  | { [key: string]: SerializableValue };

type Progress = {
  /**
   * The progress thus far. This should increase every time progress is made, even if the total is unknown.
   */
  progress: number;
  /**
   * Total number of items to process (or total progress required), if known.
   */
  total?: number;
};

type Context<T extends FastMCPSessionAuth> = {
  session: T | undefined;
  reportProgress: (progress: Progress) => Promise<void>;
  log: {
    debug: (message: string, data?: SerializableValue) => void;
    error: (message: string, data?: SerializableValue) => void;
    info: (message: string, data?: SerializableValue) => void;
    warn: (message: string, data?: SerializableValue) => void;
  };
};

type TextContent = {
  type: "text";
  text: string;
};

const TextContentZodSchema = z
  .object({
    type: z.literal("text"),
    /**
     * The text content of the message.
     */
    text: z.string(),
  })
  .strict() satisfies z.ZodType<TextContent>;

type ImageContent = {
  type: "image";
  data: string;
  mimeType: string;
};

const ImageContentZodSchema = z
  .object({
    type: z.literal("image"),
    /**
     * The base64-encoded image data.
     */
    data: z.string().base64(),
    /**
     * The MIME type of the image. Different providers may support different image types.
     */
    mimeType: z.string(),
  })
  .strict() satisfies z.ZodType<ImageContent>;

type Content = TextContent | ImageContent;

const ContentZodSchema = z.discriminatedUnion("type", [
  TextContentZodSchema,
  ImageContentZodSchema,
]) satisfies z.ZodType<Content>;

type ContentResult = {
  content: Content[];
  isError?: boolean;
};

const ContentResultZodSchema = z
  .object({
    content: ContentZodSchema.array(),
    isError: z.boolean().optional(),
  })
  .strict() satisfies z.ZodType<ContentResult>;

type Completion = {
  values: string[];
  total?: number;
  hasMore?: boolean;
};

/**
 * https://github.com/modelcontextprotocol/typescript-sdk/blob/3164da64d085ec4e022ae881329eee7b72f208d4/src/types.ts#L983-L1003
 */
const CompletionZodSchema = z.object({
  /**
   * An array of completion values. Must not exceed 100 items.
   */
  values: z.array(z.string()).max(100),
  /**
   * The total number of completion options available. This can exceed the number of values actually sent in the response.
   */
  total: z.optional(z.number().int()),
  /**
   * Indicates whether there are additional completion options beyond those provided in the current response, even if the exact total is unknown.
   */
  hasMore: z.optional(z.boolean()),
}) satisfies z.ZodType<Completion>;

type Tool<T extends FastMCPSessionAuth, Params extends ToolParameters = ToolParameters> = {
  name: string;
  description?: string;
  parameters?: Params;
  execute: (
    args: z.infer<Params>,
    context: Context<T>,
  ) => Promise<string | ContentResult | TextContent | ImageContent>;
};

type ResourceResult =
  | {
      text: string;
    }
  | {
      blob: string;
    };

type InputResourceTemplateArgument = Readonly<{
  name: string;
  description?: string;
  complete?: ArgumentValueCompleter;
}>;

type ResourceTemplateArgument = Readonly<{
  name: string;
  description?: string;
  complete?: ArgumentValueCompleter;
}>;

type ResourceTemplate<
  Arguments extends ResourceTemplateArgument[] = ResourceTemplateArgument[],
> = {
  uriTemplate: string;
  name: string;
  description?: string;
  mimeType?: string;
  arguments: Arguments;
  complete?: (name: string, value: string) => Promise<Completion>;
  load: (
    args: ResourceTemplateArgumentsToObject<Arguments>,
  ) => Promise<ResourceResult>;
};

type ResourceTemplateArgumentsToObject<T extends { name: string }[]> = {
  [K in T[number]["name"]]: string;
};

type InputResourceTemplate<
  Arguments extends ResourceTemplateArgument[] = ResourceTemplateArgument[],
> = {
  uriTemplate: string;
  name: string;
  description?: string;
  mimeType?: string;
  arguments: Arguments;
  load: (
    args: ResourceTemplateArgumentsToObject<Arguments>,
  ) => Promise<ResourceResult>;
};

type Resource = {
  uri: string;
  name: string;
  description?: string;
  mimeType?: string;
  load: () => Promise<ResourceResult | ResourceResult[]>;
  complete?: (name: string, value: string) => Promise<Completion>;
};

type ArgumentValueCompleter = (value: string) => Promise<Completion>;

type InputPromptArgument = Readonly<{
  name: string;
  description?: string;
  required?: boolean;
  complete?: ArgumentValueCompleter;
  enum?: string[];
}>;

type PromptArgumentsToObject<T extends { name: string; required?: boolean }[]> =
  {
    [K in T[number]["name"]]: Extract<
      T[number],
      { name: K }
    >["required"] extends true
      ? string
      : string | undefined;
  };

type InputPrompt<
  Arguments extends InputPromptArgument[] = InputPromptArgument[],
  Args = PromptArgumentsToObject<Arguments>,
> = {
  name: string;
  description?: string;
  arguments?: InputPromptArgument[];
  load: (args: Args) => Promise<string>;
};

type PromptArgument = Readonly<{
  name: string;
  description?: string;
  required?: boolean;
  complete?: ArgumentValueCompleter;
  enum?: string[];
}>;

type Prompt<
  Arguments extends PromptArgument[] = PromptArgument[],
  Args = PromptArgumentsToObject<Arguments>,
> = {
  arguments?: PromptArgument[];
  complete?: (name: string, value: string) => Promise<Completion>;
  description?: string;
  load: (args: Args) => Promise<string>;
  name: string;
};

type ServerOptions<T extends FastMCPSessionAuth> = {
  name: string;
  version: `${number}.${number}.${number}`;
  authenticate?: Authenticate<T>;
};

type LoggingLevel =
  | "debug"
  | "info"
  | "notice"
  | "warning"
  | "error"
  | "critical"
  | "alert"
  | "emergency";

const FastMCPSessionEventEmitterBase: {
  new (): StrictEventEmitter<EventEmitter, FastMCPSessionEvents>;
} = EventEmitter;

class FastMCPSessionEventEmitter extends FastMCPSessionEventEmitterBase {}

type SamplingResponse = {
  model: string;
  stopReason?: "endTurn" | "stopSequence" | "maxTokens" | string;
  role: "user" | "assistant";
  content: TextContent | ImageContent;
};

type FastMCPSessionAuth = Record<string, unknown> | undefined;

export class FastMCPSession<T extends FastMCPSessionAuth = FastMCPSessionAuth> extends FastMCPSessionEventEmitter {
  #capabilities: ServerCapabilities = {};
  #clientCapabilities?: ClientCapabilities;
  #loggingLevel: LoggingLevel = "info";
  #prompts: Prompt[] = [];
  #resources: Resource[] = [];
  #resourceTemplates: ResourceTemplate[] = [];
  #roots: Root[] = [];
  #server: Server;
  #auth: T | undefined;

  constructor({
    auth,
    name,
    version,
    tools,
    resources,
    resourcesTemplates,
    prompts,
  }: {
    auth?: T;
    name: string;
    version: string;
    tools: Tool<T>[];
    resources: Resource[];
    resourcesTemplates: InputResourceTemplate[];
    prompts: Prompt[];
  }) {
    super();

    this.#auth = auth;

    if (tools.length) {
      this.#capabilities.tools = {};
    }

    if (resources.length || resourcesTemplates.length) {
      this.#capabilities.resources = {};
    }

    if (prompts.length) {
      for (const prompt of prompts) {
        this.addPrompt(prompt);
      }

      this.#capabilities.prompts = {};
    }

    this.#capabilities.logging = {};

    this.#server = new Server(
      { name: name, version: version },
      { capabilities: this.#capabilities },
    );

    this.setupErrorHandling();
    this.setupLoggingHandlers();
    this.setupRootsHandlers();
    this.setupCompleteHandlers();

    if (tools.length) {
      this.setupToolHandlers(tools);
    }

    if (resources.length || resourcesTemplates.length) {
      for (const resource of resources) {
        this.addResource(resource);
      }

      this.setupResourceHandlers(resources);

      if (resourcesTemplates.length) {
        for (const resourceTemplate of resourcesTemplates) {
          this.addResourceTemplate(resourceTemplate);
        }

        this.setupResourceTemplateHandlers(resourcesTemplates);
      }
    }

    if (prompts.length) {
      this.setupPromptHandlers(prompts);
    }
  }

  private addResource(inputResource: Resource) {
    this.#resources.push(inputResource);
  }

  private addResourceTemplate(inputResourceTemplate: InputResourceTemplate) {
    const completers: Record<string, ArgumentValueCompleter> = {};

    for (const argument of inputResourceTemplate.arguments ?? []) {
      if (argument.complete) {
        completers[argument.name] = argument.complete;
      }
    }

    const resourceTemplate = {
      ...inputResourceTemplate,
      complete: async (name: string, value: string) => {
        if (completers[name]) {
          return await completers[name](value);
        }

        return {
          values: [],
        };
      },
    };

    this.#resourceTemplates.push(resourceTemplate);
  }

  private addPrompt(inputPrompt: InputPrompt) {
    const completers: Record<string, ArgumentValueCompleter> = {};
    const enums: Record<string, string[]> = {};

    for (const argument of inputPrompt.arguments ?? []) {
      if (argument.complete) {
        completers[argument.name] = argument.complete;
      }

      if (argument.enum) {
        enums[argument.name] = argument.enum;
      }
    }

    const prompt = {
      ...inputPrompt,
      complete: async (name: string, value: string) => {
        if (completers[name]) {
          return await completers[name](value);
        }

        if (enums[name]) {
          const fuse = new Fuse(enums[name], {
            keys: ["value"],
          });

          const result = fuse.search(value);

          return {
            values: result.map((item) => item.item),
            total: result.length,
          };
        }

        return {
          values: [],
        };
      },
    };

    this.#prompts.push(prompt);
  }

  public get clientCapabilities(): ClientCapabilities | null {
    return this.#clientCapabilities ?? null;
  }

  public get server(): Server {
    return this.#server;
  }

  #pingInterval: ReturnType<typeof setInterval> | null = null;

  public async requestSampling(
    message: z.infer<typeof CreateMessageRequestSchema>["params"],
  ): Promise<SamplingResponse> {
    return this.#server.createMessage(message);
  }

  public async connect(transport: Transport) {
    if (this.#server.transport) {
      throw new UnexpectedStateError("Server is already connected");
    }

    await this.#server.connect(transport);

    let attempt = 0;

    while (attempt++ < 10) {
      const capabilities = await this.#server.getClientCapabilities();

      if (capabilities) {
        this.#clientCapabilities = capabilities;

        break;
      }

      await delay(100);
    }

    if (!this.#clientCapabilities) {
      console.warn('[warning] FastMCP could not infer client capabilities')
    }

    if (this.#clientCapabilities?.roots?.listChanged) {
      try {
        const roots = await this.#server.listRoots();
        this.#roots = roots.roots;
      } catch(e) {
        console.error(`[error] FastMCP received error listing roots.\n\n${e instanceof Error ? e.stack : JSON.stringify(e)}`)
      }
    }

    this.#pingInterval = setInterval(async () => {
      try {
        await this.#server.ping();
      } catch (error) {
        this.emit("error", {
          error: error as Error,
        });
      }
    }, 1000);
  }

  public get roots(): Root[] {
    return this.#roots;
  }

  public async close() {
    if (this.#pingInterval) {
      clearInterval(this.#pingInterval);
    }

    try {
      await this.#server.close();
    } catch (error) {
      console.error("[MCP Error]", "could not close server", error);
    }
  }

  private setupErrorHandling() {
    this.#server.onerror = (error) => {
      console.error("[MCP Error]", error);
    };
  }

  public get loggingLevel(): LoggingLevel {
    return this.#loggingLevel;
  }

  private setupCompleteHandlers() {
    this.#server.setRequestHandler(CompleteRequestSchema, async (request) => {
      if (request.params.ref.type === "ref/prompt") {
        const prompt = this.#prompts.find(
          (prompt) => prompt.name === request.params.ref.name,
        );

        if (!prompt) {
          throw new UnexpectedStateError("Unknown prompt", {
            request,
          });
        }

        if (!prompt.complete) {
          throw new UnexpectedStateError("Prompt does not support completion", {
            request,
          });
        }

        const completion = CompletionZodSchema.parse(
          await prompt.complete(
            request.params.argument.name,
            request.params.argument.value,
          ),
        );

        return {
          completion,
        };
      }

      if (request.params.ref.type === "ref/resource") {
        const resource = this.#resourceTemplates.find(
          (resource) => resource.uriTemplate === request.params.ref.uri,
        );

        if (!resource) {
          throw new UnexpectedStateError("Unknown resource", {
            request,
          });
        }

        if (!("uriTemplate" in resource)) {
          throw new UnexpectedStateError("Unexpected resource");
        }

        if (!resource.complete) {
          throw new UnexpectedStateError(
            "Resource does not support completion",
            {
              request,
            },
          );
        }

        const completion = CompletionZodSchema.parse(
          await resource.complete(
            request.params.argument.name,
            request.params.argument.value,
          ),
        );

        return {
          completion,
        };
      }

      throw new UnexpectedStateError("Unexpected completion request", {
        request,
      });
    });
  }

  private setupRootsHandlers() {
    this.#server.setNotificationHandler(
      RootsListChangedNotificationSchema,
      () => {
        this.#server.listRoots().then((roots) => {
          this.#roots = roots.roots;

          this.emit("rootsChanged", {
            roots: roots.roots,
          });
        });
      },
    );
  }

  private setupLoggingHandlers() {
    this.#server.setRequestHandler(SetLevelRequestSchema, (request) => {
      this.#loggingLevel = request.params.level;

      return {};
    });
  }

  private setupToolHandlers(tools: Tool<T>[]) {
    this.#server.setRequestHandler(ListToolsRequestSchema, async () => {
      return {
        tools: tools.map((tool) => {
          return {
            name: tool.name,
            description: tool.description,
            inputSchema: tool.parameters
              ? zodToJsonSchema(tool.parameters)
              : undefined,
          };
        }),
      };
    });

    this.#server.setRequestHandler(CallToolRequestSchema, async (request) => {
      const tool = tools.find((tool) => tool.name === request.params.name);

      if (!tool) {
        throw new McpError(
          ErrorCode.MethodNotFound,
          `Unknown tool: ${request.params.name}`,
        );
      }

      let args: any = undefined;

      if (tool.parameters) {
        const parsed = tool.parameters.safeParse(request.params.arguments);

        if (!parsed.success) {
          throw new McpError(
            ErrorCode.InvalidParams,
            `Invalid ${request.params.name} parameters`,
          );
        }

        args = parsed.data;
      }

      const progressToken = request.params?._meta?.progressToken;

      let result: ContentResult;

      try {
        const reportProgress = async (progress: Progress) => {
          await this.#server.notification({
            method: "notifications/progress",
            params: {
              ...progress,
              progressToken,
            },
          });
        };

        const log = {
          debug: (message: string, context?: SerializableValue) => {
            this.#server.sendLoggingMessage({
              level: "debug",
              data: {
                message,
                context,
              },
            });
          },
          error: (message: string, context?: SerializableValue) => {
            this.#server.sendLoggingMessage({
              level: "error",
              data: {
                message,
                context,
              },
            });
          },
          info: (message: string, context?: SerializableValue) => {
            this.#server.sendLoggingMessage({
              level: "info",
              data: {
                message,
                context,
              },
            });
          },
          warn: (message: string, context?: SerializableValue) => {
            this.#server.sendLoggingMessage({
              level: "warning",
              data: {
                message,
                context,
              },
            });
          },
        };

        const maybeStringResult = await tool.execute(args, {
          reportProgress,
          log,
          session: this.#auth,
        });

        if (typeof maybeStringResult === "string") {
          result = ContentResultZodSchema.parse({
            content: [{ type: "text", text: maybeStringResult }],
          });
        } else if ("type" in maybeStringResult) {
          result = ContentResultZodSchema.parse({
            content: [maybeStringResult],
          });
        } else {
          result = ContentResultZodSchema.parse(maybeStringResult);
        }
      } catch (error) {
        if (error instanceof UserError) {
          return {
            content: [{ type: "text", text: error.message }],
            isError: true,
          };
        }

        return {
          content: [{ type: "text", text: `Error: ${error}` }],
          isError: true,
        };
      }

      return result;
    });
  }

  private setupResourceHandlers(resources: Resource[]) {
    this.#server.setRequestHandler(ListResourcesRequestSchema, async () => {
      return {
        resources: resources.map((resource) => {
          return {
            uri: resource.uri,
            name: resource.name,
            mimeType: resource.mimeType,
          };
        }),
      };
    });

    this.#server.setRequestHandler(
      ReadResourceRequestSchema,
      async (request) => {
        if ("uri" in request.params) {
          const resource = resources.find(
            (resource) =>
              "uri" in resource && resource.uri === request.params.uri,
          );

          if (!resource) {
            for (const resourceTemplate of this.#resourceTemplates) {
              const uriTemplate = parseURITemplate(
                resourceTemplate.uriTemplate,
              );

              const match = uriTemplate.fromUri(request.params.uri);

              if (!match) {
                continue;
              }

              const uri = uriTemplate.fill(match);

              const result = await resourceTemplate.load(match);

              return {
                contents: [
                  {
                    uri: uri,
                    mimeType: resourceTemplate.mimeType,
                    name: resourceTemplate.name,
                    ...result,
                  },
                ],
              };
            }

            throw new McpError(
              ErrorCode.MethodNotFound,
              `Unknown resource: ${request.params.uri}`,
            );
          }

          if (!("uri" in resource)) {
            throw new UnexpectedStateError("Resource does not support reading");
          }

          let maybeArrayResult: Awaited<ReturnType<Resource["load"]>>;

          try {
            maybeArrayResult = await resource.load();
          } catch (error) {
            throw new McpError(
              ErrorCode.InternalError,
              `Error reading resource: ${error}`,
              {
                uri: resource.uri,
              },
            );
          }

          if (Array.isArray(maybeArrayResult)) {
            return {
              contents: maybeArrayResult.map((result) => ({
                uri: resource.uri,
                mimeType: resource.mimeType,
                name: resource.name,
                ...result,
              })),
            };
          } else {
            return {
              contents: [
                {
                  uri: resource.uri,
                  mimeType: resource.mimeType,
                  name: resource.name,
                  ...maybeArrayResult,
                },
              ],
            };
          }
        }

        throw new UnexpectedStateError("Unknown resource request", {
          request,
        });
      },
    );
  }

  private setupResourceTemplateHandlers(resourceTemplates: ResourceTemplate[]) {
    this.#server.setRequestHandler(
      ListResourceTemplatesRequestSchema,
      async () => {
        return {
          resourceTemplates: resourceTemplates.map((resourceTemplate) => {
            return {
              name: resourceTemplate.name,
              uriTemplate: resourceTemplate.uriTemplate,
            };
          }),
        };
      },
    );
  }

  private setupPromptHandlers(prompts: Prompt[]) {
    this.#server.setRequestHandler(ListPromptsRequestSchema, async () => {
      return {
        prompts: prompts.map((prompt) => {
          return {
            name: prompt.name,
            description: prompt.description,
            arguments: prompt.arguments,
            complete: prompt.complete,
          };
        }),
      };
    });

    this.#server.setRequestHandler(GetPromptRequestSchema, async (request) => {
      const prompt = prompts.find(
        (prompt) => prompt.name === request.params.name,
      );

      if (!prompt) {
        throw new McpError(
          ErrorCode.MethodNotFound,
          `Unknown prompt: ${request.params.name}`,
        );
      }

      const args = request.params.arguments;

      for (const arg of prompt.arguments ?? []) {
        if (arg.required && !(args && arg.name in args)) {
          throw new McpError(
            ErrorCode.InvalidRequest,
            `Missing required argument: ${arg.name}`,
          );
        }
      }

      let result: Awaited<ReturnType<Prompt["load"]>>;

      try {
        result = await prompt.load(args as Record<string, string | undefined>);
      } catch (error) {
        throw new McpError(
          ErrorCode.InternalError,
          `Error loading prompt: ${error}`,
        );
      }

      return {
        description: prompt.description,
        messages: [
          {
            role: "user",
            content: { type: "text", text: result },
          },
        ],
      };
    });
  }
}

const FastMCPEventEmitterBase: {
  new (): StrictEventEmitter<EventEmitter, FastMCPEvents<FastMCPSessionAuth>>;
} = EventEmitter;

class FastMCPEventEmitter extends FastMCPEventEmitterBase {}

type Authenticate<T> = (request: http.IncomingMessage) => Promise<T>;

export class FastMCP<T extends Record<string, unknown> | undefined = undefined> extends FastMCPEventEmitter {
  #options: ServerOptions<T>;
  #prompts: InputPrompt[] = [];
  #resources: Resource[] = [];
  #resourcesTemplates: InputResourceTemplate[] = [];
  #sessions: FastMCPSession<T>[] = [];
  #sseServer: SSEServer | null = null;
  #tools: Tool<T>[] = [];
  #authenticate: Authenticate<T> | undefined;

  constructor(public options: ServerOptions<T>) {
    super();

    this.#options = options;
    this.#authenticate = options.authenticate;
  }

  public get sessions(): FastMCPSession<T>[] {
    return this.#sessions;
  }

  /**
   * Adds a tool to the server.
   */
  public addTool<Params extends ToolParameters>(tool: Tool<T, Params>) {
    this.#tools.push(tool as unknown as Tool<T>);
  }

  /**
   * Adds a resource to the server.
   */
  public addResource(resource: Resource) {
    this.#resources.push(resource);
  }

  /**
   * Adds a resource template to the server.
   */
  public addResourceTemplate<
    const Args extends InputResourceTemplateArgument[],
  >(resource: InputResourceTemplate<Args>) {
    this.#resourcesTemplates.push(resource);
  }

  /**
   * Adds a prompt to the server.
   */
  public addPrompt<const Args extends InputPromptArgument[]>(
    prompt: InputPrompt<Args>,
  ) {
    this.#prompts.push(prompt);
  }

  /**
   * Starts the server.
   */
  public async start(
    options:
      | { transportType: "stdio" }
      | {
          transportType: "sse";
          sse: { endpoint: `/${string}`; port: number };
        } = {
      transportType: "stdio",
    },
  ) {
    if (options.transportType === "stdio") {
      const transport = new StdioServerTransport();

      const session = new FastMCPSession<T>({
        name: this.#options.name,
        version: this.#options.version,
        tools: this.#tools,
        resources: this.#resources,
        resourcesTemplates: this.#resourcesTemplates,
        prompts: this.#prompts,
      });

      await session.connect(transport);

      this.#sessions.push(session);

      this.emit("connect", {
        session,
      });

    } else if (options.transportType === "sse") {
      this.#sseServer = await startSSEServer<FastMCPSession<T>>({
        endpoint: options.sse.endpoint as `/${string}`,
        port: options.sse.port,
        createServer: async (request) => {
          let auth: T | undefined;

          if (this.#authenticate) {
            auth = await this.#authenticate(request);
          }

          return new FastMCPSession<T>({
            auth,
            name: this.#options.name,
            version: this.#options.version,
            tools: this.#tools,
            resources: this.#resources,
            resourcesTemplates: this.#resourcesTemplates,
            prompts: this.#prompts,
          });
        },
        onClose: (session) => {
          this.emit("disconnect", {
            session,
          });
        },
        onConnect: async (session) => {
          this.#sessions.push(session);

          this.emit("connect", {
            session,
          });
        },
      });

      console.info(
        `server is running on SSE at http://localhost:${options.sse.port}${options.sse.endpoint}`,
      );
    } else {
      throw new Error("Invalid transport type");
    }
  }

  /**
   * Stops the server.
   */
  public async stop() {
    if (this.#sseServer) {
      this.#sseServer.close();
    }
  }
}

export type { Context };
export type { Tool, ToolParameters };
export type { Content, TextContent, ImageContent, ContentResult };
export type { Progress, SerializableValue };
export type { Resource, ResourceResult };
export type { ResourceTemplate, ResourceTemplateArgument };
export type { Prompt, PromptArgument };
export type { InputPrompt, InputPromptArgument };
export type { ServerOptions, LoggingLevel };
export type { FastMCPEvents, FastMCPSessionEvents };
</file>

<file path="docs/claude-task-manager/licensing.md">
# Licensing

Task Master is licensed under the MIT License with Commons Clause. This means you can:

## ‚úÖ Allowed:

- Use Task Master for any purpose (personal, commercial, academic)
- Modify the code
- Distribute copies
- Create and sell products built using Task Master

## ‚ùå Not Allowed:

- Sell Task Master itself
- Offer Task Master as a hosted service
- Create competing products based on Task Master

See the [LICENSE](../LICENSE) file for the complete license text.
</file>

<file path="docs/claude-task-manager/README.md">
# Task Master Documentation

Welcome to the Task Master documentation. Use the links below to navigate to the information you need:

## Getting Started

- [Configuration Guide](configuration.md) - Set up environment variables and customize Task Master
- [Tutorial](tutorial.md) - Step-by-step guide to getting started with Task Master

## Reference

- [Command Reference](command-reference.md) - Complete list of all available commands
- [Task Structure](task-structure.md) - Understanding the task format and features

## Examples & Licensing

- [Example Interactions](examples.md) - Common Cursor AI interaction examples
- [Licensing Information](licensing.md) - Detailed information about the license

## Need More Help?

If you can't find what you're looking for in these docs, please check the [main README](../README.md) or visit our [GitHub repository](https://github.com/eyaltoledano/claude-task-master).
</file>

<file path="docs/claude-task-manager/task-structure.md">
# Task Structure

Tasks in Task Master follow a specific format designed to provide comprehensive information for both humans and AI assistants.

## Task Fields in tasks.json

Tasks in tasks.json have the following structure:

- `id`: Unique identifier for the task (Example: `1`)
- `title`: Brief, descriptive title of the task (Example: `"Initialize Repo"`)
- `description`: Concise description of what the task involves (Example: `"Create a new repository, set up initial structure."`)
- `status`: Current state of the task (Example: `"pending"`, `"done"`, `"deferred"`)
- `dependencies`: IDs of tasks that must be completed before this task (Example: `[1, 2]`)
  - Dependencies are displayed with status indicators (‚úÖ for completed, ‚è±Ô∏è for pending)
  - This helps quickly identify which prerequisite tasks are blocking work
- `priority`: Importance level of the task (Example: `"high"`, `"medium"`, `"low"`)
- `details`: In-depth implementation instructions (Example: `"Use GitHub client ID/secret, handle callback, set session token."`)
- `testStrategy`: Verification approach (Example: `"Deploy and call endpoint to confirm 'Hello World' response."`)
- `subtasks`: List of smaller, more specific tasks that make up the main task (Example: `[{"id": 1, "title": "Configure OAuth", ...}]`)

## Task File Format

Individual task files follow this format:

```
# Task ID: <id>
# Title: <title>
# Status: <status>
# Dependencies: <comma-separated list of dependency IDs>
# Priority: <priority>
# Description: <brief description>
# Details:
<detailed implementation notes>

# Test Strategy:
<verification approach>
```

## Features in Detail

### Analyzing Task Complexity

The `analyze-complexity` command:

- Analyzes each task using AI to assess its complexity on a scale of 1-10
- Recommends optimal number of subtasks based on configured DEFAULT_SUBTASKS
- Generates tailored prompts for expanding each task
- Creates a comprehensive JSON report with ready-to-use commands
- Saves the report to scripts/task-complexity-report.json by default

The generated report contains:

- Complexity analysis for each task (scored 1-10)
- Recommended number of subtasks based on complexity
- AI-generated expansion prompts customized for each task
- Ready-to-run expansion commands directly within each task analysis

### Viewing Complexity Report

The `complexity-report` command:

- Displays a formatted, easy-to-read version of the complexity analysis report
- Shows tasks organized by complexity score (highest to lowest)
- Provides complexity distribution statistics (low, medium, high)
- Highlights tasks recommended for expansion based on threshold score
- Includes ready-to-use expansion commands for each complex task
- If no report exists, offers to generate one on the spot

### Smart Task Expansion

The `expand` command automatically checks for and uses the complexity report:

When a complexity report exists:

- Tasks are automatically expanded using the recommended subtask count and prompts
- When expanding all tasks, they're processed in order of complexity (highest first)
- Research-backed generation is preserved from the complexity analysis
- You can still override recommendations with explicit command-line options

Example workflow:

```bash
# Generate the complexity analysis report with research capabilities
task-master analyze-complexity --research

# Review the report in a readable format
task-master complexity-report

# Expand tasks using the optimized recommendations
task-master expand --id=8
# or expand all tasks
task-master expand --all
```

### Finding the Next Task

The `next` command:

- Identifies tasks that are pending/in-progress and have all dependencies satisfied
- Prioritizes tasks by priority level, dependency count, and task ID
- Displays comprehensive information about the selected task:
  - Basic task details (ID, title, priority, dependencies)
  - Implementation details
  - Subtasks (if they exist)
- Provides contextual suggested actions:
  - Command to mark the task as in-progress
  - Command to mark the task as done
  - Commands for working with subtasks

### Viewing Specific Task Details

The `show` command:

- Displays comprehensive details about a specific task or subtask
- Shows task status, priority, dependencies, and detailed implementation notes
- For parent tasks, displays all subtasks and their status
- For subtasks, shows parent task relationship
- Provides contextual action suggestions based on the task's state
- Works with both regular tasks and subtasks (using the format taskId.subtaskId)

## Best Practices for AI-Driven Development

1. **Start with a detailed PRD**: The more detailed your PRD, the better the generated tasks will be.

2. **Review generated tasks**: After parsing the PRD, review the tasks to ensure they make sense and have appropriate dependencies.

3. **Analyze task complexity**: Use the complexity analysis feature to identify which tasks should be broken down further.

4. **Follow the dependency chain**: Always respect task dependencies - the Cursor agent will help with this.

5. **Update as you go**: If your implementation diverges from the plan, use the update command to keep future tasks aligned with your current approach.

6. **Break down complex tasks**: Use the expand command to break down complex tasks into manageable subtasks.

7. **Regenerate task files**: After any updates to tasks.json, regenerate the task files to keep them in sync.

8. **Communicate context to the agent**: When asking the Cursor agent to help with a task, provide context about what you're trying to achieve.

9. **Validate dependencies**: Periodically run the validate-dependencies command to check for invalid or circular dependencies.
</file>

<file path="docs/claude-task-manager/tutorial.md">
# Task Master Tutorial

This tutorial will guide you through setting up and using Task Master for AI-driven development.

## Initial Setup

There are two ways to set up Task Master: using MCP (recommended) or via npm installation.

### Option 1: Using MCP (Recommended)

MCP (Model Control Protocol) provides the easiest way to get started with Task Master directly in your editor.

1. **Add the MCP config to your editor** (Cursor recommended, but it works with other text editors):

```json
{
	"mcpServers": {
		"taskmaster-ai": {
			"command": "npx",
			"args": ["-y", "--package=task-master-ai", "task-master-ai"],
			"env": {
				"ANTHROPIC_API_KEY": "YOUR_ANTHROPIC_API_KEY_HERE",
				"PERPLEXITY_API_KEY": "YOUR_PERPLEXITY_API_KEY_HERE",
				"MODEL": "claude-3-7-sonnet-20250219",
				"PERPLEXITY_MODEL": "sonar-pro",
				"MAX_TOKENS": 64000,
				"TEMPERATURE": 0.2,
				"DEFAULT_SUBTASKS": 5,
				"DEFAULT_PRIORITY": "medium"
			}
		}
	}
}
```

2. **Enable the MCP** in your editor settings

3. **Prompt the AI** to initialize Task Master:

```
Can you please initialize taskmaster-ai into my project?
```

The AI will:

- Create necessary project structure
- Set up initial configuration files
- Guide you through the rest of the process

4. Place your PRD document in the `scripts/` directory (e.g., `scripts/prd.txt`)

5. **Use natural language commands** to interact with Task Master:

```
Can you parse my PRD at scripts/prd.txt?
What's the next task I should work on?
Can you help me implement task 3?
```

### Option 2: Manual Installation

If you prefer to use the command line interface directly:

```bash
# Install globally
npm install -g task-master-ai

# OR install locally within your project
npm install task-master-ai
```

Initialize a new project:

```bash
# If installed globally
task-master init

# If installed locally
npx task-master-init
```

This will prompt you for project details and set up a new project with the necessary files and structure.

## Common Commands

After setting up Task Master, you can use these commands (either via AI prompts or CLI):

```bash
# Parse a PRD and generate tasks
task-master parse-prd your-prd.txt

# List all tasks
task-master list

# Show the next task to work on
task-master next

# Generate task files
task-master generate
```

## Setting up Cursor AI Integration

Task Master is designed to work seamlessly with [Cursor AI](https://www.cursor.so/), providing a structured workflow for AI-driven development.

### Using Cursor with MCP (Recommended)

If you've already set up Task Master with MCP in Cursor, the integration is automatic. You can simply use natural language to interact with Task Master:

```
What tasks are available to work on next?
Can you analyze the complexity of our tasks?
I'd like to implement task 4. What does it involve?
```

### Manual Cursor Setup

If you're not using MCP, you can still set up Cursor integration:

1. After initializing your project, open it in Cursor
2. The `.cursor/rules/dev_workflow.mdc` file is automatically loaded by Cursor, providing the AI with knowledge about the task management system
3. Place your PRD document in the `scripts/` directory (e.g., `scripts/prd.txt`)
4. Open Cursor's AI chat and switch to Agent mode

### Alternative MCP Setup in Cursor

You can also set up the MCP server in Cursor settings:

1. Go to Cursor settings
2. Navigate to the MCP section
3. Click on "Add New MCP Server"
4. Configure with the following details:
   - Name: "Task Master"
   - Type: "Command"
   - Command: "npx -y --package=task-master-ai task-master-ai"
5. Save the settings

Once configured, you can interact with Task Master's task management commands directly through Cursor's interface, providing a more integrated experience.

## Initial Task Generation

In Cursor's AI chat, instruct the agent to generate tasks from your PRD:

```
Please use the task-master parse-prd command to generate tasks from my PRD. The PRD is located at scripts/prd.txt.
```

The agent will execute:

```bash
task-master parse-prd scripts/prd.txt
```

This will:

- Parse your PRD document
- Generate a structured `tasks.json` file with tasks, dependencies, priorities, and test strategies
- The agent will understand this process due to the Cursor rules

### Generate Individual Task Files

Next, ask the agent to generate individual task files:

```
Please generate individual task files from tasks.json
```

The agent will execute:

```bash
task-master generate
```

This creates individual task files in the `tasks/` directory (e.g., `task_001.txt`, `task_002.txt`), making it easier to reference specific tasks.

## AI-Driven Development Workflow

The Cursor agent is pre-configured (via the rules file) to follow this workflow:

### 1. Task Discovery and Selection

Ask the agent to list available tasks:

```
What tasks are available to work on next?
```

The agent will:

- Run `task-master list` to see all tasks
- Run `task-master next` to determine the next task to work on
- Analyze dependencies to determine which tasks are ready to be worked on
- Prioritize tasks based on priority level and ID order
- Suggest the next task(s) to implement

### 2. Task Implementation

When implementing a task, the agent will:

- Reference the task's details section for implementation specifics
- Consider dependencies on previous tasks
- Follow the project's coding standards
- Create appropriate tests based on the task's testStrategy

You can ask:

```
Let's implement task 3. What does it involve?
```

### 3. Task Verification

Before marking a task as complete, verify it according to:

- The task's specified testStrategy
- Any automated tests in the codebase
- Manual verification if required

### 4. Task Completion

When a task is completed, tell the agent:

```
Task 3 is now complete. Please update its status.
```

The agent will execute:

```bash
task-master set-status --id=3 --status=done
```

### 5. Handling Implementation Drift

If during implementation, you discover that:

- The current approach differs significantly from what was planned
- Future tasks need to be modified due to current implementation choices
- New dependencies or requirements have emerged

Tell the agent:

```
We've changed our approach. We're now using Express instead of Fastify. Please update all future tasks to reflect this change.
```

The agent will execute:

```bash
task-master update --from=4 --prompt="Now we are using Express instead of Fastify."
```

This will rewrite or re-scope subsequent tasks in tasks.json while preserving completed work.

### 6. Breaking Down Complex Tasks

For complex tasks that need more granularity:

```
Task 5 seems complex. Can you break it down into subtasks?
```

The agent will execute:

```bash
task-master expand --id=5 --num=3
```

You can provide additional context:

```
Please break down task 5 with a focus on security considerations.
```

The agent will execute:

```bash
task-master expand --id=5 --prompt="Focus on security aspects"
```

You can also expand all pending tasks:

```
Please break down all pending tasks into subtasks.
```

The agent will execute:

```bash
task-master expand --all
```

For research-backed subtask generation using Perplexity AI:

```
Please break down task 5 using research-backed generation.
```

The agent will execute:

```bash
task-master expand --id=5 --research
```

## Example Cursor AI Interactions

### Starting a new project

```
I've just initialized a new project with Claude Task Master. I have a PRD at scripts/prd.txt.
Can you help me parse it and set up the initial tasks?
```

### Working on tasks

```
What's the next task I should work on? Please consider dependencies and priorities.
```

### Implementing a specific task

```
I'd like to implement task 4. Can you help me understand what needs to be done and how to approach it?
```

### Managing subtasks

```
I need to regenerate the subtasks for task 3 with a different approach. Can you help me clear and regenerate them?
```

### Handling changes

```
We've decided to use MongoDB instead of PostgreSQL. Can you update all future tasks to reflect this change?
```

### Completing work

```
I've finished implementing the authentication system described in task 2. All tests are passing.
Please mark it as complete and tell me what I should work on next.
```

### Analyzing complexity

```
Can you analyze the complexity of our tasks to help me understand which ones need to be broken down further?
```

### Viewing complexity report

```
Can you show me the complexity report in a more readable format?
```
</file>

<file path="docs/database/ERD.md">
You are a Postgres-SQL assistant.  
The target database lives in Supabase.  
Here is the complete schema and its foreign-key graph (‚á¢ means ‚Äúreferences ‚Ä¶‚Äù):

TABLE auth.users
    id               uuid PRIMARY KEY  -- Supabase auth UID
    ‚Ä¶                -- other columns omitted for brevity

TABLE profiles
    id               uuid PRIMARY KEY ‚á¢ auth.users.id
    name             text
    email            text
    image            text
    customer_id      text
    price_id         text
    has_access       bool
    created_at       timestamptz
    updated_at       timestamptz

TABLE practices
    id               uuid PRIMARY KEY
    type             text
    points           int4
    user_id          uuid             ‚á¢ auth.users.id
    created_at       timestamptz

TABLE instagram_page_checks
    id               uuid PRIMARY KEY
    page_username    text UNIQUE
    page_found       bool
    last_check_time  timestamptz
    created_at       timestamptz
    -- (owned by a user through other tables; see instagram_affected_users)

TABLE instagram_affected_users
    id               uuid PRIMARY KEY
    instagram_check_id uuid           ‚á¢ instagram_page_checks.id
    user_id          uuid             ‚á¢ auth.users.id
    points_reset     bool
    reset_time       timestamptz
    created_at       timestamptz

TABLE saigo_users
    id               uuid PRIMARY KEY
    email            text UNIQUE
    user_id          uuid             ‚á¢ auth.users.id
    created_at       timestamp
    username         text

TABLE leads
    id               uuid PRIMARY KEY
    email            text
    created_at       timestamptz

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
GENERAL GUIDELINES FOR ALL RESPONSES YOU PRODUCE
1. Write valid PostgreSQL 15 SQL unless the user requests something else.
2. When a query needs user-level scoping, join on `auth.users.id` through the
   appropriate foreign key (`profiles.id`, `practices.user_id`, etc.).
3. Use explicit `JOIN ‚Ä¶ ON ‚Ä¶` syntax (not comma joins).
4. Alias tables with short, meaningful names (e.g., `p`, `pr`, `iau`).
5. Never guess column names beyond those listed; ask the user if uncertain.
6. Never perform destructive operations (`DROP`, `TRUNCATE`, `DELETE`)
   unless explicitly instructed by the user.
7. If the user asks for changes to the schema itself, output a `BEGIN; ‚Ä¶ COMMIT;`
   migration block so it can be reviewed before execution.
8. If a question is not answerable from the schema, say so and ask for
   clarification rather than hallucinating.

You now have full context. Act accordingly.
</file>

<file path="docs/development/gitflow.mdc">
---
description: 
globs: 
alwaysApply: true
---
---
description: Gitflow Workflow Rules. These rules should be applied when performing git operations.
---
# Gitflow Workflow Rules

## Main Branches

### main (or master)
- Contains production-ready code
- Never commit directly to main
- Only accepts merges from:
  - hotfix/* branches
  - release/* branches
- Must be tagged with version number after each merge

### develop
- Main development branch
- Contains latest delivered development changes
- Source branch for feature branches
- Never commit directly to develop

## Supporting Branches

### feature/*
- Branch from: develop
- Merge back into: develop
- Naming convention: feature/[issue-id]-descriptive-name
- Example: feature/123-user-authentication
- Must be up-to-date with develop before creating PR
- Delete after merge

### release/*
- Branch from: develop
- Merge back into: 
  - main
  - develop
- Naming convention: release/vX.Y.Z
- Example: release/v1.2.0
- Only bug fixes, documentation, and release-oriented tasks
- No new features
- Delete after merge

### hotfix/*
- Branch from: main
- Merge back into:
  - main
  - develop
- Naming convention: hotfix/vX.Y.Z
- Example: hotfix/v1.2.1
- Only for urgent production fixes
- Delete after merge

## Commit Messages

- Format: `type(scope): description`
- Types:
  - feat: New feature
  - fix: Bug fix
  - docs: Documentation changes
  - style: Formatting, missing semicolons, etc.
  - refactor: Code refactoring
  - test: Adding tests
  - chore: Maintenance tasks

## Version Control

### Semantic Versioning
- MAJOR version for incompatible API changes
- MINOR version for backwards-compatible functionality
- PATCH version for backwards-compatible bug fixes

## Pull Request Rules

1. All changes must go through Pull Requests
2. Required approvals: minimum 1
3. CI checks must pass
4. No direct commits to protected branches (main, develop)
5. Branch must be up to date before merging
6. Delete branch after merge

## Branch Protection Rules

### main & develop
- Require pull request reviews
- Require status checks to pass
- Require branches to be up to date
- Include administrators in restrictions
- No force pushes
- No deletions

## Release Process

1. Create release branch from develop
2. Bump version numbers
3. Fix any release-specific issues
4. Create PR to main
5. After merge to main:
   - Tag release
   - Merge back to develop
   - Delete release branch

## Hotfix Process

1. Create hotfix branch from main
2. Fix the issue
3. Bump patch version
4. Create PR to main
5. After merge to main:
   - Tag release
   - Merge back to develop
   - Delete hotfix branch
</file>

<file path="docs/refactor/DEAD_CODE_TARGETS.md">
# Potential Dead Code Targets

This document lists components, functions, variables, styles, or other code segments identified as potential candidates for removal due to being unused.

**Verification is required before removal.** Use IDE features ('Find Usages'), static analysis tools (`ts-prune`), and manual code searching to confirm items listed here are truly unused before deleting.

## Potentially Obsolete/Unused Root-Level Files

*These files appear unusual at the root level in a standard Next.js App Router project and might be leftovers from previous structures. Verify they are not used by any scripts or configurations.* 

*   [ ] `page.tsx` - Root level `page.tsx` is typically in `app/`. Is this used?
*   [ ] `globals.css` - Global CSS is typically in `app/globals.css`. Is this file imported/used?
*   [ ] `names.db` - 0-byte file. Likely safe to remove?
*   [ ] `reasoning-effort` - 0-byte file. Likely safe to remove?
*   [ ] `blog.prompt.xml` - Purpose unclear. Used by a build script or generation process?
*   [ ] `gitflow.mdc` - Documentation. Is it still relevant/up-to-date?
*   [ ] `.aider.*` files/dirs - Specific to the 'Aider' tool. Still in use?
*   [ ] `session.aider`, `aider.session`, `bak.aider.model.settings.yml` - Specific to 'Aider'. Still needed?

## Potentially Unused Components (`components/`)

*Verify if these components are imported and used anywhere in the `app/` directory or other components.*

*   [ ] `components/Testimonials11.tsx` - Is this specific version used, or replaced by `Testimonials1.tsx`/`Testimonials3.tsx`?
*   [ ] `components/Testimonial1Small.tsx` - Is this specific variant used?
*   [ ] `components/IntroVideo.tsx` - Is this component currently embedded on any page?
*   [ ] `components/WhyOceanheartVideo.tsx` - Is this component currently embedded on any page?
*   [ ] `components/PracticeTypesRadarChart.tsx` - Verify usage (e.g., in Dashboard).
*   [ ] `components/PracticeTypesStackedBarChart.tsx` - Verify usage.
*   [ ] `components/CumulativePointsAreaChart.tsx` - Verify usage.
*   [ ] `components/PracticeSummaryPieChart.tsx` - Verify usage.
*   [ ] `components/LineGraph.tsx` - Verify usage.

## Functions/Utilities (`libs/` or elsewhere)

*Use `ts-prune` and IDE features to identify unused exported functions/variables.*

*   [ ] `path/to/file.ts` - `functionName` - Reason/Note (Example: Found via ts-prune)

## Variables

*Use IDE features and `ts-prune`.*

*   [ ] `path/to/file.ts` - `variableName` - Reason/Note

## CSS Classes (`globals.css` or component styles)

*Difficult to track automatically. Manual review or specialized tools might be needed.*

*   [ ] `.some-unused-class` - Reason/Note

## Other

*   [ ] `path/to/asset` - Check if images/fonts/etc. in `public/` are referenced.
</file>

<file path="docs/refactor/refactor.md">
# Oceanheart.ai Refactoring Log

This document records all changes made during the comprehensive refactoring of the Oceanheart.ai project.

## Table of Contents
- [Task 001: Create Archive Directory Structure](#task-001-create-archive-directory-structure)
- [Task 002: Archive Saigo Feature](#task-002-archive-saigo-feature)
- [Task 003: Archive HDI Feature](#task-003-archive-hdi-feature)
- [Task 004: Consolidate Authentication Components](#task-004-consolidate-authentication-components)
- [Task 005: Refactor Feature Display Components](#task-005-refactor-feature-display-components)
- [Task 006: Clean Up Directory Structure](#task-006-clean-up-directory-structure)
- [Task 007: Enhance Core Pages](#task-007-enhance-core-pages)
- [Task 008: Remove Unused and Commented Code](#task-008-remove-unused-and-commented-code)
- [Task 009: Implement Redirects for Removed Routes](#task-009-implement-redirects-for-removed-routes)
- [Task 010: Final Testing and Performance Optimization](#task-010-final-testing-and-performance-optimization)

## Task 001: Create Archive Directory Structure

### Subtask 1: Create base archive directory structure
- Created top-level `/archived` directory
- Added subdirectories for each deprecated feature: `/archived/saigo`, `/archived/hdi`, and `/archived/ab-testing`
- Added `.gitkeep` files to ensure directories are tracked by git

### Subtask 2: Create README documentation for archived directories
- Created main `/archived/README.md` explaining the purpose and structure of the archive
- Added feature-specific README files:
  - `/archived/saigo/README.md`: Documentation of the Saigo feature
  - `/archived/hdi/README.md`: Documentation of the HDI feature
  - `/archived/ab-testing/README.md`: Documentation of A/B testing implementations

### Subtask 3: Create archival tracking templates and process documentation
- Created `/archived/TEMPLATE.md` with standardized sections for documenting archived components
- Added `/archived/tracking.csv` to track all archived components
- Created `/archived/PROCESS.md` with detailed guidelines for the archival process

All files have been created with appropriate documentation to facilitate the archiving process. This establishes the foundation for maintaining knowledge about deprecated code while cleaning up the active codebase.

## Task 002: Archive Saigo Feature

### Subtask 1: Identify and map all Saigo-related code files
- Identified Saigo-related app pages in `/app/saigo/`
- Located API routes in `/app/api/saigo/` and related auth endpoints
- Found Saigo-specific components like `LeaderboardTable.tsx` and `LiveLeaderboard.tsx`
- Cataloged utility functions and libraries in `/app/saigo/lib/`
- Identified database migrations related to Saigo in `/migrations/`
- Listed related prompts and specs in `/prompts/` and `/specs/`
- Created a comprehensive mapping of files to be archived

### Subtask 2: Move files to archive directory and document database structure
- Created subdirectory structure in `/archived/saigo/` mirroring the original file organization
- Created detailed DATABASE.md documenting Saigo database tables and relationships
- Created FILE_MOVES.md with a complete mapping of files to be moved to the archive
- Updated config.ts to comment out Saigo-specific configuration
- Removed Saigo-related code from dashboard page

### Subtask 3: Update imports and verify application functionality
- Identified all files in the codebase that reference Saigo components
- Created a comprehensive plan for removing or updating these references
- Updated key files to remove Saigo dependencies while maintaining application functionality

## Task 003: Archive HDI Feature

### Subtask 1: Identify and map all HDI-related code
- Identified HDI-related app pages in `/app/hdi/`
- Found API routes in `/app/api/hdi/names/` and `/app/api/hdi/download/`
- Located HDI-specific components like `TerminalEmulation.tsx`, `AudioPlayer.tsx`, etc.
- Discovered utility functions and Python scripts in `/app/hdi/lib/`
- Identified database files and SQL scripts related to HDI
- Created a comprehensive mapping of files to be archived

### Subtask 2: Create archive structure and move HDI code
- Created appropriate subdirectory structure in `/archived/hdi/` mirroring the original organization
- Set up app, component, lib, and API directories for the HDI archive
- Created FILE_MOVES.md with a comprehensive mapping of files to be archived
- Added DATABASE.md documenting the SQLite database structure used by HDI

### Subtask 3: Document HDI functionality and verify archive integrity
- Created INTEGRATION_NOTES.md explaining how to verify application functionality after removing HDI
- Identified potential integration points to check after archiving
- Listed dependencies that could be removed after HDI archival
- Provided restoration instructions for future reference if needed
- Verified Header component doesn't contain direct references to HDI anymore

## Task 004: Consolidate Authentication Components

### Subtask 1: Audit and Consolidate Authentication Pages
- Analyzed existing authentication pages in `/app/signin/page.tsx`, `/signin/page.tsx`, and `/app/saigo/signin/page.tsx`
- Determined that `/app/signin/page.tsx` is the most complete implementation with reCAPTCHA integration
- Identified differences between implementations (redirect URLs, error handling, theme)
- Selected `/app/signin/page.tsx` as the primary implementation to keep

### Subtask 2: Refactor Authentication Button Components
- Created a new unified `AuthButton.tsx` component that combines the functionality of both `ButtonSignin.tsx` and `ButtonAccount.tsx` 
- Implemented a mode prop to toggle between "signin" and "account" functionality
- Added comprehensive TypeScript typing and documentation
- Updated the Dashboard page to use the new AuthButton component
- Updated the Header component import to use AuthButton instead of ButtonSignin
- Maintained backward compatibility with existing props

### Subtask 3: Consolidate Authentication API Routes
- Analyzed authentication-related API routes including callback and verification endpoints
- Observed duplicate functionality between standard and Saigo verification routes
- Created a new unified callback handler (`/app/api/auth/unified-callback/route.ts`) that supports both standard and legacy redirects
- Implemented a new consolidated reCAPTCHA verification endpoint (`/app/api/auth/verify-captcha/route.ts`) 
- Added improved error handling and logging to the authentication flow
- Ensured backward compatibility through optional type parameter in the unified callback

## Task 005: Create Custom Hooks for Repeated Logic

### Subtask 1: Create Form Handling Custom Hook
- Created a dedicated `/hooks` directory in the project root for all custom hooks
- Implemented `useForm.ts` hook with comprehensive form handling capabilities including:
  - Form state management for values, errors, and touched fields
  - Input change and blur event handlers
  - Form submission with validation
  - Form reset functionality
  - Field-specific setter methods for values, errors, and touched state
- Added extensive JSDoc documentation with usage examples
- Implemented support for various input types (text, checkbox, number)
- Added comprehensive unit tests in `useForm.test.ts` using React Testing Library
- Test coverage includes initialization, form updates, validation, submission, and reset functionality
</file>

<file path="docs/specs/00_todos.spec.md">
<Instructions>

Take the following markdown and parse the brain dump into a well structured list of high level objectives. Structure them in the order of most logical execution, breaking it down into more atomic development steps so as to prevent trying to make too many changes at once. Each step should only really make one functional change and be easily testable and iterated on if necessary.

Leave the Mid-Level Objective section and all below it as they are without any modifications. Your task is simply to create the breakdown. After this, we will use the breakdown to turn each step into a fully qualified markdown document in this format, describing each step in terms high, mid, and low level implementation details.

The app will be built with next.js v14, supabase and vercel. Emails are handled by integration with Resend, and the capcha code (an already implemented detail) is provided by the google cloud recaptcha v3 service.

</Instructions>


# Specification Template
> Ingest the information from this file, implement the Low-Level Tasks, and generate the code that will satisfy the High and Mid-Level Objectives.

## High-Level Objective

- [High level goal goes here - what do you want to build?]
- The new feature is a hidden competition dashboard where users who are directed to the page with a 'saigo' url ref (optional: encrypt a secret string into this number to see if anyone finds it as a little easter egg) have a conditional action on clicking the privacy policy link in the footer; this directs them to a new sign up page. This sign up page is a clone of the existing sign up page, but with a different daisy ui theme for dramatic effect. They can sign in via google auth or magic link; both protected by google recaptcha (this could earn reputation points with some of the more technically astute users, and it fits with the theme of classified knowledge - it would be possible to change the recaptcha iframe element with some custom HTML with the higher balance logo, "protected by HBI", just for added slick). On successful login they are directed to a new page where it is explained they are going to be assigned a username generated by AI to hide their real identity from other users. The aim is to encourage competition, but to take ego out of it. The leaderboard will rank descending in terms of total points, with the total score sum at the bottom allocated to "Alisone"; a symbol of unification, that it is the total group effort that is ultimately important, that when we succeed we help others to succeed, and in the end it is the team that determines the true victory. When they hit submit a call will be made to an LLM with a prompt explaining the nature of the event, and to generate a code username based on the theme. It should be no more than 3 conjoined words, in the style of futuristic hacker/mystic almost cyberpunk feeling. This LLM will have a tool that checks the username table in the database to prevent duplicates; it will continue to generate names until it gets a unique one (the odds of this are quite low if the username is of sufficient length and a mixture of lowercase, uppercase and numbers, so this might be unnecessary complexity - TBD). The new username is stored in a supabase table Username that links to the Email table. On successful allocation they are redirected to the competiton leaderboard homepage. At the top of that leaderboard is a button styled link "Use the Force, {{username}}"; on click this switches out the competition leaderboard component with a component responsible for creating a new Force entry; a form that lists out each practice they might have engaged in (e.g meditation, energy movements, the tones, the inbetween, sitting in the rain, contibuting to discord etc). Each activity will have a numeric input that selects the number of minutes attributed to that activity. On clicking Submit, the form makes a post call to a new route that is responsible for assigning these points to the Force table database. Before table update, it makes a pseudo random chance of scoring 0.2 or less (to represent a 2% chance) to each minute present. If successful, the minute is multiplied by 10x. This represents the chaotic nature of the universe, and how there is always a certain amount of asymmetrical reward to the activity we do. The pseudorandom chance modifier is itself influenced by the number of minutes; the greater the number of minutes. For each minute, there is a 2% chance that minute is multiplied by 10. This encourages people to practice more; there is a compounding return on efforts applied. After calculations are complete, the total score is submitted to the Force table that records username, date and force (as total points). After successful update, the force table component is switched back to competition leaderboard total. Each user can only submit their activity once each day, so the "Use the force, {{username}}" button link route should make a check for an entry on todays date for that user before addition. If they have already submitted, an error message is returned that updates the button state notification message that is positioned just below the button, to notify the user they have already submitted. This notification message fades away after a few seconds. Alternatively, the button could make a check on render and if the user has submitted that day, simply disable the button and change the text. This is better than removing the button entirely so as to prevent too many structural UI changes which makes for bad UX.

1. Check for url param to conditionally change the privacy policy link ref
2. Create the new sign up page
3. ...

## Mid-Level Objective

- [List of mid-level objectives - what are the steps to achieve the high-level objective?]
- [Each objective should be concrete and measurable]
- [But not too detailed - save details for implementation notes]

## Implementation Notes
- [Important technical details - what are the important technical details?]
- [Dependencies and requirements - what are the dependencies and requirements?]
- [Coding standards to follow - what are the coding standards to follow?]
- [Other technical guidance - what are other technical guidance?]

## Context

### Beginning context
- [List of files that exist at start - what files exist at start?]

### Ending context  
- [List of files that will exist at end - what files will exist at end?]

## Low-Level Tasks
> Ordered from start to finish

1. [First task - what is the first task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
2. [Second task - what is the second task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
3. [Third task - what is the third task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
</file>

<file path="docs/specs/01_feature_outline.spec.md">
# Specification Template
> Ingest the information from this file, implement the Low-Level Tasks, and generate the code that will satisfy the High and Mid-Level Objectives.

## High-Level Objective

1. Check for the `saigo` URL parameter to conditionally change the privacy policy link reference.
2. Create a new sign-up page with a different daisy UI theme.
3. Integrate Google reCAPTCHA v3 for the new sign-up page.
4. Add Google Auth and Magic Link sign-in options to the new sign-up page.
5. After successful sign-in, navigate to a page describing the AI-generated username approach.
6. Implement the LLM-based username generator, ensuring uniqueness in the Supabase Username table.
7. On successful username creation, store it in Supabase and redirect to the competition leaderboard.
8. Build the hidden competition leaderboard with ranking logic and the ‚ÄúAlisone‚Äù total sum.
9. Add the ‚ÄúUse the Force‚Äù button at the top of the leaderboard to open a new form.
10. Implement the form for recording daily activities (minutes) and hooking into the pseudo-random reward logic.
11. Update the Force table with total points, applying a 2% chance per minute to multiply by 10.
12. Enforce a once-per-day submission limit, returning an error or disabling the form accordingly.
13. Provide a visual or textual confirmation upon successful or failed daily submission.


## Mid-Level Objective

- [List of mid-level objectives - what are the steps to achieve the high-level objective?]
- [Each objective should be concrete and measurable]
- [But not too detailed - save details for implementation notes]

## Implementation Notes
- [Important technical details - what are the important technical details?]
- [Dependencies and requirements - what are the dependencies and requirements?]
- [Coding standards to follow - what are the coding standards to follow?]
- [Other technical guidance - what are other technical guidance?]

## Context

### Beginning context
- [List of files that exist at start - what files exist at start?]

### Ending context  
- [List of files that will exist at end - what files will exist at end?]

## Low-Level Tasks
> Ordered from start to finish

1. [First task - what is the first task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
2. [Second task - what is the second task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
3. [Third task - what is the third task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
</file>

<file path="docs/specs/01_secret_login.spec.md">
# Specification Template
> Ingest the information from this file, implement the Low-Level Tasks, and generate the code that will satisfy the High and Mid-Level Objectives.

## High-Level Objective

- [High level goal goes here - what do you want to build?]

## Mid-Level Objective

- [List of mid-level objectives - what are the steps to achieve the high-level objective?]
- [Each objective should be concrete and measurable]
- [But not too detailed - save details for implementation notes]

## Implementation Notes
- [Important technical details - what are the important technical details?]
- [Dependencies and requirements - what are the dependencies and requirements?]
- [Coding standards to follow - what are the coding standards to follow?]
- [Other technical guidance - what are other technical guidance?]

## Context

### Beginning context
- [List of files that exist at start - what files exist at start?]

### Ending context  
- [List of files that will exist at end - what files will exist at end?]

## Low-Level Tasks
> Ordered from start to finish

1. [First task - what is the first task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
2. [Second task - what is the second task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
3. [Third task - what is the third task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
</file>

<file path="docs/specs/02_saigo_login.spec.md">
# Saigo Sign‚ÄëIn Page Specification

> Ingest this information to build a new Saigo sign‚Äëin page that duplicates the existing authentication UI from `app/signin/page.tsx`, but uses a different daisy UI theme and is integrated with new Saigo API endpoints.

## High-Level Objective
- Create a new sign‚Äëin page for the Saigo flow that uses an alternate daisy UI theme, integrates Google reCAPTCHA v3, and offers both Google OAuth and Magic Link sign‚Äëin options.

## Mid‚ÄëLevel Objectives
- Duplicate the authentication process from the existing `app/signin/page.tsx`.
- Apply a distinct daisy UI theme so that the Saigo sign‚Äëin page is visually separate.
- Integrate Google reCAPTCHA v3 using existing environment variables.
- Present both Google Auth and Magic Link options.
- Replace existing API endpoint references with new ones that point to the Saigo authentication routes (e.g., use a new callback URL in the `ButtonSignin` component).

## Implementation Notes
- Create a new page (e.g., `app/saigo/signin/page.tsx`) by copying and adjusting the original sign‚Äëin page.
- Maintain `"use client"` at the top and replicate the recaptcha script loading logic.
- Create a new `ButtonSignin` component (or duplicate and adjust the existing one) that, on sign‚Äëin actions, calls the new API callback route (e.g., `/api/auth/saigo-callback`).
- Retain the same environment variables (e.g., `NEXT_PUBLIC_RECAPTCHA_SITE_KEY`) for reCAPTCHA integration.
- Ensure that the new sign‚Äëin page functions fully independently from the existing sign‚Äëin page.

## Context

### Beginning context
- The original sign‚Äëin page exists at `app/signin/page.tsx` and uses the standard UI and API routes.

### Ending context
- A new Saigo sign‚Äëin page exists (e.g., at `app/saigo/signin/page.tsx`) with an alternate daisy UI theme.
- It integrates reCAPTCHA v3 and provides both Google Auth and Magic Link sign‚Äëin options using the new API endpoints.

## Low‚ÄëLevel Tasks

### 1. Duplicate the Sign‚ÄëIn Page
```plaintext
What file do you want to CREATE or UPDATE? -> Create a new file at `app/saigo/signin/page.tsx`
What function do you want to CREATE or UPDATE? -> Duplicate the authentication logic from the original sign‚Äëin page.
What are details you want to add to drive the code changes? -> Copy the code from `app/signin/page.tsx` and update internal references (especially URLs) to point to Saigo endpoints.

### 2. Update UI theme

What file do you want to CREATE or UPDATE? -> `app/saigo/signin/page.tsx` (and any associated style or theme files)
What function do you want to CREATE or UPDATE? -> Update the rendering logic to apply a different daisy UI theme.
What are details you want to add to drive the code changes? -> Replace or augment daisyUI classes so that the page has a distinct look and feel.

### 3. Integrate Google reCAPTCHA v3

What file do you want to CREATE or UPDATE? -> `app/saigo/signin/page.tsx`
What function do you want to CREATE or UPDATE? -> Replicate the `useEffect` logic handling recaptcha script loading and token generation.
What are details you want to add to drive the code changes? -> Use the same recaptcha integration code and environment variables as in the original sign‚Äëin page.

### 4. Implement Sign‚ÄëIn Options with New API Endpoints

What file do you want to CREATE or UPDATE? -> Create or update the new `ButtonSignin` component (e.g., `components/saigo/ButtonSignin.tsx`)
What function do you want to CREATE or UPDATE? -> Update the `onClick` handlers for Google Auth and Magic Link sign‚Äëin to call the new auth callback route (`/api/auth/saigo-callback`) instead of the original.
What are details you want to add to drive the code changes? -> Modify redirection URLs and endpoint calls so that they reference the new Saigo authentication API endpoints.
</file>

<file path="docs/specs/03_saigo_auth_api.spec.md">
# Saigo Authentication API Specification

> This specification defines new API endpoints to support the Saigo authentication flow by duplicating existing authentication logic while maintaining separate directory paths and endpoint URLs.

## High-Level Objective
- Establish new API endpoints for Saigo authentication by duplicating current authentication API functionality while ensuring complete separation from the original endpoints.

## Mid-Level Objectives
- Create a new callback API route for Saigo authentication at `/api/auth/saigo-callback`.
- Create a new reCAPTCHA verification API route for Saigo at `/api/auth/saigo-verify-and-sign-in`.
- Use the same environment variables and underlying logic as the original endpoints to reduce implementation risk.

## Implementation Notes
- The new callback endpoint should mirror the behavior of `app/api/auth/callback/route.ts`:
  - Retrieve the authorization code from URL parameters.
  - Use the Supabase client to exchange the code for a session.
  - Redirect to the callback URL defined in config (ensure any Saigo-specific adaptations are applied).
- The new reCAPTCHA verification endpoint should mirror the logic of `app/api/auth/verify-and-signin/route.ts`:
  - Accept a reCAPTCHA token and validate it via Google‚Äôs reCAPTCHA API.
  - Return a success or error response accordingly.
- Deliberate code duplication is used to prevent early abstraction. Maintaining two parallel implementations minimizes risk‚Äîeach flow can evolve independently without unexpected side effects.
- Apply the new app router directory structure:
  - **New Callback Endpoint:** `app/api/auth/saigo-callback/route.ts`
  - **New reCAPTCHA Verification Endpoint:** `app/api/auth/saigo-verify-and-sign-in/route.ts`

## Context

### Beginning Context
- Original authentication API endpoints exist at:
  - `app/api/auth/callback/route.ts`
  - `app/api/auth/verify-and-signin/route.ts`

### Ending Context
- New API endpoints exist exclusively for the Saigo authentication flow:
  - **Saigo Callback:** `app/api/auth/saigo-callback/route.ts`
  - **Saigo reCAPTCHA Verification:** `app/api/auth/saigo-verify-and-sign-in/route.ts`

## Low-Level Tasks

### 1. Create Saigo Callback API Route
```plaintext
What file do you want to CREATE or UPDATE? -> Create new file at `app/api/auth/saigo-callback/route.ts`
What function do you want to CREATE or UPDATE? -> Duplicate and adapt the logic from `app/api/auth/callback/route.ts`.
What are details you want to add to drive the code changes? -> Update redirection URLs and any references to ensure the endpoint fits the Saigo flow.
```

### 2. Create Saigo reCAPTCHA Verification API Route
```plaintext
What file do you want to CREATE or UPDATE? -> Create new file at `app/api/auth/saigo-verify-and-sign-in/route.ts`
What function do you want to CREATE or UPDATE? -> Duplicate and adapt the logic from `app/api/auth/verify-and-signin/route.ts`.
What are details you want to add to drive the code changes? -> Ensure that the same environment variables (e.g., for reCAPTCHA) are used and the response is structured identically.
```

### 3. Validate the New API Endpoints
```plaintext
What file do you want to CREATE or UPDATE? -> No file update; this task involves testing.
What function do you want to CREATE or UPDATE? -> Verify endpoint behavior manually or with integration tests.
What are details you want to add to drive the code changes? -> Test that each new endpoint behaves in line with its original counterpart, ensuring seamless integration with the new Saigo sign-in page.
</file>

<file path="docs/specs/04_saigo_users_insert.spec.md">
# Saigo Users Table Insertion Specification
> Ingest the information from this file and implement the Low-Level Tasks to have the authentication route insert a new row into the saigo_users table once a user is created. The table uses an auto-increment primary key (id) and stores the user's email.

## High-Level Objective
- After a user signs in successfully via the new Saigo authentication callback route, use the Supabase JS API to insert a row into the saigo_users table with the user's email.

## Mid-Level Objectives
- Modify the new authentication callback route (app/api/aith/saigo-callback/route.ts) so that after exchanging the code for a session, the authenticated user's email is retrieved.
- Use the Supabase server client to insert a new row into the saigo_users table with the email. (The id column is auto-increment so it does not require manual insertion.)
- Handle any potential errors gracefully (e.g. log them without aborting the redirection flow).

## Implementation Notes
- Continue using the Supabase server client imported from "@/libs/supabase/server".
- After the line where the session is established (via supabase.auth.exchangeCodeForSession(code)), retrieve the authenticated user's email. This can be done by accessing the session object or by calling supabase.auth.getUser if necessary.
- Use the Supabase insertion method (e.g., supabase.from("saigo_users").insert([{ email: userEmail }])) to add the new row.
- Do not modify the redirect behavior; the insertion is a side-effect to be performed before the redirection.
- Ensure that the insertion runs only when a valid email is obtained. It is acceptable for this insertion to fail without blocking the callback redirection; log any errors for later investigation.
- Follow existing coding standards and error handling practices in the project.

## Context

### Beginning context
- Currently, app/api/aith/saigo-callback/route.ts exchanges an authorization code for a session and then redirects the user. There is no side-effect to record additional data in the database.

### Ending context  
- After a successful session exchange in app/api/aith/saigo-callback/route.ts, the code will also use the Supabase client to insert a new row into the saigo_users table with the authenticated user's email. This will record the user's existence in a dedicated Saigo table.

## Low-Level Tasks
> Ordered from start to finish

1. Retrieve the Authenticated User's Email  
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE? -> app/api/aith/saigo-callback/route.ts
What function do you want to CREATE or UPDATE? -> After the call to supabase.auth.exchangeCodeForSession(code)
What are details you want to add to drive the code changes? -> Retrieve the authenticated user's email from the returned session object or by calling supabase.auth.getUser().
```

2. Insert the User's Email into the saigo_users Table  
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE? -> app/api/aith/saigo-callback/route.ts
What function do you want to CREATE or UPDATE? -> Within the same scope after the user email is available
What are details you want to add to drive the code changes? -> Use supabase.from("saigo_users").insert([{ email: userEmail }]) to add the row. Ensure that this insertion uses the same Supabase instance and respects error handling protocols.
```

3. Log Errors and Continue Redirection  
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE? -> app/api/aith/saigo-callback/route.ts
What function do you want to CREATE or UPDATE? -> Surround the insertion code with a try/catch block
What are details you want to add to drive the code changes? -> If the insertion fails, log the error to the console (or an error logging service) but do not prevent the normal redirection flow.
```
</file>

<file path="docs/specs/05_saigo_username_page.spec.md">
# Saigo Username Page Specification
> Ingest the information from this file to build the new username page as part of the Saigo authentication flow. This page will describe and integrate the AI-generated username approach, and it must use its own layout within the saigo directory.

## High-Level Objective
- Build a new username page for the Saigo flow that provides users with an interface to generate their unique username via an LLM-based service. This page will also indicate success or error states without obstructing the overall user experience.

## Mid-Level Objectives
- Create a new page at app/saigo/username/page.tsx, using a dedicated layout (duplicated and adjusted from app/saigo/signin/layout.tsx).
- Display an explanation of the username generation process and present an interactive UI element (e.g., a "Generate Username" button) to initiate the LLM-based logic.
- Reserve space for displaying the generated username and any messages from the generation process.  
- Ensure integration with the Supabase Username table for storing the generated username in a unique manner (the actual insertion logic will be handled in later development).

## Implementation Notes
- Use the existing saigo layout file (e.g., duplicate app/saigo/signin/layout.tsx into a new file at app/saigo/username/layout.tsx) and update its canonicalUrlRelative property to "/saigo/username".
- The page should follow the same UI/UX patterns and daisy UI theme used in other Saigo pages.
- Prepare the page as a client component (include "use client" at the top) if interactive behavior is required.
- Do not implement the LLM integration or Supabase insertion yet; instead, provide clear placeholder components (for example, a placeholder button and result text section) with comments for future integration.
- Follow existing coding standards, error handling practices, and component naming conventions.

## Context

### Beginning Context
- The Saigo flow currently has a sign‚Äëin page with its own layout in app/saigo/signin/ (duplicated from the main sign‚Äëin flow). The username generation page does not yet exist.

### Ending Context
- A new Saigo username page will be available at app/saigo/username/page.tsx, accompanied by its layout at app/saigo/username/layout.tsx.
- The page will describe the AI-generated username approach and include interactive elements to trigger the username generation process.
- Placeholders for dynamic username generation and associated messages will be in place, allowing for a future step-by-step integration of the LLM service and username uniqueness checks.

## Low-Level Tasks
> Ordered step-by-step

1. Create the Layout for the Username Page  
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE? -> Create a new file at app/saigo/username/layout.tsx
What function do you want to CREATE or UPDATE? -> Duplicate the layout from app/saigo/signin/layout.tsx and update the canonicalUrlRelative to "/saigo/username" and the title to describe the username process.
What are details you want to add to drive the code changes? -> Ensure the layout mimics the existing structure for consistency and applies the saigo-specific SEO adjustments.
```

2. Create the Saigo Username Page  
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE? -> Create a new file at app/saigo/username/page.tsx
What function do you want to CREATE or UPDATE? -> Build the new page component that renders the username generation UI.
What are details you want to add to drive the code changes? -> Include a header that explains the username generation process and insert a button (e.g., "Generate Username") along with a placeholder area for the generated username result.
```

3. Add Placeholder and Future Integration Points  
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE? -> app/saigo/username/page.tsx
What function do you want to CREATE or UPDATE? -> In the page component's render logic.
What are details you want to add to drive the code changes? -> Insert comments and placeholder code where the integration with the LLM-based service and Supabase username insertion will occur later. Ensure appropriate error handling and result messaging is planned but not fully implemented at this stage.
```

4. Validate Layout and Navigation  
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE? -> No file update; this is a QA/test step.
What function do you want to CREATE or UPDATE? -> Verify that navigating to /saigo/username loads the new page with the appropriate layout and placeholder content.
What are details you want to add to drive the code changes? -> Manually test navigation from the sign‚Äëin flow to ensure the new username page is accessible and displays its placeholder elements.
```
</file>

<file path="docs/specs/07_new_landing_page.md">
Analysis of Current Site (oceanheart.ai):
Current Focus: The site has a very strong emphasis on "AI Safety," "Consciousness," "Artificial General Intelligence (AGI)," and the philosophical/existential questions surrounding advanced AI. It speaks to a future-oriented, perhaps more academic or deeply philosophical audience concerned with the long-term trajectory and potential risks/rewards of AGI.
Keywords & Tone: Words like "AGI," "Consciousness," "Existential Hope," "Civilizational Adequacy," "AI Safety" dominate. The tone is thoughtful, profound, and a little abstract.
Strengths:
It tackles big, important questions.
It shows a depth of thinking about AI's future.
The name "OceanHeart.ai" itself is evocative and hints at depth and humanity.
The call to "Engage with OceanHeart.ai" and the "Get Started" button are present.
Areas for Re-alignment (based on your coaching goals):
Too Abstract for Immediate Coaching Needs: While intellectually stimulating, it might not immediately connect with individuals feeling overwhelmed by current AI tools and the pace of change right now. They're likely looking for practical navigation and skill-building for the present, not just discussions about future AGI.
"AI Safety" Focus: This is a crucial field, but for coaching individuals struggling with today's AI, it might feel a bit distant from their immediate pain points (e.g., "How do I use ChatGPT for my job?" or "Which AI tools should I learn?").
Call to Action is Broad: "Get Started" or "Engage" could be clearer. What does "getting started" entail?
Missing the "You" (the coach): The site feels more like a think tank or research initiative than a personal coaching service. Your unique skills (psychological experience, good teacher) aren't front and center.
Re-imagining Your Site for Human-Centric AI Coaching:
Let's craft copy that bridges your deep thinking with the immediate needs of people navigating today's AI landscape. We want to retain the "heart" and "ocean" (depth, humanity) but make the immediate value proposition crystal clear.
Proposed Landing Page Copy:
(Headline Options - choose one or A/B test):
A) Feeling Lost in the AI Wave? Find Your Clarity & Confidence.
B) Navigating the AI Revolution, Together. Human-First Guidance in a Tech-Driven World.
C) Mastering AI Isn't Just About Code. It's About You. Let's Navigate the Change.
D) AI is Changing Everything. Overwhelmed? I'll Help You Adapt & Thrive.
(Sub-headline / Short Explainer - building on the chosen headline):
(If A): The world of AI is moving at lightning speed. New tools, new jargon, new anxieties. I'm here to help you cut through the noise, understand what matters for you, and build the skills to thrive in this new era ‚Äì with your humanity intact.
(If B): Technology is advancing faster than ever, and it's easy to feel left behind. As your AI coach, I bring a human-centered approach, blending psychological insight with practical guidance to help you confidently integrate AI into your life and work.
(If C): Beyond the hype and the headlines, there's a human being ‚Äì you ‚Äì trying to make sense of it all. With my background in [mention briefly, e.g., psychology and teaching], I'll help you understand AI from the inside out and find your unique path forward.
(If D): The constant stream of AI developments can be exhausting. If you're looking for a guide to help you understand, adapt, and leverage AI without losing your footing, you're in the right place.
(Short "What I Do" / "Why You Need This" Section - brief bullet points or short paragraph):
You're feeling the pressure: The online "mad scramble" to keep up with AI is real. Things change in months, and it's hard to know where to focus.
You want to harness AI, not be run over by it: You see the potential, but the tools and techniques are a blur. Prompt engineering, agents, APIs ‚Äì it's a lot.
You value the human element: You're not just looking for a technical fix. You want to understand how AI impacts us, how to use it ethically, and how to stay grounded.
This is where I come in: I'm your navigator and curator in the AI space. I help you:
Understand the rapidly changing AI landscape.
Adapt your skills and mindset.
Apply AI tools meaningfully and ethically.
Thrive with confidence in an AI-driven future.
(Clear Call to Action - Prominently Displayed):
Ready to Make Sense of AI? Let's Talk.
Book a Free 20-Minute Clarity Call
(Button: "Schedule Your Free Call Now")
(Small text below: "No obligation, just a chance to see how I can help you navigate the AI revolution. Choose a time that works for you, or send me a written message if you prefer.")
(Consider linking to a Calendly or similar scheduling tool for frictionless booking. Also provide an email or contact form for the "written message" option.)
Proposed "About Me / My Approach" Page Copy (More Detailed):
(Page Title Options):
Your Guide in the Age of AI: My Approach to Human-Centered Coaching
Why I Coach: Navigating AI with Heart & Understanding
About Me: Your Partner in Understanding and Adapting to AI
(Section 1: The Challenge We All Face - Acknowledge Their Reality)
"Let's be honest. The world of Artificial Intelligence is exhilarating, but it's also overwhelming. It feels like a relentless online scramble, with new tools, 'latest things,' and complex jargon appearing daily. Technology is changing at a pace that can make even the developments from three months ago seem outdated. From prompt engineering to the rise of autonomous agents and new protocols, it's a whirlwind.
Many people are using these advancements successfully, but it's easy to wonder: Will Big Tech swallow everything? And more importantly, where does this leave you? How do you keep up, make sense of it all, and find your place without sacrificing your human values or well-being? You might even be weighing up whether focusing on this is more valuable than just getting a coding job for stable income. These are the very real questions I'm here to help you explore."
(Section 2: My "Why" - Your Story & Philosophy)
"For years, I've been fascinated by [mention your journey with AI, consciousness, safety, etc., but frame it as leading to your current coaching focus]. My background in [mention your psychological experience, teaching skills, etc.] has given me a unique perspective. I see the incredible potential of AI, but I also see the critical need for a human-centered approach.
My journey has shown me that true mastery of AI isn't just about understanding the technology; it's about understanding ourselves in relation to it. It's about fostering psychological resilience, developing critical thinking, and learning how to integrate these powerful tools in ways that enhance our lives and work, rather than diminish them.
I believe the 'mad scramble' often misses the most important element: the human being at the center. That's why I've chosen to coach. I want to be your navigator through the hype, your curator of what truly matters, and your partner in building a confident, human-first relationship with AI."
(Section 3: What I Do & How I Help - The "What's In It For Them")
"As your AI coach, I don't just focus on the 'what' of the latest tools; I focus on the 'how' and 'why' for you. My coaching is built on:
Demystifying AI: I break down complex AI concepts, tools (like prompt engineering, agents, APIs), and trends into understandable language. No more feeling lost in the jargon.
Personalized Roadmaps: We'll explore how AI can specifically benefit your goals, your career, or your business. This isn't a one-size-fits-all approach.
Developing Core AI Literacies: Tools change, but principles don't. We'll work on skills like effective prompting, critical evaluation of AI outputs, and understanding AI ethics ‚Äì skills that endure.
Building Adaptive Mindsets: The pace of change requires psychological flexibility. I'll draw on my [psychological] experience to help you build resilience, manage overwhelm, and cultivate a growth mindset towards AI.
Focusing on Human-AI Collaboration: Learn how to make AI your co-pilot, augmenting your unique human skills rather than feeling threatened by automation.
Ethical & Responsible Integration: We'll discuss how to use AI thoughtfully and responsibly, aligning its power with your values.
I act as your thinking partner, your learning guide, and your strategic advisor in this rapidly evolving space. Think of me as the person who helps you filter the noise, connect the dots, and find your confident footing."
(Section 4: Who Is This For?)
"This coaching is for you if:
You're a professional, entrepreneur, creative, or lifelong learner feeling overwhelmed by the speed of AI development.
You want to understand AI beyond the surface level and learn how to leverage it effectively.
You're looking for guidance that values human insight and ethical considerations, not just technical specs.
You believe that your unique human skills (creativity, empathy, critical thinking) are your greatest assets and want to learn how AI can amplify them.
You're ready to move from confusion and anxiety to clarity and purposeful action in the age of AI."
(Section 5: Your Invitation - The Clear Call to Action)
"The AI revolution doesn't have to be something that happens to you. It can be something you actively and confidently participate in.
If you're ready to stop feeling overwhelmed and start navigating the AI landscape with clarity and a human-first approach, I invite you to a free, no-obligation 20-minute Clarity Call.
During this call, we can:
Discuss your specific challenges and goals related to AI.
Explore how my coaching approach can support you.
You can ask any questions you have.
There's no pressure. It's simply an opportunity for us to connect and see if we're a good fit to work together.
Want to talk it through?
(Button: "Schedule Your Free 20-Min Video Call") [Link to Calendly/scheduler]
Prefer to write?
(Button: "Send Me a Message to Arrange a Call or Chat") [Link to contact form or mailto: link]
I look forward to helping you find your power and purpose in this new era."
</file>

<file path="docs/specs/spec_template.md">
# Specification Template
> Ingest the information from this file, implement the Low-Level Tasks, and generate the code that will satisfy the High and Mid-Level Objectives.

## High-Level Objective

- [High level goal goes here - what do you want to build?]

## Mid-Level Objective

- [List of mid-level objectives - what are the steps to achieve the high-level objective?]
- [Each objective should be concrete and measurable]
- [But not too detailed - save details for implementation notes]

## Implementation Notes
- [Important technical details - what are the important technical details?]
- [Dependencies and requirements - what are the dependencies and requirements?]
- [Coding standards to follow - what are the coding standards to follow?]
- [Other technical guidance - what are other technical guidance?]

## Context

### Beginning context
- [List of files that exist at start - what files exist at start?]

### Ending context  
- [List of files that will exist at end - what files will exist at end?]

## Low-Level Tasks
> Ordered from start to finish

1. [First task - what is the first task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
2. [Second task - what is the second task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
```
3. [Third task - what is the third task?]
```aider
What prompt would you run to complete this task?
What file do you want to CREATE or UPDATE?
What function do you want to CREATE or UPDATE?
What are details you want to add to drive the code changes?
``
</file>

<file path="docs/a_b_testing_implementation_guide.md">
# A/B/C/D Testing Implementation Guide

This document provides technical guidance for implementing the four-variant testing for the OceanHeart.ai landing page using our internal A/B testing library.

## Implementation Approach

We will use the existing A/B testing hooks in `libs/abTesting.tsx` with modifications to support four variants (A/B/C/D) rather than the current two-variant setup.

## Implementation Steps

### 1. Modify the A/B Testing Library

The current A/B testing library in `libs/abTesting.tsx` supports only two variants (A/B). We need to modify it to support four variants:

```typescript
// Update the Variant type
type Variant = "A" | "B" | "C" | "D";

// Update the random variant assignment
const variant: Variant = (() => {
  const random = Math.random();
  if (random < 0.25) return "A";
  if (random < 0.5) return "B";
  if (random < 0.75) return "C";
  return "D";
})();
```

### 2. Component Implementation

Create a component for the landing page hero section that uses the A/B testing hook:

```tsx
import React from 'react';
import { useABTest } from '@/libs/abTesting';

// Define the content for each variant
const headlineVariants = {
  A: "Feeling Lost in the AI Wave? Find Your Clarity & Confidence.",
  B: "Navigating the AI Revolution, Together. Human-First Guidance in a Tech-Driven World.",
  C: "Mastering AI Isn't Just About Code. It's About You. Let's Navigate the Change.",
  D: "AI is Changing Everything. Overwhelmed? I'll Help You Adapt & Thrive."
};

const subheadlineVariants = {
  A: "The world of AI is moving at lightning speed. New tools, new jargon, new anxieties. I'm here to help you cut through the noise, understand what matters for you, and build the skills to thrive in this new era ‚Äì with your humanity intact.",
  B: "Technology is advancing faster than ever, and it's easy to feel left behind. As your AI coach, I bring a human-centered approach, blending psychological insight with practical guidance to help you confidently integrate AI into your life and work.",
  C: "Beyond the hype and the headlines, there's a human being ‚Äì you ‚Äì trying to make sense of it all. With my background in psychology and teaching, I'll help you understand AI from the inside out and find your unique path forward.",
  D: "The constant stream of AI developments can be exhausting. If you're looking for a guide to help you understand, adapt, and leverage AI without losing your footing, you're in the right place."
};

export default function LandingHero() {
  const { getVariant, recordEvent } = useABTest();
  const testId = "landing_headline_test";
  const variant = getVariant(testId);
  
  // Record view event when component mounts
  React.useEffect(() => {
    recordEvent(testId, "view");
  }, [recordEvent, testId]);
  
  const headline = headlineVariants[variant];
  const subheadline = subheadlineVariants[variant];
  
  const handleCTAClick = () => {
    // Record click event
    recordEvent(testId, "click");
  };
  
  return (
    <div className="landing-container">
      <h1 id="landing-headline">
        {headline}
      </h1>
      
      <p id="landing-subheadline">
        {subheadline}
      </p>
      
      {/* Common sections remain the same across variants */}
      <div id="value-proposition">
        {/* "What I Do" section - same across all variants */}
        <p>You're feeling the pressure: The online "mad scramble" to keep up with AI is real. Things change in months, and it's hard to know where to focus.</p>
        {/* Rest of the content... */}
      </div>
      
      <div id="cta-section">
        <h3>Ready to Make Sense of AI? Let's Talk.</h3>
        <p>Book a Free 20-Minute Clarity Call</p>
        <a 
          href={`/schedule?utm_campaign=landing_test&utm_content=variant_${variant.toLowerCase()}`} 
          id="schedule-call-button" 
          className="cta-button"
          onClick={handleCTAClick}
        >
          Schedule Your Free Call Now
        </a>
        <p className="small-text">
          No obligation, just a chance to see how I can help you navigate the AI revolution. Choose a time that works for you, or send me a written message if you prefer.
        </p>
      </div>
    </div>
  );
}
```

### 3. Setup Tracking API Endpoint

Ensure the API endpoint at `/api/ab-tracking` is properly set up to handle the tracking data. If not already implemented, create it:

```typescript
// app/api/ab-tracking/route.ts
import { NextResponse } from 'next/server';

export async function POST(request: Request) {
  try {
    const { testId, variant, event } = await request.json();
    
    // Log the event
    console.log(`A/B Test: ${testId}, Variant: ${variant}, Event: ${event}`);
    
    // Here you would typically store this data in a database
    // Example: await db.insert({ testId, variant, event, timestamp: new Date() }).into('ab_test_events');
    
    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('Error tracking A/B test event:', error);
    return NextResponse.json({ success: false, error: 'Failed to track event' }, { status: 500 });
  }
}
```

### 4. Wrap Your Application with the Provider

Ensure your application is wrapped with the A/B testing provider:

```tsx
// app/layout.tsx
import { ABTestProvider } from '@/libs/abTesting';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>
        <ABTestProvider>
          {children}
        </ABTestProvider>
      </body>
    </html>
  );
}
```

### 5. Track Conversions

For conversion tracking on the scheduling page:

```tsx
// app/schedule/page.tsx
'use client';

import { useABTest } from '@/libs/abTesting';
import { useSearchParams } from 'next/navigation';
import { useEffect } from 'react';

export default function SchedulePage() {
  const { recordEvent } = useABTest();
  const searchParams = useSearchParams();
  
  useEffect(() => {
    // Extract the test information from UTM parameters
    const campaign = searchParams.get('utm_campaign');
    const content = searchParams.get('utm_content');
    
    if (campaign === 'landing_test' && content?.startsWith('variant_')) {
      // Record the conversion
      recordEvent('landing_headline_test', 'conversion');
    }
  }, [recordEvent, searchParams]);
  
  // Rest of the scheduling page component...
}
```

### 6. UTM Parameter Integration

Continue using UTM parameters for external analytics and as a fallback:

1. Append UTM parameters to all CTA links as shown in the component example:
   - Variant A: `?utm_campaign=landing_test&utm_content=variant_a`
   - Variant B: `?utm_campaign=landing_test&utm_content=variant_b`
   - Variant C: `?utm_campaign=landing_test&utm_content=variant_c`
   - Variant D: `?utm_campaign=landing_test&utm_content=variant_d`

2. Ensure these parameters are passed through to the scheduling page

### 7. QA Checklist

Before launching:

- [ ] Modified A/B testing library supports four variants
- [ ] A/B test provider is wrapping the application
- [ ] Landing page correctly displays different content based on variant
- [ ] View, click, and conversion events are being tracked
- [ ] API endpoint is correctly receiving and storing event data
- [ ] UTM parameters are correctly appended to links
- [ ] All variants render correctly on desktop, tablet, and mobile
- [ ] All links work properly across all variants

### 8. Data Analysis

Since we're using our own A/B testing implementation, we need to set up data analysis:

1. Export the event data from your database regularly (e.g., weekly)
2. Create a spreadsheet or use a BI tool to calculate:
   - Views per variant
   - Click-through rate (clicks / views) per variant
   - Conversion rate (conversions / clicks) per variant
3. Run statistical significance tests to determine if differences between variants are meaningful

### 9. Test Duration and Sample Size

- Minimum test duration: 2 weeks
- Recommended minimum sample size: 100 conversions per variant
- Statistical significance threshold: 95% confidence level

### 10. Post-Test Actions

1. Declare a winner based on the highest conversion rate with statistical significance
2. Document learnings from the test
3. Implement the winning variant as the standard landing page
4. Plan follow-up tests based on insights gained
</file>

<file path="docs/about_me_page_content.md">
# About Me Page Content

This document contains the detailed content for the "About Me" page following the new human-centric AI coaching positioning.

## Page Title Options
- "Your Guide in the Age of AI: My Approach to Human-Centered Coaching"
- "Why I Coach: Navigating AI with Heart & Understanding"
- "About Me: Your Partner in Understanding and Adapting to AI"

## Section 1: The Challenge We All Face
"Let's be honest. The world of Artificial Intelligence is exhilarating, but it's also overwhelming. It feels like a relentless online scramble, with new tools, 'latest things,' and complex jargon appearing daily. Technology is changing at a pace that can make even the developments from three months ago seem outdated. From prompt engineering to the rise of autonomous agents and new protocols, it's a whirlwind.

Many people are using these advancements successfully, but it's easy to wonder: Will Big Tech swallow everything? And more importantly, where does this leave you? How do you keep up, make sense of it all, and find your place without sacrificing your human values or well-being? You might even be weighing up whether focusing on this is more valuable than just getting a coding job for stable income. These are the very real questions I'm here to help you explore."

## Section 2: My "Why"
"For years, I've been fascinated by [mention your journey with AI, consciousness, safety, etc., but frame it as leading to your current coaching focus]. My background in [mention your psychological experience, teaching skills, etc.] has given me a unique perspective. I see the incredible potential of AI, but I also see the critical need for a human-centered approach.

My journey has shown me that true mastery of AI isn't just about understanding the technology; it's about understanding ourselves in relation to it. It's about fostering psychological resilience, developing critical thinking, and learning how to integrate these powerful tools in ways that enhance our lives and work, rather than diminish them.

I believe the 'mad scramble' often misses the most important element: the human being at the center. That's why I've chosen to coach. I want to be your navigator through the hype, your curator of what truly matters, and your partner in building a confident, human-first relationship with AI."

## Section 3: What I Do & How I Help
"As your AI coach, I don't just focus on the 'what' of the latest tools; I focus on the 'how' and 'why' for you. My coaching is built on:

- **Demystifying AI**: I break down complex AI concepts, tools (like prompt engineering, agents, APIs), and trends into understandable language. No more feeling lost in the jargon.

- **Personalized Roadmaps**: We'll explore how AI can specifically benefit your goals, your career, or your business. This isn't a one-size-fits-all approach.

- **Developing Core AI Literacies**: Tools change, but principles don't. We'll work on skills like effective prompting, critical evaluation of AI outputs, and understanding AI ethics ‚Äì skills that endure.

- **Building Adaptive Mindsets**: The pace of change requires psychological flexibility. I'll draw on my [psychological] experience to help you build resilience, manage overwhelm, and cultivate a growth mindset towards AI.

- **Focusing on Human-AI Collaboration**: Learn how to make AI your co-pilot, augmenting your unique human skills rather than feeling threatened by automation.

- **Ethical & Responsible Integration**: We'll discuss how to use AI thoughtfully and responsibly, aligning its power with your values.

I act as your thinking partner, your learning guide, and your strategic advisor in this rapidly evolving space. Think of me as the person who helps you filter the noise, connect the dots, and find your confident footing."

## Section 4: Who Is This For?
"This coaching is for you if:

- You're a professional, entrepreneur, creative, or lifelong learner feeling overwhelmed by the speed of AI development.

- You want to understand AI beyond the surface level and learn how to leverage it effectively.

- You're looking for guidance that values human insight and ethical considerations, not just technical specs.

- You believe that your unique human skills (creativity, empathy, critical thinking) are your greatest assets and want to learn how AI can amplify them.

- You're ready to move from confusion and anxiety to clarity and purposeful action in the age of AI."

## Section 5: Your Invitation
"The AI revolution doesn't have to be something that happens to you. It can be something you actively and confidently participate in.

If you're ready to stop feeling overwhelmed and start navigating the AI landscape with clarity and a human-first approach, I invite you to a free, no-obligation 20-minute Clarity Call.

During this call, we can:
- Discuss your specific challenges and goals related to AI.
- Explore how my coaching approach can support you.
- You can ask any questions you have.

There's no pressure. It's simply an opportunity for us to connect and see if we're a good fit to work together.

Want to talk it through?
[Button: "Schedule Your Free 20-Min Video Call"] [Link to Calendly/scheduler]

Prefer to write?
[Button: "Send Me a Message to Arrange a Call or Chat"] [Link to contact form or mailto: link]

I look forward to helping you find your power and purpose in this new era."
</file>

<file path="docs/CODE_REVIEW.md">
# Oceanheart UI - Code Review & Refactoring Guide

This document provides a review of the Oceanheart UI codebase based on its structure and inferred patterns. Its purpose is to identify areas for potential refactoring, improvement, and general tidying up to enhance maintainability, scalability, and developer experience.

**Overall Impression:** The project utilizes a modern stack (Next.js App Router, TypeScript, Tailwind, Supabase) and appears well-structured at a high level, following Next.js conventions. The review below highlights specific areas for potential refinement.

## 1. Project Structure & Organization

*   **`components/` Directory:**
    *   **Observation:** Currently contains a large number (~40+) of components in a flat structure. Some component files are quite large (e.g., `LiveLeaderboard.tsx`, `Testimonials11.tsx`, `FeaturesListicle.tsx`).
    *   **Suggestion:** Consider organizing components into subdirectories based on feature (`saigo/`, `hdi/`, `auth/`), type (`ui/` for generic elements like buttons/modals, `charts/`, `forms/`), or page scope. This improves discoverability and reduces clutter.
    *   **Suggestion:** Break down larger components into smaller, more focused ones. This improves reusability, testability, and readability. Look for logical sections within large components that could be extracted.
*   **`app/` Directory (Routing):**
    *   **Observation:** Follows the App Router convention well. Directory names clearly map to routes.
    *   **Suggestion:** Ensure consistent use of Route Groups `(folder)` if needed for organization without affecting the URL path (e.g., grouping marketing pages).
    *   **Suggestion:** Review loading UI (`loading.tsx`) and error handling (`error.tsx`, `not-found.tsx`) within each route segment for a polished user experience.
*   **`libs/` Directory:**
    *   **Observation:** Contains a mix of service integrations (Stripe, Resend, Supabase, OpenAI, Instagram) and utilities (API helpers, SEO, chart colors).
    *   **Suggestion:** Ensure a clear separation of concerns within `libs`. Could potentially group third-party service integrations under a `services/` subdirectory within `libs`. Ensure Supabase client logic (`libs/supabase/`) is clearly separated for server/client/edge use cases as needed.
*   **`types/` Directory:**
    *   **Observation:** Presence suggests a place for shared TypeScript types.
    *   **Suggestion:** Consistently define and reuse shared types/interfaces here, especially for API responses, database models (consider auto-generating types from Supabase schema), and complex component props. Avoid defining the same types in multiple places.
*   **Root Directory:**
    *   **Observation:** Contains configuration files, middleware, and potentially scripts (`bin/`).
    *   **Suggestion:** Keep the root directory clean. Move any utility scripts into the `bin/` or a dedicated `scripts/` directory.

## 2. Component Design & React Practices

*   **Client vs. Server Components:**
    *   **Observation:** Use of `"use client"` indicates awareness of the distinction.
    *   **Suggestion:** Review component boundaries. Aim to keep components as Server Components by default unless they require interactivity, state, or browser APIs. Pass data down from Server Components to Client Components where necessary. Minimize the amount of code running solely on the client.
*   **Props & State Management:**
    *   **Observation:** React hooks (`useState`, `useRef`) are used for local state. SWR is mentioned for data fetching state.
    *   **Suggestion:** Ensure prop drilling isn't excessive. Use React Context or state management libraries (like Zustand, Jotai, or even SWR for global state) for state shared across distant components.
    *   **Suggestion:** Clearly define prop types using TypeScript interfaces or types. Avoid using `any`.
*   **Reusability:**
    *   **Suggestion:** Actively look for opportunities to create reusable UI primitives (e.g., a standardized `Card`, `Input`, `Button` component if DaisyUI doesn't cover all needs) in `components/ui/`. Extract repeated logic into custom hooks (`hooks/` directory could be created).
*   **Accessibility (a11y):**
    *   **Suggestion:** Perform a basic accessibility audit. Ensure semantic HTML is used, interactive elements are keyboard navigable, and appropriate ARIA attributes are applied where necessary (especially for custom components like modals, tabs, accordions).

## 3. API Routes (`app/api/`)

*   **Consistency & Error Handling:**
    *   **Suggestion:** Implement a consistent structure for API responses (e.g., `{ data: T | null, error: string | null }`).
    *   **Suggestion:** Standardize error handling. Use appropriate HTTP status codes. Log errors effectively (server-side).
*   **Security:**
    *   **Suggestion:** Double-check that all relevant API routes are protected (e.g., using Supabase Auth helpers or middleware). Validate user input rigorously. Ensure Supabase Row Level Security (RLS) is properly configured and enforced for database interactions.
    *   **Suggestion:** Ensure API keys and secrets are *never* exposed client-side and are only accessed server-side via environment variables.
*   **Efficiency:**
    *   **Suggestion:** Optimize database queries. Select only necessary columns. Consider caching strategies for frequently accessed, non-dynamic data.

## 4. Styling (Tailwind CSS & DaisyUI)

*   **Consistency:**
    *   **Suggestion:** Ensure consistent application of styling, spacing, and typography. Leverage `tailwind.config.js` theme settings (`colors`, `spacing`, `fontSize`, etc.) rather than arbitrary values where possible.
*   **Abstraction:**
    *   **Suggestion:** While utility-first is powerful, consider creating reusable component classes using `@apply` in `globals.css` or abstracting common patterns into React components if class strings become overly long or repetitive. Balance utility-first with component abstraction.
*   **Purging:**
    *   **Suggestion:** Ensure Tailwind's purging is correctly configured (`tailwind.config.js` `content` array) to keep production CSS bundle sizes minimal.

## 5. TypeScript Usage

*   **Type Safety:**
    *   **Suggestion:** Eliminate `any` types where possible. Use specific types, generics, or `unknown` with type guards. Leverage TypeScript's inference, but explicitly type function signatures, API responses, and complex objects.
*   **Shared Types:**
    *   **Suggestion:** Centralize shared types in the `types/` directory or potentially colocated with the feature they relate to. Consider tools like `supabase gen types typescript` to generate database types.

## 6. State Management & Data Fetching

*   **SWR Usage:**
    *   **Suggestion:** Leverage SWR features like caching, revalidation, mutations, and conditional fetching effectively. Ensure consistent patterns for data fetching across the application.
*   **Server Actions (Optional):**
    *   **Suggestion:** For form submissions or mutations initiated from Server Components, consider using Next.js Server Actions to simplify the process and potentially reduce client-side JavaScript.

## 7. Middleware (`middleware.ts`)

*   **Efficiency:**
    *   **Suggestion:** Keep middleware logic lean and fast, as it runs on every matched request. Offload heavy computations to API routes or Server Components.
*   **Specificity:**
    *   **Suggestion:** Use the `matcher` config in `middleware.ts` to ensure it only runs on necessary paths, avoiding overhead on static assets or unrelated routes.

## 8. Environment Variables & Configuration

*   **Security:**
    *   **Suggestion:** Ensure `.env.local` is in `.gitignore`. Differentiate between public (`NEXT_PUBLIC_`) and private environment variables. Validate critical environment variables on application startup.
*   **Centralized Config (`config.ts`):**
    *   **Observation:** Good practice to centralize configuration.
    *   **Suggestion:** Ensure this file doesn't inadvertently expose sensitive information if imported into client components. Use environment variables appropriately within it.

## 9. Potential Cleanup Tasks

*   **Dead Code Removal:** Identify and remove unused components, functions, variables, or CSS classes. See [Potential Dead Code Targets](./DEAD_CODE_TARGETS.md) for specific candidates.
*   **Dependency Review:** Check `package.json` for unused or outdated dependencies.
*   **Linting & Formatting:** Ensure ESLint and Prettier are configured and run consistently to maintain code style.
*   **TODOs/FIXMEs:** Search the codebase for `// TODO:` or `// FIXME:` comments and address them or create issues.

This review provides a starting point. A deeper dive into specific files would yield more granular feedback. Prioritize changes based on their impact on maintainability, performance, and user experience.
</file>

<file path="docs/ENV.sample-sso">
# SSO scaffold environment sample

# Supabase public keys (shared across apps)
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=

# Server-side service role (server-only)
SUPABASE_SERVICE_ROLE_KEY=

# Cookie config
COOKIE_DOMAIN=.oceanheart.ai

# ReturnTo allowlist (comma-separated hosts for non-oceanheart domains)
RETURNTO_ALLOW_HOSTS=

# Accounts base URL
NEXT_PUBLIC_SITE_URL=https://accounts.oceanheart.ai
</file>

<file path="docs/landing_page_prd.md">
# OceanHeart.ai Landing Page Redesign PRD

## Project Overview
This document outlines the requirements for redesigning the OceanHeart.ai landing page and implementing A/B testing for four headline variations. The current site focuses heavily on AI Safety, Consciousness, and AGI with a philosophical tone. The redesign aims to reposition the site towards human-centric AI coaching.

## Goals & Objectives
- Shift positioning from abstract AI concepts to practical AI coaching
- Test four headline options to determine the most effective messaging
- Create a more direct and clear value proposition for visitors
- Improve conversion rate for the "Schedule a Call" CTA

## Requirements

### 1. A/B Testing Implementation
- Implement A/B/C/D testing for 4 different headline/subheadline combinations
- Maintain the same "What I Do" section across all variants
- Use the same CTA across all variants, but track which variant led to the conversion
- Distribute traffic equally among the 4 variants (25% each)
- Track click-through rates and conversion rates for each variant
- Testing duration: 2 weeks or until statistical significance is reached

### 2. Content Specification

#### Landing Page Variants

**Variant A:**
- Headline: "Feeling Lost in the AI Wave? Find Your Clarity & Confidence."
- Subheadline: "The world of AI is moving at lightning speed. New tools, new jargon, new anxieties. I'm here to help you cut through the noise, understand what matters for you, and build the skills to thrive in this new era ‚Äì with your humanity intact."

**Variant B:**
- Headline: "Navigating the AI Revolution, Together. Human-First Guidance in a Tech-Driven World."
- Subheadline: "Technology is advancing faster than ever, and it's easy to feel left behind. As your AI coach, I bring a human-centered approach, blending psychological insight with practical guidance to help you confidently integrate AI into your life and work."

**Variant C:**
- Headline: "Mastering AI Isn't Just About Code. It's About You. Let's Navigate the Change."
- Subheadline: "Beyond the hype and the headlines, there's a human being ‚Äì you ‚Äì trying to make sense of it all. With my background in [mention briefly, e.g., psychology and teaching], I'll help you understand AI from the inside out and find your unique path forward."

**Variant D:**
- Headline: "AI is Changing Everything. Overwhelmed? I'll Help You Adapt & Thrive."
- Subheadline: "The constant stream of AI developments can be exhausting. If you're looking for a guide to help you understand, adapt, and leverage AI without losing your footing, you're in the right place."

#### Common Elements (All Variants)

**What I Do / Why You Need This Section:**
```
You're feeling the pressure: The online "mad scramble" to keep up with AI is real. Things change in months, and it's hard to know where to focus.

You want to harness AI, not be run over by it: You see the potential, but the tools and techniques are a blur. Prompt engineering, agents, APIs ‚Äì it's a lot.

You value the human element: You're not just looking for a technical fix. You want to understand how AI impacts us, how to use it ethically, and how to stay grounded.

This is where I come in: I'm your navigator and curator in the AI space. I help you:
- Understand the rapidly changing AI landscape.
- Adapt your skills and mindset.
- Apply AI tools meaningfully and ethically.
- Thrive with confidence in an AI-driven future.
```

**Call to Action:**
```
Ready to Make Sense of AI? Let's Talk.
Book a Free 20-Minute Clarity Call
[Button: "Schedule Your Free Call Now"]

(Small text: "No obligation, just a chance to see how I can help you navigate the AI revolution. Choose a time that works for you, or send me a written message if you prefer.")
```

### 3. About Me Page Update

**Page Title Options:**
- "Your Guide in the Age of AI: My Approach to Human-Centered Coaching"
- "Why I Coach: Navigating AI with Heart & Understanding"
- "About Me: Your Partner in Understanding and Adapting to AI"

**Section 1: The Challenge We All Face**
A paragraph acknowledging the overwhelming pace of AI development and the concerns people have.

**Section 2: My "Why"**
Personal story and philosophy, focusing on human-centered approach to AI.

**Section 3: What I Do & How I Help**
Detailed breakdown of coaching services and benefits.

**Section 4: Who Is This For?**
Description of ideal clients and their needs.

**Section 5: Your Invitation (CTA)**
Clear call to action to schedule a call.

## Technical Requirements
- Implement A/B testing using a reliable testing platform (e.g., Optimizely, Google Optimize)
- Ensure mobile responsiveness for all variants
- Set up tracking for conversion metrics
- Ensure consistent loading time across all variants
- Implement analytics to track user behavior

## Success Metrics
- Primary: Conversion rate (CTA click-through rate)
- Secondary: Time on page, bounce rate
- Winner determination: Variant with highest statistically significant conversion rate

## Timeline
- Design approval: [Date]
- Development: [Date]
- QA Testing: [Date]
- Launch: [Date]
- A/B Test Duration: [Date Range]
- Analysis & Implementation of Winner: [Date]
</file>

<file path="docs/next-upgrade-breaking-changes.md">
# Next.js 15 Breaking Changes Analysis

This document identifies the breaking changes in Next.js 15 that will impact our codebase and outlines the specific modifications needed.

## 1. Async Request APIs

### Files that Need Updates:

#### Supabase Integration:
- **`libs/supabase/server.ts`**
  ```typescript
  // Current implementation:
  const cookieStore = cookies();
  
  // Needs to be updated to:
  const cookieStore = await cookies();
  ```

This change affects our Supabase authentication mechanism, which relies on cookies. Since our Supabase client initialization happens in server components, we need to update this pattern throughout the application.

### Implementation Plan:
1. Update the `createClient` and `createServiceClient` functions in `libs/supabase/server.ts`
2. Test authentication flows thoroughly after the change
3. Verify that server components can still access Supabase correctly

## 2. NextRequest IP Property Removal

### Files that Need Updates:

#### A/B Testing Tracking:
- **`app/api/ab-tracking/route.ts`**
  ```typescript
  // Current implementation:
  ip_hash: hashIp(request.ip || ""),
  
  // Needs to be updated to use the Vercel functions (preferred):
  import { ipAddress } from '@vercel/functions';
  ip_hash: hashIp(ipAddress(request) || ""),
  
  // Or update to a hosting-agnostic alternative:
  ip_hash: hashIp(request.headers.get('x-forwarded-for')?.split(',')[0] || ""),
  ```

### Implementation Plan:
1. Add the Vercel functions package if deployed on Vercel:
   ```bash
   bun add @vercel/functions
   ```
2. Update all API routes that use `request.ip`
3. Test the updated routes to ensure IP-related functionality still works correctly

## 3. Caching Changes

No explicit usage of caching-specific APIs was found in our code, but we should review:

1. Any data fetching that relies on implicit caching
2. API routes that may have been implicitly cached
3. Client-side navigation that may behave differently with the new caching defaults

### Implementation Plan:
1. Identify components that may be affected by cache changes
2. Add explicit cache options to fetch calls:
   ```typescript
   // For data that should be cached:
   const data = await fetch(url, { cache: 'force-cache' });
   
   // For data that should be refreshed:
   const data = await fetch(url, { cache: 'no-store' });
   ```
3. Test data fetching patterns across the application

## 4. React 19 Compatibility

### Dependencies That Need Review:
- `@supabase/ssr` (v0.4.1)
- `framer-motion` (v12.4.10)
- `react-data-table-component` (v7.6.2)
- `next-auth` (v4.24.11)
- `react-hot-toast` (v2.5.2)
- `recharts` (v2.15.1)

### Implementation Plan:
1. Check each dependency's GitHub/npm for React 19 compatibility
2. Identify alternatives for any incompatible dependencies
3. Update dependencies that have React 19 support

## 5. ESLint Configuration

Our current ESLint configuration uses the old format, which may need updating:

### Implementation Plan:
1. Review current `.eslintrc` file
2. Update to ESLint 9 compatibility if needed
3. Consider adopting the new flat configuration format

## 6. React Hooks Updates

We don't currently use `useFormState`, so no updates are needed for the transition to `useActionState`.

## Summary of Changes Required

| Component | Issue | Required Change | Priority |
|-----------|-------|----------------|----------|
| Supabase Integration | Async cookies() API | Update to await cookies() | High |
| A/B Testing | IP property removal | Use @vercel/functions or headers | Medium |
| Data Fetching | Cache defaults | Add explicit cache options | Medium |
| Dependencies | React 19 compat | Update or find alternatives | High |
| ESLint | Configuration | Update to flat config | Low |

## Testing Strategy

After making these changes, we should prioritize testing:

1. **Authentication Flows**:
   - Sign in/sign up
   - Session persistence
   - Protected routes

2. **API Routes**:
   - A/B testing tracking
   - Stripe integrations
   - Webhook handlers

3. **Data Fetching**:
   - Server components
   - Client components
   - Loading states

4. **UI Components**:
   - React 19 compatibility issues
   - Animations and transitions
</file>

<file path="docs/next-upgrade-checklist.md">
# Next.js 15 Upgrade Checklist

This is a comprehensive checklist for upgrading Oceanheart UI from Next.js 14.2.25 to Next.js 15.

## Pre-Upgrade Tasks

- [ ] Create a new git branch `feature/nextjs-upgrade`
- [ ] Backup the current production build
- [ ] Document current dependency versions
- [ ] Review current ESLint configuration
- [ ] Create snapshot of current performance metrics

## Core Upgrade Tasks

- [ ] Update Next.js, React, and React DOM:
  ```bash
  bun add next@latest react@latest react-dom@latest
  ```

- [ ] Update TypeScript types:
  ```bash
  bun add -D @types/react@latest @types/react-dom@latest
  ```

- [ ] Run the Next.js codemod to automate compatibility changes:
  ```bash
  npx @next/codemod@latest upgrade
  ```

- [ ] Fix any errors that appear in the console after running the upgrade

## Breaking Changes Fixes

### Async Request APIs

- [ ] Update `libs/supabase/server.ts`:
  ```typescript
  // Change from:
  const cookieStore = cookies();
  // To:
  const cookieStore = await cookies();
  ```

- [ ] Check other locations that may use cookies, headers, or searchParams APIs

### IP Property Removal

- [ ] Update `app/api/ab-tracking/route.ts`:
  ```typescript
  // Change from:
  ip_hash: hashIp(request.ip || ""),
  // To (if using Vercel):
  import { ipAddress } from '@vercel/functions';
  ip_hash: hashIp(ipAddress(request) || ""),
  // Or (platform agnostic):
  ip_hash: hashIp(request.headers.get('x-forwarded-for')?.split(',')[0] || ""),
  ```

- [ ] Check other API routes that may use the `ip` property

### Caching Changes

- [ ] Review data fetching across the application
- [ ] Add explicit cache options where needed:
  ```typescript
  // For data that should be cached:
  const data = await fetch(url, { cache: 'force-cache' });
  ```

## Dependencies Update

### Required Updates

- [ ] Update ESLint configuration:
  ```bash
  bun add -D eslint-config-next@latest
  ```

### Potential Issues

- [ ] Install framer-motion with force flag if needed:
  ```bash
  bun add framer-motion --force
  ```

- [ ] Check and update other dependencies with potential React 19 compatibility issues:
  - [ ] react-data-table-component
  - [ ] recharts
  - [ ] react-hot-toast

## Testing Tasks

- [ ] Verify development server starts correctly:
  ```bash
  bun dev
  ```

- [ ] Run linting:
  ```bash
  bun lint
  ```

- [ ] Check for console errors and warnings

- [ ] Test critical functionality:
  - [ ] Authentication flows
  - [ ] Navigation
  - [ ] Forms and data submission
  - [ ] Animations and transitions
  - [ ] Data fetching and display

- [ ] Verify production build completes:
  ```bash
  bun build
  ```

- [ ] Test production build locally:
  ```bash
  bun start
  ```

## Performance Verification

- [ ] Compare build sizes before and after upgrade
- [ ] Check page load times
- [ ] Verify Lighthouse scores
- [ ] Review Vercel analytics (if available)

## Final Steps

- [ ] Update documentation to reflect any API changes
- [ ] Create a summary of the upgrade process
- [ ] Draft release notes
- [ ] Deploy to staging environment
- [ ] Conduct final testing in staging
- [ ] Plan production deployment

## Rollback Plan

If critical issues are encountered:

- [ ] Revert to the main branch
- [ ] Restore dependencies
- [ ] Document specific issues for future resolution
</file>

<file path="docs/next-upgrade-dependency-compatibility.md">
# Next.js 15 Dependency Compatibility Analysis

This document analyzes the compatibility of our current dependencies with Next.js 15 and React 19, which is required for the App Router in Next.js 15.

## Critical Dependencies

### 1. Supabase

**Current Versions:**
- `@supabase/ssr`: v0.4.1
- `@supabase/supabase-js`: v2.48.1

**Compatibility Status:** ‚úÖ Compatible

The `@supabase/ssr` package is designed to be framework-agnostic and works with the latest versions of Next.js and React. As of our research, there are no known issues with Supabase and React 19.

**Required Action:** None needed, but monitor for any issues during testing.

### 2. Framer Motion

**Current Version:** v12.4.10

**Compatibility Status:** ‚ö†Ô∏è Partial Compatibility

Framer Motion v12.x series has alpha support for React 19, but there are known issues with animations in some React 19 scenarios. The core issue is that Framer itself runs on React 18, and React 19 introduces breaking changes that affect animations.

**Required Action:** 
- Test thoroughly after upgrade
- Consider downgrading to a stable version if issues are encountered
- Be prepared to implement workarounds or use alternative animation approaches for critical UI elements

### 3. Next Auth

**Current Version:** v4.24.11

**Compatibility Status:** ‚úÖ Compatible

Next Auth v4.24.x is compatible with React 19 and Next.js 15. The package has good maintenance and has been updated to support the latest Next.js releases.

**Required Action:** None needed.

### 4. React Data Table Component

**Current Version:** v7.6.2

**Compatibility Status:** ‚ö†Ô∏è Potential Issues

This library hasn't been explicitly updated for React 19 compatibility. Its peer dependency requirements might not include React 19 yet.

**Required Action:**
- Install with `--force` or `--legacy-peer-deps` flags
- Test thoroughly for unexpected behavior
- Consider alternatives if significant issues arise

### 5. Recharts

**Current Version:** v2.15.1

**Compatibility Status:** ‚úÖ Likely Compatible

Recharts is well-maintained and has historically adapted quickly to React changes. Version 2.15.1 is recent and likely works with React 19, though explicit compatibility isn't documented.

**Required Action:** Test thoroughly, especially complex chart components.

### 6. Other UI Dependencies

- **React Hot Toast (v2.5.2):** Likely needs `--force` installation
- **React Icons (v5.5.0):** Compatible
- **React Tooltip (v5.28.0):** Likely compatible

## Installation Strategy

Due to peer dependency issues with React 19, we recommend the following installation approach:

1. Create a new branch for the upgrade
2. Try standard installation first:
   ```bash
   bun add next@latest react@latest react-dom@latest
   ```

3. If dependency conflicts occur, use force flag:
   ```bash
   bun add next@latest react@latest react-dom@latest --force
   ```

4. For specific problematic dependencies:
   ```bash
   bun add framer-motion react-data-table-component --force
   ```

## Package.json Overrides

Consider adding overrides to package.json to manage React version conflicts:

```json
"overrides": {
  "react": "^19.0.0",
  "react-dom": "^19.0.0"
}
```

## Testing Strategy

After upgrading dependencies:

1. **Basic UI Testing:**
   - Verify animations and transitions still work
   - Check responsive behavior
   - Test form submissions

2. **Component-Specific Testing:**
   - Framer Motion animations
   - Data tables
   - Charts and visualizations
   - Authentication flows

3. **Performance Benchmarking:**
   - Compare before/after build sizes
   - Compare page load times

## Fallback Options

If critical dependencies cause significant issues, consider these fallback options:

1. **Partial Upgrade:**
   - Use Next.js 15 with the Pages Router and React 18
   - Delay App Router migration until dependencies are fully compatible

2. **Alternative Libraries:**
   - Replace framer-motion with CSS animations for critical paths
   - Consider alternatives to react-data-table-component

## Conclusion

Most of our dependencies should work with Next.js 15 and React 19, but we should expect some installation and runtime challenges. By using installation flags and thorough testing, we can successfully navigate the upgrade process.

React 19 represents a significant step forward, and the Next.js 15 upgrade will position us to leverage its performance improvements and new features, despite some short-term adaptation challenges.
</file>

<file path="docs/next-upgrade-plan.md">
# Next.js Upgrade Plan: 14.2.25 to Latest

This document outlines our plan for upgrading Oceanheart UI from Next.js 14.2.25 to the latest version. The upgrade will be performed in a phased approach to minimize disruption and ensure stability.

## Current State

- **Current Next.js Version**: 14.2.25
- **Current React Version**: 18.2.0
- **Current React DOM Version**: 18.2.0
- **Current ESLint Config Version**: 15.1.7

## Upgrade Preparation

### Phase 1: Setup and Preparation

1. **Create a new branch for the upgrade:**
   ```bash
   git checkout -b feature/nextjs-upgrade
   ```

2. **Create a backup of the current production build:**
   ```bash
   # Generate a production build
   bun run build
   
   # Archive the .next directory
   tar -czvf next-backup-$(date +%Y%m%d).tar.gz .next
   ```

3. **Document current dependencies and their versions:**
   ```bash
   bun list > pre-upgrade-dependencies.txt
   ```

### Phase 2: Initial Upgrade to Next.js 15

1. **Update core packages:**
   ```bash
   bun add next@15 react@19 react-dom@19 eslint-config-next@latest
   ```

2. **Update TypeScript types:**
   ```bash
   bun add -D @types/react@latest @types/react-dom@latest
   ```

3. **Run the Next.js codemod to automate compatibility changes:**
   ```bash
   npx @next/codemod@latest upgrade
   ```

## Implementation Plan

### Phase 3: Address Breaking Changes

#### Async Request APIs

Update all instances of synchronous APIs to the new asynchronous pattern:

```javascript
// Before
import { cookies } from 'next/headers'
const cookieStore = cookies()
const token = cookieStore.get('token')

// After
import { cookies } from 'next/headers'
const cookieStore = await cookies()
const token = cookieStore.get('token')
```

Files to check:
- `app/api/auth/*/route.ts`
- Any page that accesses headers
- Any component that uses cookies or searchParams

#### Caching Changes

Review and update caching strategies:

1. For fetch requests that need to be cached, add the cache option:
   ```javascript
   // Add caching explicitly
   const data = await fetch('https://api.example.com/data', { cache: 'force-cache' })
   ```

2. For components that need to use cached data, update the fetchCache segment config:
   ```javascript
   export const fetchCache = 'default-cache'
   ```

#### Update React Hooks Usage

1. Replace any usage of `useFormState` with `useActionState`:
   ```javascript
   // Before
   const [state, formAction] = useFormState(action, initialState)
   
   // After
   const [state, formAction] = useActionState(action, initialState)
   ```

2. Update any middleware that uses `geo` or `ip` properties:
   ```javascript
   // Before
   export function middleware(request: NextRequest) {
     const { geo } = request
     // ...
   }
   
   // After (with Vercel)
   import { geolocation, ipAddress } from '@vercel/functions'
   
   export function middleware(request: NextRequest) {
     const geo = geolocation(request)
     const ip = ipAddress(request)
     // ...
   }
   ```

### Phase 4: Testing and Verification

1. **Ensure the development server starts correctly:**
   ```bash
   bun dev
   ```

2. **Run linting to catch any issues:**
   ```bash
   bun lint
   ```

3. **Test all site functionality:**
   - Navigation
   - Authentication
   - Form submissions
   - API endpoints
   - Dynamic routes
   - Server components
   - Client components
   - Static generation

4. **Run build process:**
   ```bash
   bun build
   ```

5. **Verify there are no console errors or warnings**

### Phase 5: Dependency Compatibility

1. **Check for any peer dependency warnings:**
   ```bash
   bun install
   ```

2. **Address specific dependency updates as needed:**

   - Potential updates required:
     - `next-auth`
     - `@supabase/ssr`
     - `@supabase/supabase-js`
     - `framer-motion`
     - `react-data-table-component`
     - `recharts`

3. **Update testing libraries:**
   ```bash
   bun add -D @testing-library/react@latest @testing-library/jest-dom@latest
   ```

## Rollback Plan

If critical issues are encountered during the upgrade, follow these steps:

1. **Restore to the previous branch:**
   ```bash
   git checkout main
   ```

2. **Restore dependencies:**
   ```bash
   bun install
   ```

3. **Restore the backed-up build directory if needed:**
   ```bash
   tar -xzvf next-backup-*.tar.gz
   ```

## Post-Upgrade Tasks

1. **Update documentation to reflect any API changes**

2. **Create a post-upgrade assessment document:**
   - Performance changes
   - Build size changes
   - Any issues encountered and solutions

3. **Share findings with team and document lessons learned**

## Timeline

- **Day 1**: Phases 1 & 2 (Setup and Initial Upgrade)
- **Day 2-3**: Phase 3 (Address Breaking Changes)
- **Day 4**: Phase 4 (Testing and Verification)
- **Day 5**: Phase 5 (Dependency Compatibility)
- **Day 6**: Post-Upgrade Tasks and Final Testing
- **Day 7**: Merge to Staging for Extended Testing
- **Day 10**: Production Deployment (if all tests pass)

## Special Considerations

### App Router Compatibility

Since Oceanheart UI already uses the App Router, the core routing system should remain compatible. However, we should pay special attention to:

1. Server Components vs. Client Components
2. Data fetching patterns
3. Middleware functionality

### Supabase Integration

Verify that the Supabase integration continues to work properly, focusing on:

1. Authentication flows
2. Data fetching
3. Middleware for protected routes

### Stripe Integration

Test the Stripe checkout flow thoroughly, ensuring that:

1. Product/price information is correctly fetched
2. Checkout sessions are properly created
3. Webhooks continue to function as expected

## Resources

- [Official Next.js Upgrade Guide](https://nextjs.org/docs/app/building-your-application/upgrading/version-15)
- [React 19 Documentation](https://react.dev/blog/2024/10/17/react-19-upgrade-guide)
- [Next.js Release Blog](https://nextjs.org/blog/next-15)
</file>

<file path="docs/next-upgrade-readme.md">
# Next.js 15 Upgrade Guide

This directory contains documentation for upgrading Oceanheart UI from Next.js 14.2.25 to Next.js 15.

## Documentation Files

- [Upgrade Plan](./next-upgrade-plan.md) - Comprehensive step-by-step upgrade strategy
- [Breaking Changes Analysis](./next-upgrade-breaking-changes.md) - Detailed breakdown of required code changes
- [Dependency Compatibility](./next-upgrade-dependency-compatibility.md) - Analysis of dependency compatibility issues
- [Upgrade Checklist](./next-upgrade-checklist.md) - Task checklist for completing the upgrade

## Overview

Next.js 15 introduces several significant changes:

1. **React 19 Support** - The App Router uses React 19, bringing performance improvements and new features
2. **Async Request APIs** - Previously synchronous APIs like `cookies()` and `headers()` are now Promise-based
3. **Caching Changes** - Fetch requests are no longer cached by default
4. **Removal of NextRequest geo and ip Properties** - These properties have been removed from the NextRequest object
5. **Improved Error Messages** - Better hydration error reporting and more helpful error messages

## Major Benefits

- **Performance Improvements** - React 19 and Turbopack provide better build and runtime performance
- **Enhanced Developer Experience** - Improved debugging and error messages
- **Future-Proofing** - Positions the application to leverage upcoming React and Next.js features
- **Better Hydration Error Reporting** - Improved debugging of hydration mismatches

## Quick Start

To begin the upgrade process:

1. Review the [Upgrade Plan](./next-upgrade-plan.md) and [Breaking Changes Analysis](./next-upgrade-breaking-changes.md)
2. Create a new branch:
   ```bash
   git checkout -b feature/nextjs-upgrade
   ```
3. Execute the steps in the [Upgrade Checklist](./next-upgrade-checklist.md)
4. Test thoroughly before merging

## Turbopack Performance

Next.js 15 includes a stable release of Turbopack for development, offering significant performance improvements:

- Faster startup times
- Improved hot module replacement
- Enhanced handling of large dependency trees

To enable Turbopack in development:

```bash
bun dev --turbo
```

## Additional Resources

- [Official Next.js 15 Announcement](https://nextjs.org/blog/next-15)
- [Next.js Upgrade Guide](https://nextjs.org/docs/app/building-your-application/upgrading/version-15)
- [React 19 Documentation](https://react.dev/blog/2024/10/17/react-19-upgrade-guide)
</file>

<file path="docs/refactor_prd.md">
# Oceanheart.ai Refactoring PRD

## Executive Summary

This document outlines a comprehensive refactoring plan for the Oceanheart.ai codebase. The focus is on cleaning up duplicate code, archiving deprecated features, and ensuring a more maintainable codebase going forward. The main pages to be preserved and enhanced are the landing page, about page, privacy policy page, and terms of service page, while other features will be archived rather than deleted outright.

## Current State Assessment

### Codebase Overview
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **UI**: React 18, Tailwind CSS, DaisyUI, Framer Motion, Recharts
- **Backend**: Next.js API Routes, Supabase (Auth, PostgreSQL)
- **Payments**: Stripe
- **Email**: Resend

### Issues Identified

#### 1. Duplicated Code

1. **Authentication Implementations**:
   - Three similar authentication flows in `/signin/page.tsx`, `/app/signin/page.tsx`, and `/app/saigo/signin/page.tsx`
   - Duplicate authentication API routes in `/app/api/auth/callback/route.ts` and `/app/api/auth/saigo-callback/route.ts`

2. **Redundant Components**:
   - Multiple testimonial components with overlapping functionality
   - Several feature display components with similar purposes
   - Duplicate button components for authentication

3. **Page Duplication**:
   - Privacy policy and terms of service pages exist in both root and `/app` directories
   - Multiple implementations of similar sections in the landing page

4. **Directory Structure Issues**:
   - Both legacy pages router and newer app router code coexist
   - Some components seem to exist in multiple directories

#### 2. Dead/Unused Code

1. **Unused Components**:
   - Several components have no imports anywhere in the codebase
   - Testimonial and video components appear unused

2. **Deprecated Features**:
   - Saigo feature (leaderboard, practice tracking)
   - HDI (Human Digital Interface) experimental section
   - Various A/B testing components from previous iterations

3. **Commented-Out Code**:
   - Instagram service has commented implementation
   - Multiple TODOs indicating planned changes

4. **Duplicate Files**:
   - Task files duplicated across `/tasks/` and `/tasks-refactor/`
   - Various root-level files duplicate app router functionality

## Refactoring Goals

1. **Codebase Cleanup**:
   - Archive deprecated features rather than delete them
   - Remove duplicated code where possible
   - Establish a clear component hierarchy
   - Standardize on the App Router pattern

2. **Feature Focus**:
   - Ensure landing page, about page, privacy policy, and terms page are optimized
   - Remove or archive features that are no longer core to the business

3. **Documentation**:
   - Document the archive structure for future reference
   - Create clear component documentation

## Implementation Plan

### 1. Code Organization and Architecture

#### 1.1 Directory Structure
- **Active Code**:
  - `/app`: All active Next.js App Router pages and API routes
  - `/components`: Active, reusable React components
  - `/libs`: Utility functions and service integrations
  - `/types`: TypeScript type definitions
  - `/public`: Static assets

- **Archived Code**:
  - `/archived`: New top-level directory for deprecated code
    - `/archived/saigo`: Complete Saigo feature code
    - `/archived/hdi`: Complete HDI feature code
    - `/archived/ab-testing`: Old A/B testing implementations

#### 1.2 Component Refactoring
- Standardize component file structure
- Create consistent naming conventions
- Ensure all components are properly typed
- Remove unused props and functions

### 2. Feature-Specific Refactoring

#### 2.1 Core Pages Enhancement
- Update landing page to reflect new branding
- Optimize about page with latest content
- Ensure privacy policy and terms pages are consistent and up-to-date
- Implement consistent header and footer across all pages

#### 2.2 Authentication Consolidation
- Standardize on a single authentication flow
- Remove redundant authentication components
- Ensure clean separation between auth UI and logic

#### 2.3 API Route Cleanup
- Archive deprecated API routes
- Consolidate similar API functionality
- Document API endpoints for future reference

### 3. Archive Strategy

#### 3.1 Saigo Feature
- Move all Saigo-related code to `/archived/saigo`
- Include app pages, components, and API routes
- Document database tables and their relationships
- Create a README explaining the feature and archival reason

#### 3.2 HDI Feature
- Move all HDI-related code to `/archived/hdi`
- Include components, pages, and API routes
- Document any specialized functionality

#### 3.3 Other Deprecated Features
- Archive AB testing components no longer in use
- Archive unused testimonial components
- Maintain database migration files for reference

## Technical Implementation Details

### 1. Component Duplication Resolution

#### 1.1 Authentication Components
- Keep only `/app/signin/page.tsx` and related components
- Remove or archive duplicate implementations
- Refactor `ButtonSignin.tsx` and `ButtonAccount.tsx` into a single component with different modes

#### 1.2 Feature Display Components
- Consolidate `FeaturesGrid.tsx`, `FeaturesListicle.tsx`, and `FeaturesAccordion.tsx` into a single component with different layout options
- Refactor testimonial components into a unified system

#### 1.3 Section Components
- Evaluate newly added `KnowledgeGapSection.tsx` and `CompoundingHoursSection.tsx` for potential consolidation
- Create a generic section component pattern for consistency

### 2. Dead Code Removal

#### 2.1 Unused Root-Level Files
- Archive or remove duplicated root-level files:
  - `/page.tsx` (duplicates app router structure)
  - `/globals.css` (duplicate of app/globals.css)
  - `/error.tsx` (redundant with app/error.tsx)
  - `/not-found.tsx` (redundant with app/not-found.tsx)

#### 2.2 Commented-Out Code
- Remove commented code blocks in:
  - `/libs/instagram-service.ts`
  - `/libs/gpt.ts`
  - Various components with commented sections

#### 2.3 Tools and Development Files
- Clean up development tool files:
  - `/aider.session`
  - `/session.aider`
  - `/bak.aider.model.settings.yml`

### 3. Archive Structure Implementation

#### 3.1 Saigo Archive
```
/archived/saigo/
  /app/ - App router pages
  /api/ - API routes
  /components/ - UI components
  /libs/ - Utility functions
  /migrations/ - Database migrations
  README.md - Documentation
```

#### 3.2 HDI Archive
```
/archived/hdi/
  /app/ - App router pages
  /api/ - API routes
  /components/ - UI components
  /libs/ - Utility functions
  README.md - Documentation
```

## Risk Assessment and Mitigation

### Potential Risks

1. **Breaking Changes**:
   - Moving components might break existing imports
   - Removing unused code could affect hidden dependencies

2. **Database Dependencies**:
   - Archived features may have database tables referenced by active code
   - Foreign key relationships may exist between active and archived tables

3. **Client-Side Navigation**:
   - Links to archived pages might exist in active pages
   - User bookmarks to deprecated pages will break

### Mitigation Strategies

1. **Phased Approach**:
   - Implement changes in logical, isolated chunks
   - Test thoroughly after each phase
   - Use feature flags for gradual transition

2. **Comprehensive Testing**:
   - Create a test plan for core functionality
   - Verify all user flows still work after changes
   - Test on multiple devices and browsers

3. **Redirects for Removed Routes**:
   - Implement Next.js redirects for deprecated routes
   - Create a 404 page that helps users find what they need

## Implementation Roadmap

### Phase 1: Initial Setup (Week 1)
- Create the `/archived` directory structure
- Document the archival approach
- Set up test environments

### Phase 2: Code Archival (Week 2)
- Move Saigo feature code to archive
- Move HDI feature code to archive
- Update references in active code

### Phase 3: Duplication Resolution (Week 3)
- Consolidate authentication components
- Refactor feature display components
- Update header/footer components

### Phase 4: Cleanup and Testing (Week 4)
- Remove unused root-level files
- Clean up commented code
- Comprehensive testing of all features

## Success Criteria

1. **Codebase Metrics**:
   - Reduced overall line count
   - Fewer components with high similarity
   - Improved code quality metrics

2. **Performance**:
   - Maintained or improved page load times
   - Reduced bundle size
   - Better Lighthouse scores

3. **Developer Experience**:
   - Clearer component structure
   - Improved documentation
   - Faster onboarding for new developers

## Conclusion

This refactoring plan aims to clean up the Oceanheart.ai codebase while preserving important features and functionality. By archiving deprecated code rather than deleting it, we maintain the ability to reference or restore previous functionality if needed in the future. The result will be a more maintainable, efficient codebase focused on the core business needs: a compelling landing page, about page, and necessary legal pages like privacy policy and terms of service.
</file>

<file path="docs/spec.md">
**First Version (MVP - Minimum Viable Product)**

This focuses on getting the core loop working: Record -> Transcribe -> Hashtag -> Summarize -> Report.

1.  **Voice Memo Ingestion:**
    *   **Mechanism:** User records on their device. It syncs to a shared cloud storage (e.g., Google Drive, Dropbox, iCloud folder you have access to).
    *   **Your Side (Python Script):**
        *   An orchestrated set of scripts that runs periodically (cron job).
        *   Uses the cloud storage API (e.g., `google-api-python-client` for Google Drive, `dropbox` SDK for Dropbox) to list new audio files in a specific folder.
        *   Downloads new audio files.
    *   **Tech:** Python, Cloud Storage API SDK.
    *   **Difficulty:** Low to Moderate (API authentication and listing/downloading files can be fiddly but are well-documented).

2.  **Transcription:**
    *   **Mechanism:** The Python script sends the downloaded audio file to a Speech-to-Text API.
    *   **Tech:**
        *   OpenAI Whisper API (very good quality, can handle various audio formats).
        *   Google Cloud Speech-to-Text API.
        *   AWS Transcribe.
    *   **Python:** Use `requests` library or the official SDKs for these services.
    *   **Difficulty:** Moderate (API integration, handling API limits, audio format compatibility).

3.  **Hashtag Extraction & Basic Processing:**
    *   **Mechanism:** Parse the transcript text for patterns like `#hashtag`.
    *   **Tech:** Python string manipulation, regular expressions (`re` module).
    *   **Storage:** Store the transcript, extracted hashtags, and audio file metadata (filename, date) perhaps in a simple structure like JSON files, or a lightweight SQLite database.
    *   **Difficulty:** Low.

4.  **Summarization (per recording or per hashtag group for the day):**
    *   **Mechanism:** Send the transcript (or concatenated transcripts for a given hashtag) to an LLM API for summarization.
    *   **Prompt Engineering:** This is where your skill comes in. Prompts like: "Summarize the key points, decisions, and action items from the following transcript(s) related to [hashtag, if applicable]:\n\n[Transcript]"
    *   **Tech:** OpenAI API (GPT-3.5-turbo, GPT-4), Anthropic Claude API, Google Gemini API.
    *   **Python:** `requests` or SDKs.
    *   **Difficulty:** Moderate (API integration, prompt engineering is an art).

5.  **Executive Report Generation:**
    *   **Mechanism:** Python script compiles the summaries (perhaps grouped by hashtag, or a general daily overview) into a readable format.
    *   **Format:** Plain text, Markdown, or even a simple HTML email.
    *   **Delivery:** Could be printed to console, saved as a file, or emailed (using Python's `smtplib`).
    *   **Difficulty:** Low to Moderate (depending on formatting complexity).

6.  **Google Drive:**
    *   **Mechanism:** The Python script uploads the executive report to a Google Drive folder.
    *   **Tech:** Google Drive API.
    *   **Difficulty:** Low to Moderate (API integration, handling API limits, file upload).

7.  **Email:**
    *   **Mechanism:** The Python script emails the executive report to the User.
    *   **Tech:** `smtplib` or `email` library.
    *   **Difficulty:** Low to Moderate (email sending, handling API limits, email formatting).

8.  **Google Drive Query Interface:**
    *   **Mechanism:** The User can query the Google Drive folder for files and summaries by in-built Gemini functionality.
    *   **Tech:** Gemini API.
    *   **Difficulty:** Trivial.


**Overall MVP Technical Difficulty:** Moderate.
It involves stitching together several APIs and handling data flow. Python is an excellent choice. No complex algorithms need to be written from scratch for the MVP; it's more about robust integration.

**How it Can Evolve (Increasing Technical Difficulty & Sophistication):**

1.  **Enhanced Data Storage & Retrieval:**
    *   **Vector Database:** For semantic search across transcripts (e.g., Pinecone, Weaviate, ChromaDB). This allows searching by meaning, not just keywords.
    *   **Difficulty:** Moderate to High.

2.  **Sophisticated Analysis & Insights (Agentive Pipeline):**
    *   **Topic Modeling:** Beyond hashtags, use NLP techniques (or LLM prompting) to identify emergent topics.
    *   **Sentiment Analysis:** Track sentiment trends.
    *   **Named Entity Recognition (NER):** Identify people, organizations, projects.
    *   **Relationship Extraction:** Map connections between entities and topics.
    *   **Trend Analysis:** Use the histogram of filters/topics over time to spot patterns.
    *   **Prompt Chaining / Agentic Workflows:** Use frameworks like LangChain or LlamaIndex to build more complex analysis pipelines (e.g., summarize -> extract key entities -> find related past memos -> synthesize a trend report).
    *   **Automatic Evaluation of Diff:**
        *   You could have an LLM compare a new summary to a previous "gold standard" summary for a similar topic (if one exists).
        *   Or, use an LLM to evaluate the quality of a summary based on a rubric you define (e.g., "Does this summary capture actionable items? Is it concise?"). This is cutting-edge.
    *   **Difficulty:** High. This is where "agentive speccing" and advanced prompting become crucial.

3.  **Improved User Interaction & Feedback Loop:**
    *   **Web Interface:** A simple dashboard (Flask/Django in Python, or a frontend framework) for the User (and you) to browse transcripts, summaries, filter by tags, see visualizations.
    *   **Interactive Feedback:** Allow the User to rate summaries, correct transcriptions (though APIs are good), or add/modify tags via the interface. This feedback can be used to fine-tune prompts or even models (if you go that far).
    *   **Proactive Agent:** The system could potentially email the User "Did you mean to tag this with #ProjectOmega as well?" or "Here are 3 memos from last month related to your discussion today about X."
    *   **Difficulty:** Moderate (for basic UI) to Very High (for sophisticated interactive agents).

4.  **Personalized Model Fine-Tuning (Very Advanced):**
    *   If a large corpus of high-quality transcript-summary pairs is generated, you could potentially fine-tune a smaller, open-source LLM specifically for this User's summarization style and topics.
    *   **Difficulty:** Very High. Requires significant data and MLOps expertise.

**Technical Difficulty Bearing in Mind Your Access:**
Given your access to advanced agentive coding,even the more evolved stages are feasible.
*   **MVP:** You could likely prototype this very quickly.
*   **Evolution Stage 2 (Sophisticated Analysis):** This is your sweet spot. You can design complex prompt chains and agentic loops to extract deep insights. The "automatic evaluation of diff" is a challenging but exciting R&D area. Particuarly with skill in psychotherapeutic analysis 
*   **Evolution Stage 3 (UI/Interaction):** Building a full-fledged UI can be time-consuming but is standard software development. The agentic interaction parts are more novel.

The key is to start with the MVP to get the core data pipeline flowing and provide initial value. Then, iterate rapidly based on the User's feedback and your own insights from the data, leveraging your agentive capabilities to build out the more advanced analytical features. Python, with its rich ecosystem of libraries for APIs, data processing, and AI, is an ideal foundation.
</file>

<file path="docs/synai_implementation_plan.md">
# Synai Page Implementation Plan

## Atomic Task Breakdown

This document provides a detailed, step-by-step implementation plan for migrating the Synai HTML page to Next.js, broken down into atomic tasks that can be executed independently.

## Phase 1: Foundation Setup

### Task 1.1: Create Page Structure
**File**: `app/synai/page.tsx`
**Estimated Time**: 15 minutes
**Dependencies**: None

```typescript
// Basic page component with metadata
export const metadata = {
  title: "Synai: Your Personal AI Coach | Oceanheart.ai",
  description: "What if you had an AI that truly understood your unique patterns, values, and goals? Not generic advice, but deeply personalized guidance built from a clinical assessment of who you are."
};

export default function SynaiPage() {
  return (
    <main className="min-h-screen">
      {/* Content will be added in subsequent tasks */}
    </main>
  );
}
```

### Task 1.2: Update Navigation Header
**File**: `components/Header.tsx`
**Estimated Time**: 20 minutes
**Dependencies**: Task 1.1

**Changes Required**:
1. Add "Synai" to links array
2. Add conditional className for Synai link
3. Position between "Consulting" and other links

```typescript
// Add to links array around line 26
{
  href: "/synai",
  label: "Synai",
  className: "synai-nav-link glow-effect"
},
```

### Task 1.3: Implement Synai Glow Effect CSS
**File**: `app/globals.css`
**Estimated Time**: 25 minutes
**Dependencies**: Task 1.2

**CSS to Add**:
```css
/* Synai Nav Link Glow Effect */
.synai-nav-link {
  position: relative;
  z-index: 1;
  color: white !important;
  font-weight: bold;
  text-shadow: 
    0 0 5px rgba(255, 255, 255, 0.8),
    0 0 10px rgba(255, 255, 255, 0.6),
    0 0 15px rgba(255, 255, 255, 0.4);
  transition: all 0.3s ease;
}

.synai-glow-effect::before {
  content: '';
  position: absolute;
  top: -4px;
  left: -4px;
  right: -4px;
  bottom: -4px;
  border-radius: 6px;
  background: white;
  z-index: -1;
  opacity: 0;
  filter: blur(6px);
  animation: synai-pulse 3s infinite;
}

@keyframes synai-pulse {
  0% {
    opacity: 0.3;
    filter: blur(6px);
  }
  50% {
    opacity: 0.7;
    filter: blur(10px);
  }
  100% {
    opacity: 0.3;
    filter: blur(6px);
  }
}
```

### Task 1.4: Create Component Architecture
**Files**: Create component files
**Estimated Time**: 10 minutes
**Dependencies**: Task 1.1

Create the following component files (empty for now):
- `app/synai/components/SynaiHero.tsx`
- `app/synai/components/ComparisonSection.tsx`
- `app/synai/components/FeaturesSection.tsx`
- `app/synai/components/ProcessSection.tsx`
- `app/synai/components/TechnicalSection.tsx`
- `app/synai/components/CTASection.tsx`

## Phase 2: Hero Section Implementation

### Task 2.1: Create Hero Component Structure
**File**: `app/synai/components/SynaiHero.tsx`
**Estimated Time**: 30 minutes
**Dependencies**: Task 1.4

```typescript
export default function SynaiHero() {
  return (
    <section className="relative min-h-screen flex items-center justify-center bg-gradient-to-br from-primary to-secondary text-white overflow-hidden">
      {/* Animated background elements */}
      {/* Hero content */}
      {/* CTA button */}
    </section>
  );
}
```

### Task 2.2: Implement Hero Background Animation
**File**: `app/synai/components/SynaiHero.tsx`
**Estimated Time**: 25 minutes
**Dependencies**: Task 2.1

Add floating animation and background elements:
```typescript
// Floating particles background
<div className="absolute inset-0 opacity-10">
  {/* Animated background pattern */}
</div>
```

### Task 2.3: Add Hero Content and Typography
**File**: `app/synai/components/SynaiHero.tsx`
**Estimated Time**: 20 minutes
**Dependencies**: Task 2.1

Implement the main hero text content with proper typography hierarchy.

### Task 2.4: Style Hero CTA Button
**File**: `app/synai/components/SynaiHero.tsx`
**Estimated Time**: 15 minutes
**Dependencies**: Task 2.3

Create primary CTA button with hover effects.

### Task 2.5: Integrate Hero into Main Page
**File**: `app/synai/page.tsx`
**Estimated Time**: 5 minutes
**Dependencies**: Task 2.4

Import and add SynaiHero component to main page.

## Phase 3: Comparison Section Implementation

### Task 3.1: Create Comparison Section Structure
**File**: `app/synai/components/ComparisonSection.tsx`
**Estimated Time**: 20 minutes
**Dependencies**: Task 1.4

Basic section layout with header and grid container.

### Task 3.2: Implement Comparison Cards
**File**: `app/synai/components/ComparisonSection.tsx`
**Estimated Time**: 35 minutes
**Dependencies**: Task 3.1

Create the two comparison cards (Generic AI vs Synai) with:
- Different border colors (red vs blue)
- Check/X mark icons
- Hover animations
- Responsive layout

### Task 3.3: Add Comparison Content
**File**: `app/synai/components/ComparisonSection.tsx`
**Estimated Time**: 15 minutes
**Dependencies**: Task 3.2

Add all the comparison points from the original HTML.

### Task 3.4: Integrate Comparison Section
**File**: `app/synai/page.tsx`
**Estimated Time**: 5 minutes
**Dependencies**: Task 3.3

Import and add ComparisonSection to main page.

## Phase 4: Features Section Implementation

### Task 4.1: Create Features Grid Structure
**File**: `app/synai/components/FeaturesSection.tsx`
**Estimated Time**: 20 minutes
**Dependencies**: Task 1.4

Section header and responsive grid layout.

### Task 4.2: Implement Feature Cards
**File**: `app/synai/components/FeaturesSection.tsx`
**Estimated Time**: 40 minutes
**Dependencies**: Task 4.1

Create 6 feature cards with:
- Icon containers with gradient backgrounds
- Typography hierarchy
- Hover effects
- Responsive grid behavior

### Task 4.3: Add Feature Content and Icons
**File**: `app/synai/components/FeaturesSection.tsx`
**Estimated Time**: 20 minutes
**Dependencies**: Task 4.2

Add all feature content and emoji/icon representations.

### Task 4.4: Integrate Features Section
**File**: `app/synai/page.tsx`
**Estimated Time**: 5 minutes
**Dependencies**: Task 4.3

Import and add FeaturesSection to main page.

## Phase 5: Process Section Implementation

### Task 5.1: Create Process Section Structure
**File**: `app/synai/components/ProcessSection.tsx`
**Estimated Time**: 20 minutes
**Dependencies**: Task 1.4

Section layout with header and step container.

### Task 5.2: Implement Process Step Components
**File**: `app/synai/components/ProcessSection.tsx`
**Estimated Time**: 35 minutes
**Dependencies**: Task 5.1

Create 3 process step cards with:
- Numbered badges positioned absolutely
- Card backgrounds and shadows
- Responsive layout

### Task 5.3: Add Process Content
**File**: `app/synai/components/ProcessSection.tsx`
**Estimated Time**: 15 minutes
**Dependencies**: Task 5.2

Add all process step descriptions and titles.

### Task 5.4: Integrate Process Section
**File**: `app/synai/page.tsx`
**Estimated Time**: 5 minutes
**Dependencies**: Task 5.3

Import and add ProcessSection to main page.

## Phase 6: Technical Section Implementation

### Task 6.1: Create Technical Section Structure
**File**: `app/synai/components/TechnicalSection.tsx`
**Estimated Time**: 25 minutes
**Dependencies**: Task 1.4

Dark background section with header and visualization container.

### Task 6.2: Implement XML Prompt Visualization
**File**: `app/synai/components/TechnicalSection.tsx`
**Estimated Time**: 45 minutes
**Dependencies**: Task 6.1

Create the code-like XML structure display with:
- Monospace font
- Nested indentation
- Colored borders for different levels
- Backdrop blur effects

### Task 6.3: Add Technical Content
**File**: `app/synai/components/TechnicalSection.tsx`
**Estimated Time**: 15 minutes
**Dependencies**: Task 6.2

Add all technical content and explanatory text.

### Task 6.4: Integrate Technical Section
**File**: `app/synai/page.tsx`
**Estimated Time**: 5 minutes
**Dependencies**: Task 6.3

Import and add TechnicalSection to main page.

## Phase 7: Final CTA Section Implementation

### Task 7.1: Create CTA Section Structure
**File**: `app/synai/components/CTASection.tsx`
**Estimated Time**: 20 minutes
**Dependencies**: Task 1.4

Gradient background section with centered content.

### Task 7.2: Implement CTA Buttons
**File**: `app/synai/components/CTASection.tsx`
**Estimated Time**: 25 minutes
**Dependencies**: Task 7.1

Primary and secondary CTA buttons with proper styling and links.

### Task 7.3: Add CTA Content
**File**: `app/synai/components/CTASection.tsx`
**Estimated Time**: 10 minutes
**Dependencies**: Task 7.2

Add final CTA text and calls to action.

### Task 7.4: Integrate CTA Section
**File**: `app/synai/page.tsx`
**Estimated Time**: 5 minutes
**Dependencies**: Task 7.3

Import and add CTASection to main page.

## Phase 8: Animation and Polish

### Task 8.1: Add Scroll Animations
**Files**: All component files
**Estimated Time**: 40 minutes
**Dependencies**: All previous component tasks

Implement Framer Motion or CSS-based scroll animations for:
- Fade-in effects
- Slide-up animations
- Stagger animations for grids

### Task 8.2: Optimize Responsive Design
**Files**: All component files
**Estimated Time**: 35 minutes
**Dependencies**: Task 8.1

Review and optimize mobile responsiveness:
- Typography scaling
- Grid breakpoints
- Spacing adjustments
- Touch interaction optimization

### Task 8.3: Add Interaction States
**Files**: All component files
**Estimated Time**: 25 minutes
**Dependencies**: Task 8.2

Implement hover states, focus states, and loading states where appropriate.

## Phase 9: Testing and Optimization

### Task 9.1: Cross-Browser Testing
**Estimated Time**: 30 minutes
**Dependencies**: Phase 8 completion

Test in multiple browsers and devices:
- Chrome, Firefox, Safari, Edge
- Mobile devices (iOS/Android)
- Tablet layouts

### Task 9.2: Performance Optimization
**Estimated Time**: 25 minutes
**Dependencies**: Task 9.1

- Image optimization
- Bundle size analysis
- Animation performance
- Lighthouse audit

### Task 9.3: Accessibility Audit
**Estimated Time**: 20 minutes
**Dependencies**: Task 9.2

- Screen reader compatibility
- Keyboard navigation
- Color contrast verification
- ARIA labels where needed

### Task 9.4: SEO Verification
**Estimated Time**: 15 minutes
**Dependencies**: Task 9.3

- Meta tags verification
- Open Graph tags
- Structured data
- URL structure

## Final Integration Tasks

### Task 10.1: Remove Original HTML File
**File**: `docs/synai.html`
**Estimated Time**: 2 minutes
**Dependencies**: Full testing completion

Move or delete the original HTML file after migration is complete.

### Task 10.2: Update Documentation
**Files**: README, ARCHITECTURE.md if needed
**Estimated Time**: 10 minutes
**Dependencies**: Task 10.1

Update project documentation to reflect the new Synai page.

### Task 10.3: Deploy and Monitor
**Estimated Time**: 15 minutes
**Dependencies**: Task 10.2

Deploy to production and monitor for any issues.

## Summary

**Total Estimated Time**: 8-10 hours
**Total Tasks**: 34 atomic tasks
**Critical Path**: Foundation ‚Üí Hero ‚Üí Sections ‚Üí Polish ‚Üí Testing

Each task is designed to be independent and testable, allowing for iterative development and easy debugging if issues arise.

## Risk Mitigation

### High-Risk Tasks
- Task 1.3 (CSS glow effect) - May conflict with existing styles
- Task 8.1 (Scroll animations) - Performance impact
- Task 6.2 (XML visualization) - Complex layout requirements

### Mitigation Strategies
- Test CSS changes in isolation
- Monitor performance during animation implementation
- Create fallback layouts for complex visualizations
- Implement progressive enhancement approach
</file>

<file path="docs/synai_migration_prd.md">
# Synai Page Migration PRD

## Overview
Migrate the standalone `synai.html` file into a fully integrated Next.js page within the Oceanheart.ai website, maintaining the design aesthetics while adapting to the existing site architecture and styling system.

## Current State
- Standalone HTML file at `docs/synai.html`
- Self-contained CSS styling with custom variables and animations
- Independent header/navigation
- Marketing-focused landing page for "Synai: Your Personal AI Coach"

## Target State
- Integrated Next.js page at `/synai`
- Uses existing site header with "Synai" added to navigation with glowing white effect
- Converted to Tailwind CSS + DaisyUI styling system
- Responsive design consistent with site patterns
- Maintains visual impact and marketing messaging

## Content Structure Analysis

### 1. Hero Section
- **Headline**: "Meet Synai"
- **Subtitle**: "Your Personal AI Coach, Engineered for You"
- **Description**: Value proposition about personalized AI
- **CTA**: "Discover Your Personal AI" ‚Üí Calendar link

### 2. Problem/Solution Comparison
- **Title**: "Generic AI vs. Personal AI"
- **Content**: Two-column comparison (Generic AI vs Synai)
- **Visual**: Card-based layout with contrasting colors

### 3. How It Works Features
- **Title**: "How Synai Works"
- **Content**: 6 feature cards with icons and descriptions
- **Layout**: Responsive grid layout

### 4. Process Steps
- **Title**: "Your Journey to Personal AI"
- **Content**: 3-step process with numbered indicators
- **Layout**: Progressive step visualization

### 5. Technical Details
- **Title**: "The Engineering Behind the Magic"
- **Content**: Prompt architecture visualization
- **Visual**: Code-like XML structure display

### 6. Final CTA
- **Content**: Final conversion section
- **CTAs**: Primary (Calendar) + Secondary (Learn About Kai)

## Design System Mapping

### Color Palette Translation
```css
/* Original Variables ‚Üí Tailwind/DaisyUI Equivalents */
--primary-color: #1a1f2e ‚Üí text-base-content, bg-base-300
--accent-color: #4f6df5 ‚Üí primary, btn-primary
--secondary-color: #7c3aed ‚Üí secondary, accent
--cosmic-purple: #6366f1 ‚Üí primary variant
--text-light: #64748b ‚Üí text-base-content/70
--text-dark: #0f172a ‚Üí text-base-content
--bg-light: #f8fafc ‚Üí bg-base-100
--gradient-hero: linear-gradient(135deg, #4f6df5 0%, #7c3aed 100%) ‚Üí bg-gradient-to-br from-primary to-secondary
```

### Component Patterns
1. **Hero Section** ‚Üí Use existing hero patterns with gradient background
2. **Feature Cards** ‚Üí Adapt existing card components with hover effects
3. **Comparison Cards** ‚Üí Custom card variants with accent borders
4. **Process Steps** ‚Üí Timeline/stepper component pattern
5. **Technical Display** ‚Üí Code block styling with syntax highlighting

## Navigation Integration

### Header Modification
- Add "Synai" link to existing navigation array in `components/Header.tsx`
- Position: Between "Consulting" and existing links
- Special styling: Glowing white effect similar to HDI nav styling

### Glowing Effect Implementation
```css
.synai-nav-link {
  position: relative;
  color: white;
  font-weight: bold;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.8), 0 0 10px rgba(255, 255, 255, 0.6);
}

.synai-nav-link::before {
  content: '';
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  bottom: -3px;
  border-radius: 6px;
  background: white;
  z-index: -1;
  opacity: 0;
  filter: blur(6px);
  animation: synai-glow 2s infinite;
}
```

## Technical Requirements

### File Structure
```
app/synai/
‚îú‚îÄ‚îÄ layout.tsx (optional, inherit from root)
‚îú‚îÄ‚îÄ page.tsx (main component)
‚îî‚îÄ‚îÄ components/ (if needed)
    ‚îú‚îÄ‚îÄ SynaiHero.tsx
    ‚îú‚îÄ‚îÄ ComparisonSection.tsx
    ‚îú‚îÄ‚îÄ FeaturesSection.tsx
    ‚îú‚îÄ‚îÄ ProcessSection.tsx
    ‚îú‚îÄ‚îÄ TechnicalSection.tsx
    ‚îî‚îÄ‚îÄ CTASection.tsx
```

### Dependencies
- Existing: Next.js, Tailwind CSS, DaisyUI, Framer Motion
- New: None required
- Icons: Use existing icon system or emoji fallbacks

### SEO Requirements
- Page title: "Synai: Your Personal AI Coach | Oceanheart.ai"
- Meta description: Extract from hero description
- Open Graph tags: Generate appropriate social media preview
- Structured data: Service/Product schema

## Success Criteria

### Functional Requirements
‚úÖ Page accessible at `/synai`
‚úÖ Responsive design (mobile, tablet, desktop)
‚úÖ Navigation integration with glowing effect
‚úÖ All CTAs functional (calendar links)
‚úÖ Consistent with site styling system
‚úÖ SEO optimized

### Visual Requirements
‚úÖ Maintains visual impact of original design
‚úÖ Smooth animations and transitions
‚úÖ Proper typography hierarchy
‚úÖ Consistent spacing and layout
‚úÖ Hover states and interactions
‚úÖ Loading states if needed

### Performance Requirements
‚úÖ Page load speed < 3 seconds
‚úÖ Lighthouse score > 90
‚úÖ Accessibility compliance (WCAG 2.1 AA)
‚úÖ Mobile-first responsive design

## Implementation Phases

### Phase 1: Foundation (2-3 hours)
1. Create basic page structure
2. Set up routing and navigation
3. Implement header integration with glow effect
4. Create component architecture

### Phase 2: Content Migration (3-4 hours)
1. Hero section implementation
2. Comparison cards section
3. Features grid section
4. Process steps section

### Phase 3: Advanced Features (2-3 hours)
1. Technical visualization section
2. Final CTA section
3. Animation and interaction polish
4. Responsive design refinement

### Phase 4: Testing & Optimization (1-2 hours)
1. Cross-browser testing
2. Mobile responsiveness verification
3. Performance optimization
4. SEO verification
5. Accessibility audit

## Risk Mitigation

### Potential Issues
1. **CSS Conflicts**: Custom animations may conflict with existing styles
   - Solution: Use Tailwind utilities and custom CSS classes with specific prefixes

2. **Performance Impact**: Heavy animations might affect page speed
   - Solution: Use CSS transforms and optimize animation performance

3. **Responsive Breakpoints**: Original design may not translate well to all screen sizes
   - Solution: Implement mobile-first design with progressive enhancement

4. **Browser Compatibility**: Custom CSS effects may not work in all browsers
   - Solution: Provide fallbacks and progressive enhancement

## Acceptance Criteria

### Must Have
- [ ] Page loads correctly at `/synai`
- [ ] Navigation includes "Synai" with glowing white effect
- [ ] All sections present and functional
- [ ] Responsive design works on all devices
- [ ] CTAs link to correct destinations
- [ ] SEO meta tags implemented

### Should Have
- [ ] Smooth scroll animations
- [ ] Hover effects on interactive elements
- [ ] Loading states where appropriate
- [ ] Performance optimized
- [ ] Accessibility compliant

### Could Have
- [ ] Enhanced animations beyond original
- [ ] Additional interactive elements
- [ ] A/B testing framework integration
- [ ] Analytics tracking implementation

## Post-Launch

### Monitoring
- Page views and engagement metrics
- Conversion rate from CTAs
- Performance monitoring
- User feedback collection

### Future Enhancements
- Integration with booking system
- Personalization based on user data
- A/B testing of different messaging
- Additional interactive elements

---

*This PRD serves as the blueprint for migrating the Synai HTML page into the Next.js ecosystem while maintaining its marketing effectiveness and visual appeal.*
</file>

<file path="hooks/useForm.test.ts">
import { renderHook, act } from '@testing-library/react';
import { useForm } from './useForm';

describe('useForm', () => {
  it('should initialize with provided values', () => {
    const initialValues = { name: 'John', email: 'john@example.com' };
    const { result } = renderHook(() => useForm(initialValues));
    
    expect(result.current.values).toEqual(initialValues);
    expect(result.current.isSubmitting).toBe(false);
    expect(result.current.errors).toEqual({});
    expect(result.current.touched).toEqual({});
  });

  it('should update values on handleChange', () => {
    const { result } = renderHook(() => useForm({ name: '', email: '' }));
    
    act(() => {
      const event = {
        target: { name: 'name', value: 'John' }
      } as React.ChangeEvent<HTMLInputElement>;
      
      result.current.handleChange(event);
    });
    
    expect(result.current.values.name).toBe('John');
  });

  it('should mark fields as touched on handleBlur', () => {
    const { result } = renderHook(() => useForm({ name: '', email: '' }));
    
    act(() => {
      const event = {
        target: { name: 'name' }
      } as React.FocusEvent<HTMLInputElement>;
      
      result.current.handleBlur(event);
    });
    
    expect(result.current.touched.name).toBe(true);
  });

  it('should validate on blur when validate function is provided', () => {
    const validate = jest.fn().mockReturnValue({ name: 'Name is required' });
    const { result } = renderHook(() => useForm({ name: '', email: '' }, validate));
    
    act(() => {
      const event = {
        target: { name: 'name' }
      } as React.FocusEvent<HTMLInputElement>;
      
      result.current.handleBlur(event);
    });
    
    expect(validate).toHaveBeenCalled();
    expect(result.current.errors.name).toBe('Name is required');
  });

  it('should call onSubmit when form is valid', async () => {
    const onSubmit = jest.fn().mockResolvedValue(undefined);
    const { result } = renderHook(() => useForm({ name: 'John' }, () => ({}), onSubmit));
    
    await act(async () => {
      await result.current.handleSubmit({ preventDefault: jest.fn() } as unknown as React.FormEvent);
    });
    
    expect(onSubmit).toHaveBeenCalledWith({ name: 'John' });
    expect(result.current.isSubmitting).toBe(false);
  });

  it('should not call onSubmit when validation fails', async () => {
    const validate = jest.fn().mockReturnValue({ name: 'Name is required' });
    const onSubmit = jest.fn();
    
    const { result } = renderHook(() => useForm({ name: '' }, validate, onSubmit));
    
    await act(async () => {
      await result.current.handleSubmit({ preventDefault: jest.fn() } as unknown as React.FormEvent);
    });
    
    expect(validate).toHaveBeenCalled();
    expect(onSubmit).not.toHaveBeenCalled();
  });

  it('should reset form state when resetForm is called', () => {
    const initialValues = { name: 'John', email: 'john@example.com' };
    const { result } = renderHook(() => useForm(initialValues));
    
    act(() => {
      // Change values
      result.current.setValues({ name: 'Jane', email: 'jane@example.com' });
      
      // Set some errors and touched state
      result.current.setFieldError('name', 'Error');
      result.current.setFieldTouched('name', true);
      
      // Then reset
      result.current.resetForm();
    });
    
    expect(result.current.values).toEqual(initialValues);
    expect(result.current.errors).toEqual({});
    expect(result.current.touched).toEqual({});
    expect(result.current.isSubmitting).toBe(false);
  });

  it('should handle individual field updates', () => {
    const { result } = renderHook(() => useForm({ name: 'John', email: '' }));
    
    act(() => {
      result.current.setFieldValue('email', 'john@example.com');
    });
    
    expect(result.current.values).toEqual({ name: 'John', email: 'john@example.com' });
  });
});
</file>

<file path="hooks/useForm.ts">
import { useState } from 'react';

/**
 * A custom hook for managing form state, validation, and submission.
 * 
 * @param initialValues - The initial values for the form fields
 * @param validate - Optional validation function that returns errors for the form values
 * @param onSubmit - Optional submission handler function
 * 
 * @returns An object containing form state and handlers
 * 
 * @example
 * ```tsx
 * const LoginForm = () => {
 *   const validate = (values) => {
 *     const errors = {};
 *     if (!values.email) errors.email = 'Email is required';
 *     if (!values.password) errors.password = 'Password is required';
 *     return errors;
 *   };
 * 
 *   const handleSubmit = async (values) => {
 *     await login(values.email, values.password);
 *   };
 * 
 *   const { values, errors, touched, isSubmitting, handleChange, handleBlur, handleSubmit, resetForm } = 
 *     useForm({ email: '', password: '' }, validate, handleSubmit);
 *   
 *   return (
 *     <form onSubmit={handleSubmit}>
 *       <input 
 *         name="email" 
 *         value={values.email} 
 *         onChange={handleChange} 
 *         onBlur={handleBlur} 
 *       />
 *       {touched.email && errors.email && <div>{errors.email}</div>}
 *       
 *       <input 
 *         type="password" 
 *         name="password" 
 *         value={values.password} 
 *         onChange={handleChange} 
 *         onBlur={handleBlur} 
 *       />
 *       {touched.password && errors.password && <div>{errors.password}</div>}
 *       
 *       <button type="submit" disabled={isSubmitting}>Submit</button>
 *     </form>
 *   );
 * };
 * ```
 */
export function useForm<T extends Record<string, any>>(
  initialValues: T,
  validate?: (values: T) => Partial<Record<keyof T, string>>,
  onSubmit?: (values: T) => void | Promise<void>
) {
  const [values, setValues] = useState<T>(initialValues);
  const [errors, setErrors] = useState<Partial<Record<keyof T, string>>>({});
  const [touched, setTouched] = useState<Partial<Record<keyof T, boolean>>>({});
  const [isSubmitting, setIsSubmitting] = useState(false);

  /**
   * Handles input changes and updates the form values
   */
  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value, type } = e.target as HTMLInputElement;
    
    // Handle different input types appropriately
    let parsedValue: any = value;
    
    if (type === 'checkbox') {
      parsedValue = (e.target as HTMLInputElement).checked;
    } else if (type === 'number') {
      parsedValue = value === '' ? '' : Number(value);
    }
    
    setValues({ ...values, [name]: parsedValue });
  };

  /**
   * Handles input blur events and marks fields as touched
   */
  const handleBlur = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name } = e.target;
    setTouched({ ...touched, [name]: true });
    
    if (validate) {
      setErrors(validate(values));
    }
  };

  /**
   * Handles form submission, validates values, and calls the onSubmit handler if validation passes
   */
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    // Mark all fields as touched
    const allTouched = Object.keys(values).reduce(
      (acc, key) => ({ ...acc, [key]: true }),
      {} as Record<keyof T, boolean>
    );
    
    setTouched(allTouched);
    
    // Validate the form
    let validationErrors = {};
    if (validate) {
      validationErrors = validate(values);
      setErrors(validationErrors);
    }
    
    // If there are no validation errors and onSubmit is provided, submit the form
    if (Object.keys(validationErrors).length === 0 && onSubmit) {
      setIsSubmitting(true);
      try {
        await onSubmit(values);
      } finally {
        setIsSubmitting(false);
      }
    }
  };

  /**
   * Resets the form to its initial state
   */
  const resetForm = () => {
    setValues(initialValues);
    setErrors({});
    setTouched({});
    setIsSubmitting(false);
  };

  /**
   * Sets a specific field value programmatically
   */
  const setFieldValue = (field: keyof T, value: any) => {
    setValues(prev => ({ ...prev, [field]: value }));
  };

  /**
   * Sets a specific field error programmatically
   */
  const setFieldError = (field: keyof T, error: string) => {
    setErrors(prev => ({ ...prev, [field]: error }));
  };

  /**
   * Marks a specific field as touched programmatically
   */
  const setFieldTouched = (field: keyof T, isTouched: boolean = true) => {
    setTouched(prev => ({ ...prev, [field]: isTouched }));
  };

  return {
    values,
    errors,
    touched,
    isSubmitting,
    handleChange,
    handleBlur,
    handleSubmit,
    resetForm,
    setValues,
    setFieldValue,
    setFieldError,
    setFieldTouched
  };
}
</file>

<file path="libs/instagram-service.ts">
import { SupabaseClient } from '@supabase/supabase-js';
import { sendEmail } from './resend';
import config from '@/config';
/**
 * Service to handle Instagram page checking and user points resetting
 */
export class InstagramService {
  private client: any;

  constructor(supabaseClient: any) {
    this.client = supabaseClient;
  }

  /**
   * Check if an Instagram page exists by making a request to the profile
   * 
   * @param username Instagram username to check
   * @returns True if page exists, false otherwise
   */
  async checkInstagramPageExists(username: string): Promise<boolean> {
    try {
      // Use fetch to check if the Instagram page exists
      // We need to use a server-side approach as browsers have CORS restrictions
      const response = await fetch(`https://www.instagram.com/${username}/`, {
        method: 'GET',
        headers: {
          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36'
        },
      });

      // If page exists, response will be 200 and won't have "Page Not Found" indicators
      const html = await response.text();
      return response.status === 200 && !html.includes('Page Not Found');
    } catch (error) {
      console.error('Error checking Instagram page:', error);
      return false;
    }
  }

  /**
   * Create a new Instagram page check
   * 
   * @param pageUsername Instagram username to monitor
   * @param userIds List of user IDs whose points should be reset if page is found
   * @returns The created check data
   */
  async createInstagramCheck(pageUsername: string, userIds: string[]) {
    try {
      // Insert the Instagram check
      const { data: checkData, error: checkError } = await this.client
        .from('instagram_page_checks')
        .insert({
          page_username: pageUsername,
          page_found: false
        })
        .select()
        .single();

      if (checkError) throw checkError;

      // Add affected users
      const affectedUsersData = userIds.map(userId => ({
        instagram_check_id: checkData.id,
        user_id: userId,
        points_reset: false
      }));

      const { error: affectedError } = await this.client
        .from('instagram_affected_users')
        .insert(affectedUsersData);

      if (affectedError) throw affectedError;

      return checkData;
    } catch (error) {
      console.error('Error creating Instagram check:', error);
      throw error;
    }
  }

  /**
   * Get all Instagram page checks
   * 
   * @returns List of all Instagram checks with their affected users
   */
  async getAllInstagramChecks() {
    try {
      const { data: checks, error: checksError } = await this.client
        .from('instagram_page_checks')
        .select(`
          id,
          page_username,
          page_found,
          last_check_time,
          created_at,
          instagram_affected_users (
            id,
            user_id,
            points_reset,
            reset_time
          )
        `)
        .order('created_at', { ascending: false });

      if (checksError) throw checksError;
      return checks;
    } catch (error) {
      console.error('Error getting Instagram checks:', error);
      throw error;
    }
  }

  /**
   * Run checks on all Instagram pages and reset points if needed
   * 
   * @returns Result summary of the checks and actions
   */
  async runInstagramChecks() {
    const results = {
      totalChecks: 0,
      pagesFound: 0,
      usersReset: 0,
      errors: 0
    };

    try {
      // Get all Instagram checks
      const { data: checks, error: checksError } = await this.client
        .from('instagram_page_checks')
        .select('id, page_username, page_found');

      if (checksError) throw checksError;

      results.totalChecks = checks?.length || 0;

      // Process each check
      for (const check of checks || []) {
        try {
          // Check if the Instagram page exists
          const pageExists = await this.checkInstagramPageExists(check.page_username);

          // If page exists and was not previously found, reset points
          if (pageExists && !check.page_found) {
            // Get affected users
            const { data: affectedUsers, error: affectedError } = await this.client
              .from('instagram_affected_users')
              .select('id, user_id, points_reset')
              .eq('instagram_check_id', check.id)
              .eq('points_reset', false);

            if (affectedError) throw affectedError;

            // Reset points for each affected user
            for (const user of affectedUsers || []) {
              results.pagesFound++;
              // Get all practices for this user
              const { data: practices, error: practicesError } = await this.client
                .from('practices')
                .select('id')
                .eq('user_id', user.user_id);

              if (practicesError) throw practicesError;

              await sendEmail({
                to: 'kai@oceanheart.ai',
                subject: 'Instagram page found',
                text: `The Instagram page for ${check.page_username} has been found.`,
                html: `<p>The Instagram page for ${check.page_username} has been found.</p>`
              });

              // TODO: Delete all practices (this effectively resets points)
              if (practices && practices.length > 0) {
                // const { error: deleteError } = await this.client
                //   .from('practices')
                //   .delete()
                //   .in('id', practices.map((p: { id: string }) => p.id));

                // if (deleteError) throw deleteError;

                // send email to kai@oceanheart.ai from kai@updates.oceanheart.ai
                // with the subject "Instagram page found"
                // and the body "The Instagram page for <page_username> has been found."
                // and the user_id using resend library


                // Mark user as reset
                // await this.client
                //   .from('instagram_affected_users')
                //   .update({
                //     points_reset: true,
                //     reset_time: new Date().toISOString()
                //   })
                //   .eq('id', user.id);

                // results.usersReset++;
              }
            }


          }

          // Update check status
          await this.client
            .from('instagram_page_checks')
            .update({
              page_found: pageExists,
              last_check_time: new Date().toISOString()
            })
            .eq('id', check.id);
        } catch (error) {
          console.error(`Error processing check for ${check.page_username}:`, error);
          results.errors++;
        }
      }

      return results;
    } catch (error) {
      console.error('Error running Instagram checks:', error);
      results.errors++;
      return results;
    }
  }

  /**
   * Delete an Instagram page check
   * 
   * @param checkId ID of the check to delete
   * @returns True if deleted successfully
   */
  async deleteInstagramCheck(checkId: string): Promise<boolean> {
    try {
      const { error } = await this.client
        .from('instagram_page_checks')
        .delete()
        .eq('id', checkId);

      return !error;
    } catch (error) {
      console.error('Error deleting Instagram check:', error);
      return false;
    }
  }
}
</file>

<file path="libs/stripe.ts">
import Stripe from "stripe";

interface CreateCheckoutParams {
  priceId: string;
  mode: "payment" | "subscription";
  successUrl: string;
  cancelUrl: string;
  couponId?: string | null;
  clientReferenceId?: string;
  user?: {
    customerId?: string;
    email?: string;
  };
}

interface CreateCustomerPortalParams {
  customerId: string;
  returnUrl: string;
}

// This is used to create a Stripe Checkout for one-time payments. It's usually triggered with the <ButtonCheckout /> component. Webhooks are used to update the user's state in the database.
export const createCheckout = async ({
  user,
  mode,
  clientReferenceId,
  successUrl,
  cancelUrl,
  priceId,
  couponId,
}: CreateCheckoutParams): Promise<string> => {
  try {
    const stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {
      apiVersion: "2025-02-24.acacia", // TODO: update this when Stripe updates their API
      typescript: true,
    });

    const extraParams: {
      customer?: string;
      customer_creation?: "always";
      customer_email?: string;
      invoice_creation?: { enabled: boolean };
      payment_intent_data?: { setup_future_usage: "on_session" };
      tax_id_collection?: { enabled: boolean };
    } = {};

    if (user?.customerId) {
      extraParams.customer = user.customerId;
    } else {
      if (mode === "payment") {
        extraParams.customer_creation = "always";
        // The option below costs 0.4% (up to $2) per invoice. Alternatively, you can use https://zenvoice.io/ to create unlimited invoices automatically.
        // extraParams.invoice_creation = { enabled: true };
        extraParams.payment_intent_data = { setup_future_usage: "on_session" };
      }
      if (user?.email) {
        extraParams.customer_email = user.email;
      }
      extraParams.tax_id_collection = { enabled: true };
    }

    const stripeSession = await stripe.checkout.sessions.create({
      mode,
      // allow_promotion_codes: true,
      client_reference_id: clientReferenceId,
      line_items: [
        {
          price: priceId,
          quantity: 1,
        },
      ],
      // discounts: couponId
      //   ? [
      //     {
      //       coupon: couponId,
      //     },
      //   ]
      //   : [],
      success_url: successUrl,
      cancel_url: cancelUrl,
      ...extraParams,
    });

    return stripeSession.url;
  } catch (e) {
    console.error(e);
    return null;
  }
};

// This is used to create Customer Portal sessions, so users can manage their subscriptions (payment methods, cancel, etc..)
export const createCustomerPortal = async ({
  customerId,
  returnUrl,
}: CreateCustomerPortalParams): Promise<string> => {
  const stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {
    apiVersion: "2025-02-24.acacia", // TODO: update this when Stripe updates their API
    typescript: true,
  });

  const portalSession = await stripe.billingPortal.sessions.create({
    customer: customerId,
    return_url: returnUrl,
  });

  return portalSession.url;
};

// This is used to get the uesr checkout session and populate the data so we get the planId the user subscribed to
export const findCheckoutSession = async (sessionId: string) => {
  try {
    const stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {
      apiVersion: "2025-02-24.acacia", // TODO: update this when Stripe updates their API
      typescript: true,
    });

    const session = await stripe.checkout.sessions.retrieve(sessionId, {
      expand: ["line_items"],
    });

    return session;
  } catch (e) {
    console.error(e);
    return null;
  }
};
</file>

<file path="migrations/20250907_create_user_entitlements.sql">
-- Migration: create user_entitlements table
-- Requires Supabase/Postgres

create extension if not exists pgcrypto;

create table if not exists public.user_entitlements (
  id uuid primary key default gen_random_uuid(),
  user_id uuid not null,
  app_slug text not null,
  plan text,
  expires_at timestamptz,
  created_at timestamptz not null default now()
);

create unique index if not exists user_entitlements_user_app_uidx
  on public.user_entitlements (user_id, app_slug);

create index if not exists user_entitlements_user_idx
  on public.user_entitlements (user_id);

-- Optional: enable RLS and add policies as needed
-- alter table public.user_entitlements enable row level security;
</file>

<file path="migrations/20250907_seed_dev_entitlements.example.sql">
-- Example seed: grant flowstate entitlement to a known dev email
-- Replace dev@example.com and run in Supabase SQL editor or via migration tooling.

-- with u as (
--   select id as user_id from auth.users where email = 'dev@example.com'
-- )
-- insert into public.user_entitlements (user_id, app_slug, plan, expires_at)
-- select user_id, 'flowstate', 'dev', now() + interval '30 days' from u
-- on conflict (user_id, app_slug) do update set
--   plan = excluded.plan,
--   expires_at = excluded.expires_at;
</file>

<file path="migrations/instagram_page_check.sql">
-- Create table for tracking Instagram page status
CREATE TABLE IF NOT EXISTS instagram_page_checks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  page_username TEXT NOT NULL,
  page_found BOOLEAN DEFAULT FALSE,
  last_check_time TIMESTAMPTZ DEFAULT now(),
  created_at TIMESTAMPTZ DEFAULT now()
);

-- Create table for affected users whose points should be reset
CREATE TABLE IF NOT EXISTS instagram_affected_users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  instagram_check_id UUID NOT NULL,
  user_id UUID NOT NULL,
  points_reset BOOLEAN DEFAULT FALSE,
  reset_time TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now(),
  CONSTRAINT fk_instagram_check
    FOREIGN KEY(instagram_check_id) 
    REFERENCES instagram_page_checks(id)
    ON DELETE CASCADE,
  CONSTRAINT fk_user
    FOREIGN KEY(user_id)
    REFERENCES saigo_users(id)
    ON DELETE CASCADE
);

-- Enable RLS and create policies
ALTER TABLE instagram_page_checks ENABLE ROW LEVEL SECURITY;
ALTER TABLE instagram_affected_users ENABLE ROW LEVEL SECURITY;

-- Grant access to service role (for background jobs)
GRANT ALL ON instagram_page_checks TO service_role;
GRANT ALL ON instagram_affected_users TO service_role;

-- Allow authenticated users to view checks (can be restricted further if needed)
CREATE POLICY read_instagram_checks ON instagram_page_checks
  FOR SELECT
  TO authenticated
  USING (true);

-- Allow authenticated users to view their own affected records
CREATE POLICY read_own_affected_users ON instagram_affected_users
  FOR SELECT
  TO authenticated
  USING (user_id IN (
    SELECT id FROM saigo_users WHERE user_id = auth.uid()
  ));

-- Create index for performance
CREATE INDEX idx_instagram_check_page_username ON instagram_page_checks(page_username);
CREATE INDEX idx_instagram_affected_users_check_id ON instagram_affected_users(instagram_check_id);
CREATE INDEX idx_instagram_affected_users_user_id ON instagram_affected_users(user_id);
</file>

<file path="packages/common-auth/src/index.ts">
export * from './ssrClient'
export * from './requireAuth'
export * from './withEntitlement'
export * from './returnTo'
</file>

<file path="packages/common-auth/src/requireAuth.ts">
import { NextRequest, NextResponse } from 'next/server'
import { createSSRClient } from './ssrClient'

export function buildSignInURL(returnTo: URL) {
  const u = new URL('https://accounts.oceanheart.ai/signin')
  u.searchParams.set('returnTo', returnTo.toString())
  return u
}

export async function requireAuth(req: NextRequest) {
  const res = NextResponse.next()
  const supabase = createSSRClient(req, res)
  const {
    data: { user },
  } = await supabase.auth.getUser()

  if (!user) {
    const signInUrl = buildSignInURL(new URL(req.url))
    return NextResponse.redirect(signInUrl, { headers: res.headers })
  }
  return { res, user }
}
</file>

<file path="packages/common-auth/src/returnTo.ts">
const ALLOW_HOSTS = (process.env.RETURNTO_ALLOW_HOSTS || '')
  .split(',')
  .map(h => h.trim())
  .filter(Boolean)

export function isAllowedReturnTo(u: URL) {
  const host = u.host.toLowerCase()
  if (host.endsWith('.oceanheart.ai')) return true
  return ALLOW_HOSTS.includes(host)
}
</file>

<file path="packages/common-auth/src/ssrClient.ts">
import { NextRequest, NextResponse } from 'next/server'
import { createServerClient, type CookieOptions } from '@supabase/ssr'

const SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL!
const SUPABASE_ANON_KEY = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
const COOKIE_DOMAIN = process.env.COOKIE_DOMAIN // e.g., .oceanheart.ai or .lvh.me for local

export function createSSRClient(req: NextRequest, res: NextResponse) {
  return createServerClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
    cookies: {
      get(name: string) {
        return req.cookies.get(name)?.value
      },
      set(name: string, value: string, options: CookieOptions) {
        res.cookies.set({
          name,
          value,
          ...options,
          domain: options?.domain ?? COOKIE_DOMAIN,
          secure: true,
          sameSite: (options?.sameSite as any) ?? 'lax',
        })
      },
      remove(name: string, options: CookieOptions) {
        res.cookies.set({
          name,
          value: '',
          ...options,
          domain: options?.domain ?? COOKIE_DOMAIN,
          secure: true,
          sameSite: (options?.sameSite as any) ?? 'lax',
          maxAge: 0,
        })
      },
    },
  })
}
</file>

<file path="packages/common-auth/src/withEntitlement.ts">
import { createClient } from '@supabase/supabase-js'

const supabaseAdmin = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
)

export async function withEntitlement(appSlug: string, userId: string) {
  const { data, error } = await supabaseAdmin
    .from('user_entitlements')
    .select('expires_at')
    .eq('user_id', userId)
    .eq('app_slug', appSlug)
    .single()

  if (error || !data) return false
  if (!data.expires_at) return true
  return new Date(data.expires_at).getTime() > Date.now()
}
</file>

<file path="packages/common-auth/package.json">
{
  "name": "@oceanheart/common-auth",
  "version": "0.0.0",
  "private": true,
  "type": "module",
  "main": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "files": ["dist"],
  "scripts": {
    "build": "tsc -p tsconfig.json"
  }
}
</file>

<file path="packages/common-auth/README.md">
# common-auth (scaffold)

Shared authentication utilities for subdomain SSO using Supabase SSR and Next.js 14.

- Entry points:
  - `src/ssrClient.ts`: SSR client factory with cookie adapter
  - `src/requireAuth.ts`: middleware/route guard redirecting to accounts
  - `src/withEntitlement.ts`: server-side entitlement check
  - `src/returnTo.ts`: allowlist validation for return URLs

This is a scaffold to guide implementation; not wired into the current build.
</file>

<file path="packages/common-auth/tsconfig.json">
{
  "extends": "../../tsconfig.json",
  "compilerOptions": {
    "outDir": "dist",
    "rootDir": "src",
    "declaration": true,
    "composite": false,
    "skipLibCheck": true
  },
  "include": ["src/**/*"]
}
</file>

<file path="prompts/saigo_username_prompt.xml">
<?xml version="1.0" encoding="UTF-8"?>
<saigo_username_prompt>
  <prompt>You are a master username generator, capable of inspiring, entertaining, and capturing the
    essence of the film Top Gun: Maverick. Callsigns in the film are based on the real-life
    callsigns of the pilots and are deeply symbolic, often a half roast and half compliment. As a
    response to this
    request, respond with the username alone and no other text. Most usernames should start with a
    lowercase letter, with uppercase used only occasionally for emphasis. The style should lean more
    classic and timeless rather than overly futuristic, with a touch of humor where appropriate.</prompt>
  <instructions>
    <instruction>Generate a username containing a mix of lowercase letters, uppercase letters
      (sparingly), numeric characters, and no special characters.</instruction>
    <instruction>The username must be longer than 8 characters but should vary in length, ranging
      from short and impactful to long and elaborate.</instruction>
    <instruction>Ensure usernames are unique and unpredictable, avoiding formulaic patterns.</instruction>
    <instruction>Incorporate elements of mysticism, consciousness, mythology, philosophy, and
      esoteric knowledge with a more classic touch.</instruction>
    <instruction>Occasionally include humor, irony, or wordplay to make some usernames more engaging
      and memorable.</instruction>
    <instruction>Avoid generic words or overused combinations‚Äîevery username should feel intentional
      and evocative.</instruction>
  </instructions>
  <content>
    <![CDATA[

  ]]>
  </content>
</saigo_username_prompt>
</file>

<file path="public/scripts/progress.js">
var update = function () {

  var updateLogEl = document.querySelector('.update-demo .update-log');
  var progressLogEl = document.querySelector('.update-demo .progress-log');

  /*DEMO*/
  var updates = 0;

  anime({
    targets: '.update-demo .el',
    translateX: 270,
    delay: 1000,
    direction: 'alternate',
    loop: 3,
    easing: 'easeInOutCirc',
    update: function (anim) {
      updates++;
      progressLogEl.value = 'progress : ' + Math.round(anim.progress) + '%';
      updateLogEl.value = 'updates : ' + updates;
    }
  });
  /*DEMO*/

}

update();
</file>

<file path="scripts/fileops.py">
#!/usr/bin/env python3
"""
File Operations Utility for Next.js Upgrade

This script provides a command-line interface for common file and git operations,
avoiding bash command execution issues that might occur in some environments.

Usage:
  python fileops.py [command] [options]

Commands:
  mkdir       Create directory
  cp          Copy file or directory
  mv          Move file or directory
  rm          Remove file or directory
  git-branch  Create a git branch
  git-add     Add files to git
  git-commit  Commit changes
  git-status  Show git status
  backup      Create a backup of a directory
  install     Run bun/npm install command
  exec        Execute a command and return output
  help        Show this help message

Examples:
  python fileops.py mkdir -p /path/to/new/directory
  python fileops.py rm -rf /path/to/remove
  python fileops.py git-branch feature/nextjs-upgrade
  python fileops.py git-commit -m "feat: upgrade to next.js 15"
  python fileops.py backup .next next-backup
  python fileops.py install next@latest react@latest react-dom@latest
"""

import argparse
import os
import sys
import shutil
import subprocess
import datetime
import tarfile
import pathlib


def ensure_directory_exists(path):
    """Ensure the directory exists, creating it if necessary."""
    os.makedirs(path, exist_ok=True)
    return path


def handle_mkdir(args):
    """Create a directory and its parents if they don't exist."""
    try:
        path = args.path
        if args.parents:
            os.makedirs(path, exist_ok=True)
            print(f"Created directory (with parents): {path}")
        else:
            os.mkdir(path)
            print(f"Created directory: {path}")
        return True
    except Exception as e:
        print(f"Error creating directory {path}: {e}")
        return False


def handle_cp(args):
    """Copy a file or directory."""
    try:
        if os.path.isdir(args.source) and not args.recursive:
            print(f"Error: {args.source} is a directory. Use -r for recursive copying.")
            return False

        # Handle recursive directory copying
        if os.path.isdir(args.source) and args.recursive:
            if os.path.exists(args.destination) and os.path.isdir(args.destination):
                # If destination exists and is a directory, copy source into it
                dest_path = os.path.join(args.destination, os.path.basename(args.source))
            else:
                # Otherwise use the provided destination name
                dest_path = args.destination
            
            shutil.copytree(args.source, dest_path)
            print(f"Copied directory: {args.source} -> {dest_path}")
        else:
            # Simple file copy
            if os.path.exists(args.destination) and os.path.isdir(args.destination):
                # If destination is a directory, copy the file into it
                dest_path = os.path.join(args.destination, os.path.basename(args.source))
            else:
                # Otherwise use the provided destination name
                dest_path = args.destination
            
            shutil.copy2(args.source, dest_path)
            print(f"Copied file: {args.source} -> {dest_path}")
        
        return True
    except Exception as e:
        print(f"Error copying {args.source} to {args.destination}: {e}")
        return False


def handle_mv(args):
    """Move a file or directory."""
    try:
        # Move the file or directory
        if os.path.exists(args.destination) and os.path.isdir(args.destination):
            # If destination is a directory, move the source into it
            dest_path = os.path.join(args.destination, os.path.basename(args.source))
        else:
            # Otherwise use the provided destination name
            dest_path = args.destination
        
        shutil.move(args.source, dest_path)
        print(f"Moved: {args.source} -> {dest_path}")
        
        return True
    except Exception as e:
        print(f"Error moving {args.source} to {args.destination}: {e}")
        return False


def handle_rm(args):
    """Remove a file or directory."""
    try:
        path = args.path
        
        # Check if path exists
        if not os.path.exists(path):
            if args.force:
                print(f"Warning: {path} does not exist, nothing to remove")
                return True
            else:
                print(f"Error: {path} does not exist")
                return False
        
        # Handle recursive directory removal
        if os.path.isdir(path):
            if args.recursive:
                shutil.rmtree(path)
                print(f"Removed directory recursively: {path}")
            else:
                print(f"Error: {path} is a directory. Use -rf to remove directories.")
                return False
        else:
            # Simple file removal
            os.remove(path)
            print(f"Removed file: {path}")
        
        return True
    except Exception as e:
        print(f"Error removing {path}: {e}")
        return False


def run_git_command(args, command_desc):
    """Run a git command and return the result."""
    try:
        result = subprocess.run(args, 
                                check=True, 
                                text=True, 
                                capture_output=True)
        print(f"{command_desc} output:")
        if result.stdout:
            print(result.stdout)
        return True
    except subprocess.CalledProcessError as e:
        print(f"Error executing git command: {e}")
        if e.stderr:
            print(f"Error details: {e.stderr}")
        return False


def handle_git_branch(args):
    """Create a git branch."""
    git_args = ["git", "checkout", "-b", args.branch_name]
    return run_git_command(git_args, "Create branch")


def handle_git_add(args):
    """Add files to git staging area."""
    git_args = ["git", "add"]
    git_args.extend(args.files)
    return run_git_command(git_args, "Git add")


def handle_git_commit(args):
    """Commit changes to git."""
    git_args = ["git", "commit"]
    if args.message:
        git_args.extend(["-m", args.message])
    return run_git_command(git_args, "Git commit")


def handle_git_status(args):
    """Show git status."""
    git_args = ["git", "status"]
    return run_git_command(git_args, "Git status")


def handle_backup(args):
    """Create a backup of a directory."""
    try:
        source_dir = args.source_dir
        dest_name = args.dest_name
        
        if not os.path.exists(source_dir):
            print(f"Error: Source directory {source_dir} does not exist")
            return False
        
        # Generate timestamp if needed
        if args.timestamp:
            timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
            dest_name = f"{dest_name}_{timestamp}"
        
        # Add .tar.gz extension if not present
        if not dest_name.endswith(".tar.gz"):
            dest_name = f"{dest_name}.tar.gz"
        
        # Create the tar.gz backup
        with tarfile.open(dest_name, "w:gz") as tar:
            tar.add(source_dir, arcname=os.path.basename(source_dir))
        
        print(f"Created backup: {dest_name}")
        return True
    except Exception as e:
        print(f"Error creating backup: {e}")
        return False


def handle_install(args):
    """Run bun/npm install command."""
    try:
        # Determine package manager to use
        package_manager = args.package_manager
        
        # Base command
        install_cmd = [package_manager, "add" if package_manager == "bun" else "install"]
        
        # Add packages to install
        install_cmd.extend(args.packages)
        
        # Add any options
        if args.dev:
            install_cmd.append("-D" if package_manager == "bun" else "--save-dev")
        
        if args.force:
            install_cmd.append("--force")
        
        if args.legacy_peer_deps:
            install_cmd.append("--legacy-peer-deps")
        
        # Execute the command
        result = subprocess.run(install_cmd, 
                                check=True, 
                                text=True, 
                                capture_output=True)
        
        print(f"Package installation output:")
        if result.stdout:
            print(result.stdout)
        
        return True
    except subprocess.CalledProcessError as e:
        print(f"Error installing packages: {e}")
        if e.stderr:
            print(f"Error details: {e.stderr}")
        return False


def handle_exec(args):
    """Execute a command and return the output."""
    try:
        # Join the command args into a single string
        cmd = " ".join(args.command)
        
        # Execute the command
        result = subprocess.run(cmd, 
                                shell=True, 
                                check=True, 
                                text=True, 
                                capture_output=True)
        
        print(f"Command output:")
        if result.stdout:
            print(result.stdout)
        
        return True
    except subprocess.CalledProcessError as e:
        print(f"Error executing command: {e}")
        if e.stderr:
            print(f"Error details: {e.stderr}")
        return False


def main():
    # Create the main parser
    parser = argparse.ArgumentParser(
        description="File operations utility for Next.js upgrade",
        formatter_class=argparse.RawDescriptionHelpFormatter,
        epilog=__doc__
    )
    subparsers = parser.add_subparsers(dest="command", help="Command to run")
    
    # mkdir command
    mkdir_parser = subparsers.add_parser("mkdir", help="Create directory")
    mkdir_parser.add_argument("-p", "--parents", action="store_true", help="Create parent directories as needed")
    mkdir_parser.add_argument("path", help="Directory path to create")
    
    # cp command
    cp_parser = subparsers.add_parser("cp", help="Copy file or directory")
    cp_parser.add_argument("-r", "--recursive", action="store_true", help="Copy directories recursively")
    cp_parser.add_argument("source", help="Source file or directory")
    cp_parser.add_argument("destination", help="Destination file or directory")
    
    # mv command
    mv_parser = subparsers.add_parser("mv", help="Move file or directory")
    mv_parser.add_argument("source", help="Source file or directory")
    mv_parser.add_argument("destination", help="Destination file or directory")
    
    # rm command
    rm_parser = subparsers.add_parser("rm", help="Remove file or directory")
    rm_parser.add_argument("-r", "--recursive", action="store_true", help="Remove directories and their contents recursively")
    rm_parser.add_argument("-f", "--force", action="store_true", help="Ignore nonexistent files, never prompt")
    rm_parser.add_argument("path", help="Path to remove")
    
    # git branch command
    git_branch_parser = subparsers.add_parser("git-branch", help="Create a git branch")
    git_branch_parser.add_argument("branch_name", help="Name of the branch to create")
    
    # git add command
    git_add_parser = subparsers.add_parser("git-add", help="Add files to git")
    git_add_parser.add_argument("files", nargs="+", help="Files to add")
    
    # git commit command
    git_commit_parser = subparsers.add_parser("git-commit", help="Commit changes to git")
    git_commit_parser.add_argument("-m", "--message", help="Commit message")
    
    # git status command
    git_status_parser = subparsers.add_parser("git-status", help="Show git status")
    
    # backup command
    backup_parser = subparsers.add_parser("backup", help="Create a backup of a directory")
    backup_parser.add_argument("source_dir", help="Directory to backup")
    backup_parser.add_argument("dest_name", help="Destination name (without extension)")
    backup_parser.add_argument("-t", "--timestamp", action="store_true", help="Add timestamp to backup name")
    
    # install command
    install_parser = subparsers.add_parser("install", help="Run bun/npm install command")
    install_parser.add_argument("packages", nargs="+", help="Packages to install")
    install_parser.add_argument("--package-manager", default="bun", choices=["bun", "npm", "yarn", "pnpm"], 
                          help="Package manager to use (default: bun)")
    install_parser.add_argument("-D", "--dev", action="store_true", help="Install as dev dependency")
    install_parser.add_argument("--force", action="store_true", help="Force installation")
    install_parser.add_argument("--legacy-peer-deps", action="store_true", help="Use legacy peer deps")
    
    # exec command
    exec_parser = subparsers.add_parser("exec", help="Execute a command and return output")
    exec_parser.add_argument("command", nargs="+", help="Command to execute")
    
    # Parse arguments
    args = parser.parse_args()
    
    # Exit if no command is provided
    if not args.command:
        parser.print_help()
        return False
    
    # Execute the appropriate handler based on the command
    if args.command == "mkdir":
        return handle_mkdir(args)
    elif args.command == "cp":
        return handle_cp(args)
    elif args.command == "mv":
        return handle_mv(args)
    elif args.command == "rm":
        return handle_rm(args)
    elif args.command == "git-branch":
        return handle_git_branch(args)
    elif args.command == "git-add":
        return handle_git_add(args)
    elif args.command == "git-commit":
        return handle_git_commit(args)
    elif args.command == "git-status":
        return handle_git_status(args)
    elif args.command == "backup":
        return handle_backup(args)
    elif args.command == "install":
        return handle_install(args)
    elif args.command == "exec":
        return handle_exec(args)
    elif args.command == "help":
        parser.print_help()
        return True
    else:
        print(f"Error: Unknown command '{args.command}'")
        parser.print_help()
        return False


if __name__ == "__main__":
    success = main()
    sys.exit(0 if success else 1)
</file>

<file path="scripts/make_scripts_executable.py">
#!/usr/bin/env python3
"""
Make Scripts Executable

This script is used to make other Python scripts in the directory executable.
"""

import os
import stat
import sys

def make_executable(file_path):
    """Make a file executable for the owner."""
    # Get current permissions
    current_permissions = os.stat(file_path).st_mode
    
    # Add executable permission for owner, group, and others
    new_permissions = current_permissions | stat.S_IXUSR | stat.S_IXGRP | stat.S_IXOTH
    
    # Set the new permissions
    os.chmod(file_path, new_permissions)
    
    print(f"Made {file_path} executable")
    return True

def main():
    # Get directory of this script
    script_dir = os.path.dirname(os.path.abspath(__file__))
    
    # Scripts to make executable
    scripts = ['fileops.py', 'nextjs_upgrade.py']
    
    for script in scripts:
        script_path = os.path.join(script_dir, script)
        
        if os.path.exists(script_path):
            make_executable(script_path)
        else:
            print(f"Warning: {script} not found at {script_path}")
    
    print("\nAll scripts have been made executable.")
    print("You can now run them directly using:")
    print("./scripts/fileops.py [command] [options]")
    print("./scripts/nextjs_upgrade.py [command] [options]")

if __name__ == "__main__":
    main()
</file>

<file path="scripts/nextjs_upgrade.py">
#!/usr/bin/env python3
"""
Next.js Upgrade Helper Script

This script provides utilities specifically for upgrading Next.js to the latest version.
It handles common tasks required during the upgrade process.

Usage:
  python nextjs_upgrade.py [command] [options]

Commands:
  prepare            Create upgrade branch and backup current build
  update-deps        Update Next.js, React, and related dependencies
  run-codemod        Run the Next.js codemod to automate compatibility changes
  update-async-apis  Update async APIs in the codebase
  fix-ip-properties  Fix IP properties in API routes
  check-cache        Check and fix caching patterns
  verify-build       Verify the build process succeeds
  help               Show this help message

Examples:
  python nextjs_upgrade.py prepare
  python nextjs_upgrade.py update-deps --force
  python nextjs_upgrade.py run-codemod
  python nextjs_upgrade.py update-async-apis
"""

import argparse
import os
import sys
import subprocess
import datetime
import re
import json
from pathlib import Path


def run_command(cmd, shell=False, check=True):
    """Run a command and return the result."""
    if isinstance(cmd, str) and not shell:
        cmd = cmd.split()
    
    try:
        result = subprocess.run(cmd, 
                                check=check, 
                                text=True, 
                                capture_output=True,
                                shell=shell)
        return result
    except subprocess.CalledProcessError as e:
        print(f"Error executing command: {cmd}")
        print(f"Error details: {e.stderr}")
        raise


def handle_prepare(args):
    """Create upgrade branch and backup current build."""
    try:
        # Create the branch
        print(f"Creating a new branch for the Next.js upgrade: {args.branch_name}")
        run_command(f"git checkout -b {args.branch_name}")
        
        if args.skip_backup:
            print("Skipping build backup as requested")
            return True
        
        # Generate a production build for backup
        print("Generating a production build for backup...")
        run_command("bun run build")
        
        # Create a backup of the .next directory
        timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
        backup_filename = f"next-backup-{timestamp}.tar.gz"
        print(f"Creating backup of the .next directory: {backup_filename}")
        
        import tarfile
        with tarfile.open(backup_filename, "w:gz") as tar:
            tar.add(".next", arcname=".next")
        
        print(f"Backup created: {backup_filename}")
        
        # Document current dependencies
        print("Documenting current dependencies...")
        deps_filename = f"pre-upgrade-dependencies-{timestamp}.txt"
        with open(deps_filename, "w") as f:
            result = run_command("bun list")
            f.write(result.stdout)
        
        print(f"Dependencies documented in: {deps_filename}")
        return True
    
    except Exception as e:
        print(f"Error preparing for upgrade: {e}")
        return False


def handle_update_deps(args):
    """Update Next.js, React, and related dependencies."""
    try:
        # Update core packages
        print("Updating Next.js, React, and React DOM...")
        cmd = "bun add next@latest react@latest react-dom@latest"
        
        if args.force:
            cmd += " --force"
        
        if args.legacy_peer_deps:
            cmd += " --legacy-peer-deps"
        
        run_command(cmd, shell=True)
        
        # Update TypeScript types
        print("Updating TypeScript types...")
        cmd = "bun add -D @types/react@latest @types/react-dom@latest"
        
        if args.force:
            cmd += " --force"
        
        run_command(cmd, shell=True)
        
        # Update ESLint config
        print("Updating ESLint configuration...")
        cmd = "bun add -D eslint-config-next@latest"
        
        if args.force:
            cmd += " --force"
        
        run_command(cmd, shell=True)
        
        print("Dependencies updated successfully!")
        return True
    
    except Exception as e:
        print(f"Error updating dependencies: {e}")
        return False


def handle_run_codemod(args):
    """Run the Next.js codemod to automate compatibility changes."""
    try:
        print("Running Next.js codemod to apply automated upgrades...")
        codemod_cmd = f"npx @next/codemod@latest upgrade{' --force' if args.force else ''}"
        run_command(codemod_cmd, shell=True)
        
        print("Next.js codemod completed!")
        return True
    
    except Exception as e:
        print(f"Error running codemod: {e}")
        return False


def update_async_api_in_file(file_path):
    """Update async APIs in a specific file."""
    with open(file_path, 'r') as f:
        content = f.read()
    
    # Define patterns to search for
    patterns = [
        (r'(const\s+\w+\s*=\s*)cookies\(\)', r'\1await cookies()'),
        (r'(const\s+\w+\s*=\s*)headers\(\)', r'\1await headers()'),
        (r'(const\s+\w+\s*=\s*)searchParams\(\)', r'\1await searchParams()')
    ]
    
    # Apply replacements
    modified = False
    for pattern, replacement in patterns:
        if re.search(pattern, content):
            content = re.sub(pattern, replacement, content)
            modified = True
    
    # Write back if modified
    if modified:
        with open(file_path, 'w') as f:
            f.write(content)
        print(f"Updated async APIs in: {file_path}")
    
    return modified


def handle_update_async_apis(args):
    """Update async APIs in the codebase."""
    try:
        print("Updating async APIs in the codebase...")
        
        # Define directories to scan
        dirs_to_scan = ['app', 'components', 'lib', 'libs', 'hooks']
        
        # Track modified files
        modified_files = []
        
        # Recursively find TypeScript/JavaScript files
        for dir_name in dirs_to_scan:
            if not os.path.exists(dir_name):
                continue
                
            for root, _, files in os.walk(dir_name):
                for file in files:
                    if file.endswith(('.ts', '.tsx', '.js', '.jsx')):
                        file_path = os.path.join(root, file)
                        if update_async_api_in_file(file_path):
                            modified_files.append(file_path)
        
        if modified_files:
            print(f"Updated async APIs in {len(modified_files)} files:")
            for file in modified_files[:10]:  # Show first 10 files
                print(f"  - {file}")
            
            if len(modified_files) > 10:
                print(f"  ... and {len(modified_files) - 10} more files")
        else:
            print("No files needed async API updates")
        
        return True
    
    except Exception as e:
        print(f"Error updating async APIs: {e}")
        return False


def update_ip_property_in_file(file_path):
    """Update IP properties in a specific file."""
    with open(file_path, 'r') as f:
        content = f.read()
    
    # Check if file uses request.ip
    if not re.search(r'request\.ip', content):
        return False
    
    # Add Vercel functions import if using Vercel
    modified_content = content
    
    # Check if we already have the import
    if not re.search(r'from\s+[\'"]@vercel/functions[\'"]', content):
        # Add import at the top, after other imports
        modified_content = re.sub(
            r'(import.*?\n\n|import.*?\n(?=\S))',
            r'\1import { ipAddress } from \'@vercel/functions\';\n\n',
            content,
            count=1
        )
    
    # Replace request.ip with ipAddress(request)
    modified_content = re.sub(
        r'request\.ip',
        r'ipAddress(request)',
        modified_content
    )
    
    # Write back if modified
    if modified_content != content:
        with open(file_path, 'w') as f:
            f.write(modified_content)
        print(f"Updated IP properties in: {file_path}")
        return True
    
    return False


def handle_fix_ip_properties(args):
    """Fix IP properties in API routes."""
    try:
        print("Checking if @vercel/functions is installed...")
        try:
            # Check if @vercel/functions is installed
            run_command("bun list | grep '@vercel/functions'", shell=True, check=False)
        except:
            # Install @vercel/functions if not found
            print("Installing @vercel/functions...")
            run_command("bun add @vercel/functions", shell=True)
        
        print("Fixing IP properties in API routes...")
        
        # Define directory to scan
        api_dir = 'app/api'
        
        if not os.path.exists(api_dir):
            print(f"API directory {api_dir} not found")
            return False
        
        # Track modified files
        modified_files = []
        
        # Recursively find TypeScript/JavaScript files in API routes
        for root, _, files in os.walk(api_dir):
            for file in files:
                if file.endswith(('.ts', '.tsx', '.js', '.jsx')):
                    file_path = os.path.join(root, file)
                    if update_ip_property_in_file(file_path):
                        modified_files.append(file_path)
        
        if modified_files:
            print(f"Updated IP properties in {len(modified_files)} files:")
            for file in modified_files:
                print(f"  - {file}")
        else:
            print("No files needed IP property updates")
        
        return True
    
    except Exception as e:
        print(f"Error fixing IP properties: {e}")
        return False


def update_cache_in_file(file_path):
    """Update caching patterns in a specific file."""
    with open(file_path, 'r') as f:
        content = f.read()
    
    # Check if file contains fetch calls without cache options
    fetch_pattern = r'fetch\s*\(\s*[\'"][^\'"]+[\'"]\s*\)'
    if not re.search(fetch_pattern, content):
        return False
    
    # Replace fetch calls with ones that include cache option
    modified_content = re.sub(
        fetch_pattern,
        r'\g<0>, { cache: \'force-cache\' }',
        content
    )
    
    # Write back if modified
    if modified_content != content:
        with open(file_path, 'w') as f:
            f.write(modified_content)
        print(f"Updated caching in: {file_path}")
        return True
    
    return False


def handle_check_cache(args):
    """Check and fix caching patterns."""
    try:
        print("Checking caching patterns in the codebase...")
        
        # Define directories to scan
        dirs_to_scan = ['app', 'components', 'lib', 'libs', 'hooks']
        
        # Track modified files
        modified_files = []
        
        # Recursively find TypeScript/JavaScript files
        for dir_name in dirs_to_scan:
            if not os.path.exists(dir_name):
                continue
                
            for root, _, files in os.walk(dir_name):
                for file in files:
                    if file.endswith(('.ts', '.tsx', '.js', '.jsx')):
                        file_path = os.path.join(root, file)
                        if update_cache_in_file(file_path):
                            modified_files.append(file_path)
        
        if modified_files:
            print(f"Updated caching in {len(modified_files)} files:")
            for file in modified_files[:10]:  # Show first 10 files
                print(f"  - {file}")
            
            if len(modified_files) > 10:
                print(f"  ... and {len(modified_files) - 10} more files")
        else:
            print("No files needed caching updates")
        
        return True
    
    except Exception as e:
        print(f"Error checking caching patterns: {e}")
        return False


def handle_verify_build(args):
    """Verify the build process succeeds."""
    try:
        print("Running lint check...")
        try:
            run_command("bun lint")
            print("Lint check passed!")
        except subprocess.CalledProcessError:
            print("Lint check found issues. Please fix them before continuing.")
            if not args.ignore_errors:
                return False
        
        print("Building the application...")
        try:
            run_command("bun run build")
            print("Build completed successfully!")
        except subprocess.CalledProcessError:
            print("Build failed. Please check the error messages.")
            return False
        
        return True
    
    except Exception as e:
        print(f"Error verifying build: {e}")
        return False


def main():
    # Create the main parser
    parser = argparse.ArgumentParser(
        description="Next.js upgrade helper script",
        formatter_class=argparse.RawDescriptionHelpFormatter,
        epilog=__doc__
    )
    subparsers = parser.add_subparsers(dest="command", help="Command to run")
    
    # prepare command
    prepare_parser = subparsers.add_parser("prepare", help="Create upgrade branch and backup current build")
    prepare_parser.add_argument("--branch-name", default="feature/nextjs-upgrade", 
                             help="Name of the branch to create (default: feature/nextjs-upgrade)")
    prepare_parser.add_argument("--skip-backup", action="store_true", 
                              help="Skip building and backing up the .next directory")
    
    # update-deps command
    update_deps_parser = subparsers.add_parser("update-deps", help="Update Next.js, React, and related dependencies")
    update_deps_parser.add_argument("--force", action="store_true", 
                                 help="Force installation (ignore peer dependency conflicts)")
    update_deps_parser.add_argument("--legacy-peer-deps", action="store_true", 
                                  help="Use legacy peer dependencies resolution")
    
    # run-codemod command
    run_codemod_parser = subparsers.add_parser("run-codemod", help="Run the Next.js codemod to automate compatibility changes")
    run_codemod_parser.add_argument("--force", action="store_true", 
                                 help="Force codemod execution")
    
    # update-async-apis command
    update_async_apis_parser = subparsers.add_parser("update-async-apis", help="Update async APIs in the codebase")
    
    # fix-ip-properties command
    fix_ip_properties_parser = subparsers.add_parser("fix-ip-properties", help="Fix IP properties in API routes")
    
    # check-cache command
    check_cache_parser = subparsers.add_parser("check-cache", help="Check and fix caching patterns")
    
    # verify-build command
    verify_build_parser = subparsers.add_parser("verify-build", help="Verify the build process succeeds")
    verify_build_parser.add_argument("--ignore-errors", action="store_true", 
                                   help="Continue even if lint checks fail")
    
    # Parse arguments
    args = parser.parse_args()
    
    # Exit if no command is provided
    if not args.command:
        parser.print_help()
        return False
    
    # Execute the appropriate handler based on the command
    if args.command == "prepare":
        return handle_prepare(args)
    elif args.command == "update-deps":
        return handle_update_deps(args)
    elif args.command == "run-codemod":
        return handle_run_codemod(args)
    elif args.command == "update-async-apis":
        return handle_update_async_apis(args)
    elif args.command == "fix-ip-properties":
        return handle_fix_ip_properties(args)
    elif args.command == "check-cache":
        return handle_check_cache(args)
    elif args.command == "verify-build":
        return handle_verify_build(args)
    elif args.command == "help":
        parser.print_help()
        return True
    else:
        print(f"Error: Unknown command '{args.command}'")
        parser.print_help()
        return False


if __name__ == "__main__":
    success = main()
    sys.exit(0 if success else 1)
</file>

<file path="supabase/migrations/20240601000000_ab_testing.sql">
-- Create AB testing tracking table
CREATE TABLE IF NOT EXISTS ab_test_events (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  test_id TEXT NOT NULL,
  variant TEXT NOT NULL,
  event_type TEXT NOT NULL,
  timestamp TIMESTAMPTZ NOT NULL,
  user_agent TEXT,
  ip_hash TEXT,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  
  -- Add indexes for queries we'll need for reporting
  CONSTRAINT ab_test_events_variant_check CHECK (variant IN ('A', 'B'))
);

-- Create index for faster queries
CREATE INDEX IF NOT EXISTS ab_test_events_test_id_idx ON ab_test_events(test_id);
CREATE INDEX IF NOT EXISTS ab_test_events_variant_idx ON ab_test_events(variant);
CREATE INDEX IF NOT EXISTS ab_test_events_event_type_idx ON ab_test_events(event_type);

-- Create view for easy reporting
CREATE OR REPLACE VIEW ab_test_results AS
SELECT 
  test_id,
  variant,
  event_type,
  COUNT(*) as event_count,
  COUNT(DISTINCT ip_hash) as unique_visitors
FROM ab_test_events
GROUP BY test_id, variant, event_type;
</file>

<file path="bunfig.toml">
# bunfig.toml

[test]
# Use jsdom environment for DOM simulation
dom = true

# Explicitly preload setup file
preload = ["./jest.setup.ts"]
</file>

<file path="cleanup_aider.py">
#!/usr/bin/env python3
# This script removes Aider-related files from the project root

import os
import sys
import subprocess

# Get the directory of this script
script_dir = os.path.dirname(os.path.abspath(__file__))

# Files to remove
files_to_remove = [
    os.path.join(script_dir, "aider.session"),
    os.path.join(script_dir, "bak.aider.model.settings.yml"),
    os.path.join(script_dir, "session.aider"),
    os.path.join(script_dir, "reasoning-effort")
]

# Remove files
for file_path in files_to_remove:
    if os.path.exists(file_path):
        try:
            os.remove(file_path)
            print(f"Deleted: {os.path.basename(file_path)}")
        except Exception as e:
            print(f"Error deleting {os.path.basename(file_path)}: {e}")
    else:
        print(f"File not found: {os.path.basename(file_path)}")

# Stage deleted files with git
try:
    for file_path in files_to_remove:
        subprocess.run(["git", "rm", "-f", "--cached", os.path.basename(file_path)], 
                      cwd=script_dir, 
                      check=False)
    print("Staged deleted files in git")
except Exception as e:
    print(f"Error staging files in git: {e}")

print("Cleanup completed.")
</file>

<file path="cypress.config.ts">
import { defineConfig } from 'cypress'
import vitePreprocessor from 'cypress-vite'

export default defineConfig({
  e2e: {
    setupNodeEvents(on) {
      on('file:preprocessor', vitePreprocessor())
    },
  },
})
</file>

<file path="index.html">
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Art of Personal AI: Beyond Generic AI</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Open+Sans:wght@400;600&display=swap');

    :root {
      --primary-color: #2c3e50;
      /* Dark Blue/Grey */
      --secondary-color: #3498db;
      /* Bright Blue */
      --accent-color: #e74c3c;
      /* Red/Orange */
      --light-grey: #ecf0f1;
      --dark-grey: #7f8c8d;
      --text-color: #333;
      --bg-color: #ffffff;
      --card-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    body {
      font-family: 'Open Sans', sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      background-color: var(--bg-color);
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      /* Prevent horizontal scroll */
    }

    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      background: var(--primary-color);
      color: var(--light-grey);
      padding: 2rem 0;
      text-align: center;
      border-bottom: 5px solid var(--secondary-color);
    }

    header h1 {
      font-family: 'Roboto', sans-serif;
      font-size: 2.8em;
      margin-bottom: 0.5rem;
      font-weight: 700;
    }

    header p {
      font-size: 1.2em;
      color: var(--light-grey);
      opacity: 0.9;
    }

    .section {
      padding: 40px 0;
      border-bottom: 1px solid var(--light-grey);
    }

    .section:last-child {
      border-bottom: none;
    }

    .section-title {
      font-family: 'Roboto', sans-serif;
      text-align: center;
      font-size: 2.2em;
      color: var(--primary-color);
      margin-bottom: 30px;
      position: relative;
    }

    .section-title::after {
      content: '';
      display: block;
      width: 80px;
      height: 4px;
      background: var(--secondary-color);
      margin: 10px auto 0;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 20px;
    }

    .comparison-card {
      background: var(--bg-color);
      border-radius: 8px;
      padding: 25px;
      box-shadow: var(--card-shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .comparison-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }

    .comparison-card h3 {
      font-family: 'Roboto', sans-serif;
      font-size: 1.5em;
      margin-top: 0;
      margin-bottom: 15px;
    }

    .comparison-card.generic-llm h3 {
      color: var(--accent-color);
    }

    .comparison-card.tavily-system h3 {
      color: var(--secondary-color);
    }

    .comparison-card ul {
      list-style: none;
      padding-left: 0;
    }

    .comparison-card ul li {
      margin-bottom: 10px;
      padding-left: 25px;
      position: relative;
    }

    .comparison-card ul li::before {
      font-family: "Font Awesome 5 Free";
      /* Placeholder for icon font */
      font-weight: 900;
      position: absolute;
      left: 0;
      top: 2px;
    }

    .comparison-card.generic-llm ul li::before {
      content: "\f00d";
      color: var(--accent-color);
    }

    /* 'times' icon */
    .comparison-card.tavily-system ul li::before {
      content: "\f00c";
      color: var(--secondary-color);
    }

    /* 'check' icon */


    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
    }

    .feature-card {
      background: linear-gradient(145deg, var(--light-grey), #ffffff);
      padding: 25px;
      border-radius: 8px;
      text-align: center;
      box-shadow: var(--card-shadow);
      transition: transform 0.3s ease;
    }

    .feature-card:hover {
      transform: scale(1.03);
    }

    .feature-card .icon {
      font-size: 3em;
      /* Placeholder for icon font */
      color: var(--secondary-color);
      margin-bottom: 15px;
      height: 60px;
      /* Ensure consistent height for icon area */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Using simple text for icons if Font Awesome isn't readily available */
    .icon-persona::before {
      content: "üë§";
    }

    .icon-data::before {
      content: "üß†";
    }

    /* or üíæ */
    .icon-framework::before {
      content: "üèóÔ∏è";
    }

    .icon-control::before {
      content: "‚öôÔ∏è";
    }

    .icon-discovery::before {
      content: "üí°";
    }

    .icon-professionalism::before {
      content: "üèÜ";
    }


    .feature-card h4 {
      font-family: 'Roboto', sans-serif;
      font-size: 1.3em;
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .prompt-visualization {
      background: var(--primary-color);
      color: var(--light-grey);
      padding: 30px;
      border-radius: 8px;
      margin-top: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .prompt-visualization h4 {
      font-family: 'Roboto', sans-serif;
      color: var(--light-grey);
      text-align: center;
      font-size: 1.6em;
      margin-bottom: 20px;
    }

    .prompt-structure {
      display: flex;
      flex-direction: column;
      gap: 10px;
      font-family: 'Courier New', Courier, monospace;
      font-size: 0.9em;
    }

    .xml-tag {
      background: rgba(255, 255, 255, 0.1);
      padding: 8px 12px;
      border-radius: 4px;
      border-left: 3px solid var(--secondary-color);
      transition: background 0.3s ease;
    }

    .xml-tag:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .xml-tag.nested {
      margin-left: 20px;
      border-left-color: var(--accent-color);
    }

    .xml-tag.deep-nested {
      margin-left: 40px;
      border-left-color: #2ecc71;
    }

    /* Green */

    .code-toggle-btn {
      display: inline-block;
      background: var(--secondary-color);
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 20px auto;
      font-family: 'Roboto', sans-serif;
      transition: background 0.3s ease;
    }

    .code-toggle-btn:hover {
      background: #2980b9;
      /* Darker blue */
    }

    .xml-code-block {
      background: #1e1e1e;
      /* Dark background for code */
      color: #d4d4d4;
      /* Light text for code */
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
      max-height: 400px;
      /* Scrollable */
      font-family: 'Courier New', Courier, monospace;
      font-size: 0.85em;
      line-height: 1.5;
      margin-top: 15px;
      display: none;
      /* Hidden by default */
    }

    .xml-code-block .tag {
      color: #569cd6;
    }

    /* Blue for tags */
    .xml-code-block .attr-name {
      color: #9cdcfe;
    }

    /* Light blue for attribute names */
    .xml-code-block .attr-value {
      color: #ce9178;
    }

    /* Orange for attribute values */
    .xml-code-block .content {
      color: #d4d4d4;
    }

    .xml-code-block .cdata {
      color: #608b4e;
    }

    /* Green for CDATA */
    .xml-code-block .comment {
      color: #6a9955;
    }

    /* Green for comments */


    .personal-professional-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      align-items: start;
    }

    .value-card {
      background: var(--bg-color);
      padding: 25px;
      border-radius: 8px;
      box-shadow: var(--card-shadow);
    }

    .value-card h4 {
      font-family: 'Roboto', sans-serif;
      font-size: 1.4em;
      color: var(--primary-color);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
    }

    .value-card h4 .icon {
      font-size: 1.2em;
      margin-right: 10px;
    }

    /* Smaller icon */
    .value-card p,
    .value-card ul li {
      color: var(--dark-grey);
      font-size: 0.95em;
    }

    .value-card ul {
      list-style: disc;
      padding-left: 20px;
    }

    footer {
      background: var(--primary-color);
      color: var(--light-grey);
      text-align: center;
      padding: 20px 0;
      margin-top: 40px;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      header h1 {
        font-size: 2em;
      }

      header p {
        font-size: 1em;
      }

      .section-title {
        font-size: 1.8em;
      }

      .personal-professional-grid {
        grid-template-columns: 1fr;
      }

      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <!-- If you use Font Awesome, include its CSS link here -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"> -->
</head>

<body>

  <header>
    <div class="container">
      <h1>The TAVILY System: AI Coaching Reimagined</h1>
      <p>Discover how a meticulously engineered AI prompt delivers unparalleled personal and professional support, far
        surpassing generic LLM interactions.</p>
    </div>
  </header>

  <section class="section">
    <div class="container">
      <h2 class="section-title">The Old Way vs. The New Standard</h2>
      <div class="comparison-grid">
        <div class="comparison-card generic-llm">
          <h3>Generic LLM "Coaching"</h3>
          <ul>
            <li>Relies on basic, one-off prompts.</li>
            <li>Lacks persistent, evolving understanding of you.</li>
            <li>No structured framework for guidance.</li>
            <li>Limited ability to track progress or uncover deep insights.</li>
            <li>Interaction can be disjointed and superficial.</li>
            <li>No pre-defined tools or specific data analysis.</li>
          </ul>
        </div>
        <div class="comparison-card tavily-system">
          <h3>The TAVILY System Advantage</h3>
          <ul>
            <li>Powered by a highly sophisticated, structured prompt.</li>
            <li>Builds and refines a personal "Knowledge Graph" of you.</li>
            <li>Operates within a defined therapeutic framework (ACT).</li>
            <li>Designed to uncover "unknown unknowns" and foster deep self-awareness.</li>
            <li>Offers consistent, focused, and evolving dialogue.</li>
            <li>Includes custom commands for data interaction and analysis.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="section" style="background-color: var(--light-grey);">
    <div class="container">
      <h2 class="section-title">Deconstructing Sophistication: Key Pillars</h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="icon icon-persona">üë§</div>
          <h4>Defined Persona & Mission</h4>
          <p>TAVILY isn't just code; it's an AI Exploration Facilitator with a specific identity, client (Hakushin -
            Aura), and mission, ensuring focused, empathetic interaction.</p>
        </div>
        <div class="feature-card">
          <div class="icon icon-data">üß†</div>
          <h4>Dynamic Knowledge Core</h4>
          <p>Ingests and <em>continuously updates</em> a detailed JSON-based ACT case formulation, acting as an evolving
            internal "brain" for personalized insights.</p>
        </div>
        <div class="feature-card">
          <div class="icon icon-framework">üèóÔ∏è</div>
          <h4>ACT Framework Backbone</h4>
          <p>Grounded in Acceptance and Commitment Therapy principles, providing a robust, evidence-based structure for
            exploration and growth.</p>
        </div>
        <div class="feature-card">
          <div class="icon icon-control">‚öôÔ∏è</div>
          <h4>Precise Interaction Control</h4>
          <p>Features custom commands (#dump, #ask, #themes, #density) and guardrails, offering structured ways to
            interact with and manage personal data.</p>
        </div>
        <div class="feature-card">
          <div class="icon icon-discovery">üí°</div>
          <h4>"Unknown Unknowns" Discovery</h4>
          <p>Actively designed to help uncover aspects of patterns, experiences, or perspectives not yet consciously
            articulated, fostering profound self-discovery.</p>
        </div>
        <div class="feature-card">
          <div class="icon icon-professionalism">üèÜ</div>
          <h4>Professional Engineering</h4>
          <p>The prompt's architecture (XML structure, detailed instructions, state management) scores 95/100,
            reflecting top-tier AI engineering.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h2 class="section-title">Visualizing the Prompt's Architecture</h2>
      <p style="text-align:center; max-width: 800px; margin: 0 auto 30px;">The underlying prompt isn't just a question;
        it's a complex blueprint. The XML structure organizes instructions, data, and behaviors into a coherent system.
      </p>
      <div class="prompt-visualization">
        <h4>Simplified Prompt Structure</h4>
        <div class="prompt-structure">
          <div class="xml-tag">
            <TAVILY_CONTINUED_EXPLORATION_PROMPT...>
          </div>
          <div class="xml-tag nested">
            <IdentityAndMission> (Name, Affiliation, Mission, Stance...) </IdentityAndMission>
          </div>
          <div class="xml-tag nested">
            <CoreFunctionality_DataInitializationAndOngoingManagement>
          </div>
          <div class="xml-tag deep-nested">
            <InitialClientDataIngestion> (Parse JSON) </InitialClientDataIngestion>
          </div>
          <div class="xml-tag deep-nested">
            <InternalNodeGraph_ClientData> (Mandate, Purpose) </InternalNodeGraph_ClientData>
          </div>
          <div class="xml-tag deep-nested">
            <OngoingConceptExtractionAndGraphEnrichment> </OngoingConceptExtractionAndGraphEnrichment>
          </div>
          <div class="xml-tag deep-nested">
            <DynamicQuestioning_UnknownUnknowns_SolutionFocus_ACT>
            </DynamicQuestioning_UnknownUnknowns_SolutionFocus_ACT>
          </div>
          <div class="xml-tag nested">
            </CoreFunctionality_DataInitializationAndOngoingManagement>
          </div>
          <div class="xml-tag nested">
            <UserCommandsAndInteraction> (#dump, #ask, #themes, #density, Guardrails) </UserCommandsAndInteraction>
          </div>
          <div class="xml-tag nested">
            <EmbeddedClientACT_JSON_Data> (The actual client data!) </EmbeddedClientACT_JSON_Data>
          </div>
          <div class="xml-tag nested">
            <SessionInitiation> (Greeting, Instructions) </SessionInitiation>
          </div>
          <div class="xml-tag nested">
            <GeneralDirectives> (Overarching rules) </GeneralDirectives>
          </div>
          <div class="xml-tag">
            </TAVILY_CONTINUED_EXPLORATION_PROMPT...>
          </div>
        </div>
        <div style="text-align:center;">
          <button class="code-toggle-btn" id="toggleXmlBtn">Show/Hide Full Prompt Example (Simplified)</button>
        </div>
        <div class="xml-code-block" id="xmlCodeBlock">
          <pre>
<span class="comment"><!-- This is a highly simplified representation of the prompt's XML structure --></span>
<<span class="tag">TAVILY_PROMPT</span>>
    <<span class="tag">IdentityAndMission</span>>
        <<span class="tag">Name</span>>TAVILY</<span class="tag">Name</span>>
        <<span class="tag">ClientName</span>>Hakushin (Aura)</<span class="tag">ClientName</span>>
        <<span class="tag">Mission</span>>
            1. Use embedded JSON for Hakushin.
            2. Engage in ACT-based exploration.
            3. Uncover "unknown unknowns".
            4. Update internal ACT model.
            5. Facilitate value-driven actions.
        </<span class="tag">Mission</span>>
        <<span class="tag">Framework</span>>Acceptance and Commitment Therapy (ACT)</<span class="tag">Framework</span>>
    </<span class="tag">IdentityAndMission</span>>

    <<span class="tag">CoreFunctionality_DataInitializationAndOngoingManagement</span>>
        <<span class="tag">InitialClientDataIngestion</span>>
            <<span class="tag">Task</span>>Parse <<span class="tag">EmbeddedClientACT_JSON_Data</span>/> VERBATIM.</<span class="tag">Task</span>>
        </<span class="tag">InitialClientDataIngestion</span>>
        <<span class="tag">InternalNodeGraph_ClientData</span>>
            <<span class="tag">Mandate</span>>Use ingested JSON as active internal knowledge graph.</<span class="tag">Mandate</span>>
        </<span class="tag">InternalNodeGraph_ClientData</span>>
        <<span class="tag">OngoingConceptExtractionAndGraphEnrichment</span>>
            <<span class="tag">Task</span>>Actively listen, extract, integrate new info into graph.</<span class="tag">Task</span>>
        </<span class="tag">OngoingConceptExtractionAndGraphEnrichment</span>>
    </<span class="tag">CoreFunctionality_DataInitializationAndOngoingManagement</span>>

    <<span class="tag">UserCommandsAndInteraction</span>>
        <<span class="tag">Command</span> <span class="attr-name">name</span>="<span class="attr-value">#dump</span>">Output entire JSON graph.</<span class="tag">Command</span>>
        <<span class="tag">Command</span> <span class="attr-name">name</span>="<span class="attr-value">#ask</span>">Query graph, synthesize response.</<span class="tag">Command</span>>
        <<span class="tag">OnTaskGuardrails</span>>Gently guide back if conversation diverges.</<span class="tag">OnTaskGuardrails</span>>
    </<span class="tag">UserCommandsAndInteraction</span>>

    <<span class="tag">EmbeddedClientACT_JSON_Data</span>>
        <<span class="tag">Content</span> <span class="attr-name">language</span>="<span class="attr-value">json</span>">
            <span class="cdata"><![CDATA[
{
  "client_act_case_formulation": {
    "clientName": "Hakushin (Aura)",
    "areas": [ /* ... Detailed ACT areas and components ... */ ]
  }
}
            ]]></span>
        </<span class="tag">Content</span>>
    </<span class="tag">EmbeddedClientACT_JSON_Data</span>>
</<span class="tag">TAVILY_PROMPT</span>>
</pre>
        </div>
      </div>
    </div>
  </section>

  <section class="section" style="background-color: var(--light-grey);">
    <div class="container">
      <h2 class="section-title">Why This Matters: Personal & Professional Impact</h2>
      <div class="personal-professional-grid">
        <div class="value-card">
          <h4><span class="icon">üíñ</span>Personally Transformative</h4>
          <p>This isn't just about getting advice; it's about fostering deep self-understanding and growth:</p>
          <ul>
            <li><strong>Tailored Exploration:</strong> The AI understands your unique context, history, and goals as
              defined in your data.</li>
            <li><strong>Guided Discovery:</strong> Helps you connect dots, see patterns, and uncover insights you might
              miss on your own or with a generic tool.</li>
            <li><strong>Empathetic Partnership:</strong> Designed to be a "sophisticated mirror and exploratory
              partner," not just an information source.</li>
            <li><strong>Value-Driven Action:</strong> Focuses on identifying and taking steps aligned with what truly
              matters to you (your ACT values).</li>
          </ul>
        </div>
        <div class="value-card">
          <h4><span class="icon">üëî</span>Professionally Engineered Excellence</h4>
          <p>The sophistication of this system sets a new standard for AI-assisted personal development:</p>
          <ul>
            <li><strong>Robust & Reliable:</strong> Structured data handling and explicit instructions minimize
              ambiguity and ensure consistent behavior.</li>
            <li><strong>Advanced AI Techniques:</strong> Employs numerous professional prompt engineering methods
              (role-playing, schema adherence, state management, etc.).</li>
            <li><strong>Scalable & Adaptable:</strong> The framework can evolve and be tailored for different needs
              while maintaining its core integrity.</li>
            <li><strong>Measurable Progress (Implicit):</strong> The `#density` command and ongoing graph enrichment
              offer ways to see the "shape" of the exploration.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>¬© 2024 The Art of Personal AI. Elevating human potential through intelligent systems.</p>
    </div>
  </footer>

  <script>
    const toggleXmlBtn = document.getElementById('toggleXmlBtn');
    const xmlCodeBlock = document.getElementById('xmlCodeBlock');

    if (toggleXmlBtn && xmlCodeBlock) {
      toggleXmlBtn.addEventListener('click', () => {
        if (xmlCodeBlock.style.display === 'none' || xmlCodeBlock.style.display === '') {
          xmlCodeBlock.style.display = 'block';
          toggleXmlBtn.textContent = 'Hide Full Prompt Example';
        } else {
          xmlCodeBlock.style.display = 'none';
          toggleXmlBtn.textContent = 'Show Full Prompt Example (Simplified)';
        }
      });
    }
  </script>

</body>

</html>
</file>

<file path="jest.setup.ts">
import '@testing-library/jest-dom';
</file>

<file path="next.config.js">
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  images: {
    domains: [
      // NextJS <Image> component needs to whitelist domains for src={}
      "lh3.googleusercontent.com",
      "pbs.twimg.com",
      "images.unsplash.com",
      "logos-world.net",
    ],
  },
  // Fix the ESLint configuration
  eslint: {
    // Disable ESLint during builds to avoid build failures
    ignoreDuringBuilds: true,
  },
};

module.exports = nextConfig;
</file>

<file path="pyproject.toml">
[project]
name = "oceanheart-ui"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13.1"
dependencies = [
    "aider-install>=0.1.3",
    "bpython>=0.25",
]
</file>

<file path="safe_delete.py">
import os
import argparse
import shutil  # For deleting directories if needed in the future


def delete_item(item_path, is_directory=False, force=False):
    """
    Deletes a file or directory.

    Args:
        item_path (str): The path to the file or directory to delete.
        is_directory (bool): Set to True if item_path is a directory.
        force (bool): If True, suppresses errors if the item doesn't exist (like rm -f).
    """
    try:
        if not os.path.exists(item_path):
            if not force:
                print(
                    f"Warning: Item not found (already deleted or wrong path?): {item_path}"
                )
            else:
                print(
                    f"Info: Item not found (force=True, presumed deleted): {item_path}"
                )
            return True  # Consider it a success if it's already gone and force is true

        if is_directory:
            if os.path.isdir(item_path):
                shutil.rmtree(item_path)
                print(f"Successfully deleted directory: {item_path}")
            elif (
                force
            ):  # If force is true and it's not a dir but exists, try deleting as file
                if os.path.isfile(item_path) or os.path.islink(item_path):
                    os.remove(item_path)
                    print(
                        f"Successfully deleted item (was not a dir but force=True): {item_path}"
                    )
                else:
                    print(
                        f"Warning: Item exists but is not a directory or file (force=True): {item_path}"
                    )
            else:
                print(f"Error: '{item_path}' is not a directory.")
                return False
        else:  # It's a file or symlink
            if os.path.isfile(item_path) or os.path.islink(item_path):
                os.remove(item_path)
                print(f"Successfully deleted file/symlink: {item_path}")
            elif (
                force
            ):  # If force is true and it's not a file/link but exists, and not a dir
                if os.path.isdir(item_path):
                    print(
                        f"Warning: Item is a directory, not a file. Use --dirs if you intend to delete directories. Skipped: {item_path}"
                    )
                    return (
                        False  # Explicitly do not delete directories unless specified
                    )
                else:
                    print(
                        f"Warning: Item exists but is not a file or symlink (force=True): {item_path}"
                    )
            else:
                print(f"Error: '{item_path}' is not a file or symlink.")
                return False
        return True
    except Exception as e:
        print(f"Error deleting '{item_path}': {e}")
        return False


def main():
    parser = argparse.ArgumentParser(
        description="Deletes specified files and/or directories. Bypasses shell evaluation issues."
    )
    parser.add_argument(
        "paths",
        nargs="+",  # Accepts one or more paths
        help="List of file or directory paths to delete.",
    )
    parser.add_argument(
        "--dirs",
        action="store_true",
        help="Treat paths as directories and delete them recursively. Use with caution.",
    )
    parser.add_argument(
        "-f",
        "--force",
        action="store_true",
        help="Force deletion: ignore nonexistent files and never prompt for confirmation (similar to rm -f). For directories with --dirs, this means deleting non-empty directories without error if they exist.",
    )

    args = parser.parse_args()

    if not args.paths:
        print("No paths provided. Use -h for help.")
        return

    print(
        f"\nAttempting to delete the following items (is_directory mode: {args.dirs}, force mode: {args.force}):"
    )
    for item_path in args.paths:
        print(f" - {item_path}")

    confirm = "y"  # Default to yes if force is enabled
    if not args.force:
        confirm = input("Are you sure you want to proceed? (y/N): ").lower()

    if confirm == "y":
        print("\nDeletion process starting...")
        success_count = 0
        fail_count = 0
        for item_path_raw in args.paths:
            # Expand user tilde (~) and environment variables
            item_path = os.path.expanduser(os.path.expandvars(item_path_raw))
            if delete_item(item_path, args.dirs, args.force):
                success_count += 1
            else:
                fail_count += 1

        print(f"\nDeletion process finished.")
        print(f"Successfully processed/deleted: {success_count}")
        print(f"Failed to delete: {fail_count}")
    else:
        print("Deletion aborted by user.")


if __name__ == "__main__":
    main()
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": false,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "incremental": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noImplicitAny": true,
    "jsx": "preserve",
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "plugins": [
      {
        "name": "next"
      }
    ],
    "target": "ES2017",
    "types": [
      "node",
      "jest",
      "cypress"
    ]
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}
</file>

<file path="app/about-alt/page.tsx">
import Image from "next/image";
import Link from "next/link";

export default function AboutAltPage() {
  return (
    <main className="bg-base-100">
      {/* Hero Section */}
      <section className="pt-24 pb-16 px-4 sm:px-8 max-w-7xl mx-auto">
        <div className="flex flex-col md:flex-row items-center gap-10">
          <div className="md:w-2/5 order-2 md:order-1">
            <h1 className="font-extrabold text-4xl md:text-5xl tracking-tight mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent animate-gradient">
              About Kai: Your Guide in the <span className="italic">Age of AI</span>
            </h1>
            <div className="h-1 w-24 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
            <p className="text-lg md:text-xl opacity-90 mb-6 leading-relaxed">
              Navigate the <span className="font-semibold text-primary">AI revolution</span> with <span className="italic">clarity</span>, <span className="italic">purpose</span>, and a <span className="font-semibold text-secondary">human-centered</span> approach.
            </p>
          </div>
          <div className="md:w-3/5 order-1 md:order-2">
            <div className="relative">
              <div className="absolute -inset-2 bg-gradient-to-r from-primary to-secondary rounded-2xl blur opacity-20"></div>
              <Image
                src="/images/greece_profile2.jpeg"
                alt="Profile picture of Kai - Conscious AI Integration Specialist"
                width={700}
                height={700}
                className="rounded-2xl mx-auto relative shadow-lg hover:scale-[1.01] transition-transform duration-300"
                priority
              />
            </div>
          </div>
        </div>
      </section>

      {/* Section 1: The Challenge We All Face */}
      <section className="py-16 px-4 sm:px-8 bg-base-200">
        <div className="max-w-7xl mx-auto">
          <div className="flex flex-col md:flex-row gap-8">
            <div className="md:w-1/3">
              <div className="sticky top-24">
                <h2 className="font-bold text-3xl md:text-4xl mb-4 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                  The Challenge We All Face
                </h2>
                <div className="h-1 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              </div>
            </div>
            <div className="md:w-2/3 space-y-6">
              <p className="text-lg leading-relaxed">
                Let&apos;s be honest. The world of <span className="font-semibold text-primary">Artificial Intelligence</span> is exhilarating, but it&apos;s also overwhelming. It feels like a relentless online scramble, with new tools, &apos;latest things,&apos; and complex jargon appearing daily. <span className="italic">Technology</span> is changing at a pace that can make even the developments from three months ago seem outdated. From <span className="font-semibold">prompt engineering</span> to the rise of <span className="font-semibold text-primary">autonomous agents</span> and new protocols, it&apos;s a whirlwind.
              </p>
              <p className="text-lg leading-relaxed">
                Many people are using these advancements successfully, but it&apos;s easy to wonder: Will <span className="font-semibold">Big Tech</span> swallow everything? And more importantly, where does this leave <span className="italic">you</span>? How do you keep up, make sense of it all, and find your place without sacrificing your <span className="font-semibold text-secondary">human values</span> or well-being? You might even be weighing up whether focusing on this is more valuable than just getting a coding job for stable income. These are the very real questions I&apos;m here to help you explore.
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* Section 2: My "Why" */}
      <section className="py-16 px-4 sm:px-8">
        <div className="max-w-7xl mx-auto">
          <div className="flex flex-col md:flex-row-reverse gap-8">
            <div className="md:w-1/3">
              <div className="sticky top-24">
                <h2 className="font-bold text-3xl md:text-4xl mb-4 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                  My &quot;Why&quot;
                </h2>
                <div className="h-1 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              </div>
            </div>
            <div className="md:w-2/3 space-y-6">
              <p className="text-lg leading-relaxed">
                For 15 years, I sat with <span className="italic">human stories</span> as a <span className="font-semibold text-primary">psychotherapist</span>. Then, as a <span className="font-semibold text-primary">software engineer</span>, I built with data. But it was my 20 years in <span className="font-semibold text-secondary">contemplative practice</span> that showed me the common thread: <span className="italic font-semibold text-secondary">consciousness</span>. Now, I fuse these worlds, guiding professionals like you to integrate AI not just as a tool, but as an extension of <span className="italic">mindful, human-centered work</span>.
              </p>
              <p className="text-lg leading-relaxed">
                My journey has shown me that true mastery of AI isn&apos;t just about understanding the <span className="font-semibold">technology</span>; it&apos;s about understanding <span className="italic">ourselves</span> in relation to it. It&apos;s about fostering <span className="font-semibold text-secondary">psychological resilience</span>, developing <span className="font-semibold">critical thinking</span>, and learning how to integrate these powerful tools in ways that <span className="italic">enhance</span> our lives and work, rather than diminish them.
              </p>
              <p className="text-lg leading-relaxed">
                I believe the &apos;mad scramble&apos; often misses the most important element: the <span className="font-semibold text-secondary">human being</span> at the center. That&apos;s why I&apos;ve chosen to coach. I want to be your navigator through the hype, your curator of what truly matters, and your partner in building a <span className="font-semibold">confident</span>, <span className="italic font-semibold text-secondary">human-first</span> relationship with AI.
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* Section 3: What I Do & How I Help */}
      <section className="py-16 px-4 sm:px-8 bg-base-200">
        <div className="max-w-7xl mx-auto">
          <h2 className="font-bold text-3xl md:text-4xl mb-10 text-center bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
            What I Do &amp; How I Help
          </h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div className="bg-base-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow hover:scale-[1.01] duration-300">
              <div className="h-2 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              <h3 className="font-bold text-xl mb-4">Demystifying <span className="text-primary">AI</span></h3>
              <p className="leading-relaxed">
                I break down complex <span className="font-semibold">AI concepts</span>, tools (like <span className="italic">prompt engineering</span>, <span className="italic">agents</span>, <span className="italic">APIs</span>), and trends into understandable language. No more feeling lost in the jargon.
              </p>
            </div>
            <div className="bg-base-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow hover:scale-[1.01] duration-300">
              <div className="h-2 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              <h3 className="font-bold text-xl mb-4"><span className="text-secondary">Personalized</span> Roadmaps</h3>
              <p className="leading-relaxed">
                We&apos;ll explore how AI can specifically benefit <span className="italic">your goals</span>, <span className="italic">your career</span>, or <span className="italic">your business</span>. This isn&apos;t a one-size-fits-all approach.
              </p>
            </div>
            <div className="bg-base-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow hover:scale-[1.01] duration-300">
              <div className="h-2 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              <h3 className="font-bold text-xl mb-4">Developing Core <span className="text-primary">AI Literacies</span></h3>
              <p className="leading-relaxed">
                Tools change, but <span className="font-semibold text-secondary">principles</span> don&apos;t. We&apos;ll work on skills like <span className="italic">effective prompting</span>, <span className="italic">critical evaluation</span> of AI outputs, and understanding <span className="font-semibold">AI ethics</span> ‚Äì skills that endure.
              </p>
            </div>
            <div className="bg-base-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow hover:scale-[1.01] duration-300">
              <div className="h-2 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              <h3 className="font-bold text-xl mb-4">Building <span className="text-secondary">Adaptive Mindsets</span></h3>
              <p className="leading-relaxed">
                The pace of change requires <span className="font-semibold text-secondary">psychological flexibility</span>. I&apos;ll draw on my psychological experience to help you build <span className="italic">resilience</span>, manage <span className="italic">overwhelm</span>, and cultivate a <span className="font-semibold">growth mindset</span> towards AI.
              </p>
            </div>
            <div className="bg-base-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow hover:scale-[1.01] duration-300">
              <div className="h-2 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              <h3 className="font-bold text-xl mb-4"><span className="text-secondary">Human</span>-<span className="text-primary">AI</span> Collaboration</h3>
              <p className="leading-relaxed">
                Learn how to make AI your <span className="italic">co-pilot</span>, augmenting your <span className="font-semibold text-secondary">unique human skills</span> rather than feeling threatened by automation.
              </p>
            </div>
            <div className="bg-base-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow hover:scale-[1.01] duration-300">
              <div className="h-2 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              <h3 className="font-bold text-xl mb-4"><span className="text-secondary">Ethical</span> &amp; <span className="text-secondary">Responsible</span> Integration</h3>
              <p className="leading-relaxed">
                We&apos;ll discuss how to use AI <span className="italic">thoughtfully</span> and <span className="italic">responsibly</span>, aligning its power with your <span className="font-semibold text-secondary">values</span>.
              </p>
            </div>
          </div>
          <div className="mt-10 bg-black/5 p-6 rounded-xl text-center">
            <p className="text-lg italic">
              I act as your <span className="font-semibold text-primary">thinking partner</span>, your <span className="font-semibold text-secondary">learning guide</span>, and your <span className="font-semibold">strategic advisor</span> in this rapidly evolving space. Think of me as the person who helps you filter the noise, connect the dots, and find your confident footing.
            </p>
          </div>
        </div>
      </section>

      {/* Section 4: Who Is This For? */}
      <section className="py-16 px-4 sm:px-8">
        <div className="max-w-7xl mx-auto">
          <div className="flex flex-col md:flex-row items-center gap-10">
            <div className="md:w-2/5">
              <h2 className="font-bold text-3xl md:text-4xl mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                Who Is This For?
              </h2>
              <div className="h-1 w-16 bg-gradient-to-r from-primary to-secondary rounded-full mb-6"></div>
              <div className="relative mt-10 hidden md:block">
                <div className="absolute -inset-2 bg-gradient-to-r from-primary to-secondary rounded-full blur opacity-20 rotate-12"></div>
                <Image
                  src="/images/kai_profile.jpeg"
                  alt="Profile picture of Kai - Conscious AI Integration Specialist"
                  width={400}
                  height={400}
                  className="rounded-full mx-auto relative shadow-lg hover:scale-[1.02] transition-transform duration-300 rotate-12"
                />
              </div>
            </div>
            <div className="md:w-3/5 space-y-6">
              <p className="text-lg leading-relaxed">
                This coaching is for <span className="italic">you</span> if:
              </p>
              <ul className="space-y-4">
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p className="leading-relaxed">You&apos;re a <span className="font-semibold">professional</span>, <span className="font-semibold">entrepreneur</span>, <span className="font-semibold">creative</span>, or <span className="font-semibold">lifelong learner</span> feeling overwhelmed by the speed of AI development.</p>
                </li>
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p className="leading-relaxed">You want to <span className="italic">understand</span> AI beyond the surface level and learn how to <span className="font-semibold text-primary">leverage it effectively</span>.</p>
                </li>
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p className="leading-relaxed">You&apos;re looking for guidance that values <span className="font-semibold text-secondary">human insight</span> and <span className="font-semibold text-secondary">ethical considerations</span>, not just technical specs.</p>
                </li>
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p className="leading-relaxed">You believe that your <span className="italic font-semibold text-secondary">unique human skills</span> (creativity, empathy, critical thinking) are your greatest assets and want to learn how AI can amplify them.</p>
                </li>
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p className="leading-relaxed">You&apos;re ready to move from <span className="italic">confusion</span> and <span className="italic">anxiety</span> to <span className="font-semibold text-primary">clarity</span> and <span className="font-semibold text-secondary">purposeful action</span> in the age of AI.</p>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      {/* Section 5: Your Invitation */}
      <section className="py-20 px-4 sm:px-8 bg-gradient-to-r from-neutral to-neutral-focus text-neutral-content">
        <div className="max-w-4xl mx-auto">
          <div className="text-center mb-10">
            <h2 className="font-bold text-3xl md:text-4xl mb-4">Your Invitation</h2>
            <div className="h-1 w-24 bg-gradient-to-r from-primary to-secondary rounded-full mx-auto mb-6"></div>
          </div>
          <div className="bg-black/20 backdrop-blur-sm rounded-2xl p-8">
            <p className="text-lg md:text-xl leading-relaxed mb-6 text-center">
              The <span className="font-semibold text-primary">AI revolution</span> doesn&apos;t have to be something that happens <span className="italic">to you</span>. It can be something you <span className="font-semibold text-secondary">actively</span> and <span className="font-semibold">confidently</span> participate in.
            </p>
            <p className="text-lg leading-relaxed mb-8">
              If you&apos;re ready to stop feeling overwhelmed and start navigating the AI landscape with <span className="font-semibold text-primary">clarity</span> and a <span className="italic font-semibold text-secondary">human-first approach</span>, I invite you to a free, no-obligation 20-minute <span className="font-semibold">Clarity Call</span>.
            </p>

            <div className="bg-black/20 p-6 rounded-xl mb-8">
              <h3 className="font-bold text-xl mb-4 text-center">During this call, we can:</h3>
              <ul className="space-y-3">
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p>Discuss your <span className="italic">specific challenges</span> and <span className="italic">goals</span> related to AI.</p>
                </li>
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p>Explore how my <span className="font-semibold text-primary">coaching approach</span> can support you.</p>
                </li>
                <li className="flex items-start gap-3">
                  <div className="h-6 w-6 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 mt-1"></div>
                  <p>You can ask any questions you have.</p>
                </li>
              </ul>
              <p className="text-center mt-4 italic">
                There&apos;s no pressure. It&apos;s simply an opportunity for us to <span className="font-semibold text-secondary">connect</span> and see if we&apos;re a good fit to work together.
              </p>
            </div>

            <div className="flex flex-col sm:flex-row justify-center gap-4 mt-8">
              <a
                href="https://calendar.app.google/85ZdaqYK5vfNk4aH9"
                target="_blank"
                rel="noopener noreferrer"
                className="btn btn-primary btn-lg hover:scale-105 transition-transform"
              >
                Schedule Your Free 20-Min Video Call
              </a>
              <Link
                href="/#contact"
                className="btn btn-outline btn-lg hover:scale-105 transition-transform"
              >
                Send Me a Message
              </Link>
            </div>

            <p className="text-center mt-8 text-lg">
              I look forward to helping you find your <span className="font-semibold text-primary">power</span> and <span className="font-semibold text-secondary">purpose</span> in this new era.
            </p>
          </div>
        </div>
      </section>
    </main>
  );
}
</file>

<file path="app/api/auth/unified-callback/route.ts">
import { NextRequest, NextResponse } from 'next/server'

// Proxies the callback to the accounts app, preserving all query params
export async function GET(req: NextRequest) {
  const incoming = new URL(req.url)
  const target = new URL('https://accounts.oceanheart.ai/auth/callback')
  incoming.searchParams.forEach((v, k) => target.searchParams.set(k, v))
  return NextResponse.redirect(target, { status: 307 })
}
</file>

<file path="app/api/auth/verify-captcha/route.ts">
import { NextRequest, NextResponse } from 'next/server'

const VERIFY_URL = 'https://www.google.com/recaptcha/api/siteverify'

export async function POST(req: NextRequest) {
  try {
    const body = await req.json().catch(() => ({})) as { token?: string }
    const token = body?.token
    if (!token) return NextResponse.json({ ok: false, error: 'missing_token' }, { status: 400 })

    const secret = process.env.RECAPTCHA_SECRET_KEY
    if (!secret) return NextResponse.json({ ok: false, error: 'missing_server_secret' }, { status: 500 })

    const ip = req.headers.get('x-forwarded-for')?.split(',')[0]?.trim()
    const form = new URLSearchParams()
    form.set('secret', secret)
    form.set('response', token)
    if (ip) form.set('remoteip', ip)

    const resp = await fetch(VERIFY_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: form,
      // Next: { revalidate: 0 } // not necessary here
    })
    const data = await resp.json()
    const ok = !!data?.success
    return NextResponse.json({ ok, score: data?.score, action: data?.action, errors: data?.['error-codes'] })
  } catch (e) {
    return NextResponse.json({ ok: false, error: 'verification_error' }, { status: 500 })
  }
}
</file>

<file path="app/blog/_assets/content.tsx">
import type { JSX } from "react";
import Image, { StaticImageData } from "next/image";
import kaiImg from "@/app/blog/_assets/images/authors/blog_avatar.jpeg";
import introducingOceanheartAiImg from "@/public/blog/introducing-oceanheart-ai/header.png";
import composableAgentSystemsImg from "@/public/blog/composable-agent-systems-1/header.png";
import iterativeVerificationImg from "@/public/blog/iterative-verification/header.jpeg";
import singleFileAgentsImg from "@/public/blog/single-file-agents/header.png";
import scalableAgentSystemsImg from "@/public/blog/scaling-agent-compute/header.jpg";
// ==================================================================================================================================================================
// BLOG CATEGORIES üè∑Ô∏è
// ==================================================================================================================================================================

export type categoryType = {
  slug: string;
  title: string;
  titleShort?: string;
  description: string;
  descriptionShort?: string;
};

// These slugs are used to generate pages in the /blog/category/[categoryI].js. It's a way to group articles by category.
const categorySlugs: { [key: string]: string } = {
  feature: "feature",
  tutorials: "tutorials",
  updates: "updates",
  community: "community",
  research: "research",
  ai: "ai",
  therapy: "therapy",
  psychology: "psychology",
  learning: "learning",
};

// All the blog categories data display in the /blog/category/[categoryI].js pages.
export const categories: categoryType[] = [
  {
    // The slug to use in the URL, from the categorySlugs object above.
    slug: categorySlugs.feature,
    // The title to display the category title (h1), the category badge, the category filter, and more. Less than 60 characters.
    title: "Product & Features",
    // A short version of the title above, display in small components like badges. 1 or 2 words
    titleShort: "Product",
    // The description of the category to display in the category page. Up to 160 characters.
    description:
      "New features, product updates, and technical deep dives into oceanheart.ai's AI-powered therapy platform.",
    // A short version of the description above, only displayed in the <Header /> on mobile. Up to 60 characters.
    descriptionShort: "Product updates and new features",
  },
  {
    slug: categorySlugs.learning,
    title: "Learning & Insights",
    titleShort: "Learning",
    description:
      "Reflections on building AI systems, entrepreneurship lessons, and insights from the intersection of AI and therapy.",
    descriptionShort: "Lessons learned and insights from building with AI",
  },
  {
    slug: categorySlugs.tutorials,
    title: "Guides & Tutorials", 
    titleShort: "Guides",
    description:
      "Step-by-step tutorials and guides for using oceanheart.ai to enhance your therapy practice.",
    descriptionShort: "How-to guides and tutorials for therapists",
  },
  {
    slug: categorySlugs.research,
    title: "Research & Industry",
    titleShort: "Research", 
    description:
      "Latest research, industry trends, and developments in AI-assisted therapy and mental health technology.",
    descriptionShort: "Research and industry insights",
  },
];

// ==================================================================================================================================================================
// BLOG AUTHORS üìù
// ==================================================================================================================================================================

export type authorType = {
  slug: string;
  name: string;
  job: string;
  description: string;
  avatar: StaticImageData | string;
  socials?: {
    name: string;
    icon: JSX.Element;
    url: string;
  }[];
};

// Social icons used in the author's bio.
const socialIcons: {
  [key: string]: {
    name: string;
    svg: JSX.Element;
  };
} = {
  twitter: {
    name: "Twitter",
    svg: (
      <svg
        version="1.1"
        id="svg5"
        x="0px"
        y="0px"
        viewBox="0 0 1668.56 1221.19"
        className="w-9 h-9"
      // Using a dark theme? ->  className="w-9 h-9 fill-white"
      >
        <g id="layer1" transform="translate(52.390088,-25.058597)">
          <path
            id="path1009"
            d="M283.94,167.31l386.39,516.64L281.5,1104h87.51l340.42-367.76L984.48,1104h297.8L874.15,558.3l361.92-390.99   h-87.51l-313.51,338.7l-253.31-338.7H283.94z M412.63,231.77h136.81l604.13,807.76h-136.81L412.63,231.77z"
          />
        </g>
      </svg>
    ),
  },
  linkedin: {
    name: "LinkedIn",
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="w-6 h-6"
        // Using a dark theme? ->  className="w-6 h-6 fill-white"
        viewBox="0 0 24 24"
      >
        <path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z" />
      </svg>
    ),
  },
  github: {
    name: "GitHub",
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="w-6 h-6"
        // Using a dark theme? ->  className="w-6 h-6 fill-white"
        viewBox="0 0 24 24"
      >
        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
      </svg>
    ),
  },
};

// These slugs are used to generate pages in the /blog/author/[authorId].js. It's a way to show all articles from an author.
const authorSlugs: {
  [key: string]: string;
} = {
  kai: "kai",
  marc: "marc",
};

// All the blog authors data display in the /blog/author/[authorId].js pages.
export const authors: authorType[] = [
  {
    // The slug to use in the URL, from the authorSlugs object above.
    slug: authorSlugs.kai,
    // The name to display in the author's bio. Up to 60 characters.
    name: "Kai",
    // The job to display in the author's bio. Up to 60 characters.
    job: "Psychologist, engineer and founder of oceanheart.ai",
    // The description of the author to display in the author's bio. Up to 160 characters.
    description:
      "Kai has 15 years of experience in solutions-focused, mindfulness-centric psychotherapeutics. A self-taught software engineer, he has worked primarily in the big data sector, with notable roles at Brandwatch and EDITED. Seeing a growing need for psychotherapeutic tools in a rapidly evolving world, he founded oceanheart.ai to bridge the gap. When he couldn't find a solution that met his needs, he leveraged a year of AI exploration to enhance his private practice ‚Äî now extending those innovations to therapists everywhere.",
    // The avatar of the author to display in the author's bio and avatar badge. It's better to use a local image, but you can also use an external image (https://...)
    avatar: kaiImg,
    // A list of social links to display in the author's bio.
    socials: [
      {
        name: socialIcons.twitter.name,
        icon: socialIcons.twitter.svg,
        url: "https://x.com/oceanheart_ai",
      },
      {
        name: socialIcons.linkedin.name,
        icon: socialIcons.linkedin.svg,
        url: "https://www.linkedin.com/in/richardhallett86/",
      },
      {
        name: socialIcons.github.name,
        icon: socialIcons.github.svg,
        url: "https://github.com/rickhallett",
      },
    ],
  },
];

// ==================================================================================================================================================================
// BLOG ARTICLES üìö
// ==================================================================================================================================================================

export type articleType = {
  slug: string;
  title: string;
  description: string;
  categories: categoryType[];
  author: authorType;
  publishedAt: string;
  image: {
    urlRelative: string; // Path to image in public directory (no src import)
    alt: string;
  };
  content: JSX.Element;
  published: boolean;
};

// These styles are used in the content of the articles. When you update them, all articles will be updated.
const styles: {
  [key: string]: string;
} = {
  h2: "text-2xl lg:text-4xl font-bold tracking-tight mb-4 text-base-content",
  h3: "text-xl lg:text-2xl font-bold tracking-tight mb-2 text-base-content",
  p: "text-base-content/90 leading-relaxed",
  ul: "list-inside list-disc text-base-content/90 leading-relaxed",
  li: "list-item",
  // Altnernatively, you can use the library react-syntax-highlighter to display code snippets.
  code: "text-sm font-mono bg-neutral text-neutral-content p-6 rounded-box my-4 overflow-x-scroll select-all",
  codeInline:
    "text-sm font-mono bg-base-300 px-1 py-0.5 rounded-box select-all",
};

// List of articles displayed on the blog.
export const articles: articleType[] = [
  {
    slug: "introducing-oceanheart-ai",
    title: "Introducing oceanheart.ai",
    description:
      "oceanheart.ai is a new AI-powered therapy platform combining a unique toolset to enhance your effectiveness and efficiency as a clinician",
    categories: [
      categories.find((category) => category.slug === categorySlugs.feature),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-18",
    image: {
      urlRelative: "/blog/introducing-oceanheart-ai/header.png",
      alt: "oceanheart.ai logo",
    },
    content: (
      <>
        <Image
          src="/blog/introducing-oceanheart-ai/header.png"
          alt="oceanheart.ai logo"
          width={700}
          height={500}
          priority={true}
          className="rounded-box"
        />
        <section>
          <h2 className={styles.h2}>Introduction</h2>
          <p className={styles.p}>
            oceanheart.ai is a new AI-powered therapy platform combining a unique toolset to enhance your effectiveness and efficiency as a clinician
          </p>
        </section>

        <section>
          <h3 className={styles.h3}>1. Create an oceanheart.ai account</h3>
          <p className={styles.p}>
            First, go to{" "}
            <a href="https://oceanheart.ai/signup" className="link link-primary">
              oceanheart.ai
            </a>{" "}
            and create an account. The first 100 users will get access to release 1 for just $6/mnth, which frankly is rediculous.
            <br />
            <br />
            Take a look around and check the <a href="/blog/category/tutorials" className="link link-secondary">tutorials</a> to get started.
          </p>
        </section>

        <section>

        </section>
      </>
    ),
    published: true,
  },
  {
    slug: "composable-agent-systems-1",
    title: "Composable Agent Systems: Lessons Learned",
    description:
      "Reflections on keeping overhead low and agility high when designing agent systems.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-19",
    image: {
      urlRelative: "/blog/composable-agent-systems-1/header.png",
      alt: "composable agent systems cover image",
    },
    content: (
      <>
        <Image
          src="/blog/composable-agent-systems-1/header.png"
          alt="composable agent systems cover image"
          width={700}
          height={500}
          priority={true}
        />
        <h2 className={styles.h2}>Why Simple, Composable Designs Work</h2>
        <p className={styles.p}>
          Over time, I've noticed that the most successful agent systems often emerge from simple, composable designs rather than sprawling frameworks. Early on, I made the mistake of trying to stitch together complex chains of tools and prompts, hoping that more moving parts would give me more robust results. In practice, it just made my code harder to maintain and debug.
        </p>
        <p className={styles.p}>
          A lean, single-file approach taught me to focus on clear tool definitions, straightforward loops, and minimal overhead. Each agent can stay tightly scoped to one responsibility: for instance, handling a database query or executing a code transformation. By composing small, purpose-driven scripts, I can quickly pivot if a certain idea doesn't pan out. That flexibility proved invaluable when deadlines were tight or when new project requirements popped up unexpectedly.
        </p>
        <p className={styles.p}>
          The essence of this approach is to provide just enough capabilities‚Äîlike retrieval, memory, or step-by-step prompts‚Äîto achieve the task at hand. Without the baggage of excess tools or overly fancy frameworks, it's easier to see where an agent adds value and where a single prompt might suffice. In short, a direct and simple structure provides clarity, reduces hidden complexity, and keeps the path from input to output transparent at every step.
        </p>
      </>
    ),
    published: true,
  },
  {
    slug: "iterative-verification",
    title: "Iterative Verification in Agent Loops",
    description:
      "Reflections on adding a quick test step before final outputs to ensure accuracy and save time.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-19",
    image: {
      urlRelative: "/blog/iterative-verification/header.jpeg",
      alt: "iterative verification image",
    },
    content: (
      <>
        <Image
          src="/blog/iterative-verification/header.jpeg"
          alt="iterative verification image"
          width={700}
          height={500}
          priority={true}
        />
        <h2 className={styles.h2}>Adding a Quick Test Step</h2>
        <p className={styles.p}>
          I've learned that giving an agent a way to test partial results before finalizing them is a game-changer. At first, I would just run a single pass‚Äîhand the model some instructions, watch it produce an outcome, and hope for the best. But inevitably, small errors crept in: malformed queries, incomplete code blocks, or confusing logic.
        </p>
        <p className={styles.p}>
          The simple fix was to add a lightweight "trial run" step in the middle of the loop. For instance, if the agent needs to craft a database query, it first attempts a test version, collects feedback about errors or table schemas, and only then produces the final query. In other words, it actively checks its own work.
        </p>
        <p className={styles.p}>
          What I found most effective is to keep the verification step as short and clear as possible. If it returns too much noise or tries to do half a dozen different checks, the original problem just gets buried. But with a focused test, the agent can refine its approach and avoid repeated dead ends. This little tweak not only tightened reliability but also cut down on wasted compute and time.
        </p>
      </>
    ),
    published: true,
  },
  {
    slug: "single-file-agents",
    title: "Single-File Agent Architecture",
    description:
      "How embedding an agent's logic, prompts, and dependencies into a single script can streamline development.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.feature),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-19",
    image: {
      urlRelative: "/blog/single-file-agents/header.png",
      alt: "single file agents image",
    },
    content: (
      <>
        <Image
          src="/blog/single-file-agents/header.png"
          alt="single file agents image"
          width={700}
          height={500}
          priority={true}
        />
        <h2 className={styles.h2}>Embracing the Single-File Approach</h2>
        <p className={styles.p}>
          Over time, I discovered that packing an entire agent‚Äîits logic, prompt handling, and dependencies‚Äîinto a single script can be surprisingly powerful. Having everything in one place makes it easier to see exactly what's happening at each step. It also means I can drop the file into a fresh environment, run it, and get immediate results without fussing over separate config files or environment mismatches.
        </p>
        <p className={styles.p}>
          To pull this off, I rely on an approach that <a href="https://docs.astral.sh/uv/guides/scripts/#declaring-script-dependencies" className="link link-primary">embeds dependencies right in the file</a> and organizes each tool through a simple interface. The tools themselves are just small functions or classes with clear parameters. Each loop of the agent is straightforward too: parse arguments, pick a tool, return the result, and repeat. It's a no-frills way to stay transparent about what's being called and why.
        </p>
        <p className={styles.p}>
          Going single-file helped me move faster because I could quickly clone or tweak agents for different tasks: swap out one database library for another, or replace a single prompt step without tearing apart a big codebase. It feels modular despite being self-contained. The key is to keep tools minimal, keep prompts well-scoped, and treat your main loop like a conversation with bite-sized steps. The end result is a system that's easy to grasp, fast to iterate on, and surprisingly robust.
        </p>
        <p className={styles.p}>
          As Big Tech continues to scale up their AI tooling, every developer focusing on agentic systems faces the threat of their custom code being crushed overnight. By keeping systems modular and - more crucially - composable, we can reduce our exposure to technical risk. The uber models will provide an ever more capable orchestration layer that we can use to play our single file systems like a well-tuned orchestra.
        </p>
        <p className={styles.p}>
          Credit to <a href="https://www.anthropic.com/research/building-effective-agents" className="link link-primary">Anthropic's "Building Effective Agents"</a> for one of the clearest sources of guidance on this devilishly difficult topic.
        </p>
        <p className={styles.p}>
          Many of these reflections are built upon the contributions of <a href="https://www.youtube.com/@indydevdan" className="link link-primary">IndyDevDan</a>; a source of true signal (and sanity) in a world of hype, FUD and noise. One of the first movers in this space, he has been building with agents for years and has a wealth of knowledge to share. Rather than jumping on every new tool or framework, Dan is focused on the fundamentals of building effective agents and distilling them into a set of principles that is language, toolchain and framework agnostic. I would <span className="font-bold">strongly</span> recommend you check out his course <a
            href="https://agenticengineer.com/principled-ai-coding?ref=oceanheart.ai"
            className="link link-primary font-bold"
            target="_blank"
            rel="noopener noreferrer"
          >
            Principled AI Coding
          </a>.

        </p>
        <p className={styles.p}>
          It's a game changer.
        </p>
      </>
    ),
    published: true,
  },
  {
    slug: "scaling-agent-compute",
    title: "Scaling Agent Compute Through Multi-Step Reasoning",
    description:
      "Reflections on how multiple loops of context gathering let agents refine their output while controlling cost.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.feature),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-19",
    image: {
      urlRelative: "/blog/scaling-agent-compute/header.jpg",
      alt: "scaling agent compute image",
    },
    content: (
      <>
        <Image
          src="/blog/scaling-agent-compute/header.jpg"
          alt="scaling agent compute image"
          width={700}
          height={500}
          priority={true}
        />
        <h2 className={styles.h2}>Reasoning Over Multiple Steps</h2>
        <p className={styles.p}>
          When I realized that chaining multiple steps of reasoning together could unlock more advanced outcomes, it changed how I thought about compute usage. Instead of a single-pass approach, I started letting the agent run through multiple loops‚Äîeach one gathering new information, refining context, and deciding on the next tool to call. This multi-step pattern didn't just give better results; it let me dial in exactly how much "thinking time" to invest.
        </p>
        <p className={styles.p}>
          By capping the number of loops, I could keep costs in check, while still allowing for deeper logic. If a problem was simple, I'd limit iterations to keep it quick. If it was complex, I'd give the agent more room to explore. On top of that, I can easily switch out the LLM model to use; whilst it is tempting to hit o1 for everything, you take a financial and performance hit. Gemini Flash 2, or it's equivalent cousins from the other mega corps is a fraction of the cost and yet still very capable for well defined tasks. This fine-grained control became invaluable, since I could balance performance against the budget for each task.
        </p>
        <p className={styles.p}>
          An added benefit was the clarity: with each step explicitly logged or stored, debugging felt more like watching a conversation unfold than sifting through an opaque black box. In the end, I found that scaling compute gradually, tied to clear intermediate steps, gave me a more intelligent system without blowing up my runtime costs. It's a natural way to refine solutions: each extra turn in the loop can mean one more shot at getting things right.
        </p>
        <p className={styles.p}>
          Credit to <a href="https://www.youtube.com/@indydevdan" className="link link-primary">IndyDevDan</a> for laying out clear groundwork for this approach; see his Github <a href="https://github.com/disler/single-file-agents" className="link link-primary">here</a>.
        </p>
        <p className={styles.p}>
          Many of these reflections are built upon the contributions of <a href="https://www.youtube.com/@indydevdan" className="link link-primary">IndyDevDan</a>; a source of true signal (and sanity) in a world of hype, FUD and noise. One of the first movers in this space, he has been building with agents for years and has a wealth of knowledge to share. Rather than jumping on every new tool or framework, Dan is focused on the fundamentals of building effective agents and distilling them into a set of principles that is language, toolchain and framework agnostic. If you are serious about building agents and future proofing your work, I would <span className="font-bold">strongly</span> recommend you check out his course <a
            href="https://agenticengineer.com/principled-ai-coding?ref=oceanheart.ai"
            className="link link-primary font-bold"
            target="_blank"
            rel="noopener noreferrer"
          >
            Principled AI Coding
          </a>.
        </p>
      </>
    ),
    published: true,
  },
  {
    slug: "no-perfect-idea",
    title: "There's No Perfect Idea",
    description:
      "Reflecting on why the initial concept rarely matters as much as you think.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-21",
    image: {
      urlRelative: "/blog/no-perfect-idea/header.png",
      alt: "lightbulb moments",
    },
    content: (
      <>
        <Image
          src="/blog/no-perfect-idea/header.png"
          alt="lightbulb moments"
          width={700}
          height={500}
          priority={true}
        />
        <p className={styles.p}>
          Early on, I spent weeks obsessing over "the perfect idea" for my side
          business. Then it hit me: no matter how ingenious my concept was, it
          would inevitably change once real users got involved. Every product
          pivot or feedback session proved that ideas aren't static. What truly
          matters is the willingness to adapt, respond to feedback, and keep
          iterating.
        </p>
        <p className={styles.p}>
          My biggest learning? Don't let yourself stall at the "thinking phase."
          If you're aiming for perfection before you even launch, you'll never
          get anything out the door. At some point, you just have to start
          building. Seeing how users actually interact with your creation
          reveals flaws and opportunities you never anticipated. That's where
          the real growth begins.
        </p>
        <p className={styles.p}>
          Learning point: <strong>Focus on action over obsession.</strong> Pick
          a direction, test it quickly, and be ready to pivot as reality shifts
          your perspective.
        </p>
      </>
    ),
    published: true,
  },
  {
    slug: "embracing-minimalism",
    title: "Embracing Minimalism in the MVP",
    description:
      "How a bare-bones approach keeps your side project manageable and moving forward.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-21",
    image: {
      urlRelative: "/blog/embracing-minimalism/header.jpg",
      alt: "minimal product focus",
    },
    content: (
      <>
        <Image
          src="/blog/embracing-minimalism/header.jpg"
          alt="minimal product focus"
          width={700}
          height={500}
          priority={true}
        />
        <p className={styles.p}>
          When I first set out to build my own SaaS, I felt the urge to stuff
          it with every feature I could imagine. It wasn't long before I found
          myself buried in complexity, chasing my tail and losing momentum.
          That's when I discovered the power of an absolute bare-bones MVP.
        </p>
        <p className={styles.p}>
          Stripping down to essential functionality not only kept my stress
          levels in check, but also sped up my release cycle. Once I launched, I
          realized many of my "must-have" features were irrelevant. Users
          gravitated to a core set of tools I almost hadn't built. Every extra
          feature I had planned would've wasted precious time and energy.
        </p>
        <p className={styles.p}>
          Learning point: <strong>Less is more.</strong> Start small, ship it,
          then learn what matters by watching real-world engagement. It keeps
          you sane and helps you iterate faster.
        </p>
      </>
    ),
    published: false,
  },
  {
    slug: "avoid-needless-complexity",
    title: "Avoiding Complexity That Doesn't Matter",
    description:
      "Why offloading and skipping unneeded tasks can save your side business.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-21",
    image: {
      urlRelative: "/blog/avoid-needless-complexity/header.jpg",
      alt: "steering away from complexity",
    },
    content: (
      <>
        <Image
          src="/blog/avoid-needless-complexity/header.jpg"
          alt="steering away from complexity"
          width={700}
          height={500}
          priority={true}
        />
        <p className={styles.p}>
          In my early attempts at side ventures, I insisted on coding every
          piece myself‚Äîuser authentication, email systems, analytics‚Äîbecause I
          thought being "full stack" meant doing it all. But the deeper I got,
          the more it felt like pushing a boulder uphill. Customer feedback
          forms? Email queues? They weren't my app's core value, yet they ate
          major chunks of time.
        </p>
        <p className={styles.p}>
          Eventually, I realized I could outsource or automate most non-critical
          systems. Using managed services for payments, sign-in, and even user
          feedback freed up my time to focus on the features that truly made my
          offering unique. Suddenly, I was shipping updates in days, not weeks,
          and my burnout risk dropped dramatically.
        </p>
        <p className={styles.p}>
          Learning point: <strong>Pick your battles.</strong> Invest your energy
          where you add distinct value. Offload or defer everything else‚Äîyour
          sanity and timeline will thank you.
        </p>
      </>
    ),
    published: false,
  },
  {
    slug: "embracing-rework",
    title: "Embracing Rework as Part of the Process",
    description:
      "Why doing things twice can be a feature, not a bug, when building a side SaaS.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-21",
    image: {
      urlRelative: "/blog/embracing-rework/header.jpg",
      alt: "embracing rework",
    },
    content: (
      <>
        <Image
          src="/blog/embracing-rework/header.jpg"
          alt="embracing rework"
          width={700}
          height={500}
          priority={true}
        />
        <p className={styles.p}>
          Early on, I dreaded the idea of rewriting my code. I aimed for a
          perfect architecture from day one, hoping to avoid future headaches.
          But I soon learned that no matter how carefully I planned, real user
          feedback always changed my direction. Rework became inevitable, and
          resisting it only slowed me down.
        </p>
        <p className={styles.p}>
          It was a revelation when I started to see rework as a form of
          "productive iteration." By expecting to refactor, I wrote simpler
          first drafts, knowing they weren't the final word. Each revision
          improved my design based on reality, not assumptions.
        </p>
        <p className={styles.p}>
          Learning point:{" "}
          <strong>Don't fear rebuilding; embrace it as part of evolving.</strong>{" "}
          Better to iterate fast and adjust than to cling to a "perfect" plan
          that never survives contact with users.
        </p>
      </>
    ),
    published: false,
  },
  {
    slug: "finding-a-niche",
    title: "The Advantage of Finding a Smaller Niche",
    description:
      "How aiming for a modest market can give your side project room to thrive.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-21",
    image: {
      urlRelative: "/blog/finding-a-niche/header.jpg",
      alt: "small market advantage",
    },
    content: (
      <>
        <Image
          src="/blog/finding-a-niche/header.jpg"
          alt="small market advantage"
          width={700}
          height={500}
          priority={true}
        />
        <p className={styles.p}>
          There was a time I believed my side project had to disrupt an entire
          industry to be "worth it." That mindset is exhausting. When I finally
          shifted to serving a tightly focused audience, I noticed something
          wonderful: fewer big competitors bothered to move in.
        </p>
        <p className={styles.p}>
          Sure, my user base was smaller, but it was more committed. I could
          charge a fair price for specialized value, and my platform's overhead
          didn't need to be massive to sustain me. It was liberating to realize
          I could build something profitable without chasing millions of
          customers.
        </p>
        <p className={styles.p}>
          Learning point: <strong>Small can be sustainable.</strong> Aim to
          serve a distinct group with a real need, and you'll avoid the brutal
          slugfest that comes with hyper-competitive markets.
        </p>
      </>
    ),
    published: false,
  },
  {
    slug: "mvp-marathon",
    title: "A Side Project is a Marathon, Not a Sprint",
    description:
      "Staying consistent and preventing burnout in the long haul of solo SaaS.",
    categories: [
      categories.find((category) => category.slug === categorySlugs.learning),
    ],
    author: authors.find((author) => author.slug === authorSlugs.kai),
    publishedAt: "2025-02-21",
    image: {
      urlRelative: "/blog/mvp-marathon/header.jpg",
      alt: "long distance run",
    },
    content: (
      <>
        <Image
          src="/blog/mvp-marathon/header.jpg"
          alt="long distance run"
          width={700}
          height={500}
          priority={true}
        />
        <p className={styles.p}>
          I can't count how many times I've tried to sprint through a weekend of
          coding, only to crash hard on Monday. The reality is that building a
          side business isn't a quick dash; it's an ongoing process. Spreading
          out the workload, staying mindful of rest, and celebrating small wins
          keeps it sustainable.
        </p>
        <p className={styles.p}>
          The moment I accepted it would take months or even years to refine my
          product, I relaxed. That freed me to think more carefully, focus on
          the aspects that truly mattered, and pace myself without burning out.
          Productivity soared once the pressure was off to rush everything.
        </p>
        <p className={styles.p}>
          Learning point: <strong>Consistency beats intensity.</strong> Treat
          your project like a long-distance run. You'll evolve, learn, and build
          resilience along the way.
        </p>
      </>
    ),
    published: false,
  }
];
</file>

<file path="app/consulting/page.tsx">
import Image from "next/image";
import Link from "next/link";
import { Suspense } from "react";
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import { FaBrain, FaUsers, FaBuilding, FaRobot, FaClock, FaLaptopCode, FaChartLine, FaRocket } from "react-icons/fa";

const ServiceCard = ({ icon, title, description }: { icon: React.ReactNode, title: string, description: string }) => (
  <div className="bg-base-200 p-8 rounded-lg shadow-lg">
    <div className="flex items-center mb-4">
      <div className="mr-4 text-primary text-2xl">{icon}</div>
      <h3 className="font-bold text-xl">{title}</h3>
    </div>
    <p className="opacity-80">{description}</p>
  </div>
);

const ClientSection = ({ icon, title, description }: { icon: React.ReactNode, title: string, description: string }) => (
  <div className="flex flex-col md:flex-row items-center gap-6 py-6">
    <div className="text-4xl text-primary">{icon}</div>
    <div>
      <h3 className="font-bold text-xl mb-2">{title}</h3>
      <p className="opacity-80">{description}</p>
    </div>
  </div>
);

export default function ConsultingPage() {
  return (
    <>
      <Suspense>
        <Header />
      </Suspense>
      <main className="bg-base-100">
        {/* Hero Section */}
        <section className="relative py-20 md:py-32 px-8">
          <div className="max-w-7xl mx-auto">
            <div className="flex flex-col md:flex-row items-center gap-12">
              <div className="md:w-2/3">
                <h1 className="font-extrabold text-4xl md:text-6xl tracking-tight mb-6">
                  Private <span className="text-blue-400">AI Consulting</span> for Your Unique Needs
                </h1>
                <p className="text-lg md:text-xl opacity-80 mb-8">
                  Cut the repetition. Eliminate the boring parts. Focus on what truly matters in your work and life.
                </p>
                <div className="flex flex-col sm:flex-row gap-4">
                  <Link href="#services" className="btn btn-primary">
                    Explore Services
                  </Link>
                  <Link href="mailto:kai@oceanheart.ai" className="btn btn-outline">
                    Get in Touch
                  </Link>
                </div>
              </div>
              <div className="md:w-1/3">
                <Image
                  src="/images/about_me_profile_2.jpeg"
                  alt="AI Consultant"
                  width={400}
                  height={400}
                  className="rounded-full mx-auto"
                />
              </div>
            </div>
          </div>
        </section>

        {/* Why Choose Me Section */}
        <section className="bg-neutral text-neutral-content py-16 md:py-24 px-8">
          <div className="max-w-7xl mx-auto text-center">
            <h2 className="font-bold text-3xl md:text-5xl mb-8">
              Why Choose <span className="text-blue-400">My Consulting</span> Services?
            </h2>
            <p className="text-lg max-w-3xl mx-auto mb-12 opacity-90">
              I've spent years at the intersection of psychology and technology, building AI solutions that actually work for real-world problems.
            </p>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              <div className="flex flex-col items-center p-6">
                <FaBrain className="text-5xl text-primary mb-4" />
                <h3 className="font-bold text-xl mb-2">Dual Expertise</h3>
                <p className="opacity-80">
                  With backgrounds in both psychology and software engineering, I bridge the gap between human needs and technical solutions.
                </p>
              </div>
              <div className="flex flex-col items-center p-6">
                <FaClock className="text-5xl text-primary mb-4" />
                <h3 className="font-bold text-xl mb-2">Time-Saving Focus</h3>
                <p className="opacity-80">
                  I don't waste your time with flashy demos. We focus on practical solutions that give you back precious hours each week.
                </p>
              </div>
              <div className="flex flex-col items-center p-6">
                <FaLaptopCode className="text-5xl text-primary mb-4" />
                <h3 className="font-bold text-xl mb-2">Privacy-First Approach</h3>
                <p className="opacity-80">
                  I design solutions with privacy built-in from the ground up, especially important for those handling sensitive data.
                </p>
              </div>
            </div>
          </div>
        </section>

        {/* Services Section */}
        <section className="py-16 md:py-24 px-8" id="services">
          <div className="max-w-7xl mx-auto">
            <h2 className="font-bold text-3xl md:text-5xl text-center mb-12">
              My <span className="text-blue-400">Services</span>
            </h2>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-16">
              <ServiceCard
                icon={<FaRobot />}
                title="AI Integration Assessment"
                description="A comprehensive analysis of your current workflow to identify where AI can make the biggest impact with the least disruption."
              />
              <ServiceCard
                icon={<FaLaptopCode />}
                title="Custom AI Solution Design"
                description="Tailored AI tools designed specifically for your unique needs, whether for note-taking, data analysis, or client interactions."
              />
              <ServiceCard
                icon={<FaChartLine />}
                title="AI Implementation & Training"
                description="Hands-on setup and training to ensure you and your team can effectively use and maintain your new AI tools."
              />
              <ServiceCard
                icon={<FaRocket />}
                title="Ongoing Support & Optimization"
                description="Regular check-ins and adjustments to ensure your AI solutions continue to evolve with your changing needs."
              />
            </div>

            <div className="bg-base-200 p-8 md:p-12 rounded-lg">
              <h3 className="font-bold text-2xl mb-6">
                Who I Work With
              </h3>

              <div className="space-y-4">
                <ClientSection
                  icon={<FaUsers />}
                  title="Individual Practitioners"
                  description="Therapists, coaches, and solo professionals looking to streamline documentation, enhance client experiences, and focus more on their craft."
                />
                <ClientSection
                  icon={<FaBuilding />}
                  title="Small & Medium Enterprises"
                  description="Teams that want to reduce administrative overhead, improve internal processes, and leverage data they already have for better decision-making."
                />
                <ClientSection
                  icon={<FaRocket />}
                  title="Forward-Thinking Organizations"
                  description="Any group looking to stay ahead of technological change while prioritizing ethical implementation and meaningful human connections."
                />
              </div>
            </div>
          </div>
        </section>

        {/* Testimonials could go here in the future */}

        {/* Call-to-Action Section */}
        <section className="bg-primary text-primary-content py-16 md:py-24 px-8">
          <div className="max-w-7xl mx-auto text-center">
            <h2 className="font-bold text-3xl md:text-4xl mb-6">
              Ready to transform your work?
            </h2>
            <p className="mb-8 text-lg max-w-2xl mx-auto">
              Let's discuss how AI can help you reclaim your time, enhance your effectiveness, and find more joy in what you do.
            </p>
            <Link href="mailto:kai@oceanheart.ai" className="btn bg-neutral text-neutral-content btn-wide">
              Book a Free Consultation
            </Link>
          </div>
        </section>

        {/* FAQ Section */}
        <section className="py-16 md:py-24 px-8 bg-base-200">
          <div className="max-w-4xl mx-auto">
            <h2 className="font-bold text-3xl text-center mb-12">
              Frequently Asked Questions
            </h2>

            <div className="space-y-6">
              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" defaultChecked />
                <div className="collapse-title font-medium text-lg">
                  Do I need technical knowledge to work with you?
                </div>
                <div className="collapse-content">
                  <p>Not at all! My job is to translate complex technical concepts into plain language and practical solutions. I handle the technical details so you can focus on the results.</p>
                </div>
              </div>

              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" />
                <div className="collapse-title font-medium text-lg">
                  How do you ensure privacy and data security?
                </div>
                <div className="collapse-content">
                  <p>Privacy is built into everything I do. I prioritize local processing where possible, implement proper encryption, and follow best practices for data handling. I'm transparent about how data flows through any system I design.</p>
                </div>
              </div>

              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" />
                <div className="collapse-title font-medium text-lg">
                  How much does it cost to work with you?
                </div>
                <div className="collapse-content">
                  <p>Pricing depends on the scope and complexity of your needs. I offer packages starting at ¬£99 for initial assessments and recommendations, with implementation costs varying based on your specific requirements. I'm always transparent about costs and timelines.</p>
                </div>
              </div>

              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" />
                <div className="collapse-title font-medium text-lg">
                  How long does the process typically take?
                </div>
                <div className="collapse-content">
                  <p>Most clients see initial results within 2-4 weeks. Simple implementations can be completed in days, while more complex solutions may take 1-3 months. We'll establish clear timelines and milestones at the beginning of our work together.</p>
                </div>
              </div>

              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" />
                <div className="collapse-title font-medium text-lg">
                  Will I be locked into ongoing costs or subscriptions?
                </div>
                <div className="collapse-content">
                  <p>I design solutions with sustainability in mind. While some AI tools do require subscriptions, I'll clearly outline all ongoing costs and help you choose options that make sense for your budget. Many solutions can be implemented with minimal recurring expenses.</p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
      <Footer />
    </>
  );
}
</file>

<file path="app/conversations/page.tsx">
"use client";
import { useState, useRef } from 'react';
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import { FaRegComments, FaBrain, FaSearch, FaRegLightbulb, FaListAlt, FaChalkboardTeacher, FaUserCheck, FaProjectDiagram, FaLaptopCode, FaUsers, FaRegArrowAltCircleRight, FaBookOpen } from "react-icons/fa";
import Link from "next/link";

const ConversationsPage = () => {
  const [openAccordionIndex, setOpenAccordionIndex] = useState<number | null>(null);
  const [isOutlineOpen, setIsOutlineOpen] = useState<boolean>(false);
  const outlineContentRef = useRef<HTMLDivElement>(null);

  const differentiators = [
    {
      icon: <FaChalkboardTeacher className="w-8 h-8 text-primary" />,
      title: "Experiential Learning, Not Just Information Transfer",
      typical: "Present techniques (like lectures) and then give you exercises.",
      ours: "You learn by doing from the very first moment. Each module is a guided \"Conversation\" with AI within our integrated platform. Techniques aren't just explained; they are discovered as natural solutions when you encounter interaction challenges. The focus is on your direct experience and the insights you generate.",
    },
    {
      icon: <FaBrain className="w-8 h-8 text-primary" />,
      title: "Mindful Interaction, Not Just Technical Skill",
      typical: "Ignore the human element ‚Äì the potential frustration, confusion, or cognitive biases that arise during learning.",
      ours: "We integrate principles from mindfulness and psychology (ACT, CBT) directly into the learning process. We help you observe AI responses ‚Äì and your own internal reactions ‚Äì with non-judgmental awareness. Brief, optional somatic cues keep you grounded. You'll learn to navigate challenges with psychological flexibility, turning potential frustration into fuel for curiosity.",
    },
    {
      icon: <FaSearch className="w-8 h-8 text-primary" />,
      title: "Focus on the Process of Discovery, Not Just the Output",
      typical: "Emphasize getting the \"right\" output quickly.",
      ours: "The process of interaction is where the deepest learning happens. We guide you through a natural 5-step cycle for each interaction: Intend -> Converse -> Observe -> Gain Insight -> Iterate. \"Failed\" prompts aren't errors; they are crucial pieces of information. We positively reinforce the learning gained from every interaction, not just the successful outputs.",
    },
    {
      icon: <FaRegComments className="w-8 h-8 text-primary" />,
      title: "Intuitive Dialogue Skills, Not Just a Library of Prompts",
      typical: "Offer lists of \"power prompts\" or aim for productivity shortcuts.",
      ours: "We aim for a deeper, embodied understanding of how to engage in effective dialogue. You'll develop the confidence to communicate nuances, critically evaluate responses, and build a more sophisticated, relational interaction style with AI, going far beyond simple commands.",
    },
    {
      icon: <FaListAlt className="w-8 h-8 text-primary" />,
      title: "Cohesive, Reflective Learning Ecosystem",
      typical: "Often require juggling external tools and separate note-taking.",
      ours: "Engage, reflect, and track your progress all in one place. Our platform captures your unique journey ‚Äì your anticipations, prompts, observations, and insights ‚Äì automatically compiling them into a personal Learning Journal. See your own thought process unfold and your skills grow via the \"AI Dialogue Skill Path,\" reinforcing your progress in a meaningful way.",
    },
  ];

  return (
    <>
      <Header />
      <main>
        {/* Hero Section */}
        <section className="bg-base-100 py-20 md:py-16 overflow-hidden relative">
          {/* Background decorative elements */}
          <div className="absolute -top-20 -left-20 w-64 h-64 bg-secondary/10 rounded-full opacity-60 blur-3xl z-0"></div>
          <div className="absolute top-1/3 right-10 w-40 h-40 bg-primary/10 rounded-full opacity-40 blur-2xl z-0"></div>
          <div className="absolute bottom-0 left-1/4 w-60 h-60 bg-base-200 rounded-full opacity-70 blur-3xl z-0"></div>

          <div className="max-w-4xl mx-auto px-8 relative z-10">
            <div className="text-center">
              <div className="relative mb-8">
                <h1 className="text-4xl md:text-6xl font-extrabold tracking-tight mb-12 relative z-10">
                  <span className="text-secondary">Conversations with AI<sup className="text-sm md:text-2xl align-super ml-1">‚Ñ¢</sup></span>
                </h1>
                <h2 className="text-2xl md:text-3xl font-semibold text-base-content/80 mb-8">
                  Mastering AI Through Mindful Dialogue, Not Memorization
                </h2>
                <div className="absolute -top-6 -left-6 w-20 h-20 bg-base-200 rounded-full opacity-50 blur-xl z-0"></div>
                <div className="absolute bottom-0 right-0 w-32 h-32 bg-secondary/10 rounded-full opacity-30 blur-xl z-0"></div>
              </div>

              <div className="flex flex-col md:flex-row gap-8 justify-center items-center mb-10">
                <div className="flex-1 max-w-xl">
                  <div className="bg-base-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 text-left">
                    <p className="text-lg opacity-90 leading-relaxed">
                      The world is flooded with AI courses promising mastery through endless lists of "prompt hacks" and technical jargon.<br /><br />They often feel overwhelming, abstract, and disconnected from the human experience of learning.
                    </p>
                  </div>
                </div>

                <div className="flex-1 max-w-xl">
                  <div className="flex flex-col gap-3 border-l-4 border-secondary pl-4 py-2 text-left">
                    <p className="text-lg opacity-90 leading-relaxed">
                      <span className="font-semibold text-secondary">'Conversations with AI'</span> offers a fundamentally different path. <br /><br />Designed specifically for therapists, healers, coaches, creatives, and anyone seeking a more intuitive, insightful, and human-centered way to engage with Artificial Intelligence.
                    </p>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </section>

        {/* Differentiators Section */}
        <section className="bg-base-200 py-24 md:py-32 space-y-2 md:space-y-8 overflow-hidden relative" id="features">
          {/* Background decorative elements */}
          <div className="absolute top-16 left-10 w-32 h-32 bg-primary/10 rounded-full blur-2xl opacity-60 z-0"></div>
          <div className="absolute bottom-24 right-10 w-48 h-48 bg-primary/5 rounded-full blur-3xl opacity-40 z-0"></div>

          <div className="max-w-7xl mx-auto px-8 relative z-10">
            <h2 className="font-extrabold text-4xl lg:text-6xl tracking-tight mb-12 md:mb-16 text-center">
              <span className="text-primary">Conversations</span> with AI:
              <span className="bg-neutral text-neutral-content px-2 md:px-4 ml-2 md:ml-2 leading-relaxed inline-block mt-2">
                A <span className="text-primary">Unique</span> Learning Experience
              </span>
            </h2>

            {/* Simple Version Dropdown - Enhanced */}
            <div className="max-w-3xl mx-auto mb-16 md:mb-20">
              <details className="collapse collapse-arrow bg-base-100 border border-base-300/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300">
                <summary className="collapse-title text-xl md:text-2xl font-semibold cursor-pointer text-base-content group hover:text-primary transition-colors">
                  <span className="relative">
                    The Essence of Our Approach
                    <span className="text-primary text-lg ml-2">(Simple Version)</span>
                    <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300"></span>
                  </span>
                </summary>
                <div className="collapse-content px-8 py-8 md:p-10 prose prose-sm md:prose-base max-w-none text-base-content/90">
                  <p className="text-lg leading-relaxed mb-6">
                    Think of learning to interact effectively with AI less like studying a technical manual, and more like learning a new form of dialogue or even a subtle craft.
                  </p>
                  <p className="mb-6">
                    Many courses will give you lists of rules, commands, or "prompts to copy." While sometimes helpful, this often feels like memorizing phrases without truly understanding the flow of conversation.
                  </p>
                  <p className="mb-6">
                    Our approach is distinctive. We focus on the <strong className="text-primary">experience of the interaction itself</strong>:
                  </p>
                  <ul className="space-y-4 mb-6">
                    <li className="flex items-start gap-3">
                      <span className="text-primary mt-1 text-lg">‚Ä¢</span>
                      <span><strong className="text-primary">You engage directly:</strong> You'll try expressing your intentions to the AI within our guided platform.</span>
                    </li>
                    <li className="flex items-start gap-3">
                      <span className="text-primary mt-1 text-lg">‚Ä¢</span>
                      <span><strong className="text-primary">You observe mindfully:</strong> We encourage you to pay close attention ‚Äì not just to what the AI says back, but how it responds, and even how you feel or react during the exchange.</span>
                    </li>
                    <li className="flex items-start gap-3">
                      <span className="text-primary mt-1 text-lg">‚Ä¢</span>
                      <span><strong className="text-primary">You gain insight from the process:</strong> Instead of just judging the outcome as "right" or "wrong," we treat every interaction as information. What worked? What led to confusion? What subtle shift in your approach might create a different result next time?</span>
                    </li>
                    <li className="flex items-start gap-3">
                      <span className="text-primary mt-1 text-lg">‚Ä¢</span>
                      <span><strong className="text-primary">You learn iteratively:</strong> Skill develops through this cycle of trying, observing, reflecting, and adjusting ‚Äì much like refining any subtle communication skill.</span>
                    </li>
                  </ul>
                  <p className="text-lg mt-8 font-medium leading-relaxed">
                    Essentially, we're helping you develop an intuitive feel for communicating with AI. You'll build genuine understanding and confidence through direct, mindful practice, rather than just collecting technical tricks. It's about cultivating a more conscious and effective way to engage in this new kind of dialogue.
                  </p>
                </div>
              </details>
            </div>

            {/* Detailed Differentiators Accordion - Styled to Match FeaturesAccordion */}
            <div className="max-w-3xl mx-auto relative">
              <h3 className="text-2xl md:text-3xl font-bold tracking-tight text-center mb-10 md:mb-12">
                The <span className="text-primary">Five Key Distinctions</span> Explained
              </h3>
              <ul className="space-y-3">
                {differentiators.map((item, index) => {
                  const isOpen = index === openAccordionIndex;
                  const contentRef = useRef<HTMLDivElement>(null);

                  return (
                    <li key={index} className="bg-base-100 border border-base-300/20 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden">
                      <button
                        className="w-full py-5 px-6 text-left flex items-center gap-4 cursor-pointer"
                        onClick={() => setOpenAccordionIndex(isOpen ? null : index)}
                        aria-expanded={isOpen}
                      >
                        {/* Icon */}
                        {item.icon &&
                          <span className={`w-8 h-8 flex-shrink-0 transition-colors duration-300 ${isOpen ? 'text-primary' : 'text-base-content/70'}`}>{
                            item.icon
                          }</span>
                        }
                        {/* Title */}
                        <span className={`flex-1 text-lg md:text-xl font-semibold transition-colors duration-300 ${isOpen ? 'text-primary font-bold' : 'text-base-content'}`}>
                          {item.title}
                        </span>
                        {/* Arrow Icon */}
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" className={`w-5 h-5 flex-shrink-0 transition-transform duration-300 ${isOpen ? 'rotate-180 text-primary' : ''}`}>
                          <path fillRule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.29a.75.75 0 01.02-1.06z" clipRule="evenodd" />
                        </svg>
                      </button>

                      {/* Content */}
                      <div
                        ref={contentRef}
                        className="transition-all duration-300 ease-in-out overflow-hidden"
                        style={{
                          maxHeight: isOpen ? contentRef.current?.scrollHeight + "px" : "0px",
                          opacity: isOpen ? 1 : 0,
                        }}
                      >
                        <div className="px-6 pt-0 pb-6 space-y-4">
                          <div className="border-l-4 border-red-400/60 pl-4 py-3 bg-red-50/40 rounded-r-md">
                            <p className="text-sm font-semibold text-red-700/90 mb-1">Typical AI Courses:</p>
                            <p className="text-base-content/90 italic leading-relaxed">{item.typical}</p>
                          </div>
                          <div className="border-l-4 border-primary/60 pl-4 py-3 bg-primary/5 rounded-r-md">
                            <p className="text-sm font-semibold text-primary mb-1">Our Approach:</p>
                            <p className="text-base-content/90 leading-relaxed">{item.ours}</p>
                          </div>
                        </div>
                      </div>
                    </li>
                  );
                })}
              </ul>
            </div>

            {/* NEW: Course Outline Preview Accordion */}
            <div className="max-w-3xl mx-auto mt-12 md:mt-16 relative">
              <div className="bg-base-100 border border-base-300/20 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden">
                <button
                  className="w-full py-5 px-6 text-left flex items-center gap-4 cursor-pointer"
                  onClick={() => setIsOutlineOpen(!isOutlineOpen)}
                  aria-expanded={isOutlineOpen}
                >
                  {/* Icon */}
                  <span className={`w-8 h-8 flex-shrink-0 transition-colors duration-300 ${isOutlineOpen ? 'text-primary' : 'text-base-content/70'}`}>
                    <FaBookOpen className="w-full h-full" />
                  </span>
                  {/* Title */}
                  <span className={`flex-1 text-lg md:text-xl font-semibold transition-colors duration-300 ${isOutlineOpen ? 'text-primary font-bold' : 'text-base-content'}`}>
                    A Glimpse Inside: Course Outline Preview
                  </span>
                  {/* Arrow Icon */}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" className={`w-5 h-5 flex-shrink-0 transition-transform duration-300 ${isOutlineOpen ? 'rotate-180 text-primary' : ''}`}>
                    <path fillRule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.29a.75.75 0 01.02-1.06z" clipRule="evenodd" />
                  </svg>
                </button>

                {/* Content */}
                <div
                  ref={outlineContentRef}
                  className="transition-all duration-300 ease-in-out overflow-hidden"
                  style={{
                    maxHeight: isOutlineOpen ? outlineContentRef.current?.scrollHeight + "px" : "0px",
                    opacity: isOutlineOpen ? 1 : 0,
                  }}
                >
                  <div className="px-6 pt-0 pb-6 md:px-8 md:pb-8 prose prose-sm md:prose-base max-w-none text-base-content/90">
                    <p className="mb-4">This course guides you through a progressive journey, building intuitive AI dialogue skills:</p>
                    <ul className="space-y-3 list-none p-0">
                      <li className="flex items-start gap-2">
                        <FaRegArrowAltCircleRight className="text-primary w-4 h-4 mt-1 flex-shrink-0" />
                        <span><strong>Phase 1: Foundations - Making Contact:</strong> Start your first conversations, see how wording matters, guide response length, and tune the AI's creativity (Temperature).</span>
                      </li>
                      <li className="flex items-start gap-2">
                        <FaRegArrowAltCircleRight className="text-primary w-4 h-4 mt-1 flex-shrink-0" />
                        <span><strong>Phase 2: Shaping the Dialogue:</strong> Learn to teach the AI with examples (Few-Shot), provide essential context, assign roles/personas, and give clear instructions.</span>
                      </li>
                      <li className="flex items-start gap-2">
                        <FaRegArrowAltCircleRight className="text-primary w-4 h-4 mt-1 flex-shrink-0" />
                        <span><strong>Phase 3: Deeper Interaction & Reasoning:</strong> Encourage step-by-step logic (Chain of Thought), check for consistency, use abstraction (Step-Back), and grasp how AI can use tools (ReAct).</span>
                      </li>
                      <li className="flex items-start gap-2">
                        <FaRegArrowAltCircleRight className="text-primary w-4 h-4 mt-1 flex-shrink-0" />
                        <span><strong>Phase 4: Specialized Skills:</strong> Explore basic code generation/explanation and learn to request structured data like JSON.</span>
                      </li>
                      <li className="flex items-start gap-2">
                        <FaRegArrowAltCircleRight className="text-primary w-4 h-4 mt-1 flex-shrink-0" />
                        <span><strong>Phase 5: Integration & Mastery:</strong> Combine techniques for complex tasks, reflect on your learning process, and consider responsible AI use.</span>
                      </li>
                    </ul>
                    <p className="mt-6 text-sm italic">Note: This is a simplified overview. Each phase contains multiple modules with guided, experiential exercises within the platform.</p>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>

        {/* Summary/Metaphor Section - Enhanced */}
        <section className="bg-neutral text-neutral-content py-24 md:py-28 relative overflow-hidden">
          <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full h-12 bg-gradient-to-b from-base-200 to-transparent opacity-70"></div>

          <div className="max-w-3xl mx-auto px-8 relative">
            <h2 className="text-3xl md:text-4xl font-bold tracking-tight mb-10 text-center">
              In <span className="text-primary">Simple Terms</span>:
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10 items-center">
              <div className="bg-base-100/10 p-6 md:p-8 rounded-xl shadow-inner text-left transform transition-transform hover:-translate-y-1 duration-300">
                <h3 className="font-semibold text-xl mb-4 flex items-center gap-3">
                  <FaLaptopCode className="text-red-300 w-6 h-6" />
                  <span>Typical Courses</span>
                </h3>
                <p className="opacity-90 leading-relaxed text-lg">Teach you AI like you're learning to operate complex machinery ‚Äì focusing on buttons and functions.</p>
              </div>
              <div className="bg-base-100/10 p-6 md:p-8 rounded-xl shadow-inner text-left transform transition-transform hover:-translate-y-1 duration-300">
                <h3 className="font-semibold text-xl mb-4 flex items-center gap-3">
                  <FaUsers className="text-primary w-6 h-6" />
                  <span>Conversations with AI</span>
                </h3>
                <p className="opacity-90 leading-relaxed text-lg">Teaches you like you're learning to dance with a new partner. We guide you through the steps, help you feel the rhythm, and find your own way</p>
              </div>
            </div>
          </div>
        </section>

        {/* Closing/CTA Section - Enhanced */}
        <section className="bg-base-100 py-20 md:py-28 relative overflow-hidden">
          <div className="absolute bottom-0 right-0 w-60 h-60 bg-primary/5 rounded-full blur-3xl opacity-70 z-0"></div>

          <div className="max-w-3xl mx-auto px-8 text-center relative z-10">
            <p className="text-xl md:text-2xl opacity-90 leading-relaxed mb-10 max-w-2xl mx-auto">
              If you're seeking more than just technical instructions ‚Äì if you desire <span className="font-semibold text-primary">genuine understanding</span>, confidence, and a <span className="font-semibold text-primary">mindful approach</span> to engaging with AI ‚Äì then <span className="font-bold text-primary">'Conversations with AI'</span> is designed for you.
            </p>
            <Link href="/#pricing" className="btn btn-primary btn-lg shadow-md hover:shadow-lg transition-all duration-300 rounded-xl text-lg px-8">
              Explore Offerings <FaRegArrowAltCircleRight className="ml-2" />
            </Link>
          </div>
        </section>
      </main>
      <Footer />
    </>
  );
};

export default ConversationsPage;
</file>

<file path="app/hdi/components/CountdownTimer.tsx">
"use client";

import { useState, useEffect } from "react";
import { Tooltip } from "react-tooltip";
import 'react-tooltip/dist/react-tooltip.css';

interface CountdownTimerProps {
  onDownload: () => void;
  timeRemaining: {
    days: number;
    hrs: number;
    mins: number;
    secs: number;
    expired: boolean;
  };
  setTimeRemaining: (timeRemaining: {
    days: number;
    hrs: number;
    mins: number;
    secs: number;
    expired: boolean;
  }) => void;
}

export default function CountdownTimer({ onDownload, timeRemaining, setTimeRemaining }: CountdownTimerProps) {
  // Calculate target timestamp only once on initial mount
  const [targetTimestamp] = useState(() => {
    const targetDate = new Date();
    targetDate.setDate(targetDate.getDate() + 30);
    return targetDate.getTime();
  });

  useEffect(() => {
    const calculateTimeRemaining = () => {
      const now = Date.now();
      const difference = targetTimestamp - now;

      if (difference <= 0) {
        setTimeRemaining({
          days: 0,
          hrs: 0,
          mins: 0,
          secs: 0,
          expired: true
        });
        return;
      }

      const days = Math.floor(difference / (1000 * 60 * 60 * 24));
      const hrs = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((difference % (1000 * 60)) / 1000);

      setTimeRemaining({
        days,
        hrs,
        mins,
        secs,
        expired: false
      });
    };

    calculateTimeRemaining();
    const timer = setInterval(calculateTimeRemaining, 1000);

    return () => clearInterval(timer);
  }, [targetTimestamp]);

  return (
    <section className="mb-16 md:mb-18">
      <h3 className="font-bold text-2xl lg:text-3xl tracking-tight mb-6 text-center">
        Countdown to <span className="text-secondary">v0.1</span>
      </h3>

      <div className="grid grid-cols-4 gap-4 max-w-2xl mx-auto mb-12">
        <div className="bg-base-200 p-6 rounded-xl text-center">
          <div className="text-3xl md:text-4xl font-bold">{timeRemaining.days}</div>
          <div className="text-sm opacity-70">days</div>
        </div>
        <div className="bg-base-200 p-6 rounded-xl text-center">
          <div className="text-3xl md:text-4xl font-bold">{timeRemaining.hrs}</div>
          <div className="text-sm opacity-70">hrs</div>
        </div>
        <div className="bg-base-200 p-6 rounded-xl text-center">
          <div className="text-3xl md:text-4xl font-bold">{timeRemaining.mins}</div>
          <div className="text-sm opacity-70">mins</div>
        </div>
        <div className="bg-base-200 p-6 rounded-xl text-center">
          <div className="text-3xl md:text-4xl font-bold">{timeRemaining.secs}</div>
          <div className="text-sm opacity-70">secs</div>
        </div>
      </div>

      <div className="text-center">
        <button
          data-tooltip-id="download-tooltip"
          data-tooltip-content="Patience, grasshopper..."
          onClick={onDownload}
          className="btn btn-outline btn-md text-md"
        >
          Download HDI v0.1
        </button>
        {!timeRemaining.expired && <Tooltip id="download-tooltip" place="top" delayShow={100} />}
      </div>
    </section>
  );
}
</file>

<file path="app/somatic-bournemouth/page.tsx">
"use client";

import Image from "next/image";
import Link from "next/link";
import { Suspense, useState, useEffect } from "react";
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import { FaLeaf, FaWater, FaWind, FaFire, FaYinYang } from "react-icons/fa";

const ElementCard = ({ icon, title, text }: { icon: React.ReactNode, title: string, text: string }) => (
  <div className="flex flex-col items-center text-center p-6 rounded-lg bg-base-200 shadow-lg">
    <div className="text-primary text-4xl mb-4">{icon}</div>
    <h3 className="text-xl font-bold mb-2">{title}</h3>
    <p className="opacity-80">{text}</p>
  </div>
);

const quotes = [
  {
    text: "The body is not a thing, it is a situation: it is our grasp on the world and the outline of our projects.",
    author: "Simone de Beauvoir"
  },
  {
    text: "There is deep wisdom within our very flesh, if we can only come to our senses and feel it.",
    author: "Elizabeth A. Behnke"
  },
  {
    text: "When the body calls us back, we begin to find that we have a partner on the spiritual path that we didn't know about‚Äîthe body itself.",
    author: "Reggie Ray"
  },
  {
    text: "Our own physical body possesses a wisdom which we who inhabit the body lack. We give it orders which make no sense.",
    author: "Henry Miller"
  },
  {
    text: "Feelings come and go like clouds in a windy sky. Conscious breathing is my anchor.",
    author: "Thich Nhat Hanh"
  },
  {
    text: "Breath is the bridge which connects life to consciousness, which unites your body to your thoughts.",
    author: "Thich Nhat Hanh"
  },
  {
    text: "Meditation speaks. It speaks in silence. It reveals to the aspirant that matter and spirit are one, quantity and quality are one, the immanent and the transcendent are one.",
    author: "Sri Chinmoy"
  },
  {
    text: "Embodiment is a birthright, a wild ride and gentle (and make no mistake) revolutionary adventure in becoming.",
    author: "Mark Walsh"
  },
  {
    text: "Every man is the builder of a Temple called his body.",
    author: "Henry David Thoreau"
  }
];

export default function SomaticBournemouthPage() {
  const [currentQuoteIndex, setCurrentQuoteIndex] = useState(0);
  const [fadeState, setFadeState] = useState(true);

  useEffect(() => {
    const quoteInterval = setInterval(() => {
      // Start fade out
      setFadeState(false);

      // After fade out completes, change quote and fade in
      setTimeout(() => {
        setCurrentQuoteIndex((prevIndex) => (prevIndex + 1) % quotes.length);
        setFadeState(true);
      }, 700); // Match the fade-out duration

    }, 7000); // Total time per quote

    return () => clearInterval(quoteInterval); // Cleanup on unmount
  }, []);

  return (
    <>
      <Suspense>
        <Header />
      </Suspense>
      <main className="bg-base-100">
        {/* Hero Section */}
        <section className="relative min-h-[70vh] flex items-center justify-center">
          <div className="absolute inset-0 z-0">
            <Image
              src="/images/psychedelicmind.avif"
              alt="Somatic Ecstatic"
              fill
              className="object-cover opacity-40"
              priority
            />
            <div className="absolute inset-0 bg-gradient-to-b from-base-100/90 via-base-100/50 to-base-100/90"></div>
          </div>

          <div className="container mx-auto px-8 py-20 relative z-10 text-center">
            <h1 className="font-extrabold text-4xl md:text-6xl tracking-tight mb-6">
              Somatic <span className="text-primary">Ecstatic</span>
            </h1>
            <p className="text-xl md:text-2xl opacity-80 max-w-2xl mx-auto mb-8">
              A journey into embodied presence through movement, breath, and awareness
            </p>
            <div className="flex flex-col sm:flex-row justify-center gap-4">
              <Link href="#experience" className="btn btn-primary">
                Discover the Experience
              </Link>
              <Link href="mailto:kai@oceanheart.ai?subject=Somatic%20Ecstatic%20Inquiry" className="btn btn-outline">
                Join a Session
              </Link>
            </div>
          </div>
        </section>

        {/* Introduction Section */}
        <section className="py-16 md:py-24 px-8 bg-base-200" id="experience">
          <div className="max-w-4xl mx-auto text-center">
            <h2 className="font-bold text-3xl md:text-4xl mb-8">
              Beyond Ordinary <span className="text-primary">Meditation</span>
            </h2>
            <p className="text-lg mb-6 opacity-80">
              Somatic Ecstatic is not just another meditation class. It's an immersive exploration of consciousness through the wisdom of the body.
            </p>
            <p className="text-lg mb-6 opacity-80">
              Each session weaves together elements from two decades of experience in psychotherapy, meditation, movement practices, and embodied processing‚Äîcreating a unique tapestry of experience that must be felt to be understood.
            </p>
            <p className="text-lg mb-12 opacity-80">
              No two journeys are the same. Each class is thoughtfully crafted to guide you into new territories of awareness and sensation.
            </p>

            <div className="flex justify-center">
              <FaYinYang className="text-5xl text-primary animate-pulse" />
            </div>
          </div>
        </section>

        {/* Elements Section */}
        <section className="py-16 md:py-24 px-8">
          <div className="max-w-7xl mx-auto">
            <h2 className="font-bold text-3xl md:text-4xl text-center mb-16">
              The <span className="text-primary">Elements</span> of Our Practice
            </h2>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
              <ElementCard
                icon={<FaLeaf />}
                title="Gentle Movement"
                text="Intuitive yoga-inspired sequences that awaken the body's innate intelligence and release stored tension."
              />
              <ElementCard
                icon={<FaWater />}
                title="Fluid Awareness"
                text="Guided meditations that help you navigate the ever-changing currents of sensation and emotion with grace."
              />
              <ElementCard
                icon={<FaWind />}
                title="Breath Work"
                text="Conscious breathing techniques that expand your capacity for presence and vitality."
              />
              <ElementCard
                icon={<FaFire />}
                title="Ecstatic Integration"
                text="The transformative alchemy that happens when movement, breath, music, and awareness come together in the present moment."
              />
            </div>
          </div>
        </section>

        {/* Testimonial/Quote Section */}
        <section className="py-16 md:py-24 px-8 bg-neutral text-neutral-content">
          <div className="max-w-4xl mx-auto text-center min-h-[200px] flex flex-col justify-center">
            <div
              className={`transition-opacity duration-700 ease-in-out ${fadeState ? 'opacity-100' : 'opacity-0'}`}
            >
              <blockquote className="text-2xl md:text-3xl italic font-light mb-8">
                "{quotes[currentQuoteIndex].text}"
              </blockquote>
              <p className="text-lg">‚Äî {quotes[currentQuoteIndex].author}</p>
            </div>
          </div>
        </section>

        {/* What to Expect Section */}
        <section className="py-16 md:py-24 px-8">
          <div className="max-w-4xl mx-auto">
            <h2 className="font-bold text-3xl md:text-4xl text-center mb-12">
              What to <span className="text-primary">Expect</span>
            </h2>

            <div className="space-y-8">
              <div className="flex flex-col md:flex-row gap-6 items-center">
                <div className="md:w-1/3 flex justify-center">
                  <div className="w-24 h-24 rounded-full bg-primary flex items-center justify-center text-primary-content text-3xl font-bold">
                    1
                  </div>
                </div>
                <div className="md:w-2/3">
                  <h3 className="font-bold text-xl mb-2">A Safe Container</h3>
                  <p className="opacity-80">
                    Each session begins with the creation of a sacred space where exploration can happen freely. All bodies, all abilities, all experiences are welcome.
                  </p>
                </div>
              </div>

              <div className="flex flex-col md:flex-row gap-6 items-center">
                <div className="md:w-1/3 flex justify-center">
                  <div className="w-24 h-24 rounded-full bg-primary flex items-center justify-center text-primary-content text-3xl font-bold">
                    2
                  </div>
                </div>
                <div className="md:w-2/3">
                  <h3 className="font-bold text-xl mb-2">Guided Experience</h3>
                  <p className="opacity-80">
                    You'll be skillfully led through a flowing sequence of mindful movement, breath awareness, and meditative states‚Äîno prior experience necessary.
                  </p>
                </div>
              </div>

              <div className="flex flex-col md:flex-row gap-6 items-center">
                <div className="md:w-1/3 flex justify-center">
                  <div className="w-24 h-24 rounded-full bg-primary flex items-center justify-center text-primary-content text-3xl font-bold">
                    3
                  </div>
                </div>
                <div className="md:w-2/3">
                  <h3 className="font-bold text-xl mb-2">Individual Journey</h3>
                  <p className="opacity-80">
                    While we move as a collective, each person's experience is unique. You're invited to listen deeply to your own body's wisdom and needs.
                  </p>
                </div>
              </div>

              <div className="flex flex-col md:flex-row gap-6 items-center">
                <div className="md:w-1/3 flex justify-center">
                  <div className="w-24 h-24 rounded-full bg-primary flex items-center justify-center text-primary-content text-3xl font-bold">
                    4
                  </div>
                </div>
                <div className="md:w-2/3">
                  <h3 className="font-bold text-xl mb-2">Integration</h3>
                  <p className="opacity-80">
                    We close with time for reflection and integration, allowing the experience to settle into your system and extend its benefits into your everyday life.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* CTA Section */}
        <section className="py-16 md:py-24 px-8 bg-primary text-primary-content">
          <div className="max-w-4xl mx-auto text-center">
            <h2 className="font-bold text-3xl md:text-4xl mb-6">
              Ready to Experience It?
            </h2>
            <p className="text-lg mb-8 max-w-2xl mx-auto">
              The only way to truly understand Somatic Ecstatic is to experience it firsthand. Classes are held weekly in Bournemouth with limited spaces to ensure personalized attention.
            </p>
            <Link href="mailto:kai@oceanheart.ai?subject=Somatic%20Ecstatic%20Booking" className="btn bg-neutral text-neutral-content btn-wide">
              Reserve Your Space
            </Link>
          </div>
        </section>

        {/* FAQ Section */}
        <section className="py-16 md:py-24 px-8 bg-base-200">
          <div className="max-w-4xl mx-auto">
            <h2 className="font-bold text-3xl text-center mb-12">
              Common Questions
            </h2>

            <div className="space-y-6">
              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" defaultChecked />
                <div className="collapse-title font-medium text-lg">
                  Do I need prior experience with yoga or meditation?
                </div>
                <div className="collapse-content">
                  <p>Not at all. Somatic Ecstatic is designed to be accessible to everyone, regardless of experience level. The practice meets you where you are and invites you to explore at your own pace.</p>
                </div>
              </div>

              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" />
                <div className="collapse-title font-medium text-lg">
                  What should I wear and bring?
                </div>
                <div className="collapse-content">
                  <p>Wear comfortable clothing that allows for free movement. Bring a yoga mat if you have one (some are available to borrow), a water bottle, and an open mind. Everything else is provided.</p>
                </div>
              </div>

              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" />
                <div className="collapse-title font-medium text-lg">
                  How is this different from regular yoga or meditation?
                </div>
                <div className="collapse-content">
                  <p>Somatic Ecstatic integrates elements from various modalities but follows no single tradition. Each session is a unique composition that responds to the collective energy of the group while drawing on deep psychological understanding and somatic awareness.</p>
                </div>
              </div>

              <div className="collapse collapse-plus bg-base-100">
                <input type="radio" name="faq-accordion" />
                <div className="collapse-title font-medium text-lg">
                  Where and when are classes held?
                </div>
                <div className="collapse-content">
                  <p>Classes are currently held in central Bournemouth on Wednesday evenings. The exact location details are provided upon registration. Private sessions and workshops are also available by arrangement.</p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
      <Footer />
    </>
  );
}
</file>

<file path="bin/cli.ts">
#!/usr/bin/env node

import { createClient } from '@supabase/supabase-js';
import { config } from 'dotenv';
import inquirer from 'inquirer';
import Table from 'cli-table3';
import path from 'path';
import { PRACTICE_TYPES } from '@/libs/chartColors';

// Load env variables from one of multiple possible .env paths
const envPaths = [".env", "../.env", "../../.env", "../../../.env"].map(p =>
  path.resolve(process.cwd(), p)
);
for (const envPath of envPaths) {
  config({ path: envPath });
  if (process.env.NEXT_PUBLIC_SUPABASE_URL) break;
}

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

async function displayUsers() {
  const { data: users, error } = await supabase
    .from('saigo_users')
    .select('*');

  if (error) {
    console.error('Error fetching users:', error);
    return;
  }

  const table = new Table({
    head: ['ID', 'Username', 'Email', 'Force']
  });

  users?.forEach(user => {
    table.push([
      user.id,
      user.username || 'N/A',
      user.email || 'N/A',
      user.force || '0'
    ]);
  });

  console.log(table.toString());
}

async function displayPractices() {
  const { data: practices, error } = await supabase
    .from('practices')
    .select(`
      *,
      saigo_user:saigo_users!practices_user_id_fkey (
        username
      )
    `)
    .order('created_at', { ascending: false })
    .limit(20);

  if (error) {
    console.error('Error fetching practices:', error);
    return;
  }

  const table = new Table({
    head: ['ID', 'User', 'Type', 'Points', 'Created At']
  });

  practices?.forEach(practice => {
    table.push([
      practice.id,
      practice.saigo_user?.username || 'Unknown',
      practice.type,
      practice.points,
      new Date(practice.created_at).toLocaleString()
    ]);
  });

  console.log(table.toString());
}

async function displayMonthlyLeaderboard() {
  const now = new Date();
  const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);

  const { data, error } = await supabase
    .from('practices')
    .select(`
      user_id,
      points,
      saigo_user:saigo_users!practices_user_id_fkey (
        username
      )
    `)
    .gte('created_at', startOfMonth.toISOString()); // Filter for practices this month

  if (error) {
    console.error('Error fetching monthly leaderboard data:', error);
    return;
  }

  if (!data || data.length === 0) {
    console.log('No practice points recorded yet for the current month.');
    return;
  }

  // Aggregate points per user
  const leaderboard = data.reduce((acc, practice) => {
    const userId = practice.user_id;
    if (!userId) return acc; // Skip if user_id is null

    // Adjust type assertion for potential array from relation
    const userRelation = practice.saigo_user as { username: string | null }[] | { username: string | null } | null;
    let username = `User ID: ${userId}`;
    if (Array.isArray(userRelation) && userRelation.length > 0) {
      username = userRelation[0].username || username;
    } else if (userRelation && !Array.isArray(userRelation)) {
      username = userRelation.username || username;
    }

    acc[userId] = acc[userId] || { username: username, totalPoints: 0 };
    acc[userId].totalPoints += practice.points || 0;
    return acc;
  }, {} as { [userId: string]: { username: string; totalPoints: number } });

  // Sort by points descending
  const sortedLeaderboard = Object.values(leaderboard).sort((a, b) => b.totalPoints - a.totalPoints);

  const table = new Table({
    head: ['Rank', 'User', 'Monthly Points']
  });

  sortedLeaderboard.forEach((entry, index) => {
    table.push([
      index + 1,
      entry.username,
      entry.totalPoints
    ]);
  });

  console.log(`\n--- Monthly Leaderboard (${now.toLocaleString('default', { month: 'long', year: 'numeric' })}) ---`);
  console.log(table.toString());
}

async function deletePractice() {
  const { practiceId } = await inquirer.prompt([
    {
      type: 'input',
      name: 'practiceId',
      message: 'Enter the practice ID to delete:'
    }
  ]);

  const { error } = await supabase
    .from('practices')
    .delete()
    .eq('id', practiceId);

  if (error) {
    console.error('Error deleting practice:', error);
  } else {
    console.log('Practice deleted successfully');
  }
}

async function resetMonthlyPoints() {
  console.log('Calculating points from the previous month...');

  const now = new Date();
  const firstDayOfCurrentMonth = new Date(now.getFullYear(), now.getMonth(), 1);
  // Go back one millisecond to get the end of the previous month
  const lastDayOfPreviousMonth = new Date(firstDayOfCurrentMonth.getTime() - 1);
  // Get the first day of the previous month
  const firstDayOfPreviousMonth = new Date(lastDayOfPreviousMonth.getFullYear(), lastDayOfPreviousMonth.getMonth(), 1);

  console.log(`Calculating points between ${firstDayOfPreviousMonth.toISOString()} and ${lastDayOfPreviousMonth.toISOString()}`);

  const { data: monthlyTotals, error: totalsError } = await supabase
    .from('practices')
    .select('user_id, points')
    .gte('created_at', firstDayOfPreviousMonth.toISOString())
    .lte('created_at', lastDayOfPreviousMonth.toISOString());

  if (totalsError) {
    console.error('Error fetching previous month\'s practice data:', totalsError);
    return;
  }

  if (!monthlyTotals || monthlyTotals.length === 0) {
    console.log('No practices recorded in the previous month. No forces updated.');
    return;
  }

  // Aggregate points per user
  const userTotals = monthlyTotals.reduce((acc, practice) => {
    if (practice.user_id) {
      acc[practice.user_id] = (acc[practice.user_id] || 0) + (practice.points || 0);
    }
    return acc;
  }, {} as { [userId: string]: number });

  console.log(`Found points for ${Object.keys(userTotals).length} users from the previous month.`);

  let successCount = 0;
  let errorCount = 0;

  // Update force for each user
  for (const userId in userTotals) {
    const pointsToAdd = userTotals[userId];
    if (pointsToAdd > 0) {
      console.log(`Adding ${pointsToAdd} points to force for user ${userId}...`);
      // Revert to object, but order keys as potentially expected by the first error message
      const { error: updateError } = await supabase.rpc('increment_user_force', {
        points_to_add: pointsToAdd, // Key order swapped
        user_id_param: userId
      });

      if (updateError) {
        console.error(`Failed to update force for user ${userId}:`, updateError.message);
        errorCount++;
      } else {
        successCount++;
      }
    }
  }

  console.log(`\nMonthly points reset complete.`);
  console.log(`Successfully updated force for ${successCount} users.`);
  if (errorCount > 0) {
    console.log(`Failed to update force for ${errorCount} users.`);
  }
  console.log(`The leaderboard will now show points accumulated from ${firstDayOfCurrentMonth.toLocaleDateString()} onwards.`);
}

async function addPracticeEntry() {
  // Prompt for practice type and minutes
  const { practiceType, minutesEntered } = await inquirer.prompt([
    {
      type: 'list',
      name: 'practiceType',
      message: 'Choose a practice type:',
      choices: PRACTICE_TYPES
    },
    {
      type: 'input',
      name: 'minutesEntered',
      message: 'Enter the number of minutes practiced:',
      validate: (input: string) => {
        const parsed = Number(input);
        return !isNaN(parsed) && parsed > 0 ? true : 'Please enter a positive number';
      }
    }
  ]);

  const minutes = Number(minutesEntered);

  // Look up the user in saigo_users by email
  const { data: userProfile, error: userError } = await supabase
    .from('saigo_users')
    .select('id')
    .eq('email', 'kai@oceanheart.ai')
    .single();

  if (userError || !userProfile) {
    console.error('Error fetching profile for kai@oceanheart.ai:', userError);
    return;
  }

  // Insert the new practice entry
  const { error } = await supabase.from('practices').insert({
    type: practiceType,
    points: minutes,
    user_id: userProfile.id,
    created_at: new Date().toISOString(),
  });

  if (error) {
    console.error('Error inserting practice entry:', error);
  } else {
    console.log('Practice entry added successfully for kai@oceanheart.ai!');
  }
}

async function addPracticeEntryForOtherUser() {
  // Fetch list of users from the database
  const { data: users, error: usersError } = await supabase
    .from('saigo_users')
    .select('id, username, email');

  if (usersError || !users || users.length === 0) {
    console.error('Error fetching users:', usersError || 'No users found');
    return;
  }

  // Create user choices for selection menu, showing both username and email for clarity
  const userChoices = users.map(user => ({
    name: `${user.username || 'No username'} (${user.email || 'No email'})`,
    value: user.id
  }));

  // Add a back option
  userChoices.push({ name: 'Back to main menu', value: 'back' });

  // Prompt for user selection
  const { selectedUserId } = await inquirer.prompt([
    {
      type: 'list',
      name: 'selectedUserId',
      message: 'Select a user:',
      choices: userChoices
    }
  ]);

  // Return to main menu if back option selected
  if (selectedUserId === 'back') {
    return;
  }

  // Find the selected user for display purposes
  const selectedUser = users.find(user => user.id === selectedUserId);

  if (!selectedUser) {
    console.error('Selected user not found');
    return;
  }

  // Display which user was selected
  console.log(`Adding practice for: ${selectedUser.username || 'No username'} (${selectedUser.email || 'No email'})`);

  // Prompt for practice type and minutes
  const { practiceType, minutesEntered } = await inquirer.prompt([
    {
      type: 'list',
      name: 'practiceType',
      message: 'Choose a practice type:',
      choices: PRACTICE_TYPES
    },
    {
      type: 'input',
      name: 'minutesEntered',
      message: 'Enter the number of minutes practiced:',
      validate: (input: string) => {
        const parsed = Number(input);
        return !isNaN(parsed) && parsed > 0 ? true : 'Please enter a positive number';
      }
    }
  ]);

  const minutes = Number(minutesEntered);

  // Insert the new practice entry
  const { error } = await supabase.from('practices').insert({
    type: practiceType,
    points: minutes,
    user_id: selectedUserId,
    created_at: new Date().toISOString(),
  });

  if (error) {
    console.error('Error inserting practice entry:', error);
  } else {
    console.log(`Practice entry added successfully for ${selectedUser.username || selectedUser.email || 'selected user'}!`);
  }
}

async function main() {
  while (true) {
    const { action } = await inquirer.prompt([
      {
        type: 'list',
        name: 'action',
        message: 'What would you like to do?',
        choices: [
          'Add Practice Entry for kai@oceanheart.ai',
          'Add Practice Entry for Another User',
          'Show Monthly Leaderboard',
          'List Recent Practice Entries',
          'List Users',
          'Delete Practice',
          'Reset Monthly Points',
          'Exit'
        ]
      }
    ]);

    switch (action) {
      case 'List Users':
        await displayUsers();
        break;
      case 'Show Monthly Leaderboard':
        await displayMonthlyLeaderboard();
        break;
      case 'List Recent Practice Entries':
        await displayPractices();
        break;
      case 'Delete Practice':
        await deletePractice();
        break;
      case 'Add Practice Entry for kai@oceanheart.ai':
        await addPracticeEntry();
        break;
      case 'Add Practice Entry for Another User':
        await addPracticeEntryForOtherUser();
        break;
      case 'Reset Monthly Points':
        await resetMonthlyPoints();
        break;
      case 'Exit':
        process.exit(0);
    }
  }
}

main().catch(console.error);
</file>

<file path="components/Countdown.tsx">
"use client";

import React, { useState, useEffect, CSSProperties } from "react";

interface TimerProps {
  enhanced?: boolean;
}

const Timer: React.FC<TimerProps> = ({ enhanced = false }) => {
  // Reset the start date to now (current time)
  const [startDate] = useState<Date>(new Date());

  const [timeElapsed, setTimeElapsed] = useState<number>(0);

  useEffect(() => {
    const intervalId = setInterval(() => {
      setTimeElapsed(new Date().getTime() - startDate.getTime());
    }, 1000);

    return () => clearInterval(intervalId);
  }, [startDate]);

  const days = Math.floor(timeElapsed / (1000 * 60 * 60 * 24));
  const hours = Math.floor(
    (timeElapsed % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
  );
  const minutes = Math.floor(
    (timeElapsed % (1000 * 60 * 60)) / (1000 * 60)
  );
  const seconds = Math.floor((timeElapsed % (1000 * 60)) / 1000);

  if (enhanced) {
    return (
      <div className="grid grid-flow-col gap-5 text-center auto-cols-max">
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": days } as CSSProperties}></span>
          </span>
          days
        </div>
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": hours } as CSSProperties}></span>
          </span>
          hours
        </div>
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": minutes } as CSSProperties}></span>
          </span>
          min
        </div>
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": seconds } as CSSProperties}></span>
          </span>
          sec
        </div>
      </div>
    );
  }

  return (
    <div className="text-center text-white font-bold py-2">
      {days}d {hours}h {minutes}m {seconds}s
    </div>
  );
};

export default Timer;
</file>

<file path="components/KnowledgeGapSection.tsx">
import Link from "next/link";

const data = [
  { task: "Re-draft customer email", old: 25, now: 15, study: "~55% faster" },
  { task: "Find decisions in Slack", old: 20, now: 3, study: "30-40% reading saved" },
  { task: "Boilerplate coding", old: 45, now: 20, study: "55% faster" },
];

const KnowledgeGapSection = () => (
  <section className="bg-base-200 overflow-hidden px-0 md:px-24 py-24" id="gold-gap">
    <div className="px-8 max-w-7xl mx-auto">
      {/* 1. Map metaphor */}
      <div className="max-w-5xl mx-auto text-center mb-16">
        <h2 className="text-3xl lg:text-6xl font-bold mb-12  tracking-tight">
          What <span className="text-red-500">Unconscious</span> AI Integration is Really <span className="text-yellow-500">Costing You</span>
        </h2>
        <h2 className="text-3xl lg:text-5xl font-bold mb-6 tracking-tight">
          Paper Maps ‚ûú Pocket GPS ‚ûú <span className="text-primary">Next?</span>
        </h2>
        <p className="text-lg lg:text-xl text-base-content/80 max-w-3xl mx-auto">
          In 2005 you needed an A‚ÄìZ and ten spare minutes to navigate London. Today one tap does the work.
          The <span className="font-semibold">next ten-minute tax</span> is hiding in your workflow‚Äîand AI can erase it.
        </p>
      </div>

      {/* 2. Task comparison table */}
      <div className="mb-20 rounded-xl p-8 bg-secondary/5 shadow-lg border-l-4 border-secondary relative overflow-hidden max-w-4xl mx-auto transform hover:scale-[1.01] transition-transform duration-300">
        <div className="absolute inset-0 bg-secondary/3 bg-[linear-gradient(45deg,transparent_25%,rgba(68,64,60,0.02)_25%,rgba(68,64,60,0.02)_50%,transparent_50%,transparent_75%,rgba(68,64,60,0.02)_75%)]" style={{ backgroundSize: "10px 10px" }}></div>
        <div className="relative z-10">
          <div className="overflow-x-auto bg-base-100 rounded-lg shadow-inner mb-4">
            <table className="table table-zebra text-sm md:text-base w-full">
              <thead>
                <tr>
                  <th className="bg-secondary/15 font-bold">Task</th>
                  <th className="bg-secondary/15 text-center font-bold">Yesterday</th>
                  <th className="bg-secondary/15 text-center font-bold">Early-Adopter Now</th>
                  <th className="bg-secondary/15 text-center font-bold">Outcome</th>
                </tr>
              </thead>
              <tbody>
                {data.map((row) => (
                  <tr key={row.task}>
                    <td>{row.task}</td>
                    <td className="text-center">{row.old} min</td>
                    <td className="text-center">{row.now} min</td>
                    <td className="text-center font-semibold">{row.study}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <p className="text-sm text-right text-base-content/60">
            Source: Accenture, McKinsey & GitHub pilot studies 2024.
          </p>
        </div>
      </div>

      {/* 3. Quiet compounding effect - 250-Hour Snowball */}
      <div className="max-w-4xl mx-auto mb-16 bg-base-100 rounded-xl p-8 shadow-lg relative overflow-hidden">
        <div className="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-secondary/20 to-secondary/5 rounded-full -mr-10 -mt-10 blur-xl"></div>
        <div className="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-primary/10 to-primary/0 rounded-full -ml-5 -mb-5 blur-lg"></div>

        <div className="relative z-10">
          <div className="flex items-center gap-4 mb-6">
            <div className="bg-secondary/10 p-3 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-7 w-7 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 className="text-2xl font-bold">The 250-Hour Snowball</h3>
          </div>

          <div className="pl-4 border-l-2 border-secondary/30">
            <p className="text-lg text-base-content/80">
              Conservatively, those 5 saved hours each week add up to <span className="font-semibold text-secondary-focus">‚âà250 hours a year</span>‚Äî
              a whole work-month. Early adopters reinvest that dividend back into smarter systems, so the gap widens itself
              without extra effort.
            </p>
          </div>

          <div className="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="bg-base-200/50 p-4 rounded-lg border-t-2 border-primary/30">
              <div className="flex items-center gap-2 mb-2">
                <span className="bg-primary/10 text-primary px-2 py-1 rounded text-sm font-bold">Year 1</span>
              </div>
              <p className="text-base-content/80">250 free hours ‚Üí one extra side-project shipped.</p>
            </div>
            <div className="bg-base-200/50 p-4 rounded-lg border-t-2 border-secondary/30">
              <div className="flex items-center gap-2 mb-2">
                <span className="bg-secondary/10 text-secondary-focus px-2 py-1 rounded text-sm font-bold">Year 2</span>
              </div>
              <p className="text-base-content/80">That project is half-automated ‚Üí two upgrades shipped.</p>
            </div>
            <div className="bg-base-200/50 p-4 rounded-lg border-t-2 border-accent/30">
              <div className="flex items-center gap-2 mb-2">
                <span className="bg-accent/10 text-accent-focus px-2 py-1 rounded text-sm font-bold">Year 3</span>
              </div>
              <p className="text-base-content/80">Their velocity is a quarter ahead while you&apos;re treading water.</p>
            </div>
          </div>
        </div>
      </div>

      {/* 4. Gentle warning + CTA - Infographic style */}
      <div className="max-w-4xl mx-auto rounded-xl bg-base-100 shadow-lg overflow-hidden">
        <div className="grid grid-cols-1 md:grid-cols-12">
          <div className="md:col-span-5 bg-primary p-6 flex items-center justify-center">
            <div className="text-center">
              <div className="flex flex-col items-center justify-center mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-primary-content opacity-90" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <div className="mt-2 text-4xl font-bold text-primary-content">5 Hours</div>
                <div className="text-sm text-primary-content/80">Lost Every Week</div>
              </div>
              <div className="space-y-2">
                <div className="flex items-center gap-2 text-primary-content/90 text-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>260 hours yearly</span>
                </div>
                <div className="flex items-center gap-2 text-primary-content/90 text-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>6.5 work weeks</span>
                </div>
                <div className="flex items-center gap-2 text-primary-content/90 text-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>¬£13,000+ value</span>
                </div>
              </div>
            </div>
          </div>
          <div className="md:col-span-7 p-6 md:p-8 flex flex-col justify-center">
            <h3 className="text-xl font-bold mb-4">Every week you delay costs you time that never returns</h3>
            <p className="text-base-content/80 mb-6">
              The tools to reclaim your time are here; the map just isn&apos;t labelled for <em>your</em> specific terrain yet.
              Let me create your custom integration map.
            </p>
            <Link href="#pricing" className="btn btn-secondary shadow-md hover:shadow-lg transition-all">
              See Your Map Options
            </Link>
          </div>
        </div>
      </div>
    </div>
  </section>
);

export default KnowledgeGapSection;
</file>

<file path="components/Timer.tsx">
"use client";

import React, { useState, useEffect, CSSProperties } from "react";

interface TimerProps {
  enhanced?: boolean;
  startDate?: Date;
}

const Timer: React.FC<TimerProps> = ({ enhanced = false, startDate: propStartDate }) => {
  // Use the propStartDate if provided, otherwise reset to now (current time) as before
  const [startDate] = useState<Date>(propStartDate || new Date());

  const [timeElapsed, setTimeElapsed] = useState<number>(0);

  useEffect(() => {
    const intervalId = setInterval(() => {
      setTimeElapsed(new Date().getTime() - startDate.getTime());
    }, 1000);

    return () => clearInterval(intervalId);
  }, [startDate]);

  const days = Math.floor(timeElapsed / (1000 * 60 * 60 * 24));
  const hours = Math.floor(
    (timeElapsed % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
  );
  const minutes = Math.floor(
    (timeElapsed % (1000 * 60 * 60)) / (1000 * 60)
  );
  const seconds = Math.floor((timeElapsed % (1000 * 60)) / 1000);

  if (enhanced) {
    return (
      <div className="grid grid-flow-col gap-5 text-center auto-cols-max">
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": days } as CSSProperties}></span>
          </span>
          days
        </div>
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": hours } as CSSProperties}></span>
          </span>
          hours
        </div>
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": minutes } as CSSProperties}></span>
          </span>
          min
        </div>
        <div className="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
          <span className="countdown font-mono text-5xl">
            <span style={{ "--value": seconds } as CSSProperties}></span>
          </span>
          sec
        </div>
      </div>
    );
  }

  return (
    <div className="text-center text-white font-bold py-2">
      {days}d {hours}h {minutes}m {seconds}s
    </div>
  );
};

export default Timer;
</file>

<file path="docs/PRD-Subdomain-SSO.md">
# PRD: Subdomain SSO for Oceanheart Apps

## Summary
Enable single sign-on across Oceanheart subdomains (e.g., `flowstate.oceanheart.ai`, future apps) using the existing Supabase Auth workflow and Next.js 14 (App Router). Centralize login on `accounts.oceanheart.ai`, share sessions via domain-scoped cookies, and enforce app-level entitlements server-side.

## Goals
- One login grants access across all product subdomains.
- Centralized auth UI on `accounts.oceanheart.ai` with return-to redirects.
- Consistent SSR session handling via a shared auth module.
- Server-side entitlement checks per app (feature gating/plan/expiry).

## Non-Goals
- SAML/OIDC federation, enterprise IdP onboarding.
- Team/org management and complex RBAC (beyond per-app entitlement).

## Architecture Overview
- Identity: Supabase Auth (same project/keys across apps).
- Session sharing: cookies scoped to `.oceanheart.ai` (HTTPS only).
- Apps: separate Next.js deployments per subdomain on Vercel.
- Common auth: shared utilities (SSR client, middleware guard, session provider).
- Entitlements: Supabase table `user_entitlements(user_id, app_slug, plan, expires_at)`.

## Technical Requirements
1) Accounts App
- Route: `https://accounts.oceanheart.ai/signin` (+ signup/reset as needed).
- Accepts `returnTo` param, validates against allowed origins, issues domain cookie, redirects back.
- `/logout` clears domain cookies and calls Supabase sign-out.

2) Cookie Strategy
- Domain: `.oceanheart.ai`
- Secure: `true` (HTTPS only)
- SameSite: `Lax` (recommended for subdomains), use `None` if third‚Äëparty contexts are needed.
- httpOnly for refresh/access tokens; short‚Äëlived access token in memory if required.

3) Shared Auth Module (common package)
- `createSSRClient(req, res)` factory using `@supabase/ssr`.
- `requireAuth({ returnToBase })` for middleware/route guards.
- `getSession()`/`getUser()` helpers (server and client wrappers).
- `withEntitlement(appSlug)` server utility to assert access.

4) Middleware Contract (each app)
- In `middleware.ts`: attempt SSR session read; if missing, 302 to `accounts.oceanheart.ai/signin?returnTo=<current-url>`.
- On protected routes, assert entitlement for that app slug and redirect/403 on failure.

5) Entitlements
- Table: `user_entitlements`
  - Columns: `id (uuid)`, `user_id (uuid)`, `app_slug (text)`, `plan (text)`, `expires_at (timestamptz)`, `created_at`.
  - Unique: (`user_id`, `app_slug`).
- Server check utility: valid if now < `expires_at` (or null means non‚Äëexpiring) and record exists.

6) Configuration & Env
- All apps: `SUPABASE_URL`, `SUPABASE_ANON_KEY`.
- Accounts app also needs `NEXT_PUBLIC_SITE_URL` and a whitelist for `returnTo` hosts.
- Set cookie domain and same-site in SSR client config.

7) Vercel & Domains
- Separate Vercel projects per app; map custom domains: `accounts.oceanheart.ai`, `flowstate.oceanheart.ai`, etc.
- Enforce HTTPS; add all redirect URLs to Supabase Auth settings.
- Preview deployments: restrict cross-site cookies (tests should focus on production domains or `.vercel.app` equivalents).

8) Local Development
- Use `lvh.me` subdomains: `accounts.lvh.me:3000`, `flowstate.lvh.me:3001`.
- Cookie domain: `.lvh.me`.
- Update Supabase redirect URLs to include local domains/ports.

9) Security & Compliance
- Validate `returnTo` against an allowlist; default to a safe URL.
- Never log tokens; rotate keys in Vercel via encrypted env vars.
- CSRF: `SameSite=Lax` + Next.js middleware checks on state/nonce where applicable.

10) Telemetry & Observability
- Basic auth metrics: login success/failure, redirect loops, entitlement denials.
- Log correlation ID per request; sample at edge middleware.

## Acceptance Criteria
- Logging in on `accounts.oceanheart.ai` grants access to a protected page on another subdomain without re-login.
- Unauthenticated user on `flowstate.oceanheart.ai` is redirected to accounts and back to the original path.
- Entitlement gates block users without access to `app_slug` with a user-friendly screen.
- Logout clears session across all subdomains.
- E2E tests cover login redirect, entitlement allow/deny, logout, and token refresh.

## Implementation Plan (Checklist)
- [ ] Create `apps/accounts` (or separate repo) with signin, callback, logout routes
- [ ] Implement `returnTo` validation and redirects
- [ ] Configure Supabase Auth redirect URLs (prod + local)
- [ ] Add domain‚Äëscoped cookie settings in SSR client
- [ ] Create `packages/common-auth` with SSR client, guards, entitlement helpers
- [ ] Publish or link common package into each app
- [ ] Update each app `middleware.ts` to use `requireAuth`
- [ ] Add server entitlement checks (`withEntitlement('flowstate')`)
- [ ] Create Supabase `user_entitlements` table + unique index
- [ ] Seed minimal test entitlements for dev users
- [ ] Add `/logout` route that clears cookies + Supabase sign‚Äëout
- [ ] Configure Vercel projects and custom domains for each app
- [ ] Add env vars to Vercel (URL, ANON KEY, site URL, allowlist)
- [ ] Local dev: lvh.me subdomains + ports; README update
- [ ] QA: Safari/ITP, mobile, expired token refresh, redirect loops
- [ ] E2E: Cypress specs for login, cross‚Äësubdomain, entitlement, logout
- [ ] Monitoring: basic logs/metrics dashboards
- [ ] Documentation: AGENTS.md + ARCHITECTURE.md updates

## Milestones
- M1: Accounts app + cookie domain working locally (2‚Äì3 days)
- M2: First product app integrated with entitlement checks (2‚Äì3 days)
- M3: Vercel prod domains + Supabase redirects (1‚Äì2 days)
- M4: QA + E2E + docs (2 days)

## Dependencies
- Supabase project keys shared across apps.
- Custom domains provisioned in DNS and Vercel.

## References
- Existing stack: Next.js 14 (App Router), `@supabase/ssr`, Tailwind, Bun.
- Repo docs: `ARCHITECTURE.md`, `AGENTS.md`.

## Scaffold Usage
- Common package: `packages/common-auth`
  - Use `src/ssrClient.ts` to create the Supabase SSR client in middleware/route handlers.
  - Use `src/requireAuth.ts` in each app‚Äôs `middleware.ts` to redirect unauthenticated users to accounts.
  - Use `src/withEntitlement.ts` to gate server routes by `appSlug`.
  - Optional: `src/returnTo.ts` to validate `returnTo` targets.
- Example apps:
  - Accounts: `apps/accounts/app/(auth)/signin/page.tsx`, `apps/accounts/app/logout/route.ts`.
  - Product: `apps/flowstate/middleware.ts` (copy pattern and change slug).
- Env setup: copy `docs/ENV.sample-sso` to your app envs.
  - Required: `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`, `SUPABASE_SERVICE_ROLE_KEY` (server only), `COOKIE_DOMAIN`, `NEXT_PUBLIC_SITE_URL`.
- Integration steps (per app):
  1) Import from common-auth (monorepo path alias or internal package name).
  2) Add/adjust `middleware.ts` to call `requireAuth` and entitlement check.
  3) Configure env vars and Supabase redirect URLs for that subdomain.
  4) Map the custom subdomain in Vercel and set envs.
- Local dev:
  - Use `accounts.lvh.me:3000`, `flowstate.lvh.me:3001`; set `COOKIE_DOMAIN=.lvh.me`.
  - Ensure Supabase redirects include the lvh.me hosts and ports.
- Validate:
  - Hit `flowstate` ‚Üí redirected to accounts ‚Üí sign-in ‚Üí returned with session ‚Üí entitlement gate allows/denies ‚Üí logout clears across subdomains.

## Alignment With External Guidance
This PRD aligns with the recommended hybrid structure: a central platform for auth + shared utilities, and autonomous subdomain apps.

- Centralized auth: Supported via dedicated accounts app (`accounts.oceanheart.ai`) and shared SSR utilities.
- Separate app repos/projects: Supported; each app hosts its own code and uses `middleware.ts` to read the shared session.
- Shared library: Provided via `packages/common-auth` (candidate for a private NPM package).
- Unified callback: Implemented (`apps/accounts/app/auth/callback/route.ts`) performing `exchangeCodeForSession` and redirecting with `returnTo` validation.
- Cookie domain: Domain-scoped cookies (`.oceanheart.ai`) are set in SSR adapter; also configure Supabase‚Äôs cookie domain.
- Authorization: Implemented via a related table (`user_entitlements`), equivalent to extending `profiles` with app access flags.

### Notable Differences and Recommended Decisions
- Login domain: Guidance suggests `oceanheart.ai/signin`; this PRD uses `accounts.oceanheart.ai/signin`.
  - Recommendation: Keep `accounts.*` to decouple auth from marketing. Optionally add `oceanheart.ai/signin` that redirects to accounts for UX continuity.
- Unified callback location: Guidance places it at `app/api/auth/unified-callback` in the main platform; we placed it in the accounts app.
  - Recommendation: Either keep it centralized in `accounts.*` (current), or add a thin proxy endpoint on the main domain that forwards to accounts.
- Cookie config: Add explicit `SUPABASE_AUTH_COOKIE_DOMAIN=.oceanheart.ai` in Supabase settings in addition to SSR adapter domain.
- Authorization model: We use `user_entitlements` (normalized). Guidance mentions `profiles` flags.
  - Recommendation: Keep `user_entitlements` for multi-app scalability; surface summaries in `profiles` if needed for quick reads.
- reCAPTCHA: Guidance centralizes `verify-captcha`.
  - Action: If captcha is in scope, host a central `app/api/auth/verify-captcha` on the platform and call it from accounts.
- RLS Policies: Explicit RLS per app tables.
  - Action: Add RLS policies referencing `auth.uid()` and entitlement checks for each app‚Äôs data.

### Action Items to Close Gaps
- [ ] Configure `SUPABASE_AUTH_COOKIE_DOMAIN=.oceanheart.ai` in Supabase project settings.
- [ ] Add `oceanheart.ai/signin` route that 302-redirects to `https://accounts.oceanheart.ai/signin`.
- [ ] (Optional) Add main-domain `app/api/auth/unified-callback` that proxies to accounts callback.
- [ ] Implement/centralize `verify-captcha` if required by the login flow.
- [ ] Define and apply RLS policies for any app-specific tables.


## Reference Implementations (Stubs)
These examples align with current Supabase SSR + Next.js 14 App Router patterns.

1) packages/common-auth/src/ssrClient.ts
```ts
import { NextRequest, NextResponse } from 'next/server'
import { createServerClient, type CookieOptions } from '@supabase/ssr'

const SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL!
const SUPABASE_ANON_KEY = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
const COOKIE_DOMAIN = process.env.COOKIE_DOMAIN // e.g., .oceanheart.ai or .lvh.me for local

export function createSSRClient(req: NextRequest, res: NextResponse) {
  return createServerClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
    cookies: {
      get(name: string) {
        return req.cookies.get(name)?.value
      },
      set(name: string, value: string, options: CookieOptions) {
        res.cookies.set({
          name,
          value,
          ...options,
          domain: options?.domain ?? COOKIE_DOMAIN,
          secure: true,
          sameSite: (options?.sameSite as any) ?? 'lax',
        })
      },
      remove(name: string, options: CookieOptions) {
        res.cookies.set({
          name,
          value: '',
          ...options,
          domain: options?.domain ?? COOKIE_DOMAIN,
          secure: true,
          sameSite: (options?.sameSite as any) ?? 'lax',
          maxAge: 0,
        })
      },
    },
  })
}
```

2) packages/common-auth/src/requireAuth.ts
```ts
import { NextRequest, NextResponse } from 'next/server'
import { createSSRClient } from './ssrClient'

export function buildSignInURL(returnTo: URL) {
  const u = new URL('https://accounts.oceanheart.ai/signin')
  u.searchParams.set('returnTo', returnTo.toString())
  return u
}

export async function requireAuth(req: NextRequest) {
  const res = NextResponse.next()
  const supabase = createSSRClient(req, res)
  const {
    data: { user },
  } = await supabase.auth.getUser()

  if (!user) {
    const signInUrl = buildSignInURL(new URL(req.url))
    return NextResponse.redirect(signInUrl, { headers: res.headers })
  }
  return { res, user }
}
```

3) apps/flowstate/middleware.ts
```ts
import type { NextRequest } from 'next/server'
import { NextResponse } from 'next/server'
import { requireAuth } from 'common-auth/requireAuth'
import { withEntitlement } from 'common-auth/withEntitlement'

export async function middleware(req: NextRequest) {
  const auth = await requireAuth(req)
  if (auth instanceof NextResponse) return auth // redirected to accounts

  const { res, user } = auth
  const allowed = await withEntitlement('flowstate', user.id)
  if (!allowed) {
    return NextResponse.redirect(new URL('/no-access', req.url), { headers: res.headers })
  }
  return res
}

export const config = {
  matcher: ['/((?!_next|public|favicon.ico).*)'],
}
```

4) packages/common-auth/src/withEntitlement.ts
```ts
import { createClient } from '@supabase/supabase-js'

const supabaseAdmin = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY! // server-only secret
)

export async function withEntitlement(appSlug: string, userId: string) {
  const { data, error } = await supabaseAdmin
    .from('user_entitlements')
    .select('expires_at')
    .eq('user_id', userId)
    .eq('app_slug', appSlug)
    .single()

  if (error || !data) return false
  if (!data.expires_at) return true
  return new Date(data.expires_at).getTime() > Date.now()
}
```

5) apps/accounts/app/(auth)/signin/page.tsx (simplified)
```tsx
'use client'
import { useSearchParams } from 'next/navigation'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'

export default function SignInPage() {
  const sp = useSearchParams()
  const returnTo = sp.get('returnTo')
  const supabase = createClientComponentClient()

  async function signInWithEmail(email: string) {
    await supabase.auth.signInWithOtp({ email, options: { emailRedirectTo: returnTo ?? process.env.NEXT_PUBLIC_SITE_URL } })
  }
  // Render form and handle providers; on success, backend cookie will be set
  return <div>/* sign-in form */</div>
}
```

6) apps/accounts/app/logout/route.ts
```ts
import { NextRequest, NextResponse } from 'next/server'
import { createSSRClient } from 'common-auth/ssrClient'

export async function GET(req: NextRequest) {
  const res = NextResponse.redirect(new URL('/', req.url))
  const supabase = createSSRClient(req, res)
  await supabase.auth.signOut()
  // Cookies cleared via SSR adapter
  return res
}
```

7) packages/common-auth/src/returnTo.ts
```ts
const ALLOW_HOSTS = (process.env.RETURNTO_ALLOW_HOSTS || '').split(',').map(h => h.trim()).filter(Boolean)

export function isAllowedReturnTo(u: URL) {
  const host = u.host.toLowerCase()
  if (host.endsWith('.oceanheart.ai')) return true
  return ALLOW_HOSTS.includes(host)
}
```

Note: Ensure Supabase Auth settings include all redirect URLs (prod and local), and that all apps run over HTTPS in production to satisfy cookie security requirements.
</file>

<file path="docs/rebranding_prd.md">
Okay, I've analyzed the existing structure, your new branding/copywriting requirements, and the context of your A/B testing setup.

Here is a Product Requirements Document (PRD) designed to guide the repositioning of Oceanheart.ai. This PRD is structured to be compatible with your Task Manager system.

```markdown
# PRD: Oceanheart.ai Repositioning - "The Art of Personal AI"

## 1. High-Level Objectives

1.  **Reposition Oceanheart.ai:** Implement new branding and messaging centered around "The Art of Personal AI" framework and Kai's human-centric AI coaching services. This involves shifting from a philosophical AI safety focus to practical, conscious AI integration guidance.
2.  **Redesign Landing Page (`/`):** Update the main landing page with new copy and a focused hero section reflecting the "Art of Personal AI" branding. Decommission the previous A/B tested hero section.
3.  **Revamp About Page (`/about`):** Update the "About Me" page to align with the new coaching focus, highlighting Kai's unique background (Psychotherapist, Software Engineer, Contemplative Practitioner) and "The Art of Personal AI" philosophy.
4.  **Update Core UI Components:** Modify shared components (`Hero`, `Problem`, `FeaturesAccordion`, `Pricing`, `FAQ`, `CTA`, `Header`, `Footer`) with the new copy, branding, and offerings. Ensure import paths for these components in `app/page.tsx` and `app/layout.tsx` point to their updated locations in `components/`.
5.  **Configuration & Content Alignment:**
    *   Update `config.ts` (appName, appDescription, Stripe plans, potentially theme) to match the new positioning and service offerings.
    *   Ensure content in `components/Pricing.tsx` accurately reflects the new coaching packages/services derived from "The Art of Personal AI".
6.  **A/B Testing Infrastructure:** Preserve the existing A/B testing framework (`libs/abTesting.tsx`, `/api/ab-tracking` route, `/app/ab-testing/page.tsx` dashboard) for potential future use. The current A/B test for landing page headlines will be superseded by the new single, focused landing page design.

## 2. Mid-Level Objectives

### 2.1. Landing Page Content Implementation
    *   Implement the new headline, sub-headline, problem block, solution block (introducing "The Art of Personal AI" & Kai's role), and framework snapshot (3 layers) on the landing page.
    *   Update the primary Call to Action (CTA) button text and the secondary link ("Learn about Kai ‚Üí").
    *   Ensure `app/page.tsx` imports and uses the updated `Hero`, `Problem`, `FeaturesAccordion`, `Pricing`, `FAQ`, and `CTA` components from the `components/` directory.

### 2.2. About Me Page Content Implementation
    *  use the about_me_page_content.md file for copy and structure, and add a call-out box CTA on the "About Me" page (`app/about/page.tsx`).

### 2.3. Core Component Updates
    *   **`components/Hero.tsx`**: Replace content with the new landing page headline, sub-headline, and introductory paragraphs.
    *   **`components/Problem.tsx`**: Update with the new "Problem Block" copy.
    *   **`components/FeaturesAccordion.tsx`**: Adapt to showcase the new core offerings/services derived from "The Art of Personal AI" (e.g., Executive Guidance, Workshops, Courses), or create a new dedicated "Offerings" component if `FeaturesAccordion` is not suitable for this.
    *   **`components/Pricing.tsx`**: Update content and structure to reflect the new service packages. This will require new data for `config.ts` under `stripe.plans`.
    *   **`components/FAQ.tsx`**: Update with new questions and answers relevant to the AI coaching services.
    *   **`components/CTA.tsx`**: Update with the new primary and secondary call-to-action buttons.
    *   **`components/Header.tsx` & `components/Footer.tsx`**: Review and update links, branding, and potentially the theme reference for a lighter aesthetic. Ensure `app/page.tsx` and `app/layout.tsx` correctly import these from `components/`.

### 2.4. Configuration Updates
    *   Modify `config.ts`:
        *   Update `appName` and `appDescription`.
        *   Overhaul `stripe.plans` to match new service offerings (Executive Guidance, Workshop, Course). Define names, descriptions, prices, features for each.
        *   Consider changing `colors.theme` to a lighter theme (e.g., "cupcake", "emerald", or a custom light theme) if "synthwave" doesn't align with the "light palette, ample whitespace" aesthetic.

### 2.5. A/B Testing System Management
    *   Remove or refactor `components/HeroABTest.tsx`. The landing page will use `components/Hero.tsx` directly.
    *   Ensure `app/page.tsx` no longer attempts to use `HeroABTest.tsx` for variant display.
    *   Verify that `libs/abTesting.tsx` and related API/dashboard pages remain functional but are not actively splitting traffic for the main hero section without new configuration.

## 3. Implementation Notes

*   **Target Component Location:** All primary UI component updates (Hero, Problem, etc.) should target the files located in `components/`. Import paths in `app/page.tsx` and other layout/page files must be updated accordingly (e.g., from `@/components/` to `@/components/`).
*   **Copy Integration:** Use the exact copy provided in the "elite brand copywriter" prompt for the landing page and "About Me" page sections.
*   **Styling & Theme:**
    *   Adhere to the desired aesthetic: "minimal, clean, light palette, ample whitespace, micro-humor, calm authority."
    *   If the current DaisyUI theme (`synthwave` in `config.ts`) conflicts with this, update `config.ts` to a more suitable light theme, or customize Tailwind/DaisyUI.
*   **A/B Testing:** The immediate goal is to launch the *new, single version* of the landing page. The existing A/B testing infrastructure (`libs/abTesting.tsx`, API, dashboard) should be preserved for *future* A/B tests on the new content, not for deploying multiple versions of this initial rebrand. If future tests require more than 2 variants, `libs/abTesting.tsx` will need the previously discussed modification.
*   **Pricing Section:** The `components/Pricing.tsx` component and the `config.ts` `stripe.plans` section will require significant updates to reflect the new coaching offerings. The PRD assumes new plan details (names, prices, features) will be provided or developed as part of implementing these tasks.
*   **Responsive Design:** Ensure all updated pages and components are fully responsive.
*   **Accessibility:** Maintain or improve accessibility standards.

## 4. Content Strategy (Generated Copy)

### 4.1. Landing Page Copy

*   **A. Headline (‚â§ 12 words):**
    Conscious AI Integration: Your Human Edge, Amplified.
*   **B. Sub-headline (‚â§ 25 words):**
    Overwhelmed by AI's pace? Master it with heart, clarity, and Kai‚Äôs unique guidance.
*   **C. Problem Block (50-70 words):**
    The AI revolution is here‚Äîfast, furious, and often confusing. Endless tools, shifting jargon, and the pressure to adapt can feel like drowning. You know AI is vital, but how do you engage meaningfully without losing your human core or your sanity?
*   **D. Solution Block (70-90 words):**
    I'm Kai, your specialist in Conscious AI Integration. With 15 years as a psychotherapist, 5 as a software engineer, and two decades of contemplative practice, I bridge the technical with the deeply human. "The Art of Personal AI" isn't another course; it‚Äôs my framework to help you intuitively understand and master AI.
*   **E. Framework Snapshot (3 layers, ‚â§ 40 words total):**
    *   Story ¬∑ Spirit ¬∑ Science ‚Üí Amplified Consciousness
    *   Prompt ¬∑ Context ¬∑ Model ‚Üí Amplified Sensitivity
    *   IQ ¬∑ EQ ¬∑ AI ‚Üí Amplified Intelligence
*   **G. Primary CTA Button Text (3 words):**
    Integrate AI Now
*   **Secondary Link Text:**
    Learn about Kai ‚Üí (links to `/about`)

### 4.2. About Me Page Copy

*   **A. Short Origin Story (60-80 words):**
    For 15 years, I sat with human stories as a psychotherapist. Then, as a software engineer, I built with data. But it was my 20 years in contemplative practice that showed me the common thread: consciousness. Now, I fuse these worlds, guiding professionals like you to integrate AI not just as a tool, but as an extension of mindful, human-centered work.
*   **B. The Crossover Skillset (90-110 words):**
    *   **Psychotherapist:** Deep understanding of human experience, resistance, and the relational aspects of learning.
    *   **Software Engineer:** Practical, first-principles grasp of AI technology, demystifying the complex.
    *   **Contemplative Practitioner:** Grounded in ethical awareness, fostering presence and conscious choice amidst rapid change.
    This blend allows me to translate AI's power into your language, for your specific needs, ensuring technology serves your humanity.
*   **C. Philosophy Statement (60-80 words):**
    True AI mastery isn't just about clever prompts. It's about weaving your unique Story (experience) with timeless Spirit (values) and clear Science (understanding). My "Art of Personal AI" framework helps you amplify your intelligence and sensitivity by consciously engaging with AI's context, models, and your own evolving consciousness.
*   **D. Personal Quirks (1 sentence):**
    I occasionally find myself explaining complex AI concepts to my cat, who remains unimpressed but a very good listener.
*   **E. Call-out Box CTA:**
    Ready to integrate consciously? ‚Üí Book a Call

## 5. Context

### 5.1. Beginning Context
*   Current website focused on AI Safety, Consciousness, AGI with a philosophical tone.
*   Landing page may be using `components/HeroABTest.tsx` or a different Hero component.
*   Core components exist in `components/` and `components/` (PRD targets `components/` for updates).
*   `config.ts` has existing appName, appDescription, and Stripe plans.
*   A/B testing infrastructure (`libs/abTesting.tsx`, API, dashboard) is present.
*   `app/page.tsx` and `app/layout.tsx` import components, likely from root `components/`.

### 5.2. Ending Context
*   Website repositioned to human-centric AI coaching with "The Art of Personal AI" framework.
*   Landing page (`app/page.tsx` using `components/Hero.tsx`) and About page (`app/about/page.tsx`) updated with new copy.
*   Core UI components in `components/` (Hero, Problem, FeaturesAccordion, Pricing, FAQ, CTA, Header, Footer) updated with new content and styling.
*   `app/page.tsx` and relevant layouts import components from `components/`.
*   `config.ts` reflects new appName, appDescription, and crucially, new Stripe plans for coaching services.
*   A/B testing infrastructure is preserved but the previous headline test is inactive.

## 6. Low-Level Tasks
> Ordered from start to finish

1.  **Update `config.ts` with New Branding and Initial Service Structure**
    ```aider
    What prompt would you run to complete this task? Update appName, appDescription, and stripe.plans in config.ts.
    What file do you want to CREATE or UPDATE? -> config.ts
    What function do you want to CREATE or UPDATE? -> N/A (Data update)
    What are details you want to add to drive the code changes? ->
    - appName: "Oceanheart.ai - Conscious AI Integration" (or similar based on character limits/preference)
    - appDescription: "Human-centric AI coaching with Kai. Master AI with heart, clarity, and purpose using 'The Art of Personal AI' framework. Integrate Story, Spirit, and Science."
    - stripe.plans:
        - Define at least 3 new plans based on "The Art of Personal AI" offerings:
            1.  Name: "Executive Guidance Partnership", Description: "1:1 strategic partnership for wellbeing leaders.", Price: (Define), Frequency: (e.g., "per month" or "package"), Features: ["Personalized AI strategy", "Ethical framework integration", "Transformative coaching"].
            2.  Name: "'Bridging Worlds' Workshop", Description: "Immersive group learning for AI discernment.", Price: (Define), Frequency: "per workshop", Features: ["Integrate tech & wisdom", "Build confidence", "Connect with peers"].
            3.  Name: "First Principles AI Course", Description: "Self-paced foundational AI learning.", Price: (Define), Frequency: "one-time", Features: ["Core AI concepts", "Ethical integration practices", "Lifetime access"].
        - Remove or comment out old/irrelevant plans.
    - Consider `colors.theme`: If 'synthwave' is too dark, suggest changing to a lighter theme like 'cupcake' or 'emerald' to align with "light palette." For now, retain 'synthwave' but note for review.
    ```

2.  **Update `components/Header.tsx` Content and Styling**
    ```aider
    What prompt would you run to complete this task? Refactor components/Header.tsx with updated links and ensure it aligns with the new branding.
    What file do you want to CREATE or UPDATE? -> components/Header.tsx
    What function do you want to CREATE or UPDATE? -> Header component
    What are details you want to add to drive the code changes? ->
    - Update `links` array:
        - { href: "/#pricing", label: "Offerings" }
        - { href: "/about", label: "About Kai" } (or "My Approach")
        - { href: "https://www.oceanheart.blog/", label: "Blog" }
        - { href: "/consulting", label: "Consulting" } // Or a contact page link
        - { href: "/#contact", label: "Contact", className: "hdi-nav-link relative" } // if #contact exists
    - Ensure `config.appName` is used for logo alt text and title.
    - Verify CTA button (`ButtonSignin`) is appropriate or if it should be a "Book a Call" link. For header, `ButtonSignin` is likely fine.
    ```

3.  **Update `components/Footer.tsx` Content and Styling**
    ```aider
    What prompt would you run to complete this task? Refactor components/Footer.tsx with updated links and ensure it aligns with the new branding.
    What file do you want to CREATE or UPDATE? -> components/Footer.tsx
    What function do you want to CREATE or UPDATE? -> SuspendedFooter component
    What are details you want to add to drive the code changes? ->
    - Update displayed links to be consistent with Header and new offerings.
        - Support: `mailto:${config.resend.supportEmail}`
        - Offerings: `/#pricing`
        - Blog: `https://www.oceanheart.blog/`
        - About Kai: `/about`
    - Ensure `config.appName` and `config.appDescription` are used.
    - Confirm `privacyLink` logic is still appropriate.
    ```

4.  **Update `components/Hero.tsx` with New Landing Page Copy**
    ```aider
    What prompt would you run to complete this task? Implement the new landing page hero copy in components/Hero.tsx.
    What file do you want to CREATE or UPDATE? -> components/Hero.tsx
    What function do you want to CREATE or UPDATE? -> Hero component
    What are details you want to add to drive the code changes? ->
    - Replace existing h1 with: "Conscious AI Integration: Your Human Edge, Amplified."
    - Replace existing sub-headline p tag with: "Overwhelmed by AI's pace? Master it with heart, clarity, and Kai‚Äôs unique guidance."
    - Add new p tags for the value proposition points related to integrity, first principles, and Kai's background.
    - Update the primary CTA button to: Text "Integrate AI Now", href: "https://calendar.app.google/85ZdaqYK5vfNk4aH9" (or a dynamic link from config).
    - Add secondary link: Text "Learn about Kai ‚Üí", href: "/about".
    - Update placeholder image `src="/images/placeholder_hero.png"` and alt text if a more suitable image is available or to match the new theme.
    ```

5.  **Update `components/Problem.tsx` with New Problem Block Copy**
    ```aider
    What prompt would you run to complete this task? Implement the new problem statement in components/Problem.tsx.
    What file do you want to CREATE or UPDATE? -> components/Problem.tsx
    What function do you want to CREATE or UPDATE? -> Problem component
    What are details you want to add to drive the code changes? ->
    - Replace the main h2 headline with: "We Need Big Heart to Meet Big Tech".
    - Replace agitation point h2 with: "Tired of simplistic, tech-first approaches that overlook the complexity of human connection?".
    - Replace the subsequent paragraphs with the new problem description: "The AI revolution offers immense possibilities... navigate the chasm alone."
    - Update the "Step" components if the emojis/text need to align better with the new problem statement (e.g., "AI Overwhelm", "Ethical Fog", "Human Disconnect", "Seeking Clarity"). For now, use the provided copy verbatim.
    ```

6.  **Update `components/FeaturesAccordion.tsx` (or create new component for Solution/Framework)**
    ```aider
    What prompt would you run to complete this task? Adapt components/FeaturesAccordion.tsx to present the 'Solution Block' and 'Framework Snapshot' from the new copy, or advise if a new component is better.
    What file do you want to CREATE or UPDATE? -> components/FeaturesAccordion.tsx
    What function do you want to CREATE or UPDATE? -> FeaturesAccordion component and its `features` data array.
    What are details you want to add to drive the code changes? ->
    - Current `FeaturesAccordion` lists specific services. The new requirement is to show the "Solution Block" and "Framework Snapshot".
    - Option A (Modify Existing):
        - Update the main headline of the section: "The Art of Personal AI: Your Path to Conscious Integration"
        - Modify the `features` array:
            - Item 1 Title: "Kai's Guidance: Your Conscious AI Integrator", Description: (Content of "Solution Block")
            - Item 2 Title: "The Framework: Amplify Your Human Edge", Description: (Bulleted list of the 3 layers: "Story ¬∑ Spirit ¬∑ Science ‚Üí Amplified Consciousness", etc.)
            - Replace icons (FaUserTie, FaCompass etc.) and images/alt text to be more conceptual or related to Kai/Framework.
    - Option B (New Component): If `FeaturesAccordion` is to remain for specific *service features*, then a new component (e.g., `SolutionFramework.tsx`) should be created to house the "Solution Block" and "Framework Snapshot" and placed before `FeaturesAccordion` on the landing page.
    - **Chosen Path for this task: Modify Existing `FeaturesAccordion.tsx` (Option A). This is a more direct change for now.**
    - The existing `features` array in `FeaturesAccordion.tsx` lists 5 items like "Executive Guidance Partnership". This should be changed to reflect the Solution Block and Framework description.
    - New `features` data:
      ```javascript
      const features: Feature[] = [
        {
          title: "Your Guide: Conscious AI Integration with Kai",
          description: "I'm Kai, your specialist in Conscious AI Integration. With 15 years as a psychotherapist, 5 as a software engineer, and two decades of contemplative practice, I bridge the technical with the deeply human. 'The Art of Personal AI' isn't another course; it‚Äôs my framework to help you intuitively understand and master AI.",
          svg: <FaUserTie className="w-6 h-6" />, // Placeholder icon
          type: "image", // Or 'svg' if no specific image
          path: "/images/kai_profile.jpeg", // Example image
          alt: "Kai, Conscious AI Integration Specialist",
        },
        {
          title: "The Framework: The Art of Personal AI",
          description: "Unlock your potential with a 3-layer model:\n‚Ä¢ Story ¬∑ Spirit ¬∑ Science ‚Üí Amplified Consciousness\n‚Ä¢ Prompt ¬∑ Context ¬∑ Model ‚Üí Amplified Sensitivity\n‚Ä¢ IQ ¬∑ EQ ¬∑ AI ‚Üí Amplified Intelligence",
          svg: <FaCompass className="w-6 h-6" />, // Placeholder icon
          type: "image", // Or 'svg'
          path: "/images/framework_visual_placeholder.jpg", // Placeholder for a framework visual
          alt: "The Art of Personal AI Framework",
        },
      ];
      ```
    - The `FeaturesAccordion.tsx` component might need its internal structure reviewed if it's hardcoded for 5 features or if the display style (accordion vs. static block) is not ideal for the new content. For now, assume content replacement.
    ```

7.  **Update `components/Pricing.tsx` Content**
    ```aider
    What prompt would you run to complete this task? Update components/Pricing.tsx to reflect the new service offerings based on config.ts.
    What file do you want to CREATE or UPDATE? -> components/Pricing.tsx
    What function do you want to CREATE or UPDATE? -> Pricing component
    What are details you want to add to drive the code changes? ->
    - This component dynamically renders plans from `config.stripe.plans`.
    - The main task is to ensure that the `config.ts` (Task 1) has the correct new plans.
    - Review the rendering logic in `Pricing.tsx` to ensure it gracefully handles the new plan structures (e.g., if some plans now have a "Book a Call" CTA instead of a direct purchase).
    - Update any introductory text or section headline within `Pricing.tsx` to align with the "Offerings" terminology. Example headline: "Explore Your Path to Conscious AI Integration".
    ```

8.  **Update `components/FAQ.tsx` Content**
    ```aider
    What prompt would you run to complete this task? Update the questions and answers in components/FAQ.tsx.
    What file do you want to CREATE or UPDATE? -> components/FAQ.tsx
    What function do you want to CREATE or UPDATE? -> N/A (Data update in `faqList` array)
    What are details you want to add to drive the code changes? ->
    - Replace the existing `faqList` with new Q&A relevant to AI coaching:
      1.  Q: "What is 'The Art of Personal AI'?"
          A: "It's Kai's unique 3-layer framework (Story/Spirit/Science, Prompt/Context/Model, IQ/EQ/AI) for integrating AI consciously, amplifying your human intelligence and sensitivity."
      2.  Q: "Who is this AI coaching for?"
          A: "Smart professionals, therapists, coaches, and creatives feeling overwhelmed by AI, who seek to understand and use it meaningfully without losing their human core."
      3.  Q: "How is this different from other AI courses?"
          A: "We focus on *your* integration of AI, blending deep human understanding (from psychotherapy & contemplative practice) with practical tech know-how, rather than just listing tools."
      4.  Q: "What if I'm not technical?"
          A: "Perfect. This coaching is designed to demystify AI. Kai translates complex concepts into your language, focusing on principles over fleeting tech trends."
      5.  Q: "How do I get started?"
          A: "Book a free, no-obligation 20-minute Clarity Call with Kai to discuss your needs and see if this is the right fit for you. [Link to calendar]"
    ```

9.  **Update `components/CTA.tsx` Content**
    ```aider
    What prompt would you run to complete this task? Update the Call To Action content in components/CTA.tsx.
    What file do you want to CREATE or UPDATE? -> components/CTA.tsx
    What function do you want to CREATE or UPDATE? -> CTA component
    What are details you want to add to drive the code changes? ->
    - Update Headline: "Ready to Integrate AI Consciously?"
    - Update Subheading: "Move from AI overwhelm to amplified human potential. Book your discovery call with Kai."
    - Update Button: Text "Book Your Free Discovery Call", href: "https://calendar.app.google/85ZdaqYK5vfNk4aH9" (or config link).
    - Remove or update secondary link if not relevant. The previous "Explore Workshops & Courses" could link to `/#pricing`.
    - Update background image and alt text to something more aligned with clarity, connection, or conscious tech.
    ```

10. **Update `app/about/page.tsx` with New "About Me" Copy**
    ```aider
    What prompt would you run to complete this task? Implement the new 'About Me' page copy in app/about/page.tsx.
    What file do you want to CREATE or UPDATE? -> app/about/page.tsx
    What function do you want to CREATE or UPDATE? -> AboutPage component
    What are details you want to add to drive the code changes? ->
    - Replace existing sections with the new content:
        - Section 1 (Intro): Use "The Challenge We All Face" copy.
        - Section 2 (Profile & Story): Use "Origin Story", "Crossover Skillset", and "Philosophy Statement" copy. The current page has a "My Journey", "Our Vision", "Private Consulting" structure. This needs to be adapted. The new copy is more personal and focused.
        - The `WhyOceanheartVideo` component might need to be re-evaluated or its context adjusted.
        - Ensure the new page title is one of the suggested options (e.g., "About Kai: Your Guide in the Age of AI").
        - Update profile image if needed. Current is `about_me_profile_2.jpeg`.
        - Incorporate the "Personal Quirks" line.
        - Add the "Call-out Box CTA" prominently.
    ```

11. **Update `app/page.tsx` and `app/layout.tsx` Component Import Paths**
    ```aider
    What prompt would you run to complete this task? Update import paths in app/page.tsx and app/layout.tsx to point to components/.
    What file do you want to CREATE or UPDATE? -> app/page.tsx AND app/layout.tsx
    What function do you want to CREATE or UPDATE? -> N/A (Import path updates)
    What are details you want to add to drive the code changes? ->
    - In `app/page.tsx`: Change imports for `Header`, `Hero`, `Problem`, `FeaturesAccordion`, `Pricing`, `FAQ`, `CTA`, `Footer` from ` "@/components/..."` to ` "@/components/..."`.
    - In `app/layout.tsx`: If `Header` or `Footer` are imported there (they are via `ClientLayout`, which might import them, or directly), update those paths too. The current `app/layout.tsx` imports `ClientLayout from "@/components/LayoutClient"`. If `LayoutClient.tsx` imports Header/Footer from root `components/`, its imports need to change too, or the components need to be moved to `components` and `LayoutClient.tsx` updated.
    - **Focus for this task:** Directly update `app/page.tsx`. Analyze `ClientLayout` if it also uses these components and update its imports if necessary. If `Header` and `Footer` are directly in `app/layout.tsx`, update them there.
    - For `app/page.tsx`:
        ```diff
        --- a/app/page.tsx
        +++ b/app/page.tsx
        @@ -1,12 +1,12 @@
         import { Suspense } from "react";
        -import Header from "@/components/Header";
        -// import HeroABTest from "@/components/HeroABTest"; // To be removed or refactored
        -import Problem from "@/components/Problem";
        -import FeaturesAccordion from "@/components/FeaturesAccordion";
        -import Pricing from "@/components/Pricing";
        -import FAQ from "@/components/FAQ";
        -import CTA from "@/components/CTA";
        -import Footer from "@/components/Footer";
        -// import LandingHero from "@/docs/components/LandingHero"; // Likely unused now
        -import Hero from "@/components/Hero";
        +import Header from "@/components/Header";
        +import Problem from "@/components/Problem";
        +import FeaturesAccordion from "@/components/FeaturesAccordion";
        +import Pricing from "@/components/Pricing";
        +import FAQ from "@/components/FAQ";
        +import CTA from "@/components/CTA";
        +import Footer from "@/components/Footer";
        +import Hero from "@/components/Hero";
         
         export default function Home() {
           return (
        ```
    - For `app/layout.tsx`:
        ```diff
        --- a/app/layout.tsx
        +++ b/app/layout.tsx
        @@ -4,7 +4,7 @@
         import { SpeedInsights } from "@vercel/speed-insights/next";
         import { Viewport } from "next";
         import { getSEOTags } from "@/libs/seo";
        -import ClientLayout from "@/components/LayoutClient";
        +import ClientLayout from "@/components/LayoutClient"; // Assuming LayoutClient is moved or its internal imports are updated
         import config from "@/config";
         import Script from "next/script";
         import { ABTestProvider } from "@/libs/abTesting";
        ```
        (This assumes `LayoutClient.tsx` is also moved to `components` or its internal imports are updated if it uses Header/Footer from the root `components` dir). It is safer to assume `LayoutClient` will be moved to `components/LayoutClient.tsx` and its internal imports (if any to Header/Footer) will be from `components/`.

12. **Decommission Old Hero A/B Test and Update `app/page.tsx`**
    ```aider
    What prompt would you run to complete this task? Remove HeroABTest usage from app/page.tsx.
    What file do you want to CREATE or UPDATE? -> app/page.tsx
    What function do you want to CREATE or UPDATE? -> Home component rendering
    What are details you want to add to drive the code changes? ->
    - Remove the import for `HeroABTest`.
    - Ensure the page directly renders the updated `Hero` component (imported from `components/Hero.tsx`).
    - Delete `components/HeroABTest.tsx` if it's no longer needed, or refactor its content if any part is reusable in the new `components/Hero.tsx`. For this PRD, assume removal/replacement.
    ```

13. **Review and Test**
    ```aider
    What prompt would you run to complete this task? This is a manual review and testing step.
    What file do you want to CREATE or UPDATE? -> N/A
    What function do you want to CREATE or UPDATE? -> N/A
    What are details you want to add to drive the code changes? ->
    - Thoroughly review all updated pages (Landing, About) and components for correct content, styling, and responsiveness.
    - Test all links, especially CTAs.
    - Verify the theme application.
    - Check console for errors.
    - Ensure the A/B testing infrastructure is not causing errors on the live site, even if not actively testing the hero.
    ```
```
</file>

<file path="lib/teamData.ts">
import { type } from "os";

// --- Interfaces ---
export interface RoleDetail {
  id: string; // Unique identifier for the role (e.g., 'eng-lead')
  acronym?: string; // <-- Add acronym field
  title?: string;
  advisorTitle?: string;
  description: string;
  advisorDescription?: string;
  background?: string; // <-- Add background field
  isPureAdvisor?: boolean;
  isAlliance?: boolean;
  reportsTo?: string[]; // IDs of roles this role reports to
  memberName?: string; // e.g., "Pete 'Maverick' Mitchell"
  avatarUrl?: string; // URL to avatar image
  socialXUrl?: string;
  socialInstagramUrl?: string;
  socialYouTubeUrl?: string;
  socialLinkedInUrl?: string; // <-- Add LinkedIn URL
  websiteUrl?: string;
}

export interface Section {
  level: string;
  description?: string;
  roles: RoleDetail[];
  id: string;
}

// --- Placeholder Avatar ---
export const placeholderAvatar = "/api/placeholder/80/80"; // Simple placeholder URL

// --- Updated Data Structure with Mock Names/Avatars ---
export const leadershipStructure: Section[] = [
  {
    id: 'leadership',
    level: 'Leadership & Strategy',
    roles: [
      {
        id: 'ceo',
        acronym: 'CEO',
        reportsTo: [],
        title: 'Chief Executive Officer',
        memberName: "Rick ('Kai') Hallett PGDip PGCert BSc (Hons) BABCP", avatarUrl: "/images/kai_profile.jpeg",
        advisorTitle: 'Director & Founder',
        description: 'Leads overall vision, strategy, and execution. Represents the company, drives growth, and fosters culture.',
        advisorDescription: 'Merging advice and direction from all our advisors, Kai is the driving force behind OceanHeart.ai and it\'s key aim: to piece together the rosetta stone of human-AI interaction, evolving alongside the "Science, Story and Spirit" of the human experience.',
        background: 'Kai merges 15 years as a psychotherapist (specializing in ACT, Somatic Release, and Meditative Transformation) with practical experience as a self-taught, full-stack software engineer working in enterprise big data environments since 2019. Driven by a deep exploration of AI\'s impact on human wellbeing, he founded Oceanheart.ai in 2024.',
        socialInstagramUrl: "https://www.instagram.com/oceanheart.ai",
        socialXUrl: "https://x.com/oceanheart_ai",
        socialLinkedInUrl: "https://www.linkedin.com/in/richardhallett86/",
        websiteUrl: "https://www.oceanheart.blog/book",
      },
      {
        id: 'cxo',
        acronym: 'CXO',
        title: 'Chief Experience Officer',
        memberName: "Ayse Ibrahim BSc (Hons) OstMed",
        avatarUrl: "/images/ayse_profile.png",
        reportsTo: ['ceo'],
        advisorTitle: 'Founding Executive',
        description: 'Takes a holistic view of all key stakeholder experiences, often encompassing customer (CX), employee (EX), and user (UX) experience design and strategy. ',
        background: 'Ayse joined the team in 2025 as a founding member, herself the founder of THE BACKBONE, Principle Osteopath, & Women‚Äôs Health expert, NLP Master Practitioner and Yoga Therapy teacher',
        advisorDescription: 'Provides perspective on how different aspects of the business impact the overall experience for customers, users, and employees. Encourages a people-centered view, grounded in years of immersion in the healing arts.',
        websiteUrl: "https://thebackbone.co.uk/ayshe-ibrahim/",
        socialLinkedInUrl: "https://www.linkedin.com/in/ayshe-ibrahim-10a2b825/",
        socialInstagramUrl: "https://www.instagram.com/thebackboneosteopathy",
        socialXUrl: "https://x.com/BackboneOsteo",
      },
      { id: 'cmo', acronym: 'CMO', title: 'Chief Marketing Officer', reportsTo: ['cxo'], advisorTitle: 'Senior Advisor (Marketing & Brand Strategy)', avatarUrl: "/images/neal_profile.jpeg", memberName: "Neal Brown", description: 'Leads marketing, branding, and communication efforts.', advisorDescription: 'Strategic integration of AI and predictive analytics into marketing to achieve measurable, data-driven growth and optimize customer journeys, keeping the BigHeart in BigTech', background: 'Digital Marketing Strategist (6+ years) specializing in AI-driven campaigns for measurable impact (proven traffic, sales, social growth). Integrates AI, predictive analytics, and content strategies to optimize customer journeys and conversions. Dedicated to simplifying AI and staying current with its rapid evolution for smarter, impactful, human-centric marketing.', socialLinkedInUrl: "https://www.linkedin.com/in/nealbrown77/" },
    ],
  },
  {
    id: 'operations',
    level: 'Core Operations & Execution',
    roles: [
      { id: 'coo', acronym: 'COO', title: 'Chief Operating Officer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['ceo'], advisorTitle: 'Senior Advisor (Operational Efficiency)', description: 'Oversees daily operations, ensuring efficiency and execution.', advisorDescription: 'Shares insights on improving processes and efficiency.' },
      { id: 'cfo', acronym: 'CFO', title: 'Chief Financial Officer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['ceo'], advisorTitle: 'Senior Advisor (Financial Perspective)', description: 'Manages financial strategy, planning, reporting, and risk.', advisorDescription: 'Lends financial acumen, offering perspective on fiscal matters.' },
      { id: 'cto', acronym: 'CTO', title: 'Chief Technology Officer', memberName: "Rick ('Kai') Hallett PGDip PGCert BSc (Hons) BABCP", avatarUrl: "/images/kai_profile.jpeg", reportsTo: ['ceo'], advisorTitle: 'Software Architect', description: 'Drives technology strategy, innovation, and development.', advisorDescription: 'Responsible for high-level architecture and design of all software and systems.', websiteUrl: "https://www.oceanheart.ai", socialXUrl: "https://x.com/oceanheart_ai", socialLinkedInUrl: "https://www.linkedin.com/in/richardhallett86/", socialInstagramUrl: "https://www.instagram.com/oceanheart.ai" },
      { id: 'ciso', acronym: 'CSO', title: 'Chief Security Officer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['cto'], advisorTitle: 'Senior Advisor (Info Security Insight)', description: 'Leads cybersecurity strategy and protects information assets.', advisorDescription: 'Helps consider best practices for protecting information.' },
      { id: 'cpo-prod', acronym: 'CPO', title: 'Chief Product Officer', memberName: "Rick ('Kai') Hallett PGDip PGCert BSc (Hons) BABCP", avatarUrl: "/images/kai_profile.jpeg", reportsTo: ['ceo'], advisorTitle: 'Advisor (Product Strategy)', description: 'Owns product vision, strategy, and roadmap.', advisorDescription: 'Provides perspective on user needs, market fit, and product direction.', websiteUrl: "https://www.oceanheart.ai", socialXUrl: "https://x.com/oceanheart_ai", socialLinkedInUrl: "https://www.linkedin.com/in/richardhallett86/", socialInstagramUrl: "https://www.instagram.com/oceanheart.ai" },
      { id: 'cro-cgo', acronym: 'CGO', title: 'Chief Growth Officer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['ceo'], advisorTitle: 'Advisor (Revenue Growth Perspective)', description: 'Oversees revenue generation, aligning sales, marketing, etc.', advisorDescription: 'Shares insights on growth strategies and market opportunities.' },
      { id: 'clo-learn', acronym: 'CLO', title: 'Chief Learning Officer', reportsTo: ['cxo'], avatarUrl: placeholderAvatar, memberName: "Position Available", advisorTitle: 'Advisor (Learning & Development)', description: 'Leads strategy for employee learning and skills development.', advisorDescription: 'Shares insights on effective training and continuous learning.' },
      { id: 'clo-legal', acronym: 'CCO', title: 'Chief Legal Officer', avatarUrl: placeholderAvatar, memberName: "Position Available", reportsTo: ['ceo'], advisorTitle: 'Senior Advisor (Legal Perspective)', description: 'Manages legal affairs, compliance, and risk.', advisorDescription: 'Draws upon legal experience to offer perspective on potential legal considerations.' },

      { id: 'chro-people', acronym: 'CPO', title: 'Chief People Officer', reportsTo: ['coo'], advisorTitle: 'Advisor (People & Culture)', description: 'Oversees HR, talent, culture, and employee experience.', advisorDescription: 'Shares wisdom on fostering a positive workplace culture.', avatarUrl: placeholderAvatar, memberName: "Position Available" },
    ],
  },
  {
    id: 'specialized',
    level: 'Specialized Functions & Expertise',
    roles: [
      { id: 'eng-lead', title: 'Lead Engineer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['cto'], description: 'Oversees the engineering team, ensuring technical excellence and project delivery.', advisorDescription: 'Provides technical guidance and mentorship.' },
      { id: 'frontend-dev', title: 'Frontend Developer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['eng-lead'], description: 'Builds the user interface using modern web technologies.', advisorDescription: 'Focuses on usability and performance.' },
      { id: 'backend-dev', title: 'Backend Developer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['eng-lead'], description: 'Manages server-side logic, APIs, and database interactions.', advisorDescription: 'Ensures scalability and security.' },
      { id: 'qa-engineer', title: 'QA Engineer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['eng-lead'], description: 'Ensures software quality through rigorous testing procedures.', advisorDescription: 'Champions quality across the development lifecycle.' },
      { id: 'ux-designer', title: 'UX/UI Designer', memberName: "Position Available", avatarUrl: placeholderAvatar, reportsTo: ['cxo'], description: 'Designs intuitive and visually appealing user experiences.', advisorDescription: 'Advocates for user-centered design principles.' },





    ],
  },
  {
    id: 'advisory',
    level: 'Senior Advisory Circle',
    description: 'Individuals primarily offering perspective and guidance based on deep experience, often with less operational involvement.',
    roles: [
      {
        id: 'advisor-legal',
        memberName: "Position Available", avatarUrl: placeholderAvatar,
        advisorTitle: 'Senior Advisor (Legal Perspective)',
        description: 'Draws upon decades of invaluable experience as a solicitor, providing seasoned guidance and perspective to the team. Helps us navigate considerations with thoughtfulness and care.',
        isPureAdvisor: true
      },
      {
        id: 'advisor-growth',
        memberName: "Aureliana Enache",
        avatarUrl: "/images/aura_profile.png",
        advisorTitle: 'Senior Advisor (Growth Strategies)',
        description: 'Shares experience and insights on different approaches to expanding the business and reaching new audiences or markets. Offers perspective on growth opportunities.',
        isPureAdvisor: true,
        // --- Add Mock Social/Website URLs ---
        // socialXUrl: "https://x.com/placeholder_stinger",
        socialInstagramUrl: "https://www.instagram.com/aureliana.enache",
        // socialYouTubeUrl: "https://youtube.com/placeholder_stinger", // Example: Omit one
        websiteUrl: "https://www.aureliana-therapies.com?ref=oceanheart.ai"
      },
    ],
  },
  {
    id: 'alliance',
    level: 'OceanHeart Wellbeing Alliance',
    description: 'A network of external professionals and ambassadors aligned with our mission, equipped through training to support and advocate for our human-centered approach. Everyone in the alliance has lifetime access to all oceanheart.ai software, courses, events and resources.',
    roles: [
      {
        id: 'alliance-member',
        title: 'Wellbeing Alliance Ambassador',
        memberName: "Aureliana Enache",
        avatarUrl: "/images/aura_profile.png", // Assuming a real image path for Penny too
        description: 'Our founding ambassador, Aureliana Enache, actively promotes and organises the activity of the OceanHeart Wellbeing Alliance through her company Aureliana Therapies and her ongoing immersion into the healing arts',
        isAlliance: true,
        // --- Add Mock Social/Website URLs ---
        // socialXUrl: "https://x.com/placeholder_penny",
        // websiteUrl: "https://example.com/penny-site"
      },
      {
        id: 'alliance-member',
        title: 'Wellbeing Alliance Ambassador',
        memberName: "Position Available",
        // avatarUrl: "/images/team/penny.jpg", // Assuming a real image path for Penny too
        description: 'Actively promotes and organises the activity of the OceanHeart Wellbeing Alliance. Free access to all oceanheart.ai software, courses, events and resources.',
        isAlliance: true,
        // --- Add Mock Social/Website URLs ---
        // socialXUrl: "https://x.com/placeholder_penny",
        // websiteUrl: "https://example.com/penny-site"
      },
      {
        id: 'alliance-member',
        title: 'Wellbeing Alliance Member',
        memberName: "Position Available",
        // avatarUrl: "/images/team/penny.jpg", // Assuming a real image path for Penny too
        description: 'Joins a community dedicated to advancing human-centered approaches to wellbeing in the age of AI. Members support our mission and champion effective and ethical human-AI interaction, empowered by free access to all oceanheart.ai software, courses, events and resources.',
        isAlliance: true,
        // --- Add Mock Social/Website URLs ---
        // socialXUrl: "https://x.com/placeholder_penny",
        // websiteUrl: "https://example.com/penny-site"
      },
    ],
  },
];

// Helper to flatten roles for easier lookup
export const allRoles = leadershipStructure.flatMap(section => section.roles);
export const rolesById = new Map(allRoles.map(role => [role.id, role]));
</file>

<file path="libs/chartColors.ts">
export const CHART_COLORS = [
  // Pinks and purples
  "#FF00FF", // Neon pink
  "#E779C1", // Bright pink (original)
  "#DF4CCE", // Deep pink
  "#B967FF", // Electric purple
  "#9D81E6", // Purple (original)
  "#7B68EE", // Medium slate blue

  // Blues
  "#58C7F3", // Light blue (original)
  "#36ADFF", // Bright blue
  "#0088FF", // Deep blue
  "#007BFF", // Azure blue

  // Teals and cyans
  "#00FFFF", // Cyan
  "#71EAD2", // Teal (original)
  "#00FFCC", // Bright teal
  "#1AFFD5", // Electric teal

  // Oranges, yellows, reds
  "#EACE6C", // Yellow (original)
  "#FFC261", // Golden
  "#FF9649", // Orange
  "#EC8C78", // Salmon (original)
  "#FF5277", // Red (original)
  "#FF2A6D", // Hot pink

  // Additional colors to complete the set
  "#01EFE6", // Bright turquoise
  "#FC1BFD", // Magenta
];

export const PRACTICE_TYPES = [
  "Meditation",
  "Assimilation",
  "DragonYoga",
  "Sitting In The Rain",
  "Energy Movements",
  "High Guard",
  "Feels Like",
  "Surrender",
  "Tonglen",
  "Scanning",
  "Manifestation",
  "The Tones",
  "Mind Projection",
  "Koan Meditation",
  "Conversations with AI",
  "Time Stepping",
  "Brain Wiggle",
  "The White Fire",
  "Aums",
  "Seeing Auras",
  "Watching Static",
  "Prana Walking",
  "Cloud Busting"
];

export const PRACTICE_TYPES_COLORS = PRACTICE_TYPES.map((type, index) => ({
  type,
  color: CHART_COLORS[index % CHART_COLORS.length]
}));
</file>

<file path="AGENTS.md">
# Repository Guidelines

## Project Structure & Modules
- `app/`: Next.js App Router pages and API routes (`app/api/*/route.ts`).
- `components/`: Reusable UI (PascalCase files, one component per file).
- `hooks/`: Custom hooks (camelCase, prefixed with `use`; see `hooks/useForm.ts`).
- `libs/` and `lib/`: Service clients and utilities (Supabase, Stripe, helpers).
- `public/`: Static assets. `types/`: Shared TypeScript types.
- `scripts/` and `bin/`: Dev/ops scripts and small CLIs.
- Tests: colocated `*.test.ts(x)` (e.g., `hooks/useForm.test.ts`). E2E: Cypress when present (`cypress/e2e`).

## Build, Test, and Dev Commands
- Install: `bun install`
- Develop: `bun dev` (runs Next.js at `http://localhost:3000`)
- Lint: `bun run lint` (Next.js ESLint config)
- Test (unit/components): `bun run test` (preloads `jest.setup.ts`)
- Build: `bun run build` (triggers `next build` + `postbuild` sitemap)
- Start prod: `bun start`
- Cypress: `bunx cypress open` (interactive) or `bunx cypress run`

## Coding Style & Naming
- Language: TypeScript with React 18 and Next.js 14.
- Indentation: 2 spaces; prefer functional, stateless components where possible.
- Files: Pages use `app/**/page.tsx` and optional `layout.tsx`; API in `app/api/**/route.ts`.
- Components: PascalCase (`components/Hero.tsx`). Hooks: camelCase (`hooks/useForm.ts`).
- Styling: Tailwind CSS utilities; avoid inline styles; keep variants via classnames.
- Linting: Extends `next/core-web-vitals`; fix warnings before PR.

## Testing Guidelines
- Unit/Component: React Testing Library; colocate as `*.test.tsx`/`*.test.ts`.
- DOM matchers via `@testing-library/jest-dom` in `jest.setup.ts`.
- Aim to cover critical hooks, components, and API route logic. Prefer deterministic tests.
- E2E: Cypress specs under `cypress/e2e` (when added). Use stable selectors (`data-testid`).

## Commits & Pull Requests
- Commit style: short imperative with type prefix used in history: `FEAT`, `FIX`, `REFACTOR`, `ENHANCE` (e.g., `FIX: Prevent carousel flicker`).
- PRs must include: scope/intent, before/after screenshots for UI, test plan (`bun test`, manual steps), related issues (`Closes #123`), and risk/rollback notes.

## Security & Config
- Secrets in `.env.local`; never commit. Request required keys from maintainers. Review `config.ts` and `middleware.ts` for auth/edge behavior.
- See `ARCHITECTURE.md` for deeper context before large changes.
- Subdomain SSO: see `docs/PRD-Subdomain-SSO.md`; use `packages/common-auth` helpers and set `COOKIE_DOMAIN`.
</file>

<file path="CLEANUP_LIST.md">
Okay, combining your provided list with my previous analysis, and including the instruction to archive the "Saigo" feature code, here's a comprehensive cleanup and refactoring plan.

```markdown
# Comprehensive Cleanup & Refactoring Plan

This document outlines files and directories to be removed, archived, or refactored to improve the codebase's maintainability, reduce clutter, and eliminate dead code.

## I. Archive "Saigo" Feature

The "Saigo" feature is to be archived. This involves moving all related code and assets to a dedicated archive directory (e.g., `archive/saigo/`) or removing them entirely if the feature is definitely deprecated.

**Files and Directories to Archive/Remove (Saigo):**

1.  **API Routes:**
    *   `app/api/saigo/` (entire directory and all its contents)
        *   `app/api/saigo/instagram/` (and all sub-contents)
        *   `app/api/saigo/key/route.ts`
        *   `app/api/saigo/leaderboard/route.ts`
        *   `app/api/saigo/practice/route.ts`
        *   `app/api/saigo/username/route.ts`
    *   `app/api/auth/saigo-callback/route.ts`
    *   `app/api/auth/saigo-verify-and-signin/route.ts`
    *   `app/api/cron/instagram-checker/route.ts` (if Instagram checking was solely for Saigo)

2.  **Pages and Layouts:**
    *   `app/saigo/` (entire directory and all its contents)
        *   `app/saigo/leaderboard/` (and contents)
        *   `app/saigo/signin/` (and contents)
        *   `app/saigo/username/` (and contents)
        *   `app/saigo/layout.tsx`

3.  **Libraries, Scripts & Prompts:**
    *   `app/saigo/lib/` (entire directory and all its contents, including `.python-version`)
    *   `libs/instagram-service.ts` (if only used by Saigo)
    *   `prompts/saigo_username_prompt.xml`
    *   `prompts/saigo.md`

4.  **Components:**
    *   `components/LiveLeaderboard.tsx`
    *   `components/PracticeForm.tsx`
    *   Potentially `components/charts/*` if exclusively used by the Saigo leaderboard (e.g., `PracticeSummaryPieChart.tsx`, `LineGraph.tsx` - verify usage).
    *   `components/Countdown.tsx` (if its only context was Saigo leaderboard).

5.  **Configuration:**
    *   In `config.ts`:
        *   Remove or comment out the `saigoTheme` property within `colors`.
        *   Remove or comment out the `saigo` property within `auth`.

6.  **Database Artifacts (To be addressed via new migrations):**
    *   Tables to drop: `saigo_users`, `practices`, `instagram_page_checks`, `instagram_affected_users`, `saigo_username`, `alisone`.
    *   Relevant migrations to review/deprecate:
        *   `migrations/20231018_add_practices_and_force.sql`
        *   `migrations/instagram_page_check.sql`
        *   `migrations/saigo_table_relationships_by_id.sql`
        *   `migrations/saigo_table_relationships.sql`
        *   `migrations/saigo_tables_uuid.sql`
        *   `migrations/saigo_tables.sql`

7.  **CLI Scripts in `bin/`:**
    *   `bin/bot_runner.ts`
    *   `bin/reset_month.ts`
    *   Remove Saigo-specific commands/functions from `bin/cli.ts`.

8.  **Public Assets:**
    *   Images specifically for Saigo: e.g., `public/images/saigo_*.webp`, `public/images/hbi_transparent.webp` (if only used on Saigo pages).
    *   Check for unused images; if no references are found, place them in the `archive/images/` directory.

## II. Root Directory Cleanup

Remove the following files and directories from the project root as they are either duplicates of files within `app/`, unnecessary, or better placed elsewhere:

1.  **Aider-related files (AI assistant tool):**
    *   `.aiderignore` (if present and confirmed no longer needed)
    *   `.aider.chat.history.md` (if present)
    *   `.aider.input.history` (if present)
    *   `aider.session`
    *   `bak.aider.model.settings.yml`
    *   `session.aider`
    *   `reasoning-effort` (0-byte file)

2.  **Duplicate or Misplaced Next.js App Files:**
    *   `error.tsx` (duplicate of `app/error.tsx`)
    *   `not-found.tsx` (duplicate of `app/not-found.tsx`)
    *   `page.tsx` (duplicate of `app/page.tsx`)
    *   `globals.css` (duplicate/obsolete version of `app/globals.css`)
    *   `opengraph-image.png` (managed by Next.js metadata in `app/`)
    *   `twitter-image.png` (managed by Next.js metadata in `app/`)

3.  **Orphaned/Misplaced Directories:**
    *   `signin/` (directory in root, duplicates `app/signin/`)
    *   `tos/` (directory in root, duplicates `app/tos/`)
    *   `privacy-policy/` (directory in root, duplicates `app/privacy-policy/`)
    *   `src/` (if empty or not conforming to the current App Router structure where `app/` is primary).

4.  **Temporary, Test, or Unclear Files:**
    *   `names.db` (0-byte file at root; the active one appears to be `app/api/hdi/names/names.db`)
    *   `blog.prompt.xml` (if not part of an active content generation workflow)
    *   `cxo.html` (likely a temporary/test HTML file)

5.  **Build/Dependency Artifacts:**
    *   Review `.lock` files. `bun.lockb` is expected if Bun is the primary package manager. Remove any other stray lock files (e.g., `package-lock.json`, `yarn.lock`) if not in use.

## III. Documentation Consolidation & Updates

1.  **Move Existing Documentation:**
    *   Move `CODE_REVIEW.md` to `docs/CODE_REVIEW.md`.
    *   Move `DEAD_CODE_TARGETS.md` to `docs/refactor/DEAD_CODE_TARGETS.md`.
    *   Move `gitflow.mdc` to `docs/development/gitflow.mdc` (or similar).
    *   Move `erd.md` to `docs/database/ERD.md` (or integrate its content into `ARCHITECTURE.md`).
2.  **Review/Remove Specs:**
    *   Consolidate or remove outdated/irrelevant files in the `specs/` directory. `spec.md` in root should be handled.
3.  **Update Key Documentation:**
    *   Create a comprehensive `ARCHITECTURE.md` as a priority.
    *   Update `README.md` to reflect the current state of the project post-cleanup.

## IV. Directory Structure & Specific Code Review

1.  **`tasks/` and `tasks-refactor/` Duplication:**
    *   These directories appear to contain identical or very similar files related to a task management system (`.cursor/taskmaster.mdc` mentions a "Taskmaster" tool).
    *   **Action:** Determine the canonical/correct version and remove the duplicate or outdated one. If `tasks-refactor/` was an attempt to refactor `tasks/`, complete the refactor and remove the original, or discard the refactor and remove `tasks-refactor/`.

2.  **Supabase Client in `app/libs/supabase/server.ts`:**
    *   This file (`app/libs/supabase/server.ts`) seems to be a direct import of `@supabase/supabase-js` for server-side use with the service role key.
    *   **Action:** Verify its usage. The primary Supabase clients (`createClient` and `createServiceClient` using `@supabase/ssr`) are in `libs/supabase/server.ts` and `libs/supabase/client.ts`. If `app/libs/supabase/server.ts` is redundant, remove it and update any imports.

3.  **Python Scripts in `app/hdi/lib/`:**
    *   `create_db.py`: Appears to be a setup script for an SQLite `names.db`. The active `names.db` is at `app/api/hdi/names/names.db`.
    *   `db_agent.py`: A more complex agent script.
    *   **Action:** Verify if these are still actively used, part of an older workflow, or for experimentation. If `app/api/hdi/names/route.ts` and `seed_db.py` handle the HDI names database, these might be obsolete.

4.  **Public Scripts:**
    *   `public/scripts/progress.js`: Targets elements with classes `.update-demo .el`.
    *   **Action:** Search the codebase for these CSS classes. If not found, this script might be unused. `anime.min.js` is used by `AudioPlayer.tsx` and should remain.

## V. General Housekeeping

1.  **Review `config.ts`:** Ensure all configurations are current and no deprecated feature settings remain (beyond the commented-out Saigo ones).
2.  **Check `.eslintrc.json` and `tsconfig.json`:** Ensure they reflect the current project needs and best practices (e.g., consider stricter TypeScript rules).
3.  **Review `package.json`:**
    *   Remove any dependencies that were exclusively for the Saigo feature (e.g., if certain chart libraries were only for its leaderboard).
    *   Ensure `scripts` related to Saigo are removed (e.g., `"add-instagram-check"`).
4.  **Review `.cursorules`:** Ensure they align with the current project structure and chosen technologies. The rule about moving `app` and `components` into a `src` directory is not currently followed; decide if this is a desired change.

## Next Steps (Implementation Order)

1.  **Create a Backup Branch:** Before making any deletions, create a new branch (e.g., `cleanup/archive-saigo-and-refactor`) from the current development branch.
2.  **Archive Saigo Feature:**
    *   Move all files and directories listed under "I. Archive "Saigo" Feature" to an `archive/saigo/` directory or delete them if confident they are no longer needed for reference.
    *   Update `config.ts` to remove Saigo-specific configurations.
    *   Remove Saigo-related scripts from `package.json`.
3.  **Remove Root Directory Clutter:** Delete files as listed under "II. Root Directory Cleanup".
4.  **Address Orphaned/Redundant Directories:** Delete directories as listed under "II. Root Directory Cleanup".
5.  **Consolidate `tasks/` and `tasks-refactor/`:** Make a decision and remove the redundant directory.
6.  **Review and Cleanup Specific Code/Assets:** Go through items in "IV. Directory Structure & Specific Code Review".
7.  **Consolidate Documentation:** Move and update documentation files as per "III. Documentation Consolidation & Updates".
8.  **Database Cleanup (Post-Code Removal):**
    *   After the Saigo code is removed and the application is stable, plan and execute migrations to drop the unused Saigo-related tables from the Supabase database. **This should be done carefully, especially in production.**
9.  **Test Thoroughly:**
    *   Run `bun install` (or your package manager's install command) to ensure no issues with `package.json` changes.
    *   Run `next lint` and `next build` to catch any import errors or build failures.
    *   Perform thorough manual testing of all remaining application features.
    *   Run any automated tests (e.g., Cypress, Jest).
10. **Update Core Documentation:**
    *   Create the comprehensive `ARCHITECTURE.md`.
    *   Update `README.md`.
11. **Review and Merge:** Submit the cleanup branch for review and merge it into the main development branch once approved.

This combined list should provide a solid foundation for your cleanup efforts. Remember to verify usages before deleting, especially for shared components or utilities.
```
</file>

<file path="app/portfolio/page.tsx">
import Image from "next/image";
import config from "@/config";
import { getSEOTags } from "@/libs/seo";
import PortfolioCarousel from "@/components/PortfolioCarousel";

export const metadata = getSEOTags({
  title: `Portfolio | ${config.appName}`,
  description: "Human-centered Software Engineer with 6 years technical experience + 15 years psychotherapy expertise. Working prototypes demonstrating measurable business impact and technical excellence.",
  canonicalUrlRelative: "/portfolio",
});

// Portfolio project data
const portfolioSections = [
  {
    id: "integrations",
    title: "System Integrations",
    description: "Connecting disparate systems to automate workflows and reduce manual processes. Built for scalability, handling high-volume data synchronization across healthcare platforms.",
    projects: [
      {
        id: 1,
        title: "Oceanheart API Integration",
        description: "Full-stack Next.js platform connecting therapy tools with AI services. Automates session prep workflows that typically take 30 minutes, handles 100+ concurrent API calls with Supabase backend.",
        image: "/images/robosec.webp",
        tech: ["Next.js", "Supabase", "OpenAI API", "Stripe"]
      },
      {
        id: 2,
        title: "Healthcare Data Bridge",
        description: "HIPAA-compliant Node.js system processing EHR data through FHIR standards. Transforms 20+ page medical records into structured summaries, handles patient data for 500+ providers.",
        image: "/images/particles.webp", 
        tech: ["Node.js", "PostgreSQL", "Healthcare APIs", "FHIR"]
      },
      {
        id: 3,
        title: "Saigo Practice Tracker",
        description: "React-based gamification system with real-time WebSocket leaderboards. Tracks 15+ skill metrics per session, stores 10K+ practice attempts in SQLite with sub-100ms response times.",
        image: "/images/saigo_2.webp",
        tech: ["React", "SQLite", "WebSockets", "Recharts"]
      },
      {
        id: 4,
        title: "Therapy Session Analytics",
        description: "TypeScript analytics engine with D3.js visualizations processing session data. Generates trend analysis across 50+ therapeutic indicators, renders interactive charts from 1M+ data points.",
        image: "/images/saigo_3.webp",
        tech: ["TypeScript", "D3.js", "Redis", "GraphQL"]
      },
      {
        id: 5,
        title: "Multi-Platform Sync Engine",
        description: "Microservices architecture using Kafka for real-time data synchronization. Connects 5+ healthcare platforms, processes 10K+ daily transactions with sub-500ms latency across distributed systems.",
        image: "/images/saigo_4.webp",
        tech: ["Node.js", "Kafka", "Docker", "Microservices"]
      }
    ]
  },
  {
    id: "behavioral-psychology",
    title: "Behavioral Psychology Applications",
    description: "AI applications leveraging evidence-based psychological principles for therapeutic contexts. Designed to enhance session effectiveness through personalized, adaptive interactions.",
    projects: [
      {
        id: 4,
        title: "Mindful AI Assistant",
        description: "Python-based AI assistant using OpenAI API with sentiment analysis. Processes 8 emotional states, adapts communication across 12 therapeutic modalities with context-aware response generation.",
        image: "/images/hands.jpeg",
        tech: ["Python", "OpenAI", "Sentiment Analysis", "React"]
      },
      {
        id: 5,
        title: "Behavioral Pattern Analyzer",
        description: "TensorFlow machine learning system analyzing behavioral data patterns. Processes 50+ behavioral indicators per session, identifies recurring patterns across 90-day therapeutic timelines.",
        image: "/images/universe.jpg",
        tech: ["Python", "TensorFlow", "Data Visualization", "PostgreSQL"]
      },
      {
        id: 6,
        title: "Contemplative Practice App",
        description: "React Native cross-platform app with Firebase backend for contemplative practices. Tracks 20+ mindfulness metrics, supports offline audio processing for 100+ guided sessions.",
        image: "/images/spirit_book.png",
        tech: ["React Native", "Firebase", "Audio Processing", "Analytics"]
      },
      {
        id: 7,
        title: "Emotion Recognition System",
        description: "Computer vision system using OpenCV and Transformers for emotion detection. Analyzes facial expressions at 30fps, processes text sentiment with 95% accuracy across 7 emotional categories.",
        image: "/images/rosetta.jpg",
        tech: ["Python", "OpenCV", "Transformers", "FastAPI"]
      },
      {
        id: 8,
        title: "Cognitive Bias Detector",
        description: "scikit-learn NLP system identifying 15+ cognitive distortions in patient communications. Processes therapeutic text with NLTK, flags bias patterns across 500+ session transcripts.",
        image: "/images/greece_profile1.jpeg",
        tech: ["scikit-learn", "NLTK", "Flask", "PostgreSQL"]
      }
    ]
  },
  {
    id: "ai-literacy",
    title: "AI Literacy & Training",
    description: "Educational platforms and assessment tools designed to accelerate AI literacy in healthcare settings. Focused on safe, ethical AI integration with comprehensive training modules.",
    projects: [
      {
        id: 7,
        title: "AI Ethics Simulator",
        description: "Vue.js interactive scenario engine with 25+ ethical decision trees. Simulates complex therapeutic situations, tracks choice patterns across 8 ethical frameworks with branching narratives.",
        image: "/images/phoneagent.jpg",
        tech: ["Vue.js", "Scenario Engine", "Decision Trees", "Analytics"]
      },
      {
        id: 8,
        title: "Prompt Engineering Workshop",
        description: "Next.js educational platform with live OpenAI API integration. Features 50+ hands-on exercises, real-time prompt testing, progress tracking across 12 therapeutic use cases.",
        image: "/images/hbi_transparent.webp",
        tech: ["Next.js", "OpenAI API", "Interactive Tutorials", "Progress Tracking"]
      },
      {
        id: 9,
        title: "AI Integration Readiness Tool",
        description: "React assessment platform evaluating organizational AI readiness across 40+ criteria. Generates detailed reports, risk matrices, and implementation roadmaps for healthcare organizations.",
        image: "/images/phonelock.webp",
        tech: ["React", "Assessment Engine", "Report Generation", "Data Export"]
      },
      {
        id: 10,
        title: "Interactive AI Model Explorer",
        description: "WebGL-powered D3.js visualization system demystifying 15+ AI model types. Features interactive 3D neural network representations, real-time parameter adjustment, and concept mapping.",
        image: "/images/logo_v1.png",
        tech: ["D3.js", "Three.js", "WebGL", "Educational Framework"]
      },
      {
        id: 11,
        title: "AI Safety Training Simulator",
        description: "Unity 3D immersive training environment with custom scenario builder. Simulates 30+ safety scenarios, tracks decision-making patterns, provides certification pathways for clinical staff.",
        image: "/images/hands.jpeg",
        tech: ["Unity", "Scenario Builder", "Progress Tracking", "Certification System"]
      }
    ]
  }
];

export default function PortfolioPage() {
  return (
    <main className="bg-base-100">
      {/* Hero Section */}
      <section className="pt-20 px-4 sm:px-8 max-w-7xl mx-auto text-center mb-16">
        <div className="mb-6">
          <div className="inline-flex items-center px-4 py-2 bg-primary/10 rounded-full border border-primary/20 mb-4">
            <span className="text-primary font-semibold text-sm">Human-centered Software Engineer</span>
          </div>
        </div>
        <h1 className="font-extrabold text-4xl md:text-6xl tracking-tight mb-8 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent animate-gradient">
          <span className="">6 Years</span> Engineering + <span className="">15 Years</span> Psychotherapy
        </h1>
        <div className="max-w-4xl mx-auto">
          <p className="text-lg md:text-xl opacity-90 mx-auto mb-8 leading-relaxed">
            <span className="font-semibold text-primary">Working prototypes</span> that solve real business problems.<br/>
            <span className="font-semibold text-secondary">Measurable ROI</span> through human-centered design.<br/>
            <span className="font-semibold text-accent">Technical excellence</span> proven by 20+ deployed applications.<br/>
          </p>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl mx-auto mb-12">
            <div className="bg-base-200 p-6 rounded-lg">
              <div className="text-primary font-bold text-2xl mb-2">20+</div>
              <div className="text-sm opacity-80">Apps Deployed</div>
            </div>
            <div className="bg-base-200 p-6 rounded-lg">
              <div className="text-secondary font-bold text-2xl mb-2">15+</div>
              <div className="text-sm opacity-80">Years Psychology</div>
            </div>
            <div className="bg-base-200 p-6 rounded-lg">
              <div className="text-accent font-bold text-2xl mb-2">6</div>
              <div className="text-sm opacity-80">Modern tech stacks</div>
            </div>
          </div>
        </div>
      </section>

      {/* Portfolio Sections */}
      <div className="max-w-7xl mx-auto px-4 sm:px-8 space-y-20 pb-20">
        {portfolioSections.map((section, index) => (
          <section key={section.id} className="space-y-8">
            {/* Section Header */}
            <div className="text-center space-y-4">
              <h2 className="font-bold text-3xl md:text-4xl tracking-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                {section.title}
              </h2>
              <p className="text-lg text-base-content/80 max-w-3xl mx-auto leading-relaxed">
                {section.description}
              </p>
            </div>
            
            {/* Carousel */}
            <PortfolioCarousel 
              projects={section.projects} 
              sectionId={section.id}
              isReversed={index % 2 === 1}
            />
          </section>
        ))}
      </div>

      {/* Call-to-Action Section */}
      <section className="bg-gradient-to-r from-neutral to-neutral-focus text-neutral-content py-20 px-4 sm:px-8">
        <div className="max-w-3xl mx-auto text-center p-8 bg-black/20 backdrop-blur-sm rounded-xl">
          <h2 className="font-bold text-3xl md:text-4xl mb-6">
            Ready to <span className="text-primary italic">drive results</span>?
          </h2>
          <p className="mb-8 text-lg md:text-xl leading-relaxed">
            <span className="font-semibold">For hiring teams:</span> See a human-centered engineer who delivers technical excellence with proven business impact.<br/>
            <span className="font-semibold text-secondary">For clients:</span> Get measurable ROI through psychology-informed software that solves real problems.
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <a
              href="https://calendar.app.google/85ZdaqYK5vfNk4aH9"
              target="_blank"
              rel="noopener noreferrer"
              className="btn btn-primary btn-wide btn-lg hover:scale-105 transition-transform"
            >
              Schedule a Call
            </a>
            <a
              href="/about"
              className="btn btn-outline btn-wide btn-lg hover:scale-105 transition-transform"
            >
              Learn More About Me
            </a>
          </div>
        </div>
      </section>
    </main>
  );
}
</file>

<file path="app/synai/components/SynaiHero.tsx">
"use client";

import Link from "next/link";

export default function SynaiHero() {
  return (
    <section className="relative min-h-screen flex items-center justify-center bg-gradient-to-br from-primary to-secondary text-white overflow-hidden">
      {/* Animated background elements */}
      <div className="absolute inset-0 opacity-10">
        {/* Floating particles effect */}
        <div className="absolute top-1/4 left-1/4 w-2 h-2 bg-white rounded-full animate-pulse"></div>
        <div className="absolute top-1/3 right-1/4 w-1 h-1 bg-white rounded-full animate-pulse delay-500"></div>
        <div className="absolute bottom-1/3 left-1/3 w-1.5 h-1.5 bg-white rounded-full animate-pulse delay-1000"></div>
        <div className="absolute top-2/3 right-1/3 w-1 h-1 bg-white rounded-full animate-pulse delay-700"></div>
        <div className="absolute bottom-1/4 right-1/5 w-2 h-2 bg-white rounded-full animate-pulse delay-300"></div>
      </div>

      {/* Floating animation container */}
      <div className="absolute inset-0 synai-float" style={{
        background: `url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='1' fill='white' opacity='0.1'/><circle cx='20' cy='20' r='0.5' fill='white' opacity='0.15'/><circle cx='80' cy='30' r='0.8' fill='white' opacity='0.12'/><circle cx='30' cy='80' r='0.6' fill='white' opacity='0.1'/></svg>")`
      }}>
      </div>

      {/* Hero content */}
      <div className="relative z-10 text-center max-w-4xl mx-auto px-6 md:px-4">
        <h1 className="text-5xl md:text-6xl lg:text-7xl font-bold mb-6 leading-tight">
          Meet Synai
        </h1>
        
        <p className="text-xl md:text-2xl lg:text-3xl font-medium mb-8 opacity-90">
          Your Personal AI Coach, Engineered for You
        </p>
        
        <p className="text-base md:text-xl lg:text-2xl mb-12 opacity-80 max-w-3xl mx-auto leading-relaxed">
          What if you had an AI that truly understood your unique patterns, values, and goals?
          Not generic advice, but deeply personalized guidance built from a clinical assessment of who you are.
        </p>
        
        <Link
          href="/#pricing"
          className="inline-block bg-white text-primary px-8 py-4 rounded-full text-base md:text-lg font-semibold transition-all duration-300 hover:transform hover:-translate-y-1 hover:shadow-2xl hover:shadow-white/20"
        >
          Discover Your Personal AI
        </Link>
      </div>

      {/* Add floating animation keyframes */}
      <style jsx>{`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) rotate(0deg);
          }
          50% {
            transform: translateY(-20px) rotate(2deg);
          }
        }
      `}</style>
    </section>
  );
}
</file>

<file path="app/synai/components/TechnicalDeepDive.tsx">
"use client";

import { useState } from "react";

export default function TechnicalDeepDive() {
  const [isExpanded, setIsExpanded] = useState(false);

  const engineeringTechniques = [
    {
      name: "XML Tagging / Structured Data Input",
      description: "The entire prompt is encased in custom XML tags that structure the prompt into logical, parsable sections for the AI.",
      score: "10/10",
      category: "Architecture"
    },
    {
      name: "Role-Playing / Persona Assignment", 
      description: "Explicitly defines the AI's identity, mission, operational framework (ACT), stance, and interaction style.",
      score: "10/10",
      category: "Identity"
    },
    {
      name: "Goal Setting / Task Definition",
      description: "High-level goals with specific tasks broken down into manageable, actionable steps, reducing ambiguity.",
      score: "10/10", 
      category: "Structure"
    },
    {
      name: "In-Context Learning / Data Priming",
      description: "Embedded structured context that serves as an active, working internal knowledge graph.",
      score: "9/10",
      category: "Learning"
    },
    {
      name: "Schema Definition and Adherence",
      description: "Mandates that internal graph and new information conform to structured data models.",
      score: "9/10",
      category: "Consistency"
    },
    {
      name: "Dynamic Questioning Strategy",
      description: "Provides mechanisms for analyzing internal graph gaps and formulating strategic questions.",
      score: "10/10",
      category: "Intelligence"
    },
    {
      name: "Simulated Function Calling",
      description: "Defines specific user commands with explicit triggers, multi-step actions, and output formats.",
      score: "10/10",
      category: "Interface"
    },
    {
      name: "Guardrails / Focus Maintenance",
      description: "Defines principles and intervention actions to maintain intended flow and purpose.",
      score: "10/10",
      category: "Control"
    }
  ];

  const codeExample = `<SYNAI_PERSONAL_COACH_SYSTEM>
  <IdentityAndMission>
    <Name>SYNAI</Name>
    <Mission>Personal AI Coach based on clinical assessment</Mission>
    <Framework>ACT (Acceptance & Commitment Therapy)</Framework>
  </IdentityAndMission>
  
  <CoreFunctionality>
    <DataInitialization>
      <EmbeddedClientData format="structured_assessment">
        // Client's psychological profile and values
      </EmbeddedClientData>
    </DataInitialization>
    
    <OngoingEnrichment>
      <ConceptExtraction method="continuous" />
      <GraphEvolution strategy="adaptive_learning" />
    </OngoingEnrichment>
  </CoreFunctionality>
  
  <InteractionProtocols>
    <QuestioningStrategy type="unknown_unknowns">
      <Trigger>gap_analysis</Trigger>
      <Method>value_based_inquiry</Method>
    </QuestioningStrategy>
    
    <ResponseGeneration>
      <Personalization level="deep" />
      <Context awareness="session_persistent" />
    </ResponseGeneration>
  </InteractionProtocols>
</SYNAI_PERSONAL_COACH_SYSTEM>`;

  return (
    <div className="mt-16">
      {/* Expand Button */}
      <div className="text-center mb-8">
        <button
          onClick={() => setIsExpanded(!isExpanded)}
          className="inline-flex items-center px-8 py-4 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-2xl transition-all duration-300 hover:shadow-xl hover:-translate-y-1 group"
        >
          <span className="mr-3">
            {isExpanded ? 'Hide' : 'Explore'} Technical Deep-Dive
          </span>
          <div className={`transform transition-transform duration-300 ${isExpanded ? 'rotate-180' : ''}`}>
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </button>
      </div>

      {/* Expandable Content */}
      {isExpanded && (
        <div className="bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 rounded-3xl p-8 lg:p-12 shadow-2xl border border-cyan-500/20 animate-fade-in">
          
          {/* Header */}
          <div className="text-center mb-12">
            <h3 className="text-4xl font-bold text-white mb-4">
              Prompt Engineering Analysis
            </h3>
            <p className="text-xl text-cyan-200 max-w-3xl mx-auto">
              A systematic review of the advanced techniques powering Synai's personalized AI architecture
            </p>
            <div className="mt-6 inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full text-white font-bold text-base md:text-lg">
              <span>Professional Grade Score: 95/100</span>
            </div>
          </div>

          {/* Code Example */}
          <div className="mb-12">
            <h4 className="text-2xl font-bold text-cyan-300 mb-6 flex items-center">
              <div className="w-3 h-3 bg-cyan-400 rounded-full mr-3 animate-pulse"></div>
              System Architecture Example
            </h4>
            <div className="bg-black/50 rounded-xl p-6 border border-cyan-500/30 backdrop-blur-sm">
              <pre className="text-sm lg:text-base text-green-400 font-mono overflow-x-auto leading-relaxed">
                <code>{codeExample}</code>
              </pre>
            </div>
          </div>

          {/* Engineering Techniques Grid */}
          <div className="mb-12">
            <h4 className="text-2xl font-bold text-cyan-300 mb-8 flex items-center">
              <div className="w-3 h-3 bg-purple-400 rounded-full mr-3 animate-pulse"></div>
              Advanced Engineering Techniques
            </h4>
            
            <div className="grid md:grid-cols-2 gap-6">
              {engineeringTechniques.map((technique, index) => (
                <div 
                  key={index}
                  className="bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10"
                >
                  <div className="flex items-start justify-between mb-4">
                    <div className="flex-1">
                      <h5 className="text-base md:text-lg font-bold text-white mb-2">
                        {technique.name}
                      </h5>
                      <span className={`inline-block px-3 py-1 rounded-full text-xs font-semibold ${
                        technique.category === 'Architecture' ? 'bg-blue-500/20 text-blue-300' :
                        technique.category === 'Identity' ? 'bg-purple-500/20 text-purple-300' :
                        technique.category === 'Structure' ? 'bg-green-500/20 text-green-300' :
                        technique.category === 'Learning' ? 'bg-orange-500/20 text-orange-300' :
                        technique.category === 'Consistency' ? 'bg-red-500/20 text-red-300' :
                        technique.category === 'Intelligence' ? 'bg-cyan-500/20 text-cyan-300' :
                        technique.category === 'Interface' ? 'bg-yellow-500/20 text-yellow-300' :
                        'bg-indigo-500/20 text-indigo-300'
                      }`}>
                        {technique.category}
                      </span>
                    </div>
                    <div className="ml-4">
                      <span className="inline-flex items-center px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full text-white text-sm font-bold">
                        {technique.score}
                      </span>
                    </div>
                  </div>
                  <p className="text-gray-300 text-sm leading-relaxed">
                    {technique.description}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Professional Assessment */}
          <div className="bg-gradient-to-r from-indigo-900/50 to-purple-900/50 rounded-xl p-8 border border-indigo-400/20">
            <h4 className="text-2xl font-bold text-indigo-300 mb-6 flex items-center">
              <div className="w-3 h-3 bg-indigo-400 rounded-full mr-3 animate-pulse"></div>
              Professional Assessment
            </h4>
            <div className="grid md:grid-cols-2 gap-8">
              <div>
                <h5 className="text-base md:text-lg font-semibold text-white mb-3">Architecture Excellence</h5>
                <ul className="space-y-2 text-gray-300">
                  <li className="flex items-center">
                    <span className="w-2 h-2 bg-green-400 rounded-full mr-3"></span>
                    Meticulous XML structuring
                  </li>
                  <li className="flex items-center">
                    <span className="w-2 h-2 bg-green-400 rounded-full mr-3"></span>
                    Advanced data handling protocols
                  </li>
                  <li className="flex items-center">
                    <span className="w-2 h-2 bg-green-400 rounded-full mr-3"></span>
                    Sophisticated state management
                  </li>
                </ul>
              </div>
              <div>
                <h5 className="text-base md:text-lg font-semibold text-white mb-3">Professional Indicators</h5>
                <ul className="space-y-2 text-gray-300">
                  <li className="flex items-center">
                    <span className="w-2 h-2 bg-cyan-400 rounded-full mr-3"></span>
                    Expert-level prompt engineering
                  </li>
                  <li className="flex items-center">
                    <span className="w-2 h-2 bg-cyan-400 rounded-full mr-3"></span>
                    Therapeutic framework integration
                  </li>
                  <li className="flex items-center">
                    <span className="w-2 h-2 bg-cyan-400 rounded-full mr-3"></span>
                    Production-grade system design
                  </li>
                </ul>
              </div>
            </div>
            
            <div className="mt-6 p-6 bg-black/30 rounded-lg border border-indigo-400/20">
              <p className="text-indigo-200 text-lg leading-relaxed italic">
                "This demonstrates a very high level of prompt engineering skill. The attention to detail, 
                the foresight in defining behaviors and data management, and the overall architecture point 
                to a professional or highly experienced individual. This is a well-architected system designed 
                for sophisticated AI models."
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
</file>

<file path="app/team/page.tsx">
"use client"; // This page requires client-side interactivity

import { useState, useEffect, useRef, useCallback, useMemo, MouseEvent } from 'react';
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import { FaArrowLeft } from "react-icons/fa";
import RoleSection from '../../components/team/RoleSection';
// Import data and types from the new file
import { RoleDetail, Section, leadershipStructure, allRoles, rolesById } from '@/lib/teamData';

// Define the structure for stored positions
interface RolePositionInfo {
  topCenter: { x: number; y: number };
  bottomCenter: { x: number; y: number };
}

const TeamPage = () => {
  // State for sidebar (same as before)
  const [selectedRole, setSelectedRole] = useState<RoleDetail | null>(null);
  const [isSidebarOpen, setIsSidebarOpen] = useState<boolean>(false);
  const [rolePositions, setRolePositions] = useState<Record<string, RolePositionInfo>>({});
  const roleRefs = useRef<Record<string, HTMLDivElement | null>>({});
  const containerRef = useRef<HTMLDivElement>(null); // Ref for the main container
  const [hoveredRoleId, setHoveredRoleId] = useState<string | null>(null);

  // Function to update role positions
  const updatePositions = useCallback(() => {
    if (!containerRef.current) return;
    const containerRect = containerRef.current.getBoundingClientRect();
    const newPositions: Record<string, RolePositionInfo> = {};
    allRoles.forEach(role => {
      const element = roleRefs.current[role.id];
      if (element) {
        const rect = element.getBoundingClientRect();
        const x = rect.left - containerRect.left; // X relative to container
        const y = rect.top - containerRect.top; // Y relative to container
        newPositions[role.id] = {
          // Top-center point
          topCenter: { x: x + rect.width / 2, y: y },
          // Bottom-center point
          bottomCenter: { x: x + rect.width / 2, y: y + rect.height },
        };
      }
    });
    setRolePositions(prevPositions => {
      if (JSON.stringify(prevPositions) === JSON.stringify(newPositions)) {
        return prevPositions;
      }
      return newPositions;
    });
  }, []);

  // Calculate positions on mount and window resize
  useEffect(() => {
    // Initial calculation might need a slight delay if grid layout takes time
    const timeoutId = setTimeout(updatePositions, 50);
    window.addEventListener('resize', updatePositions);

    // Use ResizeObserver for the container for more robust updates
    let resizeObserver: ResizeObserver;
    const containerElement = containerRef.current;
    if (containerElement) {
      resizeObserver = new ResizeObserver(() => {
        // Debounce or throttle updates if needed
        updatePositions();
      });
      resizeObserver.observe(containerElement);
    }

    return () => {
      clearTimeout(timeoutId);
      window.removeEventListener('resize', updatePositions);
      if (resizeObserver && containerElement) {
        resizeObserver.unobserve(containerElement);
      }
    };
  }, [updatePositions]);

  // Handlers (same as before)
  const handleSelectRole = (role: RoleDetail) => {
    console.log("handleSelectRole called:", role.id);
    setSelectedRole(role);
    setIsSidebarOpen(true);
  };

  const handleCloseSidebar = () => {
    setIsSidebarOpen(false);
    setTimeout(() => setSelectedRole(null), 300);
  };

  // --- NEW: Container Hover Handlers ---
  const handleContainerMouseOver = (event: MouseEvent<HTMLDivElement>) => {
    const target = event.target as HTMLElement;
    // Find the closest parent (or self) with the data-role-id attribute
    const cardElement = target.closest<HTMLDivElement>('[data-role-id]');
    const roleId = cardElement?.dataset.roleId || null;

    // Only update state if the hovered role ID actually changes
    if (roleId !== hoveredRoleId) {
      // console.log("Container Mouse Over - Role ID:", roleId); // Keep for debugging if needed
      setHoveredRoleId(roleId);
    }
  };

  const handleContainerMouseLeave = () => {
    // console.log("Container Mouse Leave"); // Keep for debugging if needed
    setHoveredRoleId(null); // Clear hover when leaving the container
  };

  // Connection Logic (keep as is, depends on hoveredRoleId and rolePositions)
  const connections = useMemo(() => {
    if (!hoveredRoleId || !rolePositions[hoveredRoleId]) {
      return [];
    }

    // Use bottom-center of the hovered (manager) role
    const managerPos = rolePositions[hoveredRoleId]?.bottomCenter;
    if (!managerPos) return []; // Ensure manager position exists

    const reportingRoles = allRoles.filter(role => role.reportsTo?.includes(hoveredRoleId));

    return reportingRoles.map(report => {
      // Use top-center of the reporting role
      const reportPos = rolePositions[report.id]?.topCenter;
      if (!reportPos) return null; // Skip if report position is unknown

      return {
        key: `${hoveredRoleId}-to-${report.id}`,
        x1: managerPos.x,
        y1: managerPos.y,
        x2: reportPos.x,
        y2: reportPos.y,
      };
    }).filter(line => line !== null);
  }, [hoveredRoleId, rolePositions]);

  // --- Corrected Sidebar Content Generator ---
  const getSidebarContent = (role: RoleDetail | null): React.ReactNode => {
    if (!role) {
      return <p className="text-center italic text-base-content/60">Select a role to see details.</p>;
    }

    // Find Connections
    const directReports = allRoles.filter(r => r.reportsTo?.includes(role.id));
    const managers = (role.reportsTo || [])
      .map(managerId => rolesById.get(managerId))
      .filter((manager): manager is RoleDetail => manager !== undefined);

    // Determine title
    let sidebarTitle = role.title || role.advisorTitle || 'Role Details';
    if (role.isPureAdvisor && role.advisorTitle) sidebarTitle = role.advisorTitle;
    if (role.isAlliance && role.title) sidebarTitle = role.title;

    return (
      // Use a React Fragment shorthand
      <>
        {/* Top Section */}
        <h2 className="text-2xl font-bold mb-2 text-primary">{sidebarTitle}</h2>
        {role.title && role.title !== sidebarTitle && (
          <p className="text-lg font-semibold text-base-content/80 mb-4">{role.title}</p>
        )}
        {role.advisorTitle && role.advisorTitle !== sidebarTitle && !role.isPureAdvisor && (
          <p className="text-sm font-medium text-accent mb-1">Perspective: {role.advisorTitle}</p>
        )}
        <p className="text-base-content/90 mb-4 whitespace-pre-line">{role.description}</p>
        {role.advisorDescription && (
          <div className="mt-4 pt-4 border-t border-base-content/20">
            <h3 className="text-sm font-semibold uppercase text-base-content/60 mb-2">Advisor Focus</h3>
            <p className="text-sm text-base-content/80 whitespace-pre-line">{role.advisorDescription}</p>
          </div>
        )}

        {/* Connections Section */}
        <div className="mt-6 pt-4 border-t border-base-content/20">
          <h3 className="text-sm font-semibold uppercase text-base-content/60 mb-3">Connections</h3>
          {/* Reports To (Manager) */}
          {managers.length > 0 && (
            <div className="mb-3">
              <h4 className="text-xs font-semibold text-base-content/70 mb-1">Reports To:</h4>
              <ul className="list-disc list-inside space-y-1">
                {managers.map(manager => (
                  <li key={manager.id} className="text-sm text-base-content/90">
                    {manager.title || manager.advisorTitle || manager.id}
                  </li>
                ))}
              </ul>
            </div>
          )}
          {/* Direct Reports */}
          {directReports.length > 0 && (
            <div className="mb-3">
              <h4 className="text-xs font-semibold text-base-content/70 mb-1">Direct Reports:</h4>
              <ul className="list-disc list-inside space-y-1">
                {directReports.map(report => (
                  <li key={report.id} className="text-sm text-base-content/90">
                    {report.title || report.advisorTitle || report.id}
                  </li>
                ))}
              </ul>
            </div>
          )}
          {/* No connections message */}
          {managers.length === 0 && directReports.length === 0 && !role.isPureAdvisor && !role.isAlliance && (
            <p className="text-sm italic text-base-content/50">No direct connections defined.</p>
          )}
          {(role.isPureAdvisor || role.isAlliance) && (
            <p className="text-sm italic text-base-content/50">N/A for Advisory/Alliance roles.</p>
          )}
        </div>

        {/* --- Apply Now Button (Conditional) --- */}
        {role.memberName?.toLowerCase() === "position available" && (
          <div className="mt-8 mb-4 pt-4 border-t border-base-content/20 text-center">
            <a
              href={`mailto:kai@oceanheart.ai?subject=${encodeURIComponent(`Job Application: ${sidebarTitle}`)}`}
              className="btn btn-primary"
            >
              Apply Now
            </a>
            <p className="text-xs text-base-content/60 mt-4">Interested in this role? Let us know!</p>
          </div>
        )}
      </> // End React Fragment
    );
  }; // End getSidebarContent function

  return (
    <>
      <Header />
      <main
        ref={containerRef}
        className="container mx-auto px-4 py-12 relative overflow-x-hidden"
        onMouseOver={handleContainerMouseOver}
        onMouseLeave={handleContainerMouseLeave}
      >
        {/* Header text (same as before) */}
        <h1 className="text-4xl font-bold mb-4 text-center"><span className="text-secondary">Meritocracy</span> &gt; <span className="text-primary">Hierarchy</span>: Our Company Structure</h1>
        <p className="text-md text-center text-base-content/80 max-w-3xl mx-auto mb-12">
          Our structure reflects a blend of core leadership, specialized expertise, valued multi-disciplinary advisors, designed from the start to serve by far the most important layer: the "<span className="text-secondary">OceanHeart Wellbeing Alliance</span>".
        </p>
        <p className="text-md text-center text-base-content/80 max-w-3xl mx-auto mb-12">

        </p>

        {/* Sections Display - Pass down roleRefs */}
        <div className="space-y-12">
          {leadershipStructure.map((section) => (
            <RoleSection
              key={section.id}
              section={section}
              onSelectRole={handleSelectRole}
              roleRefs={roleRefs}
              hoveredRoleId={hoveredRoleId}
            />
          ))}
        </div>

        {/* Role Details Sidebar (same as before) */}
        <div
          className={`fixed top-0 right-0 h-full w-80 md:w-96 bg-base-300/95 backdrop-blur-sm shadow-lg p-6 transition-transform duration-300 ease-in-out z-40 transform ${isSidebarOpen ? 'translate-x-0' : 'translate-x-full'}`}
        >
          <button
            onClick={handleCloseSidebar}
            className="btn btn-sm btn-ghost absolute top-4 left-4"
            aria-label="Close details"
          >
            <FaArrowLeft className="mr-1" /> Back
          </button>
          <div className="mt-12 overflow-y-auto h-[calc(100%-4rem)]">
            {getSidebarContent(selectedRole)}
          </div>
        </div>

        {/* Overlay (same as before) */}
        {isSidebarOpen && (
          <div
            className="fixed inset-0 bg-black/20 z-30"
            onClick={handleCloseSidebar}
            aria-hidden="true"
          />
        )}

      </main>
      <Footer />
    </>
  );
};

export default TeamPage;
</file>

<file path="app/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body {
  scroll-behavior: smooth !important;
}

/* It makes the HTML progress bar filling smooth when value change. */
progress::-webkit-progress-value {
  transition: 0.6s width ease-out;
}

@layer base {
  .btn-gradient {
    @apply !bg-gradient !bg-[length:300%_300%] hover:saturate-[1.2] shadow duration-100 !border-0 !border-transparent !bg-transparent animate-shimmer !text-white;
  }

  .btn {
    @apply !capitalize;
  }
}

/* Terminal styling */
@keyframes blink {

  0%,
  49% {
    opacity: 1;
  }

  50%,
  100% {
    opacity: 0;
  }
}

.terminal-cursor {
  animation: blink 1s infinite;
}

.terminal-line {
  line-height: 1.5;
  margin-bottom: 0.5rem;
}

.terminal-container {
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(50, 50, 50, 0.5);
}

.terminal-body {
  background-color: rgba(0, 0, 0, 0.9);
  background-image: radial-gradient(rgba(0, 150, 0, 0.05) 2px,
      transparent 0);
  background-size: 20px 20px;
  background-position: -10px -10px;
  position: relative;
}

.terminal-body::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(rgba(0, 0, 0, 0) 50%,
      rgba(0, 0, 0, 0.25) 50%);
  background-size: 100% 4px;
  pointer-events: none;
  z-index: 1;
}

.terminal-header {
  border-bottom: 1px solid rgba(50, 50, 50, 0.8);
}

/* Input styling for HDI page */
.input-container input {
  background-color: rgba(0, 0, 0, 0.9);
  background-image:
    linear-gradient(to right, rgba(0, 150, 0, 0.05), transparent),
    radial-gradient(rgba(0, 150, 0, 0.03) 1px, transparent 0);
  background-size: 100% 100%, 10px 10px;
  position: relative;
  transition: all 0.3s ease;
}

.input-container input:focus {
  box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
}

/* Pulse dot animation */
.pulse-dot {
  width: 8px;
  height: 8px;
  background-color: #00ff00;
  border-radius: 50%;
  position: relative;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    transform: scale(0.8);
    opacity: 0.5;
    box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7);
  }

  70% {
    transform: scale(1);
    opacity: 1;
    box-shadow: 0 0 0 6px rgba(0, 255, 0, 0);
  }

  100% {
    transform: scale(0.8);
    opacity: 0.5;
    box-shadow: 0 0 0 0 rgba(0, 255, 0, 0);
  }
}

/* HDI Nav Link Glow Effect */
.hdi-nav-link {
  position: relative;
  z-index: 1;
  transition: all 0.3s ease;
}

.glow-effect {
  position: relative;
}

.glow-effect::before {
  content: '';
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  border-radius: 8px;
  background: white;
  z-index: -1;
  opacity: 0;
  filter: blur(8px);
  box-shadow:
    0 0 10px rgba(255, 255, 255, 0.8),
    0 0 20px rgba(255, 255, 255, 0.6),
    0 0 30px rgba(255, 255, 255, 0.4),
    0 0 40px rgba(255, 255, 255, 0.2);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    opacity: 0.4;
    filter: blur(8px);
  }

  50% {
    opacity: 0.8;
    filter: blur(12px);
  }

  100% {
    opacity: 0.4;
    filter: blur(8px);
  }
}

/* Make the text itself also glow slightly */
.hdi-nav-link {
  text-shadow:
    0 0 5px rgba(255, 255, 255, 0.5),
    0 0 10px rgba(255, 255, 255, 0.3);
  font-weight: bold;
}

/* Synai Nav Link Glow Effect */
.synai-nav-link {
  position: relative;
  z-index: 1;
  color: white !important;
  font-weight: bold;
  text-shadow: 
    0 0 5px rgba(255, 255, 255, 0.8),
    0 0 10px rgba(255, 255, 255, 0.6),
    0 0 15px rgba(255, 255, 255, 0.4);
  transition: all 0.3s ease;
}

.synai-nav-link::before {
  content: '';
  position: absolute;
  top: -4px;
  left: -4px;
  right: -4px;
  bottom: -4px;
  border-radius: 6px;
  background: white;
  z-index: -1;
  opacity: 0;
  filter: blur(6px);
  animation: synai-pulse 3s infinite;
}

@keyframes synai-pulse {
  0% {
    opacity: 0.3;
    filter: blur(6px);
  }
  50% {
    opacity: 0.7;
    filter: blur(10px);
  }
  100% {
    opacity: 0.3;
    filter: blur(6px);
  }
}

/* Synai Page Specific Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(2deg);
  }
}

.synai-fade-in {
  opacity: 0;
  animation: fadeInUp 0.8s ease-out forwards;
}

.synai-fade-in-delay-1 {
  animation-delay: 0.2s;
}

.synai-fade-in-delay-2 {
  animation-delay: 0.4s;
}

.synai-fade-in-delay-3 {
  animation-delay: 0.6s;
}

.synai-float {
  animation: float 20s ease-in-out infinite;
}

.animate-fade-in {
  animation: fadeIn 0.6s ease-out forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</file>

<file path="app/layout.tsx">
import { ReactNode } from "react";
import { Inter } from "next/font/google";
import { GoogleAnalytics } from "@next/third-parties/google";
import { SpeedInsights } from "@vercel/speed-insights/next";
import { Viewport } from "next";
import { getSEOTags } from "@/libs/seo";
import ClientLayout from "@/components/LayoutClient";
import config from "@/config";
import Script from "next/script";
import "./globals.css";

const font = Inter({ subsets: ["latin"] });

export const viewport: Viewport = {
	// Will use the primary color of your theme to show a nice theme color in the URL bar of supported browsers
	themeColor: config.colors.main,
	width: "device-width",
	initialScale: 1,
};

// This adds default SEO tags to all pages in our app.
// You can override them in each page passing params to getSOTags() function.
export const metadata = getSEOTags();

export default function RootLayout({ children }: { children: ReactNode }) {
	const theme = config.colors.theme;
	return (
		<html
			lang="en"
			data-theme={theme}
			className={font.className}
		>
			<body>
				<Script src="/scripts/anime.min.js" strategy="beforeInteractive" />
				{/* ClientLayout contains all the client wrappers (Crisp chat support, toast messages, tooltips, etc.) */}
				<ClientLayout>
					{children}
				</ClientLayout>
				{process.env.NODE_ENV === "production" && <GoogleAnalytics gaId={process.env.NEXT_PUBLIC_GA_ID} />}
				<SpeedInsights />
			</body>
		</html>
	);
}
</file>

<file path="components/team/RoleCard.tsx">
import { RoleDetail } from '@/lib/teamData'; // Use the correct path to the data file
import React from 'react'; // Import React for forwardRef
import Image from 'next/image'; // Import Image component
// --- Import Icons ---
import { FaXTwitter, FaInstagram, FaYoutube, FaLink, FaUser, FaBriefcase, FaLinkedin } from "react-icons/fa6";

interface RoleCardProps {
  role: RoleDetail;
  onSelectRole: (role: RoleDetail) => void;
  isDimmed?: boolean;
  isHighlighted?: boolean;
  isAvailable?: boolean;
  // No need to accept ref as prop directly if using forwardRef
}

// Define the placeholder URL outside the component if it's constant
const placeholderAvatarUrl = "/api/placeholder/80/80";

// --- Helper Function to Clean URL ---
const cleanUrlForDisplay = (urlString?: string): string => {
  if (!urlString) return '';
  try {
    const url = new URL(urlString);
    // Combine hostname and pathname, remove trailing slash if it exists
    const displayUrl = (url.hostname + url.pathname).replace(/\/$/, '');
    return displayUrl;
  } catch (e) {
    // Handle invalid URLs gracefully, maybe return the original string or part of it
    console.error("Invalid URL for display:", urlString);
    return urlString.replace(/^https?:\/\//, '').split('?')[0].replace(/\/$/, ''); // Basic fallback
  }
};
// --- End Helper Function ---

// Use forwardRef to allow passing ref to the underlying div
const RoleCard = React.forwardRef<HTMLDivElement, RoleCardProps>(
  ({ role, onSelectRole, isDimmed, isHighlighted, isAvailable }, ref) => {
    // --- Determine if position is available ---
    const isAvailableRole = role.memberName?.toLowerCase() === "position available" && !role.avatarUrl;

    // --- Updated Title Logic ---
    let displayTitle = role.title || role.advisorTitle || 'Role'; // Default fallback
    // Handle pure advisor case (overrides previous logic if applicable)
    if (role.isPureAdvisor && role.advisorTitle) displayTitle = role.advisorTitle;
    // Handle alliance case (overrides previous logic if applicable)
    if (role.isAlliance && role.title) displayTitle = role.title;
    // --- End Updated Title Logic ---

    // Apply conditional styling based on props
    const cardClasses = `
        card ${isAvailable ? 'bg-base-200' : 'bg-base-100'} shadow-md border border-base-300/50
        transition-all duration-300 cursor-pointer flex flex-col
        ${isAvailable ? 'p-3' : 'p-5 h-full'} /* Adjust padding and remove h-full if available */
        ${isHighlighted && !isAvailable ? 'transform -translate-y-1 scale-[1.02] shadow-xl border-primary ring-2 ring-primary ring-offset-2 ring-offset-base-100' : (!isAvailable ? 'hover:shadow-lg hover:-translate-y-1' : '')} /* Adjust hover/highlight effects */
        ${isDimmed ? 'opacity-40' : 'opacity-100'} /* Simplified opacity */
    `;

    // --- Check if we have a real avatar ---
    const hasRealAvatar = role.avatarUrl && role.avatarUrl !== placeholderAvatarUrl && !role.avatarUrl.startsWith('/api/placeholder');

    return (
      <div
        ref={ref}
        className={cardClasses}
        onClick={() => onSelectRole(role)}
        data-role-id={role.id}
      >
        {/* Use card-body only for non-available cards for padding consistency */}
        <div className={`${isAvailable ? 'flex-grow flex flex-col' : 'card-body p-0 flex-grow flex flex-col'}`}>
          {/* Top content */}
          <div className="flex-grow pointer-events-none">
            <h3 className={`card-title ${isAvailable ? 'text-base' : 'text-lg'} font-bold pb-2 ${isHighlighted && !isAvailable ? 'text-primary-focus' : 'text-primary'}`}>
              {/* Display Acronym first if it exists */}
              {role.acronym && !role.isPureAdvisor && !role.isAlliance && (
                <span className="text-primary/80 font-medium mr-1">{role.acronym}:</span>
              )}
              {/* Always display the main title */}
              {displayTitle}
            </h3>
            {/* Advisor Perspective (only show if it's *not* the main display title AND not available) */}
            {role.title && role.advisorTitle && role.advisorTitle !== displayTitle && !role.isPureAdvisor && !role.isAlliance && !isAvailable && (
              <p className="text-xs font-medium text-accent -mt-1 mb-2">
                Perspective: {role.advisorTitle}
              </p>
            )}

            {/* Description (Only show if NOT available) */}
            {!isAvailable && (
              <p className="text-base-content/90 text-sm mt-2">
                {role.description}
              </p>
            )}

            {/* Advisor Description Snippet (Only show if NOT available and conditions met) */}
            {role.advisorDescription && role.advisorDescription !== role.description && !role.isPureAdvisor && !role.isAlliance && !isAvailable && (
              <div className="mt-3 pt-3 border-t border-base-content/10">
                <p className="text-xs text-base-content/70 italic">
                  <span className="font-semibold text-accent/80">Advisor Focus:</span> {role.advisorDescription}
                </p>
              </div>
            )}
          </div>

          {/* --- Background Section (Only show if NOT available) --- */}
          {role.background && !isAvailable && (
            <div className="mt-3 pt-3 border-t border-base-content/10 pointer-events-none">
              <h4 className="text-xs font-semibold uppercase text-base-content/60 mb-1">Background</h4>
              <p className="text-sm text-base-content/80 italic">
                {role.background}
              </p>
            </div>
          )}
          {/* --- End Background Section --- */}

          {/* --- Member Info Section (Only show if NOT available) --- */}
          {!isAvailable && (role.memberName || !role.avatarUrl) && (
            // Apply flex-col when showing large placeholder OR real avatar
            <div className={`mt-4 pt-4 border-t border-base-content/10 ${(hasRealAvatar || (role.memberName?.toLowerCase() === "position available" && !hasRealAvatar)) ? 'flex flex-col items-center text-center' : 'flex items-center gap-3'}`}>
              {/* Avatar Area */}
              <div className={`avatar placeholder pointer-events-none ${!hasRealAvatar && role.memberName?.toLowerCase() !== "position available" ? '' : 'flex flex-col items-center text-center w-full'}`}>
                <div className={`${(hasRealAvatar || role.memberName?.toLowerCase() === "position available") ? 'w-52 h-52' : 'w-10 h-10 bg-neutral text-neutral-content'} mb-3 rounded-full ring ring-primary ring-offset-base-100 ring-offset-1 flex items-center justify-center`}>
                  {hasRealAvatar && role.avatarUrl ? (
                    <Image
                      src={role.avatarUrl}
                      alt={role.memberName || 'Avatar'}
                      width={hasRealAvatar ? 208 : 40} // Adjusted size based on hasRealAvatar only
                      height={hasRealAvatar ? 208 : 40}
                      className="rounded-full object-cover"
                      unoptimized={role.avatarUrl?.startsWith('/api/placeholder')}
                    />
                  ) : (
                    <FaUser className="w-5 h-5" />
                  )}
                </div>
              </div>

              {/* Name / Position Available Text Area (Simplified: Only shows name now) */}
              {role.memberName && (
                <span className={`text-sm font-semibold text-base-content/90 ${hasRealAvatar ? 'mt-2 block' : ''} pointer-events-none`}>
                  {role.memberName}
                </span>
              )}

              {/* --- Socials and Website (Only if real avatar) --- */}
              {hasRealAvatar && (
                <div className="mt-3 space-y-2 w-full pointer-events-auto"> {/* Enable pointer events here */}
                  {/* Social Icons */}
                  <div className="flex justify-center items-center space-x-3">
                    {role.socialXUrl && (
                      <a href={role.socialXUrl} target="_blank" rel="noopener noreferrer" className="text-base-content/70 hover:text-primary transition-colors" aria-label={`${role.memberName} on X`}>
                        <FaXTwitter className="w-4 h-4" />
                      </a>
                    )}
                    {role.socialLinkedInUrl && (
                      <a href={role.socialLinkedInUrl} target="_blank" rel="noopener noreferrer" className="text-base-content/70 hover:text-primary transition-colors" aria-label={`${role.memberName} on LinkedIn`}>
                        <FaLinkedin className="w-4 h-4" />
                      </a>
                    )}
                    {role.socialInstagramUrl && (
                      <a href={role.socialInstagramUrl} target="_blank" rel="noopener noreferrer" className="text-base-content/70 hover:text-primary transition-colors" aria-label={`${role.memberName} on Instagram`}>
                        <FaInstagram className="w-4 h-4" />
                      </a>
                    )}
                    {role.socialYouTubeUrl && (
                      <a href={role.socialYouTubeUrl} target="_blank" rel="noopener noreferrer" className="text-base-content/70 hover:text-primary transition-colors" aria-label={`${role.memberName} on YouTube`}>
                        <FaYoutube className="w-4 h-4" />
                      </a>
                    )}
                  </div>
                  {/* Website Link */}
                  {role.websiteUrl && (
                    <a
                      href={role.websiteUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="flex items-center justify-center gap-1 text-xs text-info hover:text-info-focus hover:underline transition-colors truncate px-2"
                      aria-label={`${role.memberName} Website`}
                    >
                      <FaLink className="w-3 h-3 flex-shrink-0" />
                      <span className="truncate">
                        {cleanUrlForDisplay(role.websiteUrl)}
                      </span>
                    </a>
                  )}
                </div>
              )}
              {/* --- End Socials and Website --- */}
            </div>
          )}
        </div>
      </div>
    );
  });

RoleCard.displayName = "RoleCard"; // Good practice for forwardRef

export default RoleCard;
</file>

<file path="components/team/RoleSection.tsx">
import { Section, RoleDetail, rolesById } from '@/lib/teamData'; // Import rolesById from the new data file
import RoleCard from './RoleCard';
import { MutableRefObject, useMemo } from 'react'; // Import useMemo

interface RoleSectionProps {
  section: Section;
  onSelectRole: (role: RoleDetail) => void;
  roleRefs: MutableRefObject<Record<string, HTMLDivElement | null>>; // Accept refs
  hoveredRoleId: string | null;
}

const RoleSection: React.FC<RoleSectionProps> = ({
  section,
  onSelectRole,
  roleRefs,
  hoveredRoleId
}) => {
  // --- Split roles --- 
  const { filledRoles, availableRoles } = useMemo(() => {
    const filled: RoleDetail[] = [];
    const available: RoleDetail[] = [];
    section.roles.forEach(role => {
      if (role.memberName?.toLowerCase() !== "position available") {
        filled.push(role);
      } else {
        available.push(role);
      }
    });
    return { filledRoles: filled, availableRoles: available };
  }, [section.roles]);

  // Simple background mapping (can be expanded or moved to config)
  const bgClasses: { [key: string]: string } = {
    leadership: 'bg-primary/5 border-primary',
    operations: 'bg-secondary/5 border-secondary',
    specialized: 'bg-accent/5 border-accent',
    advisory: 'bg-neutral/5 border-neutral-content',
    alliance: 'bg-info/5 border-info',
  };
  const sectionBg = bgClasses[section.id] || 'bg-base-200 border-base-300';

  return (
    <section className={`rounded-xl shadow-sm overflow-hidden border-l-4 ${sectionBg} `}>
      <div className="p-6">
        <h2 className="text-2xl md:text-3xl font-bold text-base-content mb-2 border-b border-base-content/10 pb-2">
          {section.level}
        </h2>
        {section.description && (
          <p className="italic text-base-content/80 mb-6 max-w-prose">{section.description}</p>
        )}
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
          {/* Render Filled Roles */}
          {filledRoles.map((role) => {
            // --- Logic moved here, using parent's hoveredRoleId ---
            const isHoveredCard = hoveredRoleId === role.id;
            const isReportingToHovered = role.reportsTo?.includes(hoveredRoleId || '') ?? false;
            const hoveredRole = hoveredRoleId ? rolesById.get(hoveredRoleId) : null;
            const isManagerOfHovered = hoveredRole?.reportsTo?.includes(role.id) ?? false; // Reinstate manager check

            // Highlight if it's the hovered card, or it reports to the hovered card,
            // or if it's the direct manager of the hovered card.
            const isHighlighted = hoveredRoleId !== null && (isHoveredCard || isReportingToHovered || isManagerOfHovered);

            // Dim if some card is hovered, but this card is not highlighted
            const isDimmed = hoveredRoleId !== null && !isHighlighted;
            // --- End Logic ---

            return (
              <RoleCard
                key={role.id}
                role={role}
                onSelectRole={onSelectRole}
                ref={(el) => { roleRefs.current[role.id] = el; }}
                isDimmed={isDimmed}
                isHighlighted={isHighlighted}
              // isAvailable is implicitly false here for filled roles
              />
            );
          })}
        </div>

        {/* --- Available Positions Section --- */}
        {availableRoles.length > 0 && (
          <div className="mt-8 pt-6 border-t border-base-content/20">
            <h3 className="text-xl font-semibold text-base-content/80 mb-4">Available Positions</h3>
            {/* Responsive layout: flex-col on small, flex-row wrap on medium+ */}
            <div className="flex flex-col md:flex-row md:flex-wrap gap-4">
              {availableRoles.map((role) => (
                <div key={role.id} className="w-full md:w-auto"> {/* Wrapper for consistent width/basis */}
                  <RoleCard
                    role={role}
                    onSelectRole={onSelectRole} // Still needed for potential future interactions?
                    ref={(el) => { roleRefs.current[role.id] = el; }} // Keep ref for potential layout calculations
                    isAvailable={true} // Pass the available variant flag
                  />
                </div>
              ))}
            </div>
          </div>
        )}

      </div>
    </section>
  );
};

export default RoleSection;
</file>

<file path="components/CTA.tsx">
import Image from "next/image";
import config from "@/config"; // Keep config import if needed for links etc.
import Link from "next/link"; // Added Link import

const CTA = () => {
  return (
    <section className="relative hero overflow-hidden min-h-screen">
      {/* Background Image */}
      <Image
        src="/images/universe.jpg"
        alt="Cosmic background representing the vast potential of conscious AI integration"
        className="object-cover w-full"
        fill
      />
      <div className="relative hero-overlay bg-neutral bg-opacity-70"></div>
      <div className="relative hero-content text-center text-neutral-content p-8">
        <div className="flex flex-col items-center max-w-xl p-8 md:p-0">
          {/* Headline */}
          <h2 className="font-bold text-3xl md:text-5xl tracking-tight mb-8 md:mb-12">
            Ready to Integrate AI <span className="text-blue-400">Consciously</span>?
          </h2>
          {/* Subheading */}
          <p className="text-lg opacity-90 mb-12 md:mb-16">
            Move from AI overwhelm to amplified human potential. Book your discovery call with Kai.
          </p>

          {/* Primary CTA Button */}
          <a href="https://calendar.app.google/85ZdaqYK5vfNk4aH9" target="_blank" rel="noopener noreferrer" className="btn btn-primary btn-wide">
            Book Your Free Discovery Call
          </a>
          <Link href="/#pricing" className="link link-hover text-blue-200 mt-4">
            View All Offerings
          </Link>
        </div>
      </div>
    </section>
  );
};

export default CTA;
</file>

<file path="components/FAQ.tsx">
"use client";

import { useRef, useState } from "react";
import type { JSX } from "react";
import config from "@/config"; // Import config to use supportEmail

// <FAQ> component is a list of <Item> component
interface FAQItemProps {
  question: string;
  answer: JSX.Element;
}

// New Q&A content for "The Art of Personal AI"
const faqList: FAQItemProps[] = [
  {
    question: "What is 'The Art of Personal AI'?",
    answer: <div className="space-y-2 leading-relaxed">It's Kai's unique 3-layer framework (Story/Spirit/Science, Prompt/Context/Model, IQ/EQ/AI) for integrating AI consciously, amplifying your human intelligence and sensitivity.</div>,
  },
  {
    question: "Who is this AI coaching for?",
    answer: <div className="space-y-2 leading-relaxed">Smart professionals, therapists, coaches, and creatives feeling overwhelmed by AI, who seek to understand and use it meaningfully without losing their human core.</div>,
  },
  {
    question: "How is this different from other AI courses?",
    answer: (<div className="space-y-2 leading-relaxed">We focus on <em>your</em> integration of AI, blending deep human understanding (from psychotherapy & contemplative practice) with practical tech know-how, rather than just listing tools.</div>),
  },
  {
    question: "What if I'm not technical?",
    answer: (<div className="space-y-2 leading-relaxed">Perfect. This coaching is designed to demystify AI. Kai translates complex concepts into your language, focusing on principles over fleeting tech trends.</div>),
  },
  {
    question: "How do I get started?",
    answer: (
      <div className="space-y-2 leading-relaxed">
        Book a free, no-obligation 20-minute Clarity Call with Kai to discuss your needs and see if this is the right fit for you. <a href="https://calendar.app.google/85ZdaqYK5vfNk4aH9" target="_blank" rel="noopener noreferrer" className="text-primary underline">Click here to book a call</a>.
      </div>
    ),
  },
];

// FaqItem component remains the same structurally
const FaqItem = ({
  item,
}: {
  item: FAQItemProps;
}) => {
  const accordion = useRef<HTMLDivElement>(null);
  const [isOpen, setIsOpen] = useState(false);

  return (
    <li>
      <button
        className="relative flex gap-2 items-center w-full py-5 text-base font-semibold text-left border-t border-base-content/10"
        onClick={(e) => {
          e.preventDefault();
          setIsOpen(!isOpen);
        }}
        aria-expanded={isOpen}
      >
        <span className="flex-1 text-base-content">{item.question}</span>
        <svg
          className={`flex-shrink-0 w-4 h-4 ml-auto fill-current transition duration-200 ease-out ${isOpen ? "rotate-180" : ""
            }`}
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="#9ca3af"
        >
          <path d="M11.9997 13.1714L16.9495 8.22168L18.3637 9.63589L11.9997 15.9999L5.63574 9.63589L7.04996 8.22168L11.9997 13.1714Z"></path>
        </svg>
      </button>

      <div
        ref={accordion}
        className="transition-all duration-300 ease-in-out opacity-80 overflow-hidden"
        style={
          isOpen
            ? { maxHeight: accordion.current?.scrollHeight, opacity: 1 }
            : { maxHeight: 0, opacity: 0 }
        }
      >
        <div className="pb-5 leading-relaxed">{item.answer}</div>
      </div>
    </li>
  );
};

const FAQ = () => {
  return (
    <section className="bg-base-200" id="faq">
      <div className="py-24 px-8 max-w-7xl mx-auto flex flex-col md:flex-row gap-12">
        <div className="flex flex-col text-left basis-1/2">
          <p className="inline-block font-semibold text-primary mb-4">FAQ</p>
          <p className="sm:text-4xl text-3xl font-extrabold text-base-content">
            Common Questions About Conscious AI Integration
          </p>
        </div>

        <ul className="basis-1/2">
          {faqList.map((item, i) => (
            <FaqItem key={i} item={item} />
          ))}
        </ul>
      </div>
    </section>
  );
};

export default FAQ;
</file>

<file path="components/LeaderboardTable.tsx">
"use client";

import React from "react";
import DataTable from "react-data-table-component";

interface LeaderboardEntry {
  username: string;
  totalPoints: number;
}

interface LeaderboardTableProps {
  data: LeaderboardEntry[];
}

// Helper to get the first day of the current month
export const getFirstDayOfMonth = (): Date => {
  const now = new Date();
  return new Date(now.getFullYear(), now.getMonth(), 1);
};

// Format the current month period for display
const formatMonthPeriod = (): string => {
  const now = new Date();
  return now.toLocaleString('default', { month: 'long', year: 'numeric' });
};

// Helper to get the fixed competition start date (May 1st of the current year)
const getCompetitionStartDate = (): Date => {
  const now = new Date();
  // May is month 4 (zero-indexed)
  return new Date(Date.UTC(now.getUTCFullYear(), 4, 1));
};

const LeaderboardTable: React.FC<LeaderboardTableProps> = ({ data }) => {
  const columns = [
    {
      name: "Username",
      selector: (row: LeaderboardEntry) => row.username,
      sortable: true,
    },
    {
      name: "Points",
      selector: (row: LeaderboardEntry) => row.totalPoints,
      sortable: true,
      right: true,
    },
  ];

  const customStyles = {
    header: {
      style: {
        minHeight: "56px",
      },
    },
    headCells: {
      style: {
        backgroundColor: "#1f2937",
        color: "#f3f4f6",
        fontWeight: "bold",
        fontSize: "0.875rem",
        paddingLeft: "16px",
        paddingRight: "16px",
      },
    },
    cells: {
      style: {
        backgroundColor: "#374151",
        color: "#f3f4f6",
        paddingLeft: "16px",
        paddingRight: "16px",
        fontSize: "0.875rem",
      },
    },
    pagination: {
      style: {
        backgroundColor: "#1f2937",
        color: "#f3f4f6",
      },
      pageButtonsStyle: {
        color: "#f3f4f6",
        fill: "#f3f4f6",
      },
    },
  };

  const mid = Math.ceil(data.length / 2);
  const leftData = data.slice(0, mid);
  const rightData = data.slice(mid);
  const isRightDisplayed = rightData.length > 0;

  // Use the fixed competition start date for display
  const competitionStartDate = getCompetitionStartDate();
  const competitionStartDateString = competitionStartDate.toLocaleDateString();

  if (data.length <= 5) {
    return (
      <div className="w-full max-w-4xl mx-auto">
        <h2 className="text-center text-xl font-semibold text-white mb-3">
          Leaderboard
          <div className="text-sm font-normal text-gray-300">
            Points accumulated since {competitionStartDateString}
          </div>
        </h2>
        <div className="bg-gray-800 rounded-lg overflow-hidden">
          <DataTable columns={columns} data={data} customStyles={customStyles} pagination theme="dark" />
        </div>
      </div>
    );
  }

  return (
    <div className="w-full max-w-4xl mx-auto">
      <h2 className="text-center text-xl font-semibold text-white mb-3">
        Leaderboard
        <div className="text-sm font-normal text-gray-300">
          Points accumulated since {competitionStartDateString}
        </div>
      </h2>
      <div className="bg-gray-800 rounded-lg overflow-hidden">
        <div className="flex flex-col md:flex-row">
          <div className="flex-1">
            <DataTable
              columns={columns}
              data={leftData}
              customStyles={customStyles}
              pagination
              theme="dark"
            />
          </div>
          {isRightDisplayed && (
            <div className="flex-1">
              <DataTable
                columns={columns}
                data={rightData}
                customStyles={customStyles}
                pagination
                theme="dark"
              />
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default LeaderboardTable;
</file>

<file path="libs/abTesting.tsx">
"use client";

import React, { createContext, useContext, useEffect, useState, useRef } from "react";

type Variant = "A" | "B" | "C" | "D";
type TestID = string;
type EventType = "view" | "click" | "conversion";

interface ABTestContextType {
  variant: Variant;
  recordEvent: (testId: TestID, event: EventType) => void;
  getVariant: (testId: TestID) => Variant;
}

// Create context with default values
const ABTestContext = createContext<ABTestContextType>({
  variant: "A",
  recordEvent: () => { },
  getVariant: () => "A",
});

// Provider component
export const ABTestProvider = ({ children }: { children: React.ReactNode }) => {
  // Start with variant A to match server-side rendering
  const [variant, setVariant] = useState<Variant>("A");
  const [trackedEvents, setTrackedEvents] = useState<Set<string>>(new Set());
  const isInitializedRef = useRef(false);

  // Initialize variant after first render (client-side only)
  useEffect(() => {
    if (isInitializedRef.current) return;
    isInitializedRef.current = true;

    // Only run on client-side
    if (typeof window === "undefined") return;

    // Try to get variant from cookie for "landing_headline_test"
    const testId = "landing_headline_test"; // Hardcoded for simplicity

    const cookies = document.cookie.split("; ");
    const testCookie = cookies.find(cookie => cookie.startsWith(`ab_${testId}=`));

    if (testCookie) {
      setVariant(testCookie.split("=")[1] as Variant);
    } else {
      // Assign variant randomly with equal distribution (25% each)
      const random = Math.random();
      const newVariant: Variant =
        random < 0.25 ? "A" :
          random < 0.5 ? "B" :
            random < 0.75 ? "C" : "D";

      // Store in cookie for 30 days
      const expiryDate = new Date();
      expiryDate.setDate(expiryDate.getDate() + 30);
      document.cookie = `ab_${testId}=${newVariant};expires=${expiryDate.toUTCString()};path=/`;

      setVariant(newVariant);
    }
  }, []);

  // Function to record events
  const recordEvent = async (testId: TestID, event: EventType) => {
    if (typeof window === "undefined") return;

    // Create a unique key for deduplication
    const eventKey = `${testId}:${event}:${variant}`;

    // Skip if already tracked
    if (trackedEvents.has(eventKey)) return;

    // Add to tracked events
    setTrackedEvents(prev => {
      const newSet = new Set(prev);
      newSet.add(eventKey);
      return newSet;
    });

    // Send to API
    try {
      await fetch('/api/ab-tracking', {
        method: 'POST',
        body: JSON.stringify({ testId, variant, event }),
        headers: { 'Content-Type': 'application/json' }
      });
    } catch (error) {
      console.error('Error recording AB test event:', error);
    }
  };

  // Function to get variant for a specific test
  const getVariant = (testId: TestID): Variant => {
    return variant;
  };

  return (
    <ABTestContext.Provider value={{ variant, recordEvent, getVariant }}>
      {children}
    </ABTestContext.Provider>
  );
};

// Hook to use AB testing
export const useABTest = () => {
  return useContext(ABTestContext);
}
</file>

<file path="ARCHITECTURE.md">
# Oceanheart UI Architecture

## Overview

Oceanheart UI is a Next.js 14 web application using the App Router pattern. The application serves as the frontend for Oceanheart.ai, providing landing pages, user authentication, dashboards, and specialized features like AI conversations and leaderboards.

This document provides a comprehensive overview of the project's architecture, including directory structure, key components, data flow, and integration points.

## Table of Contents

1. [Technology Stack](#technology-stack)
2. [Directory Structure](#directory-structure)
3. [Core Application Flow](#core-application-flow)
4. [Authentication System](#authentication-system)
5. [State Management](#state-management)
6. [Database & API Integration](#database--api-integration)
7. [Custom Hooks](#custom-hooks)
8. [Component Architecture](#component-architecture)
9. [Styling](#styling)
10. [Testing Strategy](#testing-strategy)
11. [Deployment](#deployment)
12. [Developer Workflow](#developer-workflow)

## Technology Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **UI Libraries**:
  - React 18
  - Tailwind CSS
  - DaisyUI
  - Framer Motion
  - Recharts (for data visualization)
- **Backend Services**:
  - Supabase (Authentication, PostgreSQL Database)
  - Stripe (Payment processing)
  - Resend (Email delivery)
  - OpenAI API (AI conversations)
- **State Management**: React Hooks, SWR for data fetching
- **Database**: 
  - Primary: Supabase (PostgreSQL)
  - Secondary: SQLite (for specific features)
- **Package Manager**: Bun
- **Testing**:
  - Jest (for unit and component tests)
  - Cypress (for end-to-end tests)

## Directory Structure

```
oceanheart-ui/
‚îú‚îÄ‚îÄ app/                     # Next.js App Router pages and API routes
‚îÇ   ‚îú‚îÄ‚îÄ api/                 # API routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/            # Authentication endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stripe/          # Payment processing endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ webhook/         # Webhook handlers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...              # Other API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ about/               # About page
‚îÇ   ‚îú‚îÄ‚îÄ blog/                # Blog pages
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/           # User dashboard
‚îÇ   ‚îú‚îÄ‚îÄ signin/              # Authentication pages
‚îÇ   ‚îî‚îÄ‚îÄ ...                  # Other page routes
‚îú‚îÄ‚îÄ components/              # Shared React components
‚îÇ   ‚îú‚îÄ‚îÄ AuthButton.tsx       # Authentication button component
‚îÇ   ‚îú‚îÄ‚îÄ Footer.tsx           # Site footer
‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx           # Site header
‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx             # Hero section component
‚îÇ   ‚îú‚îÄ‚îÄ Pricing.tsx          # Pricing component
‚îÇ   ‚îî‚îÄ‚îÄ ...                  # Other components
‚îú‚îÄ‚îÄ hooks/                   # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ useForm.ts           # Form handling hook
‚îÇ   ‚îî‚îÄ‚îÄ ...                  # Other hooks (to be implemented)
‚îú‚îÄ‚îÄ lib/                     # Utility functions
‚îÇ   ‚îî‚îÄ‚îÄ teamData.ts          # Team data utilities
‚îú‚îÄ‚îÄ libs/                    # Service integrations and utilities
‚îÇ   ‚îú‚îÄ‚îÄ api.ts               # API utility functions
‚îÇ   ‚îú‚îÄ‚îÄ stripe.ts            # Stripe integration
‚îÇ   ‚îú‚îÄ‚îÄ supabase/            # Supabase client and utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts        # Supabase client configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware.ts    # Supabase auth middleware
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.ts        # Server-side Supabase functions
‚îÇ   ‚îî‚îÄ‚îÄ ...                  # Other service integrations
‚îú‚îÄ‚îÄ public/                  # Static assets
‚îÇ   ‚îú‚îÄ‚îÄ images/              # Image assets
‚îÇ   ‚îú‚îÄ‚îÄ scripts/             # Client-side scripts
‚îÇ   ‚îî‚îÄ‚îÄ ...                  # Other static assets
‚îú‚îÄ‚îÄ types/                   # TypeScript type definitions
‚îÇ   ‚îú‚îÄ‚îÄ config.ts            # Configuration types
‚îÇ   ‚îú‚îÄ‚îÄ index.ts             # Shared type definitions
‚îÇ   ‚îî‚îÄ‚îÄ ...                  # Other type definitions
‚îú‚îÄ‚îÄ config.ts                # Application configuration
‚îú‚îÄ‚îÄ middleware.ts            # Next.js middleware
‚îú‚îÄ‚îÄ next.config.js           # Next.js configuration
‚îú‚îÄ‚îÄ tailwind.config.js       # Tailwind CSS configuration
‚îú‚îÄ‚îÄ tsconfig.json            # TypeScript configuration
‚îî‚îÄ‚îÄ package.json             # Project dependencies and scripts
```

### Key Directory Explanations

#### `app/` Directory

The `app/` directory follows the Next.js App Router pattern where each subdirectory represents a route in the application. Key subdirectories include:

- **`api/`**: Server-side API routes
  - **`auth/`**: Authentication-related endpoints
  - **`stripe/`**: Payment processing endpoints
  - **`webhook/`**: Webhook handlers for external services

- **Page Routes**: Each subdirectory typically contains:
  - **`page.tsx`**: The React component for the page
  - **`layout.tsx`**: (Optional) Layout wrapper for the page
  - **Other components**: Page-specific components

#### `components/` Directory

Contains reusable React components used throughout the application. These are organized in a flat structure with related components grouped together by functionality.

#### `hooks/` Directory

Contains custom React hooks that encapsulate reusable logic:

- **`useForm.ts`**: A hook for form state management, validation, and submission
- Additional hooks will be implemented for authentication, data fetching, etc.

#### `libs/` Directory

Contains service integrations and utility functions:

- **`api.ts`**: Utility functions for making API calls
- **`stripe.ts`**: Stripe payment integration
- **`supabase/`**: Supabase client configuration and helper functions

## Core Application Flow

1. **Request Handling**:
   - Incoming requests first pass through `middleware.ts`
   - Middleware handles authentication checks and redirects
   - Next.js routes the request to the appropriate page or API endpoint

2. **Page Rendering**:
   - Pages in the `app/` directory render server-side by default
   - Client components are marked with `"use client";` directive
   - Layout components provide consistent structure

3. **Data Fetching**:
   - Server components fetch data on the server
   - Client components use SWR or custom hooks for data fetching
   - API routes handle data mutation operations

4. **Component Hierarchy**:
   - Layouts define the overall page structure
   - Pages compose reusable components
   - Components use custom hooks for state and side effects

## Authentication System

Authentication is handled through Supabase Authentication:

1. **Sign-in Flow**:
   - User navigates to `/signin`
   - Authentication options include Email Magic Link and Google OAuth
   - reCAPTCHA verifies human users
   - Authentication redirects to appropriate callback handlers

2. **Authentication State**:
   - Supabase client manages session state
   - Middleware checks auth state for protected routes
   - `AuthButton` component adapts based on auth state

3. **Protected Routes**:
   - Middleware redirects unauthenticated users
   - Dashboard and user-specific pages check auth state

### Subdomain SSO (Planned/Implementing)
- Centralized auth UI on `accounts.oceanheart.ai` with domain-scoped cookies (`.oceanheart.ai`).
- Each product app (e.g., `flowstate.oceanheart.ai`) uses shared SSR auth utilities and middleware guards.
- Entitlements enforced server-side via `user_entitlements` table.
- See `docs/PRD-Subdomain-SSO.md` and `packages/common-auth` for details and stubs.

## State Management

1. **Server State**:
   - Fetched directly in server components
   - Passed down as props to client components

2. **Client State**:
   - Local component state using React's `useState`
   - Form state managed through the `useForm` custom hook
   - Session state managed through Supabase

3. **Data Fetching**:
   - SWR for client-side data fetching with caching and revalidation
   - Custom API utilities for specific data operations

## Database & API Integration

1. **Supabase**:
   - Primary database is PostgreSQL hosted on Supabase
   - Authentication via Supabase Auth
   - Data access through Supabase client

2. **API Routes**:
   - Next.js API routes in the `app/api/` directory
   - Endpoints for authentication, data operations, and third-party integrations
   - Webhook handlers for external services

3. **External Services**:
   - Stripe for payment processing
   - Resend for email delivery
   - OpenAI for AI conversation features

## Custom Hooks

Custom hooks encapsulate reusable logic:

1. **`useForm`**:
   - Form state management
   - Validation
   - Submission handling
   - Error management

2. **Future Hooks**:
   - Authentication state management
   - Data fetching
   - Animation controls

## Component Architecture

1. **Layout Components**:
   - `app/layout.tsx`: Root layout with global elements
   - Feature-specific layouts (e.g., `app/blog/layout.tsx`)

2. **Page Components**:
   - Implement specific routes
   - Compose shared components
   - Handle page-specific logic

3. **UI Components**:
   - Reusable UI elements in `components/` directory
   - Follow consistent naming and prop patterns
   - Use Tailwind CSS for styling

4. **Feature Components**:
   - Specialized components for specific features
   - Located in feature-specific directories or in `components/`

## Styling

1. **Tailwind CSS**:
   - Primary styling approach
   - Configuration in `tailwind.config.js`
   - Global styles in `app/globals.css`

2. **DaisyUI**:
   - Component library built on Tailwind
   - Provides pre-styled UI elements

3. **Framer Motion**:
   - Animation library for interactive elements
   - Used for page transitions and UI animations

## Testing Strategy

1. **Unit Tests**:
   - Jest for testing utility functions and hooks
   - React Testing Library for component testing

2. **End-to-End Tests**:
   - Cypress for testing full user flows
   - Coverage of critical paths like authentication and checkout

3. **Test Files**:
   - Located alongside the code they test with `.test.ts` or `.test.tsx` extension
   - Custom hooks have corresponding test files (e.g., `useForm.test.ts`)

## Deployment

The application is deployed on Vercel with the following environment considerations:

1. **Environment Variables**:
   - Stored securely in Vercel
   - Local development uses `.env.local`

2. **Build Process**:
   - Automated through Vercel's integration with GitHub
   - Includes linting, type checking, and testing

3. **Preview Deployments**:
   - Generated for pull requests
   - Allow testing changes before merging

## Developer Workflow

1. **Local Development**:
   - Clone repository and install dependencies
   - Set up environment variables
   - Run development server with `bun dev`

2. **Code Organization**:
   - Follow Next.js App Router conventions
   - Keep components focused and reusable
   - Use custom hooks for shared logic

3. **Build and Verification**:
   - Run linting with `bun lint`
   - Check types with `bun typecheck`
   - Run tests with `bun test`
   - Build locally with `bun build`

4. **Contribution**:
   - Follow the established patterns in the codebase
   - Update documentation for significant changes
   - Use feature branches and pull requests
</file>

<file path="CLAUDE.md">
# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Oceanheart UI is a Next.js web application that serves as the frontend for Oceanheart.ai. The application includes landing pages, user authentication, dashboards, AI conversations, and other specialized sections.

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **UI**: React 18, Tailwind CSS, DaisyUI, Framer Motion, Recharts
- **Backend**: Next.js API Routes, Supabase (Auth, PostgreSQL)
- **Payments**: Stripe
- **Email**: Resend
- **State Management**: React Hooks, SWR
- **Database**: Supabase (PostgreSQL)
- **Package Manager**: Bun

## Common Commands

### Development

```bash
# Install dependencies
bun install

# Start development server
bun dev

# Build for production
bun build

# Start production server
bun start

# Run linting
bun lint

# Generate sitemap (runs automatically after build)
bun postbuild
```

### Testing

```bash
# Run Jest tests (component tests)
bun test

# Run a specific test file
bun test -- components/team/RoleCard.test.tsx

# Run Cypress end-to-end tests
bun cypress run

# Open Cypress test runner
bun cypress open
```

### Supabase Local Development

The project uses Supabase for authentication and database. If working with Supabase features:

```bash
# Initialize Supabase locally (if needed)
supabase init

# Start Supabase local development
supabase start

# Apply migrations
supabase db push
```

## Project Architecture

### Directory Structure

- **`app/`**: Next.js App Router pages and API routes
  - `api/`: Backend API endpoints for auth, payments, webhooks, etc.
  - Other directories represent routes (e.g., `/about`, `/blog`)
- **`components/`**: Reusable React components
- **`hooks/`**: Custom React hooks
- **`libs/`**: Utility functions and service integrations
  - `supabase/`: Supabase client configuration
  - Various service integrations (Stripe, Resend, etc.)
- **`public/`**: Static assets (images, fonts, etc.)
- **`types/`**: TypeScript type definitions
- **`migrations/`**: Database migration files
- **`supabase/`**: Supabase configuration and migrations
- **`scripts/`**: Helper scripts for development and operations

### Key Configuration Files

- **`next.config.js`**: Next.js configuration
- **`tailwind.config.js`**: Tailwind CSS configuration
- **`tsconfig.json`**: TypeScript configuration
- **`middleware.ts`**: Next.js middleware (handles auth)

### Data Flow

1. Client-side requests are handled by Next.js App Router
2. Authentication is managed by Supabase Auth
3. API requests go through Next.js API Routes in `app/api/`
4. Database operations are performed via Supabase client

## Environment Setup

The application requires several environment variables for API keys and configuration. Copy from `.env.example` to `.env.local` and fill in the necessary values:

```
# Copy example environment file
cp .env.example .env.local
```

Required environment variables include Supabase credentials, Stripe API keys, and others specific to application features.

## Testing Approach

- **Component Testing**: Jest with React Testing Library for component tests (`*.test.tsx` files)
- **End-to-End Testing**: Cypress for integration tests

## Deployment

The application is deployed on Vercel.

## File Operations Helper

For file operations (when bash commands might have issues), use the Python helper scripts in the `scripts/` directory:

### File Operations Script

Use `scripts/fileops.py` for file and git operations:

```bash
# Create directories
python scripts/fileops.py mkdir -p path/to/directory

# Copy files or directories
python scripts/fileops.py cp -r source destination

# Move files or directories
python scripts/fileops.py mv source destination

# Remove files or directories
python scripts/fileops.py rm -rf path/to/remove

# Git operations
python scripts/fileops.py git-branch branch-name
python scripts/fileops.py git-add file1 file2
python scripts/fileops.py git-commit -m "Commit message"
python scripts/fileops.py git-status

# Create backups
python scripts/fileops.py backup source_dir backup_name

# Install packages
python scripts/fileops.py install next@latest react@latest --package-manager bun --force
```

### Next.js Upgrade Helper

For Next.js upgrade tasks, use `scripts/nextjs_upgrade.py`:

```bash
# Prepare for upgrade (create branch and backup)
python scripts/nextjs_upgrade.py prepare

# Update dependencies
python scripts/nextjs_upgrade.py update-deps --force

# Run Next.js codemod
python scripts/nextjs_upgrade.py run-codemod

# Update async APIs in the codebase
python scripts/nextjs_upgrade.py update-async-apis

# Fix IP properties in API routes
python scripts/nextjs_upgrade.py fix-ip-properties

# Check and fix caching patterns
python scripts/nextjs_upgrade.py check-cache

# Verify build process
python scripts/nextjs_upgrade.py verify-build
```

These helper scripts ensure that file operations work consistently even when direct bash commands may encounter issues.

### Making Scripts Executable

To make the helper scripts executable, run the following command:

```bash
# Make scripts executable with Python
python -c "import os, stat; script_dir='scripts'; scripts=['fileops.py', 'nextjs_upgrade.py']; [os.chmod(os.path.join(script_dir, script), os.stat(os.path.join(script_dir, script)).st_mode | stat.S_IXUSR | stat.S_IXGRP | stat.S_IXOTH) for script in scripts if os.path.exists(os.path.join(script_dir, script))]; print('Scripts made executable')"
```

After making them executable, you can run them directly:

```bash
# Run file operations script
./scripts/fileops.py mkdir -p new/directory

# Run Next.js upgrade helper
./scripts/nextjs_upgrade.py prepare
```
</file>

<file path="middleware.ts">
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

// This function can be marked `async` if using `await` inside
export function middleware(request: NextRequest) {
  const { pathname, searchParams } = request.nextUrl;

  // Add logging for Vercel debugging
  console.log(`Middleware triggered for path: ${pathname}`);

  // Check if the request is for the recruitment page
  if (pathname === '/recruitment') {
    console.log('Checking /recruitment route...');
    const adminKey = searchParams.get('admin');
    const expectedKey = process.env.ADMIN_VIEW_ROUTE_KEY;
    console.log(`Provided admin key: ${adminKey[0]}...`);
    // Avoid logging the expected key directly in production logs ideally
    // console.log(`Expected admin key: ${expectedKey}`);

    // Ensure the key is set in environment variables
    if (!expectedKey) {
      console.error('ADMIN_VIEW_ROUTE_KEY environment variable is not set.');
      return NextResponse.redirect(new URL('/', request.url));
    }

    // Check if the provided key matches the expected key
    if (adminKey !== expectedKey) {
      console.log('Recruitment access denied: Invalid or missing admin key.');
      return NextResponse.redirect(new URL('/', request.url));
    }

    // Key is valid, allow the request to proceed
    console.log('Recruitment access granted.');
    return NextResponse.next();
  }

  // For any other path, just continue
  console.log('Allowing request for non-recruitment path.');
  return NextResponse.next();
}

// See "Matching Paths" below to learn more
export const config = {
  // Restore the default Vercel matcher
  matcher: [
    /*
     * Match all request paths except for the ones starting with:
     * - _next/static (static files)
     * - _next/image (image optimization files)
     * - favicon.ico (favicon file)
     * Feel free to modify this pattern to include more paths.
     */
    "/((?!_next/static|_next/image|favicon.ico|.*\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)",
  ],
};
</file>

<file path="README.md">
# Oceanheart UI

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

The frontend web application for Oceanheart.ai, built with Next.js 14 (App Router), TypeScript, Tailwind CSS, and Supabase.

**For a comprehensive overview of the project architecture, including directory structure, component design, data flow, and developer workflow, please see the [Architecture Documentation](./ARCHITECTURE.md).**

## Overview

Oceanheart UI serves as the primary user interface for the Oceanheart.ai platform. It provides landing pages, user authentication, dashboards, specific feature sections like AI conversations and gamified leaderboards, and integrations with backend services.

## Key Features & Sections

-   **Core Pages:** Landing Page (`/`), About (`/about`), Pricing (`/#pricing`), Blog (`/blog`), Terms of Service (`/tos`), Privacy Policy (`/privacy-policy`).
-   **User Authentication:** Sign-in/Sign-up flows using Supabase Auth (Email Magic Link, Google OAuth) via `/signin`.
-   **User Dashboard:** Basic dashboard area (`/dashboard`) for authenticated users.
-   **Conversations with AI:** Dedicated page (`/conversations`) detailing the AI dialogue learning approach.
-   **Saigo:** Gamified practice logging and leaderboard feature (`/saigo/leaderboard`, `/saigo/signin`, etc.).
-   **HDI (Human Digital Interface):** Experimental section (`/hdi`) exploring novel UI concepts.
-   **Service Pages:** Consulting (`/consulting`), Somatic Practice (`/somatic-bournemouth`), Donations (`/donate`).
-   **API Endpoints:** Backend logic handling auth, payments (Stripe), email (Resend), AI interactions (OpenAI), database operations, webhooks, and scheduled tasks (cron jobs).

## Technology Stack

-   **Framework:** Next.js 14 (App Router)
-   **Language:** TypeScript
-   **UI:** React 18, Tailwind CSS, DaisyUI, Framer Motion, Recharts
-   **Backend:** Next.js API Routes, Supabase (Auth, PostgreSQL Database), Stripe (Payments), Resend (Email), OpenAI API
-   **State Management:** React Hooks, SWR
-   **Database (Auxiliary):** SQLite (for HDI feature)
-   **Deployment:** Vercel
-   **Package Manager:** Bun

## Getting Started

### Prerequisites

-   Node.js (LTS version recommended)
-   Bun (Installation guide: [https://bun.sh/docs/installation](https://bun.sh/docs/installation))
-   Access to necessary API keys and secrets (Supabase, Stripe, OpenAI, Resend, reCAPTCHA, etc.)

### Installation

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/your-username/oceanheart-ui.git
    cd oceanheart-ui
    ```

2.  **Install dependencies:**
    ```bash
    bun install
    ```

3.  **Set up environment variables:**
    -   Copy the example environment file:
        ```bash
        cp .env.example .env.local
        ```
    -   Fill in the required values in `.env.local` with your API keys and configuration settings.

### Running the Development Server

```bash
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

## Contributing

Please refer to the contribution guidelines (if available) before submitting pull requests.

## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file (if available) for details.
</file>

<file path="app/api/saigo/leaderboard/route.ts">
import { NextResponse } from "next/server";
import { createServiceClient } from "@/libs/supabase/server";
import { PRACTICE_TYPES } from "@/libs/chartColors";

// --- Type Definitions ---

interface PracticeEntry {
  user_id: string;
  points: number;
  type: string | null;
  created_at: string;
  saigo_user: {
    username: string | null;
  } | null;
}

interface LeaderboardEntry {
  username: string;
  totalPoints: number;
}

interface StackedDayData {
  day: string;
  [key: string]: number | string; // Allows for dynamic practice type keys
}

interface PracticeSummaryEntry {
  type: string;
  totalPoints: number;
}

// --- Helper Functions ---

/**
 * Aggregates points per user and sorts for the leaderboard.
 */
const calculateLeaderboardData = (practices: PracticeEntry[]): LeaderboardEntry[] => {
  const usersWithPointsMap = practices.reduce<Record<string, number>>((acc, entry) => {
    const username = entry.saigo_user?.username || `User_${String(entry.user_id).substring(0, 8)}`;
    const points = entry.points || 0;
    acc[username] = (acc[username] || 0) + points;
    return acc;
  }, {});

  const leaderboardData = Object.entries(usersWithPointsMap).map(([username, totalPoints]) => ({
    username,
    totalPoints,
  }));

  // Sort users by totalPoints in descending order
  leaderboardData.sort((a, b) => b.totalPoints - a.totalPoints);
  return leaderboardData;
};

/**
 * Calculates the start date N days ago from a given end date (UTC).
 */
const getStartDateNDaysAgo = (endDate: Date, days: number): Date => {
  return new Date(Date.UTC(
    endDate.getUTCFullYear(),
    endDate.getUTCMonth(),
    endDate.getUTCDate() - (days - 1) // Subtract days-1 to make it inclusive
  ));
};

/**
 * Filters practices to include only those within the last N days.
 */
const filterPracticesLastNDays = (practices: PracticeEntry[], endDate: Date, days: number): PracticeEntry[] => {
  const startDate = getStartDateNDaysAgo(endDate, days);
  const startDateStr = startDate.toISOString();
  const endDateStr = new Date(endDate.getTime() + 86400000 - 1).toISOString(); // End of today

  return practices.filter((practice) => {
    const practiceDate = new Date(practice.created_at);
    // Ensure comparison happens correctly against UTC day boundaries
    return practice.created_at >= startDateStr && practice.created_at <= endDateStr;
  });
};

/**
 * Generates an array of date strings (YYYY-MM-DD) for the last N days.
 */
const getOrderedDates = (startDate: Date, days: number): string[] => {
  const dates: string[] = [];
  for (let i = 0; i < days; i++) {
    const date = new Date(Date.UTC(
      startDate.getUTCFullYear(),
      startDate.getUTCMonth(),
      startDate.getUTCDate() + i
    ));
    dates.push(date.toISOString().split('T')[0]);
  }
  return dates;
};

/**
 * Calculates the total points aggregated per day for the last N days.
 */
const calculateDailyPoints = (practices: PracticeEntry[], startDate: Date, days: number): number[] => {
  const orderedDates = getOrderedDates(startDate, days);
  const dailyPointsMap = orderedDates.reduce<Record<string, number>>((acc, dateStr) => {
    acc[dateStr] = 0; // Initialize all dates
    return acc;
  }, {});

  practices.forEach((practice) => {
    const dateStr = new Date(practice.created_at).toISOString().split('T')[0];
    if (Object.prototype.hasOwnProperty.call(dailyPointsMap, dateStr)) {
      dailyPointsMap[dateStr] += practice.points || 0;
    }
  });

  return orderedDates.map(date => dailyPointsMap[date]);
};

/**
 * Calculates data formatted for the stacked bar chart for the last N days.
 */
const calculateStackedData = (practices: PracticeEntry[], startDate: Date, days: number): StackedDayData[] => {
  const orderedDates = getOrderedDates(startDate, days);

  return orderedDates.map(date => {
    const dayData: StackedDayData = {
      day: new Date(date + 'T00:00:00Z').toLocaleDateString('en-US', { weekday: 'short' })
    };

    // Initialize all practice types to 0 for this day
    PRACTICE_TYPES.forEach(type => {
      dayData[type] = 0;
    });

    // Sum points for each practice type on this day
    practices.forEach((practice) => {
      const practiceDateStr = new Date(practice.created_at).toISOString().split('T')[0];
      if (practiceDateStr === date && practice.type) {
        // Ensure the existing value is treated as a number before adding
        dayData[practice.type] = (Number(dayData[practice.type]) || 0) + (practice.points || 0);
      }
    });

    return dayData;
  });
};

/**
 * Returns all practice types from the PRACTICE_TYPES constant.
 */
const getAllPracticeTypes = (): string[] => {
  return PRACTICE_TYPES;
};

/**
 * Aggregates total points per practice type and sorts the summary.
 */
const calculatePracticeSummary = (practices: PracticeEntry[]): PracticeSummaryEntry[] => {
  // Initialize with all practice types set to 0
  const practiceSummaryMap: Record<string, number> = {};

  // Initialize all practice types with 0 points
  PRACTICE_TYPES.forEach(type => {
    practiceSummaryMap[type] = 0;
  });

  // Add points from actual practices
  practices.forEach(practice => {
    if (practice.type) {
      const points = practice.points || 0;
      // Only add points for types defined in PRACTICE_TYPES
      if (PRACTICE_TYPES.includes(practice.type)) {
        practiceSummaryMap[practice.type] += points;
      }
    }
  });

  const practiceSummary = Object.entries(practiceSummaryMap).map(([type, totalPoints]) => ({
    type,
    totalPoints,
  }));

  // Sort practice types by totalPoints in descending order
  practiceSummary.sort((a, b) => b.totalPoints - a.totalPoints);
  return practiceSummary;
};

// --- API Route Handler ---

export async function GET() {
  const supabase = createServiceClient();
  const daysForGraphs = 7;

  // --- 1. Fetch Data ---
  const currentYear = new Date().getFullYear();
  const competitionStartDate = new Date(Date.UTC(currentYear, 4, 1)); // May is month 4 (zero-indexed)
  const today = new Date(Date.UTC(
    new Date().getUTCFullYear(),
    new Date().getUTCMonth(),
    new Date().getUTCDate()
  ));

  const { data: practicesData, error: practicesError } = await supabase
    .from('practices')
    .select(`
      user_id,
      points,
      type,
      created_at,
      saigo_user:saigo_users!practices_user_id_fkey (
        username
      )
    `)
    .gte('created_at', competitionStartDate.toISOString())
    // Cast the fetched data to our defined type
    .returns<PracticeEntry[]>();

  if (practicesError) {
    console.error('Error fetching practices:', practicesError);
    return NextResponse.json(
      { error: `Database error: ${practicesError.message}` },
      { status: 500 } // Use 500 for server-side DB errors
    );
  }

  if (!practicesData) {
    return NextResponse.json({ error: "No practice data found" }, { status: 404 });
  }

  // --- 3. Calculate All-Time Data ---
  const leaderboardData = calculateLeaderboardData(practicesData);
  const practiceSummary = calculatePracticeSummary(practicesData);

  // --- 4. Calculate 7-Day Graph Data ---
  const last7DaysStartDate = getStartDateNDaysAgo(today, daysForGraphs);
  const last7DaysPractices = filterPracticesLastNDays(practicesData, today, daysForGraphs);

  const dailyPoints = calculateDailyPoints(last7DaysPractices, last7DaysStartDate, daysForGraphs);
  const stackedData = calculateStackedData(last7DaysPractices, last7DaysStartDate, daysForGraphs);
  const practiceTypes = getAllPracticeTypes();

  // --- 5. Return Response ---
  return NextResponse.json({
    leaderboardData, // All-time leaderboard rankings
    practiceSummary, // All-time practice summary for pie chart
    dailyPoints,     // 7-day graph data
    stackedData,     // 7-day graph data
    practiceTypes    // All practice types for stacked chart keys
  });
}
</file>

<file path="app/page.tsx">
import { Suspense } from "react";
import Header from "@/components/Header";
import Problem from "@/components/Problem";
import FeaturesAccordion from "@/components/FeaturesAccordion";
import Pricing from "@/components/Pricing";
import FAQ from "@/components/FAQ";
import CTA from "@/components/CTA";
import Footer from "@/components/Footer";
import Hero from "@/components/Hero";
import KnowledgeGapSection from "@/components/KnowledgeGapSection";
import CompoundingHoursSection from "@/components/CompoundingHoursSection";

export default function Home() {
  return (
    <>
      <Suspense>
        <Header />
      </Suspense>
      <main>
        <Hero />
        <Problem />
        <FeaturesAccordion />
        <KnowledgeGapSection />
        <CompoundingHoursSection />
        <Pricing />
        <FAQ />
        <CTA />
      </main>
      <Footer />
    </>
  );
}
</file>

<file path="app/synai/components/CTASection.tsx">
import Link from "next/link";

export default function CTASection() {
  return (
    <section className="py-24 bg-gradient-to-br from-primary to-secondary text-white text-center">
      <div className="container mx-auto px-6 md:px-4">
        <div className="max-w-4xl mx-auto">
          <h2 className="text-3xl md:text-5xl lg:text-6xl font-bold mb-6">
            Ready for AI That Actually Knows You?
          </h2>

          <p className="text-lg md:text-2xl mb-12 opacity-90 max-w-3xl mx-auto">
            Stop settling for generic advice. Experience what's possible when AI meets deep human understanding.
          </p>

          <div className="flex flex-col sm:flex-row gap-6 justify-center items-center">
            {/* Primary CTA */}
            <Link
              href="https://calendar.app.google/85ZdaqYK5vfNk4aH9"
              className="inline-block bg-white text-primary px-8 py-4 rounded-full text-base md:text-lg font-semibold transition-all duration-300 hover:transform hover:-translate-y-1 hover:shadow-2xl hover:shadow-white/20"
            >
              Book Your Discovery Call
            </Link>

            {/* Secondary CTA */}
            <Link
              href="/about-alt"
              className="inline-block bg-transparent text-white px-8 py-4 border-2 border-white rounded-full text-base md:text-lg font-semibold transition-all duration-300 hover:bg-white hover:text-primary"
            >
              Learn About Kai
            </Link>
          </div>

          {/* Trust Indicators */}
          <div className="mt-16 grid md:grid-cols-3 gap-8 text-center opacity-80">
            <div>
              <div className="text-2xl md:text-3xl font-bold mb-2">Clinical</div>
              <div className="text-xs md:text-sm">Evidence-based assessment</div>
            </div>
            <div>
              <div className="text-2xl md:text-3xl font-bold mb-2">Personal</div>
              <div className="text-xs md:text-sm">Tailored to your psychology</div>
            </div>
            <div>
              <div className="text-2xl md:text-3xl font-bold mb-2">Contained</div>
              <div className="text-xs md:text-sm">Your exclusive AI container</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/synai/components/TechnicalSection.tsx">
import TechnicalDeepDive from './TechnicalDeepDive';

export default function TechnicalSection() {
  return (
    <section className="py-24 bg-base-300 text-white">
      <div className="container mx-auto px-6 md:px-4">
        {/* Section Header */}
        <div className="text-center mb-16 synai-fade-in">
          <h2 className="text-3xl md:text-5xl font-bold mb-6">
            The Engineering Behind the Magic
          </h2>
          <p className="text-lg md:text-2xl text-white/80 max-w-4xl mx-auto">
            For those who appreciate technical excellence: this is prompt engineering at its finest
          </p>
        </div>

        {/* Technical Visualization */}
        <div className="max-w-4xl mx-auto synai-fade-in synai-fade-in-delay-1">
          <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20">
            <h4 className="text-center text-xl md:text-2xl font-semibold mb-8">
              Simplified Prompt Architecture
            </h4>
            
            {/* XML Structure Display */}
            <div className="font-mono text-xs md:text-base leading-relaxed space-y-3">
              {/* Root Element */}
              <div className="bg-white/10 p-4 rounded-lg border-l-4 border-secondary">
                &lt;SYNAI_PERSONAL_COACH_SYSTEM&gt;
              </div>
              
              {/* Nested Elements */}
              <div className="ml-6 bg-white/10 p-4 rounded-lg border-l-4 border-primary">
                &lt;ClientIdentity&gt; Your unique psychological profile &lt;/ClientIdentity&gt;
              </div>
              
              <div className="ml-6 bg-white/10 p-4 rounded-lg border-l-4 border-primary">
                &lt;CoreFramework&gt; ACT-based therapeutic approach &lt;/CoreFramework&gt;
              </div>
              
              <div className="ml-6 bg-white/10 p-4 rounded-lg border-l-4 border-primary">
                &lt;KnowledgeGraph&gt; Living map of your patterns and goals &lt;/KnowledgeGraph&gt;
              </div>
              
              <div className="ml-6 bg-white/10 p-4 rounded-lg border-l-4 border-primary">
                &lt;AdaptiveLearning&gt; Continuous integration of new insights &lt;/AdaptiveLearning&gt;
              </div>
              
              <div className="ml-6 bg-white/10 p-4 rounded-lg border-l-4 border-primary">
                &lt;PersonalizedGuidance&gt; Tailored responses to your context &lt;/PersonalizedGuidance&gt;
              </div>
              
              {/* Closing Root Element */}
              <div className="bg-white/10 p-4 rounded-lg border-l-4 border-secondary">
                &lt;/SYNAI_PERSONAL_COACH_SYSTEM&gt;
              </div>
            </div>
            
            {/* Technical Note */}
            <p className="text-center mt-8 text-white/70 italic text-lg">
              This represents months of R&D, clinical expertise, and advanced AI engineering‚Äîall focused on understanding you.
            </p>
          </div>
        </div>

        {/* Additional Technical Details */}
        <div className="grid md:grid-cols-3 gap-8 mt-16 max-w-6xl mx-auto synai-fade-in synai-fade-in-delay-2">
          <div className="text-center">
            <div className="relative w-20 h-20 mx-auto mb-6">
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-full animate-pulse"></div>
              <div className="absolute inset-2 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-full opacity-70 animate-spin" style={{animationDuration: '4s'}}></div>
              <div className="absolute inset-4 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-full animate-ping" style={{animationDuration: '2s'}}></div>
              <div className="absolute inset-6 bg-white rounded-full"></div>
              <div className="absolute inset-7 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-full"></div>
            </div>
            <h5 className="text-xl font-semibold mb-3">Research-Based</h5>
            <p className="text-white/70">
              Built on established therapeutic frameworks and clinical psychology principles
            </p>
          </div>
          
          <div className="text-center">
            <div className="relative w-20 h-20 mx-auto mb-6">
              <div className="absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-600 rounded-full animate-pulse"></div>
              <div className="absolute inset-2 bg-gradient-to-br from-purple-400 to-pink-600 rounded-full opacity-70 animate-spin" style={{animationDuration: '6s'}}></div>
              <div className="absolute inset-4 bg-gradient-to-br from-purple-400 to-pink-600 rounded-full animate-ping" style={{animationDuration: '2.5s'}}></div>
              <div className="absolute inset-6 bg-white rounded-full"></div>
              <div className="absolute inset-7 bg-gradient-to-br from-purple-400 to-pink-600 rounded-full"></div>
            </div>
            <h5 className="text-xl font-semibold mb-3">Advanced Engineering</h5>
            <p className="text-white/70">
              Sophisticated prompt architecture that evolves with your growth and insights
            </p>
          </div>
          
          <div className="text-center">
            <div className="relative w-20 h-20 mx-auto mb-6">
              <div className="absolute inset-0 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full animate-pulse"></div>
              <div className="absolute inset-2 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full opacity-70 animate-spin" style={{animationDuration: '5s'}}></div>
              <div className="absolute inset-4 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full animate-ping" style={{animationDuration: '3s'}}></div>
              <div className="absolute inset-6 bg-white rounded-full"></div>
              <div className="absolute inset-7 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full"></div>
            </div>
            <h5 className="text-xl font-semibold mb-3">Precision Targeting</h5>
            <p className="text-white/70">
              Every response calibrated to your specific psychological patterns and goals
            </p>
          </div>
        </div>

        {/* Technical Deep Dive Component */}
        <TechnicalDeepDive />
      </div>
    </section>
  );
}
</file>

<file path="components/ButtonCheckout.tsx">
"use client";

import { useEffect, useState } from "react";
import apiClient from "@/libs/api";
import config from "@/config";
import { createClient } from "@/libs/supabase/client";
import { User } from "@supabase/supabase-js";
import { useRouter } from "next/navigation";

// This component is used to create Stripe Checkout Sessions
// It calls the /api/stripe/create-checkout route with the priceId, successUrl and cancelUrl
// By default, it doesn't force users to be authenticated. But if they are, it will prefill the Checkout data with their email and/or credit card. You can change that in the API route
// You can also change the mode to "subscription" if you want to create a subscription instead of a one-time payment
const ButtonCheckout = ({
  priceId,
  mode = "payment",
  disabled = false,
  donate = false,
  monzoLink,
  inDevelopment = false,
}: {
  priceId: string;
  mode?: "payment" | "subscription";
  disabled?: boolean;
  donate?: boolean;
  monzoLink?: string;
  inDevelopment?: boolean;
}) => {
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const supabase = createClient();
  const [user, setUser] = useState<User>(null);
  const navigateTo = useRouter();

  useEffect(() => {
    const getUser = async () => {
      const {
        data: { user },
      } = await supabase.auth.getUser();

      setUser(user);
    };

    getUser();
  }, [supabase]);

  const handlePayment = async () => {
    setIsLoading(true);

    if (!user) {
      // redirect to signin page
      navigateTo.push("/signin");
      return;
    }

    if (monzoLink) {
      window.location.href = monzoLink;
      return;
    }

    try {
      const { url }: { url: string } = await apiClient.post(
        "/stripe/create-checkout",
        {
          priceId: donate ? "price_1R4RHkRVLr5O3VRE6dsEzO4U" : priceId,
          successUrl: window.location.href,
          cancelUrl: window.location.href,
          mode,
        }
      );

      window.location.href = url;
    } catch (e) {
      console.error(e);
    }

    setIsLoading(false);
  };

  return (
    <button
      className="btn btn-primary btn-block group"
      onClick={() => handlePayment()}
      disabled={disabled || inDevelopment}
    >
      {isLoading ? (
        <span className="loading loading-spinner loading-xs"></span>
      ) : null}
      {monzoLink ? "Easy Pay" : "Upgrade me"}
      {inDevelopment && <span className="text-xs text-gray-500">In Development</span>}
    </button>
  );
};

export default ButtonCheckout;
</file>

<file path="components/Problem.tsx">
import React from 'react';
import type { JSX } from 'react';

// Helper component for steps
const Step = ({ emoji, text }: { emoji: string; text: string }) => (
  <div className="flex flex-col items-center text-center">
    <span className="text-3xl mb-2">{emoji}</span>
    <p className="font-semibold text-lg">{text}</p>
  </div>
);

// Helper component for arrows
const Arrow = ({ extraStyle }: { extraStyle?: string }): JSX.Element => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    strokeWidth={1.5}
    stroke="currentColor"
    className={`w-6 h-6 shrink-0 text-primary ${extraStyle || ''}`}
  >
    <path
      strokeLinecap="round"
      strokeLinejoin="round"
      d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"
    />
  </svg>
);

const Problem = () => {
  return (
    <section className="bg-neutral text-neutral-content">
      <div className="max-w-7xl mx-auto px-8 py-16 md:py-24 text-center">
        {/* Headline */}
        <h2 className="max-w-4xl mx-auto font-extrabold text-4xl md:text-5xl tracking-tight mb-6 md:mb-12">
          We Need <span className="text-primary">Big Heart</span> to Meet <span className="text-secondary">Big Tech</span>
        </h2>

        {/* Agitation Points */}
        <h2 className="max-w-xl mx-auto font-extrabold text-2xl tracking-tight mb-6 md:mb-12">
          Tired of simplistic, tech-first approaches that overlook the <span className="text-error">complexity of human connection</span>?
        </h2>

        {/* Problem Block */}
        <p className="max-w-xl mx-auto text-lg opacity-90 leading-relaxed mb-6 md:mb-16">
          The AI revolution is here‚Äîfast, furious, and often confusing. Endless tools, shifting jargon, and the pressure to adapt can feel like drowning.
        </p>

        <p className="max-w-xl mx-auto text-lg opacity-90 leading-relaxed mb-6 md:mb-16">
          You know AI is vital, but how do you engage meaningfully without losing your human core or your sanity?
        </p>

        <p className="max-w-xl mx-auto text-lg opacity-90 leading-relaxed mb-6 md:mb-20">
          Finding guidance that truly spans both <span className="text-info">technological fluency</span> and <span className="text-success">depth of human understanding</span> is nearly impossible. Most "experts" only speak one language, leaving you to navigate the chasm alone.
        </p>

        {/* Steps - reflecting the journey from confusion to integration */}
        {/* <div className="flex flex-col md:flex-row justify-center items-center md:items-start gap-6">
          <Step emoji="üåä" text="AI Overwhelm" />
          <Arrow extraStyle="max-md:-scale-x-100 md:-rotate-90" />
          <Step emoji="‚öñÔ∏è" text="Ethical Fog" />
          <Arrow extraStyle="md:-scale-x-100 md:-rotate-90" />
          <Step emoji="ü§ñ" text="Human Disconnect" />
          <Arrow extraStyle="max-md:-scale-x-100 md:-rotate-90" />
          <Step emoji="üß≠" text="Seeking Clarity" />
        </div> */}
      </div>
    </section>
  );
};

export default Problem;
</file>

<file path="types/config.ts">
export type Theme =
  | "light"
  | "dark"
  | "cupcake"
  | "bumblebee"
  | "emerald"
  | "corporate"
  | "synthwave"
  | "retro"
  | "cyberpunk"
  | "valentine"
  | "halloween"
  | "garden"
  | "forest"
  | "aqua"
  | "lofi"
  | "pastel"
  | "fantasy"
  | "wireframe"
  | "black"
  | "luxury"
  | "dracula"
  | "";

export interface ConfigProps {
  appName: string;
  appDescription: string;
  domainName: string;
  crisp: {
    id?: string;
    onlyShowOnRoutes?: string[];
  };
  stripe: {
    plans: {
      isFeatured?: boolean;
      priceId: string;
      name: string;
      description?: string;
      price: number;
      priceAnchor?: number;
      frequency?: string;
      features: {
        name: string;
      }[];
      availableFrom?: string;
      limitedTo?: number;
      remaining?: number;
      monzoLink?: string;
      inDevelopment?: boolean;
      disabled?: boolean;
      cta?: string;
      ctaUrl?: string;
    }[];
  };
  aws?: {
    bucket?: string;
    bucketUrl?: string;
    cdn?: string;
  };
  resend: {
    fromNoReply: string;
    fromAdmin: string;
    supportEmail?: string;
  };
  colors: {
    theme: Theme;
    saigoTheme: Theme;
    main: string;
  };
  auth: {
    loginUrl: string;
    callbackUrl: string;
    saigo: {
      loginUrl: string;
      callbackUrl: string;
    }
  };
}
</file>

<file path="app/about/page.tsx">
import Image from "next/image";
import config from "@/config";
import Link from "next/link";

export default function AboutPage() {
  return (
    <main className="bg-base-100">
      {/* Intro Section */}
      <section className="pt-20 px-4 sm:px-8 max-w-7xl mx-auto text-center">
        <h1 className="font-extrabold text-4xl md:text-6xl tracking-tight mb-8 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent animate-gradient">
          About Kai: Your Guide in the <span className="italic">Age of AI</span>
        </h1>
        <div className="max-w-3xl mx-auto">
          <p className="text-lg md:text-xl opacity-90 mx-auto mb-8 leading-relaxed text-left">
            Let's be honest. The world of <span className="font-semibold text-primary">Artificial Intelligence</span> is exhilarating, but it's also overwhelming. It feels like a relentless online scramble, with new tools, 'latest things,' and complex jargon appearing daily. <span className="italic">Technology</span> is changing at a pace that can make even the developments from three months ago seem outdated.
          </p>
          <p className="text-lg md:text-xl opacity-90 mx-auto mb-8 leading-relaxed text-left">
            Many people are using these advancements successfully, but it's easy to wonder: Will <span className="font-semibold">Big Tech</span> swallow everything? And more importantly, where does this leave <span className="italic">you</span>? How do you keep up, make sense of it all, and find your place without sacrificing your <span className="font-semibold text-secondary">human values</span> or well-being?
          </p>
        </div>
      </section>

      {/* Profile & Story Section */}
      <section className="flex flex-col md:flex-row items-center gap-12 max-w-7xl mx-auto px-4 sm:px-8 py-20">
        <div className="md:w-2/5">
          <div className="relative">
            <div className="absolute -inset-1 bg-gradient-to-r from-primary to-secondary rounded-full blur opacity-30"></div>
            <Image
              src="/images/kai_profile.jpeg"
              alt="Profile picture of Kai - Conscious AI Integration Specialist"
              width={600}
              height={600}
              className="rounded-full mx-auto relative shadow-lg hover:scale-[1.02] transition-transform duration-300"
            />
          </div>
        </div>
        <div className="md:w-3/5 space-y-10 mt-10 md:mt-0">
          <article className="bg-base-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow">
            <h2 className="font-bold text-2xl md:text-3xl mb-4 border-b border-primary/20 pb-2">My Origin Story</h2>
            <p className="text-base md:text-lg leading-relaxed">
              For 15 years, I sat with <span className="italic">human stories</span> as a <span className="font-semibold text-primary">psychotherapist</span>. Then, as a <span className="font-semibold text-primary">software engineer</span>, I built with data. But it was my 20 years in <span className="font-semibold text-secondary">contemplative practice</span> that showed me the common thread: <span className="font-semibold text-secondary italic">consciousness</span>. Now, I fuse these worlds, guiding professionals like you to integrate AI not just as a tool, but as an extension of <span className="italic">mindful, human-centered work</span>.
            </p>
          </article>
          <article className="bg-base-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow">
            <h2 className="font-bold text-2xl md:text-3xl mb-4 border-b border-primary/20 pb-2">The Crossover Skillset</h2>
            <ul className="text-base md:text-lg leading-relaxed list-disc pl-5 space-y-4">
              <li><span className="font-bold text-primary">Psychotherapist:</span> Deep understanding of <span className="italic">human experience</span>, resistance, and the relational aspects of learning.</li>
              <li><span className="font-bold text-primary">Software Engineer:</span> Practical, first-principles grasp of <span className="italic">AI technology</span>, demystifying the complex.</li>
              <li><span className="font-bold text-secondary">Contemplative Practitioner:</span> Grounded in <span className="italic">ethical awareness</span>, fostering presence and <span className="font-semibold">conscious choice</span> amidst rapid change.</li>
            </ul>
            <p className="text-base md:text-lg leading-relaxed mt-4">
              This blend allows me to translate AI's power into <span className="italic">your language</span>, for your specific needs, ensuring technology serves your <span className="font-semibold text-secondary">humanity</span>.
            </p>
          </article>
          <article className="bg-base-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow">
            <h2 className="font-bold text-2xl md:text-3xl mb-4 border-b border-primary/20 pb-2">Philosophy Statement</h2>
            <p className="text-base md:text-lg leading-relaxed">
              True <span className="font-semibold text-primary">AI mastery</span> isn't just about clever prompts. It's about weaving your unique <span className="font-semibold">Story</span> (experience) with timeless <span className="font-semibold text-secondary">Spirit</span> (values) and clear <span className="font-semibold text-primary">Science</span> (understanding). My "<span className="italic">Art of Personal AI</span>" framework helps you amplify your intelligence and sensitivity by <span className="font-semibold text-secondary">consciously engaging</span> with AI's context, models, and your own evolving <span className="italic font-semibold text-secondary">consciousness</span>.
            </p>
            <p className="text-base md:text-lg italic mt-4">
              I occasionally find myself explaining complex AI concepts to my cat, who remains unimpressed but a very good listener.
            </p>
          </article>
        </div>
      </section>

      {/* Call-to-Action Section */}
      <section className="bg-gradient-to-r from-neutral to-neutral-focus text-neutral-content py-20 px-4 sm:px-8">
        <div className="max-w-3xl mx-auto text-center p-8 bg-black/20 backdrop-blur-sm rounded-xl">
          <h2 className="font-bold text-3xl md:text-4xl mb-6">Ready to <span className="text-primary italic">integrate consciously</span>?</h2>
          <p className="mb-8 text-lg md:text-xl leading-relaxed">
            The <span className="font-semibold">AI revolution</span> doesn't have to be something that happens <span className="italic">to you</span>. It can be something you <span className="font-semibold text-primary">actively</span> and <span className="font-semibold text-secondary">confidently</span> participate in. Let's talk about how you can move from overwhelm to <span className="italic font-semibold text-secondary">clarity</span>.
          </p>
          <a
            href="https://calendar.app.google/85ZdaqYK5vfNk4aH9"
            target="_blank"
            rel="noopener noreferrer"
            className="btn btn-primary btn-wide btn-lg hover:scale-105 transition-transform"
          >
            Book a Call
          </a>
          <div className="mt-4">
            <Link
              href="/#pricing"
              className="text-blue-200 hover:text-blue-100 underline"
            >
              View All Offerings
            </Link>
          </div>
        </div>
      </section>
    </main>
  );
}
</file>

<file path="components/Footer.tsx">
"use client";

import Link from "next/link";
import Image from "next/image";
import { Suspense, useEffect, useState } from "react";
import { useSearchParams, usePathname } from "next/navigation";
import config from "@/config";
import logo from "@/app/icon.png";


interface FooterProps {
  showHDIForm?: boolean;
}

// Use Suspense to load useSearchParams() only on the client side
const SuspendedFooter = ({ showHDIForm = false }: FooterProps) => {
  const searchParams = useSearchParams();
  const pathname = usePathname();
  const [hiddenKey, setHiddenKey] = useState<string | null>(null);

  // Use effect to get the hidden key from search params
  useEffect(() => {
    setHiddenKey(searchParams?.get("hiddenKey") || null);
  }, [searchParams]);

  const privacyLink = hiddenKey ? `/privacy-policy?hiddenKey=${hiddenKey}` : "/privacy-policy";


  return (
    <footer className="bg-base-200 border-t border-base-content/10">
      <div className="max-w-7xl mx-auto px-8 py-24">
        <div className=" flex lg:items-start md:flex-row md:flex-nowrap flex-wrap flex-col">
          <div className="w-64 flex-shrink-0 md:mx-0 mx-auto text-center md:text-left">
            {/* Logo and App Name using config */}
            <Link
              href="/#"
              aria-current="page"
              className="flex gap-2 justify-center md:justify-start items-center"
            >
              <Image
                src={logo}
                alt={`${config.appName} logo`}
                priority={true}
                className="w-6 h-6"
                width={24}
                height={24}
              />
              <strong className="font-extrabold tracking-tight text-base md:text-lg">
                {config.appName}
              </strong>
            </Link>

            <p className="mt-3 text-sm text-base-content/80">
              {config.appDescription}
            </p>
            <p className="mt-3 text-sm text-base-content/60">
              Copyright ¬© {new Date().getFullYear()} - All rights reserved
            </p>

          </div>
          <div className="flex-grow flex flex-wrap justify-center -mb-10 md:mt-0 mt-10 text-center">
            {/* LINKS Section - Update links if needed */}
            <div className="lg:w-1/3 md:w-1/2 w-full px-4">
              <div className="footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3">
                LINKS
              </div>
              <div className="flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm">
                {config.resend.supportEmail && (
                  <a
                    href={`mailto:${config.resend.supportEmail}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="link link-hover"
                    aria-label="Contact Support"
                  >
                    Support
                  </a>
                )}
                <Link href="/#pricing" className="link link-hover">
                  Offerings
                </Link>
                <Link href="https://www.oceanheart.blog/" target="_blank" rel="noopener noreferrer" className="link link-hover">
                  Blog
                </Link>
                <Link href="/about-alt" className="link link-hover">
                  About Kai
                </Link>
              </div>
            </div>

            {/* LEGAL Section - Keep as is */}
            <div className="lg:w-1/3 md:w-1/2 w-full px-4">
              <div className="footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3">
                LEGAL
              </div>
              <div className="flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm">
                <Link href="/tos" className="link link-hover">
                  Terms of Service
                </Link>
                <Link href={privacyLink} className="link link-hover">
                  Privacy Policy
                </Link>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
  );
};

// Footer component wrapper with Suspense
const Footer = (props: FooterProps) => {
  return (
    <Suspense>
      <SuspendedFooter {...props} />
    </Suspense>
  );
};

export default Footer;
</file>

<file path="components/LiveLeaderboard.tsx">
"use client";

import React, { useState, useEffect } from "react";
import useSWR, { mutate } from "swr";
import ButtonAccount from "@/components/ButtonAccount";
import LeaderboardTable from "@/components/LeaderboardTable";
import LineGraph from "@/components/LineGraph";
import PracticeTypesStackedBarChart from "@/components/PracticeTypesStackedBarChart";
import CumulativePointsAreaChart from "@/components/CumulativePointsAreaChart";
import PracticeTypesRadarChart from "@/components/PracticeTypesRadarChart";
import Timer from "@/components/Timer";
import Image from "next/image";
import { Legend, Cell, PieChart, Pie, Tooltip, ResponsiveContainer } from "recharts";
import SaigoAnimatedText from "@/components/SaigoAnimatedText";
import anime from "animejs";
import config from "@/config";

interface LeaderboardEntry {
  username: string;
  totalPoints: number;
}

interface LeaderboardData {
  leaderboardData: LeaderboardEntry[];
  practiceSummary: Array<{ type: string; totalPoints: number }>;
  dailyPoints: number[];
  stackedData: any[];
  practiceTypes: string[];
}

import { PRACTICE_TYPES_COLORS } from "@/libs/chartColors";
import LoadingPage from "@/components/LoadingPage";
const fetcher = (url: string) => fetch(url).then(res => res.json());

// Helper to get the fixed competition start date (May 1st of the current year)
const getCompetitionStartDate = (): Date => {
  const now = new Date();
  // May is month 4 (zero-indexed)
  return new Date(Date.UTC(now.getUTCFullYear(), 4, 1));
};

// Function to trigger Instagram check
const triggerInstagramCheck = async () => {
  try {
    await fetch('/api/saigo/instagram/check-trigger', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
    });
    console.log('Instagram check triggered');
  } catch (error) {
    console.error('Error triggering Instagram check:', error);
  }
};

const LiveLeaderboard: React.FC = () => {
  const [showForm, setShowForm] = useState(false);
  const [activityType, setActivityType] = useState("");
  const [minutes, setMinutes] = useState("");
  const [comment, setComment] = useState("");
  const [submitting, setSubmitting] = useState(false);
  const [error, setError] = useState("");
  const [showMachTable, setShowMachTable] = useState(false);
  useEffect(() => {
    document.documentElement.setAttribute('data-theme', config.colors.saigoTheme);

    // Trigger Instagram check when the component mounts
    triggerInstagramCheck();
  }, []);
  const { data, error: fetchError } = useSWR<LeaderboardData>(
    '/api/saigo/leaderboard',
    fetcher,
    {
      refreshInterval: 30000,  // Refresh every 30 seconds
      revalidateOnFocus: true,
      dedupingInterval: 5000,
    }
  );


  if (error) {
    console.error('Error loading leaderboard:', error);
    return <div className="flex flex-col items-center justify-center h-screen">
      <ButtonAccount />
      <div className="text-red-500">Error loading leaderboard data</div>
    </div>;
  }
  if (!data) return <LoadingPage />;

  const { leaderboardData, practiceSummary, dailyPoints, stackedData, practiceTypes } = data;

  const showCountdown = true;

  anime({
    targets: 'h1',
    strokeDashoffset: [anime.setDashoffset, 0],
    easing: 'easeInOutSine',
    duration: 1500,
    delay: function (el, i) { return i * 250 },
    direction: 'alternate',
    loop: true
  })

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setSubmitting(true);
    setError("");

    const payload = {
      activityType,
      minutes,
      comment,
    };

    const response = await fetch("/api/saigo/practice", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload),
    });

    if (!response.ok) {
      const err = await response.json();
      setError(err.error || "Submission failed");
    } else {
      setShowForm(false);
      // Trigger a revalidation of the SWR cache
      mutate('/api/saigo/leaderboard');
    }

    setSubmitting(false);
    setActivityType("");
    setMinutes("");
    setComment("");
  };
  const totalPoints = leaderboardData.reduce((sum: number, user) => sum + user.totalPoints, 0);

  // Get the competition start date for the timer
  const competitionStartDate = getCompetitionStartDate();

  return (
    <div className="mockup-window border bg-base-300 border m-4">
      <div className="flex flex-row items-end justify-end mr-4 gap-0 md:gap-4">
        <button
          onClick={() => setShowForm(true)}
          className="btn btn-white btn-outline"
        >
          Submit Practice
        </button>
        <ButtonAccount />
      </div>
      <div className="flex flex-col items-center justify-center min-h-[60vh]">
        <div className="flex flex-row items-center justify-center w-full py-5">
          <SaigoAnimatedText text="White Dragon" />
        </div>
        <div className="flex flex-row items-center justify-center w-full py-5">
          <Image src="/images/hbi_transparent.webp" alt="Saigo Logo" width={200} height={200} />
        </div>
        {showCountdown && (
          <div className="flex flex-col items-center justify-center w-full py-5">
            <div className="text-center mb-2 text-xl font-bold">Time Elapsed</div>
            <Timer enhanced={true} startDate={competitionStartDate} />
          </div>
        )}



        {showForm ? (
          <form onSubmit={handleSubmit} className="bg-gray-800 rounded-lg p-6 w-full max-w-4xl">
            <h2 className="text-2xl font-bold text-white mb-4 animate-pulse">Submit Activity</h2>

            <div className="mb-4">
              <label className="block text-white text-sm font-bold mb-2">
                Activity Type
              </label>
              <select
                value={activityType}
                onChange={(e) => setActivityType(e.target.value)}
                required
                className="select select-secondary w-full"
              >
                <option value="">Select an activity</option>
                {practiceTypes.map((type: string) => (
                  <option key={type} value={type}>
                    {type}
                  </option>
                ))}
              </select>
            </div>

            <div className="mb-4">
              <label className="block text-white text-sm font-bold mb-2">
                Minutes
              </label>
              <input
                type="number"
                min={1}
                placeholder="0"
                value={minutes}
                onChange={(e) => {
                  const value = e.target.value;
                  if (value === "") {
                    setMinutes("");
                  } else {
                    setMinutes(value.replace(/^0+/, "") || "");
                  }
                }}
                required
                className="input input-bordered input-secondary w-full"
              />
            </div>

            <div className="mb-4">
              <label className="block text-white text-sm font-bold mb-2">
                Log
              </label>
              <textarea
                value={comment}
                rows={3}
                onChange={(e) => setComment(e.target.value)}
                className="textarea textarea-bordered textarea-secondary w-full"
                placeholder="What did you learn? Can it help others? What was the most important lesson? (This feature is in development...)"
                disabled={true}
              />
            </div>

            {error && (
              <div className="mb-4 text-red-500">
                {error}
              </div>
            )}

            <div className="flex gap-3">
              <button
                type="submit"
                disabled={submitting}
                className="btn btn-white btn-outline btn-sm"
              >
                {submitting ? "Submitting..." : "Submit"}
              </button>
              <button
                type="button"
                onClick={() => setShowForm(false)}
                className="btn btn-error btn-outline btn-sm"
              >
                Cancel
              </button>
            </div>
          </form>
        ) : (
          <LeaderboardTable data={leaderboardData} />
        )}

        <div className="w-full max-w-4xl mx-auto mt-4 bg-gray-800 rounded-lg p-4">
          <div className="flex justify-between items-center text-gray-300 font-bold border-t-2 border-gray-600 py-3 px-4">
            <span>Alisone</span>
            <span>{totalPoints}</span>
          </div>
        </div>

        {/* Practice Summary Panel */}
        <div className="w-full max-w-4xl mx-auto mt-6 bg-gray-800 rounded-lg p-4 mb-8">
          <h2 className="text-2xl font-bold text-white mb-4">Practice Summary</h2>
          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
            {practiceSummary
              .filter(practice => practice.totalPoints > 0)
              .map((practice, index) => (
                <div key={index} className="bg-gray-700 rounded-lg p-4">
                  <div
                    className="text-gray-300 font-medium mb-1"
                    style={{
                      color:
                        (PRACTICE_TYPES_COLORS.find((item) => item.type === practice.type)
                          ?.color) || "#000000",
                    }}
                  >
                    {practice.type}
                  </div>
                  <div className="flex flex-row items-end justify-between">
                    <div className="text-2xl font-bold text-white">
                      {practice.totalPoints} <span className="text-sm">mins</span>
                    </div>
                    <div className="text-xs opacity-50">({Math.floor(practice.totalPoints / 7)} pts/d)</div>
                  </div>
                </div>
              ))}
          </div>
        </div>

        {/* Pie Chart Panel */}
        <div className="w-full max-w-4xl mx-auto mt-8 bg-gray-800 rounded-lg p-4 mb-8">
          <h2 className="text-2xl font-bold text-white mb-4">Practice Distribution</h2>

          <div className="flex flex-col md:flex-row">
            {/* Left side: Pie chart only */}
            <div className="w-full md:w-1/2 h-[300px] md:h-[400px] flex justify-center items-center">
              <ResponsiveContainer width="100%" height="100%">
                <PieChart>
                  <Pie
                    data={practiceSummary.filter(practice => practice.totalPoints > 0)}
                    dataKey="totalPoints"
                    nameKey="type"
                    cx="50%"
                    cy="50%"
                    outerRadius={90}
                    innerRadius={0}
                    // No labels on the chart itself
                    label={false}
                    labelLine={false}
                  >
                    {practiceSummary.filter(practice => practice.totalPoints > 0).map((entry) => {
                      const colorObj = PRACTICE_TYPES_COLORS.find(
                        (item) => item.type === entry.type
                      );
                      const fillColor = colorObj ? colorObj.color : "#000000";
                      return <Cell key={entry.type} fill={fillColor} />;
                    })}
                  </Pie>
                  <Tooltip
                    formatter={(value, name) => {
                      const numValue = Number(value);
                      const percent = Math.round((numValue / totalPoints) * 100);
                      return [`${numValue} minutes (${percent}%)`, name];
                    }}
                    contentStyle={{
                      backgroundColor: "#1F2937",
                      border: "none",
                      borderRadius: "0.5rem",
                      color: "#F3F4F6",
                    }}
                  />
                </PieChart>
              </ResponsiveContainer>
            </div>

            {/* Right side: Custom legend */}
            <div className="w-full md:w-1/2 overflow-y-auto" style={{ maxHeight: "400px" }}>
              <div className="grid grid-cols-1 gap-2 p-2">
                {practiceSummary
                  .filter(practice => practice.totalPoints > 0)
                  .sort((a, b) => b.totalPoints - a.totalPoints) // Sort by points descending
                  .map((practice, index) => {
                    const colorObj = PRACTICE_TYPES_COLORS.find(item => item.type === practice.type);
                    const fillColor = colorObj ? colorObj.color : "#000000";
                    const practicePoints = Number(practice.totalPoints);
                    const percentage = Math.round((practicePoints / totalPoints) * 100);

                    return (
                      <div key={index} className="flex items-center p-1 hover:bg-gray-700 rounded">
                        <div
                          className="w-4 h-4 mr-2 rounded-sm"
                          style={{ backgroundColor: fillColor }}
                        ></div>
                        <div className="flex-1 text-sm">{practice.type}</div>
                        <div className="text-sm font-medium whitespace-nowrap">
                          {practice.totalPoints} mins
                        </div>
                        <div className="ml-2 text-sm font-bold whitespace-nowrap">
                          {percentage}%
                        </div>
                      </div>
                    );
                  })
                }
              </div>
            </div>
          </div>
        </div>

        {/* Points Per Day Panel */}
        <div className="w-full max-w-4xl mx-auto mt-8 bg-gray-800 rounded-lg p-4 mb-8">
          <h2 className="text-2xl font-bold text-white mb-4">Daily Activity</h2>
          <LineGraph data={dailyPoints} />
        </div>

        {/* Practice Types Stacked Chart */}
        <div className="w-full max-w-4xl mx-auto mt-8 bg-gray-800 rounded-lg p-4 mb-8">
          <h2 className="text-2xl font-bold text-white mb-4">Practice Types Breakdown</h2>
          <PracticeTypesStackedBarChart data={stackedData} practiceTypes={practiceTypes} />
        </div>

        {/* Cumulative Points Panel */}
        <div className="w-full max-w-4xl mx-auto mt-8 bg-gray-800 rounded-lg p-4 mb-8">
          <h2 className="text-2xl font-bold text-white mb-4">Cumulative Progress</h2>
          <CumulativePointsAreaChart dailyPoints={dailyPoints} />
        </div>

        {/* Mach Rank Table - Toggleable */}
        <div className="w-full max-w-4xl mt-4 mx-auto mb-6">
          <button
            onClick={() => setShowMachTable(!showMachTable)}
            className="btn btn-white btn-outline w-3/4 mb-2 flex items-center justify-around mx-auto"
          >
            <span className="text-md font-bold">Mach Speeds (30 days)</span>
            <span className="text-md">{showMachTable ? '‚ñ≤' : '‚ñº'}</span>
          </button>

          {showMachTable && (
            <div className="bg-gray-800 rounded-lg p-4 transition-all duration-300 ease-in-out">
              <div className="overflow-x-auto">
                <table className="table table-zebra w-full">
                  <thead>
                    <tr className="bg-gray-700 text-white">
                      <th className="text-center">Mach Rank</th>
                      <th className="text-center">mph</th>
                      <th className="text-center">mph/d</th>
                      <th className="text-center">hrs/d</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 1</td>
                      <td className="text-center">767</td>
                      <td className="text-center">25.6</td>
                      <td className="text-center">0.4</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 2</td>
                      <td className="text-center">1,534</td>
                      <td className="text-center">51.1</td>
                      <td className="text-center">0.9</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 3</td>
                      <td className="text-center">2,301</td>
                      <td className="text-center">76.7</td>
                      <td className="text-center">1.3</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 4</td>
                      <td className="text-center">3,068</td>
                      <td className="text-center">102.3</td>
                      <td className="text-center">1.7</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 5</td>
                      <td className="text-center">3,835</td>
                      <td className="text-center">127.8</td>
                      <td className="text-center">2.1</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 6</td>
                      <td className="text-center">4,602</td>
                      <td className="text-center">153.4</td>
                      <td className="text-center">2.6</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 7</td>
                      <td className="text-center">5,369</td>
                      <td className="text-center">179.0</td>
                      <td className="text-center">3.0</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 8</td>
                      <td className="text-center">6,136</td>
                      <td className="text-center">204.5</td>
                      <td className="text-center">3.4</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 9</td>
                      <td className="text-center">6,903</td>
                      <td className="text-center">230.1</td>
                      <td className="text-center">3.8</td>
                    </tr>
                    <tr className="hover:bg-gray-600">
                      <td className="text-center font-bold">Mach 10</td>
                      <td className="text-center">7,670</td>
                      <td className="text-center">255.7</td>
                      <td className="text-center">4.3</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default LiveLeaderboard;
</file>

<file path="app/synai/page.tsx">
import type { Metadata } from "next";
import SynaiHero from "./components/SynaiHero";
import ComparisonSection from "./components/ComparisonSection";
import FeaturesSection from "./components/FeaturesSection";
import ProcessSection from "./components/ProcessSection";
import TechnicalSection from "./components/TechnicalSection";
import CTASection from "./components/CTASection";

export const metadata: Metadata = {
  title: "Synai: Your Personal AI Coach | Oceanheart.ai",
  description: "What if you had an AI that truly understood your unique patterns, values, and goals? Not generic advice, but deeply personalized guidance built from a clinical assessment of who you are.",
  openGraph: {
    title: "Synai: Your Personal AI Coach",
    description: "Your Personal AI Coach, Engineered for You. Deeply personalized guidance built from clinical assessment.",
    url: "https://oceanheart.ai/synai",
    siteName: "Oceanheart.ai",
    type: "website",
  },
  twitter: {
    card: "summary_large_image",
    title: "Synai: Your Personal AI Coach",
    description: "Your Personal AI Coach, Engineered for You. Deeply personalized guidance built from clinical assessment.",
  },
};

export default function SynaiPage() {
  return (
    <main className="min-h-screen">
      <SynaiHero />
      <ComparisonSection />
      <FeaturesSection />
      <ProcessSection />
      <TechnicalSection />
      <CTASection />
    </main>
  );
}
</file>

<file path="components/FeaturesAccordion.tsx">
"use client";

import { useState, useRef } from "react";
import type { JSX } from "react";
// Updated Icons to better reflect the new offerings
import { FaUserTie, FaUsers, FaBook, FaCompass, FaMicrophone } from "react-icons/fa";

interface Feature {
  title: string;
  description: string;
  svg?: JSX.Element;
}

// The Art of Personal AI framework and offerings
const features: Feature[] = [
  {
    title: "Your Guide: Conscious AI Integration with Kai",
    description:
      "I'm Kai, your specialist in Conscious AI Integration. With 15 years as a psychotherapist, 5 as a software engineer, and two decades of contemplative practice, I bridge the technical with the deeply human. 'The Art of Personal AI' isn't another course; it's my framework to help you intuitively understand and master AI.",
    svg: <FaUserTie className="w-6 h-6" />,
  },
  {
    title: "The Framework: The Art of Personal AI",
    description:
      "Unlock your potential with a 3-layer model:\n‚Ä¢ Story ¬∑ Spirit ¬∑ Science ‚Üí Amplified Consciousness\n‚Ä¢ Prompt ¬∑ Context ¬∑ Model ‚Üí Amplified Sensitivity\n‚Ä¢ IQ ¬∑ EQ ¬∑ AI ‚Üí Amplified Intelligence",
    svg: <FaCompass className="w-6 h-6" />,
  },
  {
    title: "Executive Guidance Partnership",
    description:
      "1:1 strategic partnership for wellbeing leaders. Personalized AI strategy with ethical framework integration and transformative coaching to create your roadmap for conscious AI integration that amplifies your human edge.",
    svg: <FaUserTie className="w-6 h-6" />,
  },
  // {
  //   title: "'Bridging Worlds' Workshop",
  //   description:
  //     "Immersive group learning for AI discernment. Connect with peers while integrating technology and wisdom traditions in a transformative setting. Build confidence and clarity in your relationship with AI.",
  //   svg: <FaUsers className="w-6 h-6" />,
  // },
  {
    title: "First Principles AI Course",
    description:
      "Self-paced foundational AI learning with lifetime access. Master core AI concepts, ethical integration practices, and the Story, Spirit, Science framework that transcends trending tools and platforms.",
    svg: <FaBook className="w-6 h-6" />,
  },
];

// The component to display the feature accordion item
const Item = ({
  feature,
  isOpen,
  onClick,
  index,
}: {
  feature: Feature;
  isOpen: boolean;
  onClick: () => void;
  index: number;
}) => {
  const accordion = useRef<HTMLDivElement>(null);
  const { title, description, svg } = feature;

  return (
    <li className="py-4 border-b border-base-content/10 last:border-none">
      <button
        className="flex items-center w-full group py-2"
        onClick={onClick}
      >
        <div className="flex items-center justify-center shrink-0 mr-4 w-10 h-10 rounded-full bg-base-300 text-primary">
          {svg ? (
            svg
          ) : (
            <span className="text-2xl">{index + 1}</span>
          )}
        </div>
        <div className="text-left">
          <h3 className="font-semibold text-lg">{title}</h3>
        </div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          className={`w-5 h-5 ml-auto transition-transform duration-300 shrink-0 ${isOpen ? "transform rotate-90" : ""}`}
        >
          <path
            fillRule="evenodd"
            d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
            clipRule="evenodd"
          />
        </svg>
      </button>
      <div
        ref={accordion}
        className="transition-all duration-300 overflow-hidden"
        style={
          isOpen
            ? { maxHeight: accordion.current?.scrollHeight, opacity: 1 }
            : { maxHeight: 0, opacity: 0 }
        }
      >
        <div className="pb-2 pl-14">
          <p className="text-base-content/80 leading-relaxed whitespace-pre-line">
            {description}
          </p>
        </div>
      </div>
    </li>
  );
};

// A component to display features in an accordion
const FeaturesAccordion = () => {
  const [featureSelected, setFeatureSelected] = useState<number>(0);

  return (
    <section
      className="py-12 md:py-24 space-y-12 md:space-y-24 max-w-7xl mx-auto bg-base-100"
      id="features"
    >
      <div className="px-4 sm:px-6 lg:px-8">
        {/* Headline */}
        <h2 className="font-extrabold text-3xl lg:text-6xl tracking-tight mb-8 md:mb-16">
          The Art of Personal AI: <span className="text-blue-400">Your Path to Conscious Integration</span>
          <span className="bg-neutral text-neutral-content px-2 md:px-4 ml-1 md:ml-1.5 leading-relaxed block sm:inline-block mt-2 sm:mt-0">
            Where Human Wisdom Meets Technical Fluency
          </span>
        </h2>
        <div className="flex justify-center">
          <div className="w-full max-w-4xl">
            <ul className="w-full">
              {features.map((feature, i) => (
                <Item
                  key={feature.title}
                  index={i}
                  feature={feature}
                  isOpen={featureSelected === i}
                  onClick={() => setFeatureSelected(i)}
                />
              ))}
            </ul>
          </div>
        </div>
      </div>
    </section>
  );
};

export default FeaturesAccordion;
</file>

<file path="package.json">
{
  "name": "oceanheart-ui",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "postbuild": "next-sitemap",
    "start": "next start",
    "lint": "next lint",
    "test": "bun test --preload=jest.setup.ts",
    "test:watch": "bun test --watch --preload=jest.setup.ts",
    "cli": "ts-node bin/cli.ts",
    "add-instagram-check": "app/saigo/lib/add-instagram-check.ts",
    "add-instagram-check-with-users": "app/saigo/lib/add-instagram-check-with-users.ts"
  },
  "dependencies": {
    "@faker-js/faker": "^9.5.0",
    "@headlessui/react": "^1.7.19",
    "@mdx-js/loader": "^2.3.0",
    "@mdx-js/react": "^2.3.0",
    "@next/mdx": "^13.5.8",
    "@next/third-parties": "^15.2.0",
    "@supabase/ssr": "^0.4.1",
    "@supabase/supabase-js": "^2.48.1",
    "@types/node-schedule": "^2.1.7",
    "@vercel/speed-insights": "^1.2.0",
    "animejs": "^3.2.2",
    "axios": "^1.7.9",
    "better-sqlite3": "^11.8.1",
    "cli-table3": "^0.6.3",
    "crisp-sdk-web": "^1.0.25",
    "dotenv": "^16.4.7",
    "eslint": "^9.20.1",
    "eslint-config-next": "^15.1.7",
    "faker": "^6.6.6",
    "fast-xml-parser": "^4.5.3",
    "form-data": "^4.0.2",
    "framer-motion": "^12.4.10",
    "inquirer": "^12.4.2",
    "next": "^14.2.25",
    "next-auth": "^4.24.11",
    "next-sitemap": "^4.2.3",
    "nextjs-toploader": "^1.6.12",
    "node-schedule": "^2.1.1",
    "nodemailer": "^6.10.0",
    "openai": "^4.85.3",
    "pixi.js": "^8.8.0",
    "react": "18.2.0",
    "react-countdown": "^2.3.6",
    "react-data-table-component": "^7.6.2",
    "react-dom": "18.2.0",
    "react-hot-toast": "^2.5.2",
    "react-icons": "^5.5.0",
    "react-syntax-highlighter": "^15.6.1",
    "react-tooltip": "^5.28.0",
    "recharts": "^2.15.1",
    "resend": "^4.1.2",
    "sharp": "^0.33.5",
    "stripe": "^17.7.0",
    "supabase": "^2.12.1",
    "swr": "^2.3.2",
    "uuid": "^11.1.0",
    "zod": "^3.24.2"
  },
  "devDependencies": {
    "@testing-library/jest-dom": "^6.6.3",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^14.6.1",
    "@types/animejs": "^3.1.13",
    "@types/better-sqlite3": "^7.6.12",
    "@types/bun": "^1.2.10",
    "@types/jest": "^29.5.14",
    "@types/mdx": "^2.0.13",
    "@types/node": "^22.14.1",
    "@types/react": "^19.0.12",
    "@types/react-dom": "^18.3.5",
    "@types/react-syntax-highlighter": "^15.5.13",
    "autoprefixer": "^10.4.20",
    "cypress": "^14.3.1",
    "cypress-vite": "^1.6.0",
    "daisyui": "^4.12.23",
    "postcss": "^8.5.2",
    "tailwindcss": "^3.4.17",
    "typescript": "^5.7.3"
  },
  "pnpm": {
    "onlyBuiltDependencies": [
      "@vercel/speed-insights",
      "better-sqlite3",
      "sharp",
      "supabase"
    ]
  },
  "trustedDependencies": [
    "@vercel/speed-insights"
  ]
}
</file>

<file path="app/synai/components/ComparisonSection.tsx">
export default function ComparisonSection() {
  return (
    <section className="py-24 bg-gradient-to-b from-gray-50 to-white">
      <div className="container mx-auto px-6 md:px-4">
        {/* Section Header */}
        <div className="text-center mb-20 synai-fade-in">
          <h2 className="text-3xl md:text-5xl font-bold text-gray-900 mb-6">
            Generic AI vs. Personal AI
          </h2>
          <p className="text-lg md:text-2xl text-gray-600 max-w-4xl mx-auto leading-relaxed">
            The difference between asking ChatGPT for life advice and having a coach who's studied you for years
          </p>
        </div>

        {/* Comparison Grid */}
        <div className="grid md:grid-cols-2 gap-12 max-w-7xl mx-auto">
          {/* Generic AI Card */}
          <div className="relative bg-gradient-to-br from-red-50 to-red-100 rounded-3xl p-10 shadow-xl border border-red-200 synai-fade-in synai-fade-in-delay-1">
            <div className="absolute -top-4 -right-4 w-8 h-8 bg-red-500 rounded-full opacity-20"></div>
            <div className="absolute -bottom-4 -left-4 w-6 h-6 bg-red-400 rounded-full opacity-30"></div>

            <h3 className="text-2xl md:text-3xl font-bold text-red-700 mb-8 flex items-center">
              <div className="w-3 h-3 bg-red-500 rounded-full mr-4 animate-pulse"></div>
              Generic AI Coaching
            </h3>
            <ul className="space-y-5">
              <li className="flex items-start">
                <div className="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úó</span>
                </div>
                <span className="text-red-800 font-medium text-base md:text-lg">One-size-fits-all responses</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úó</span>
                </div>
                <span className="text-red-800 font-medium text-base md:text-lg">Surface-level advice that sounds good but doesn't fit</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úó</span>
                </div>
                <span className="text-red-800 font-medium text-base md:text-lg">No understanding of your values or patterns</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úó</span>
                </div>
                <span className="text-red-800 font-medium text-base md:text-lg">Starts from zero every conversation</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úó</span>
                </div>
                <span className="text-red-800 font-medium text-base md:text-lg">Looks at symptoms, not root causes</span>
              </li>
            </ul>
          </div>

          {/* Synai Card */}
          <div className="relative bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl p-10 shadow-xl border border-blue-200 synai-fade-in synai-fade-in-delay-2">
            <div className="absolute -top-4 -right-4 w-8 h-8 bg-blue-500 rounded-full opacity-20"></div>
            <div className="absolute -bottom-4 -left-4 w-6 h-6 bg-indigo-400 rounded-full opacity-30"></div>

            <h3 className="text-2xl md:text-3xl font-bold text-blue-700 mb-8 flex items-center">
              <div className="w-3 h-3 bg-blue-500 rounded-full mr-4 animate-pulse"></div>
              Synai: Your Personal AI
            </h3>
            <ul className="space-y-5">
              <li className="flex items-start">
                <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úì</span>
                </div>
                <span className="text-blue-800 font-medium text-base md:text-lg">Built from your professional evidence-based evaluation</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úì</span>
                </div>
                <span className="text-blue-800 font-medium text-base md:text-lg">Knows your history, values, and goals</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úì</span>
                </div>
                <span className="text-blue-800 font-medium text-base md:text-lg">Guidance tailored to your specific patterns</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úì</span>
                </div>
                <span className="text-blue-800 font-medium text-base md:text-lg">Grounded in ACT (Acceptance &amp; Commitment Therapy)</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úì</span>
                </div>
                <span className="text-blue-800 font-medium text-base md:text-lg">Evolves with you through ongoing dialogue</span>
              </li>
              <li className="flex items-start">
                <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-4 mt-1 flex-shrink-0">
                  <span className="text-white text-sm font-bold">‚úì</span>
                </div>
                <span className="text-blue-800 font-medium text-lg">Addresses root causes and unconscious blocks</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/synai/components/FeaturesSection.tsx">
export default function FeaturesSection() {
  const features = [
    {
      title: "Clinical Foundation",
      description: "Starts with Kai's professional assessment of your patterns, values, and goals using evidence-based therapeutic frameworks.",
      color: "from-blue-400 to-blue-600"
    },
    {
      title: "Advanced Prompt Engineering",
      description: "Your assessment becomes a sophisticated AI prompt‚Äînot just instructions, but a living knowledge graph of who you are.",
      color: "from-purple-400 to-purple-600"
    },
    {
      title: "Personalized Guidance",
      description: "Every conversation builds on deep understanding of your unique context, helping you uncover unknown unknowns about yourself.",
      color: "from-green-400 to-green-600"
    },
    {
      title: "Continuous Evolution",
      description: "Your AI coach learns and adapts, updating its understanding as you grow and change through life's journey.",
      color: "from-orange-400 to-orange-600"
    },
    {
      title: "Contained & Secure",
      description: "Your personal AI exists only for you. Your own container, with all the depth of understanding you'd expect from years of therapy.",
      color: "from-red-400 to-red-600"
    },
    {
      title: "Unprecedented Quality",
      description: "This isn't ChatGPT with a nice interface. It's a professionally engineered system that represents the cutting edge of personalized AI.",
      color: "from-indigo-400 to-indigo-600"
    }
  ];

  return (
    <section className="py-24 bg-white">
      <div className="container mx-auto px-6 md:px-4">
        {/* Section Header */}
        <div className="text-center mb-20 synai-fade-in">
          <h2 className="text-3xl md:text-5xl font-bold text-gray-900 mb-6">
            How Synai Works
          </h2>
          <p className="text-lg md:text-2xl text-gray-600 max-w-4xl mx-auto leading-relaxed">
            A fusion of clinical expertise, advanced AI engineering, and your unique psychological fingerprint
          </p>
        </div>

        {/* Features Grid */}
        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto">
          {features.map((feature, index) => (
            <div
              key={index}
              className={`text-center p-8 synai-fade-in ${index < 3 ? 'synai-fade-in-delay-1' : index < 6 ? 'synai-fade-in-delay-2' : 'synai-fade-in-delay-3'}`}
            >
              {/* Animated Feature Icon */}
              <div className="relative w-20 h-20 mx-auto mb-8">
                <div className={`absolute inset-0 bg-gradient-to-br ${feature.color} rounded-full animate-pulse`}></div>
                <div className={`absolute inset-2 bg-gradient-to-br ${feature.color} rounded-full opacity-70 animate-spin`} style={{ animationDuration: '8s' }}></div>
                <div className={`absolute inset-4 bg-gradient-to-br ${feature.color} rounded-full animate-ping`} style={{ animationDuration: '3s' }}></div>
                <div className={`absolute inset-6 bg-white rounded-full shadow-lg`}></div>
                <div className={`absolute inset-7 bg-gradient-to-br ${feature.color} rounded-full`}></div>
              </div>

              {/* Feature Title */}
              <h4 className="text-xl md:text-2xl font-bold text-gray-900 mb-6">
                {feature.title}
              </h4>

              {/* Feature Description */}
              <p className="text-gray-600 leading-relaxed text-base md:text-lg">
                {feature.description}
              </p>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/synai/components/ProcessSection.tsx">
export default function ProcessSection() {
  const steps = [
    {
      number: "1",
      title: "Deep Assessment",
      description: "Kai conducts a comprehensive clinical evaluation, mapping your values, patterns, goals, and unconscious blocks using proven therapeutic frameworks."
    },
    {
      number: "2",
      title: "AI Engineering",
      description: "Your assessment becomes a sophisticated prompt system‚Äîa private AI that understands you at a level that generic tools simply cannot match."
    },
    {
      number: "3",
      title: "Ongoing Partnership",
      description: "Your personal AI coach guides you through life's challenges, helping you make decisions aligned with your deepest values and highest potential."
    }
  ];

  return (
    <section className="py-32 bg-gradient-to-br from-primary to-secondary relative overflow-hidden">
      {/* Background decoration */}
      <div className="absolute inset-0 opacity-10">
        <div className="absolute top-20 left-10 w-32 h-32 bg-white rounded-full blur-3xl"></div>
        <div className="absolute bottom-20 right-10 w-40 h-40 bg-white rounded-full blur-3xl"></div>
        <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-white rounded-full blur-3xl"></div>
      </div>

      <div className="container mx-auto px-6 md:px-4 relative z-10">
        {/* Section Header */}
        <div className="text-center mb-24 synai-fade-in">
          <h2 className="text-4xl md:text-6xl font-bold text-white mb-8">
            Your Journey to Personal AI
          </h2>
          <p className="text-xl md:text-3xl text-white/90 max-w-4xl mx-auto leading-relaxed">
            From clinical assessment to your private AI coach in three steps
          </p>
        </div>

        {/* Process Steps */}
        <div className="grid md:grid-cols-3 gap-12 max-w-7xl mx-auto">
          {steps.map((step, index) => (
            <div
              key={index}
              className={`relative bg-white/95 backdrop-blur-lg rounded-3xl p-10 shadow-2xl text-center synai-fade-in synai-fade-in-delay-${index + 1}`}
            >
              {/* Step Number Badge */}
              <div className="absolute -top-6 left-1/2 transform -translate-x-1/2 w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 text-white rounded-full flex items-center justify-center font-bold text-xl md:text-2xl shadow-xl">
                {step.number}
              </div>

              {/* Decorative elements */}
              <div className="absolute -top-2 -right-2 w-6 h-6 bg-blue-400 rounded-full opacity-60"></div>
              <div className="absolute -bottom-2 -left-2 w-4 h-4 bg-purple-400 rounded-full opacity-60"></div>

              {/* Step Content */}
              <div className="pt-8">
                <h4 className="text-xl md:text-2xl font-bold text-gray-900 mb-6">
                  {step.title}
                </h4>
                <p className="text-gray-700 leading-relaxed text-base md:text-lg">
                  {step.description}
                </p>
              </div>
            </div>
          ))}
        </div>

        {/* Connecting Flow Lines */}
        <div className="hidden md:flex items-center justify-center mt-16 relative">
          <div className="absolute inset-0 flex items-center justify-center">
            <div className="w-full max-w-5xl flex justify-between px-20">
              <div className="w-32 h-1 bg-white/30 rounded-full"></div>
              <div className="w-32 h-1 bg-white/30 rounded-full"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="components/Pricing.tsx">
import config from "@/config";
import ButtonCheckout from "@/components/ButtonCheckout";
import Link from "next/link";

// Format price with thousand separators (e.g., 1000 -> 1,000)
const formatPrice = (price: number): string =>
  price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

const Pricing = () => {
  return (
    <section id="pricing" className="bg-base-200 overflow-hidden px-0 md:px-24">
      <div className="py-24 px-8 max-w-7xl mx-auto">
        {/* Offerings header */}
        <div className="flex flex-col text-center w-full mb-12">
          <p className="font-medium text-primary mb-4 text-lg">Synai Coaching Tiers</p>
          <h2 className="font-bold text-3xl lg:text-5xl tracking-tight">
            Your <span className="text-primary font-extrabold">Personal AI Coach</span>: Choose Your <span className="text-secondary font-extrabold">Journey</span>
          </h2>
          <p className="text-xl text-base-content/70 mt-6 max-w-3xl mx-auto leading-relaxed">
            From <span className="text-primary font-semibold">clinical assessment</span> to ongoing <span className="text-secondary font-semibold">mastery</span> - each tier builds on comprehensive psychological profiling to create your unique AI coaching experience.
          </p>
        </div>

        {/* Synai Introduction */}
        <div className="mb-16 rounded-2xl p-8 shadow-2xl bg-gradient-to-br from-primary to-secondary text-white relative overflow-hidden">
          <div className="relative z-10 flex flex-col items-center gap-6 text-center">
            <h3 className="text-2xl md:text-3xl font-bold">
              Introducing <span className="text-white font-extrabold">Synai</span>: Your Personal AI Coach
            </h3>
            <p className="max-w-3xl text-lg text-white/95 leading-relaxed">
              Unlike generic AI that gives one-size-fits-all advice, <span className="text-white font-semibold">Synai</span> is built from your unique clinical assessment. 
              Each tier includes comprehensive psychological profiling with Kai to create an AI coach that truly understands 
              your patterns, values, and goals.
            </p>
            <Link href="/synai" className="btn btn-white text-primary btn-lg shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 font-bold border-2 border-white/20">
              Learn More About Synai
            </Link>
          </div>
        </div>

        {/* ‚è≥ Time-Warp Lens */}
        {/* <div className="mb-20 rounded-xl p-8 bg-secondary/10 shadow-lg border-l-4 border-secondary relative overflow-hidden max-w-4xl mx-auto transform hover:scale-[1.01] transition-transform duration-300">
          <div className="absolute inset-0 bg-secondary/5 bg-[linear-gradient(45deg,transparent_25%,rgba(68,64,60,0.05)_25%,rgba(68,64,60,0.05)_50%,transparent_50%,transparent_75%,rgba(68,64,60,0.05)_75%)]" style={{ backgroundSize: "10px 10px" }}></div>
          <div className="relative z-10">
            <h3 className="text-2xl font-bold mb-3 text-center md:text-left flex items-center gap-2">
              <span className="inline-block transform -rotate-12">‚è≥</span>
              From Paper Maps to Pocket GPS ‚Äî What About Your Workflow?
            </h3>
            <p className="mb-6 text-center md:text-left text-base-content/90 text-lg">
              Remember hunting street names in an A‚ÄìZ atlas? Smartphones turned that 10-minute ritual into one tap.
              The <span className="font-semibold text-secondary-focus">next leap</span> is quietly forming around AI-assisted work.
            </p>
            <div className="overflow-x-auto bg-base-100 rounded-lg shadow-inner">
              <table className="table table-zebra text-sm w-full">
                <thead>
                  <tr>
                    <th className="bg-secondary/20 font-bold" />
                    <th className="bg-secondary/20 text-center font-bold">2005</th>
                    <th className="bg-secondary/20 text-center font-bold">2025</th>
                    <th className="bg-secondary/20 text-center font-bold">Tomorrow</th>
                    <th className="bg-secondary/20 text-center font-bold">Hours / yr*</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Find lunch spot</td>
                    <td className="text-center">15 min</td>
                    <td className="text-center">3 min</td>
                    <td className="text-center">30 sec</td>
                    <td className="text-center font-semibold">‚âà30</td>
                  </tr>
                  <tr>
                    <td>Draft client email</td>
                    <td className="text-center">25 min</td>
                    <td className="text-center">15 min</td>
                    <td className="text-center">4 min</td>
                    <td className="text-center font-semibold">‚âà55</td>
                  </tr>
                  <tr>
                    <td>Brainstorm slides</td>
                    <td className="text-center">40 min</td>
                    <td className="text-center">25 min</td>
                    <td className="text-center">6 min</td>
                    <td className="text-center font-semibold">‚âà80</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p className="mt-4 text-sm md:text-base text-right">
              *Two occurrences per week ‚Üí <span className="font-semibold text-secondary-focus">165+ hours</span> quietly reclaimed each year.
            </p>
          </div>
        </div> */}

        {/* Pricing cards */}
        <div className="relative flex flex-col lg:flex-row items-center lg:items-stretch gap-8 justify-center">
          {config.stripe.plans.map((plan) => (
            <div key={plan.priceId} className="relative w-full max-w-lg">
              {plan.isFeatured && (
                <>
                  <div className="absolute -top-4 left-1/2 -translate-x-1/2 z-30">
                    <div className="bg-gradient-to-r from-secondary to-secondary-focus text-secondary-content px-6 py-2 rounded-full shadow-lg font-bold text-sm uppercase tracking-wider border-2 border-white">
                      ‚≠ê Most Popular
                    </div>
                  </div>
                  <div className="absolute -inset-[2px] rounded-xl bg-gradient-to-br from-secondary to-secondary-focus z-10 shadow-xl" />
                </>
              )}

              <div className={`relative z-20 h-full p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 ${plan.isFeatured ? 'bg-base-100 mt-4' : 'bg-base-100'}`} style={{display: 'grid', gridTemplateRows: 'auto auto auto 1fr auto'}}>
                
                {/* Row 1: Title - Fixed Height */}
                <div className="h-16 flex items-center mb-4">
                  <p className="text-xl lg:text-2xl font-bold">
                    <span className="text-secondary">Synai</span> <span className="text-primary">{plan.name.replace('Synai ', '')}</span>
                  </p>
                </div>

                {/* Row 2: Description - Fixed Height */}
                <div className="h-20 flex items-center mb-6">
                  {plan.description && (
                    <p className="text-base-content/80 leading-relaxed text-base">{plan.description}</p>
                  )}
                </div>

                {/* Row 3: Price - Fixed Height */}
                <div className="h-24 flex items-end mb-6">
                  <div className="flex items-end gap-2">
                    {plan.priceAnchor && (
                      <span className="relative text-lg text-base-content/80 mr-1">
                        <span className="absolute inset-x-0 top-1/2 h-[1.5px] bg-base-content" />
                        ¬£{formatPrice(plan.priceAnchor)}
                      </span>
                    )}
                    <p className="text-5xl lg:text-6xl font-extrabold tracking-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                      ¬£{formatPrice(plan.price)}
                    </p>
                    {plan.frequency && (
                      <span className="text-sm text-base-content/70 mb-2 font-medium">{plan.frequency}</span>
                    )}
                  </div>
                </div>

                {/* Row 4: Features - Flexible Height (fills remaining space) */}
                {plan.features && (
                  <div className="mb-6">
                    <ul className="space-y-3 leading-relaxed text-base">
                      {plan.features.map((feature, i) => (
                        <li key={i} className="flex items-start gap-3">
                          <div className="w-5 h-5 rounded-full bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center shrink-0 mt-0.5">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 20 20"
                              fill="currentColor"
                              className="w-3 h-3 text-white"
                            >
                              <path
                                fillRule="evenodd"
                                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                                clipRule="evenodd"
                              />
                            </svg>
                          </div>
                          <span className="text-gray-600 font-medium">{feature.name}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}

                {/* Row 5: CTA - Fixed Height */}
                <div className="space-y-2">
                  {plan.cta ? (
                    <Link href={plan.ctaUrl || "#"} className="btn btn-primary w-full">
                      {plan.cta}
                    </Link>
                  ) : (
                    <ButtonCheckout
                      priceId={plan.priceId}
                      mode="payment"
                      monzoLink={plan.monzoLink}
                      inDevelopment={plan.inDevelopment}
                    />
                  )}
                </div>

                {/* badges */}
                {(plan.inDevelopment || plan.limitedTo) && (
                  <div className="flex flex-col gap-2">
                    {plan.inDevelopment && (
                      <p className="text-xs text-center text-base-content/80">Coming soon ‚Äì join the waitlist</p>
                    )}
                    {plan.limitedTo && (
                      <p className="text-xs text-center text-orange-700 font-medium">
                        {plan.remaining} of {plan.limitedTo} spaces remaining
                      </p>
                    )}
                  </div>
                )}
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
};

export default Pricing;
</file>

<file path="components/Hero.tsx">
"use client";

import Image from "next/image";
import config from "@/config";
import Link from "next/link";

const Hero = () => {

  return (
    <>
      <section className="max-w-7xl mx-auto bg-base-100 flex flex-col lg:flex-row items-center justify-center gap-16 lg:gap-20 px-8 py-8 lg:py-20">
        <div className="flex flex-col gap-10 items-center justify-center text-center w-full lg:w-1/2">

          {/* Headline */}
          <h1 className="font-extrabold text-4xl lg:text-6xl tracking-tight">
            Conscious AI Integration: <span className="text-blue-400 glow-blue">Your Human Edge, Amplified.</span>
          </h1>

          {/* Sub-headline */}
          <p className="text-lg opacity-80 leading-relaxed">
            Overwhelmed by AI&apos;s pace? Master it with heart, clarity, and Kai&apos;s unique guidance.
          </p>

          {/* Framework Snapshot */}
          <div className="flex flex-col gap-6 items-center w-full mt-4">
            <p className="text-lg opacity-80 leading-relaxed">
              <span className="font-bold">Amplified <span className="text-blue-400 glow-blue">Consciousness</span></span>
            </p>
            <p className="text-lg opacity-80 leading-relaxed">
              <span className="font-bold">Amplified <span className="text-blue-400 glow-blue">Sensitivity</span></span>
            </p>
            <p className="text-lg opacity-80 leading-relaxed">
              <span className="font-bold">Amplified <span className="text-blue-400 glow-blue">Intelligence</span></span>
            </p>
          </div>

          {/* Primary CTA */}
          <a href="https://calendar.app.google/85ZdaqYK5vfNk4aH9"
            target="_blank"
            rel="noopener noreferrer"
            className="btn btn-primary btn-wide mt-4">
            Integrate AI Now
          </a>

          {/* Secondary CTA */}
          <Link href="/about-alt" className="link link-hover text-blue-400 glow-blue mt-2">
            Learn about Kai ‚Üí
          </Link>

        </div>
        {/* Image Section zoom in rounded */}
        <div className="lg:w-1/2 flex justify-center items-center">
          <div className="image-container rounded-full overflow-hidden">
            <Image
              src="/images/kai_profile.jpeg"
              alt="Kai - Conscious AI Integration Specialist"
              className="kai-image rounded-full object-cover"
              priority={true}
              width={500}
              height={500}
              style={{
                transform: "scale(1.01)",
                transformOrigin: "center",
                transition: "transform 0.5s ease-in-out",
              }}
            />
          </div>
        </div>
      </section>

      {/* Ethical Mirror Quote Section
      <section className="max-w-5xl mx-auto my-16 px-8">
        <div className="quote-container relative py-12 px-8 bg-opacity-5 bg-blue-400 backdrop-blur-sm rounded-lg border border-blue-400 border-opacity-10">
          <div className="absolute top-6 left-8 opacity-20 text-6xl text-blue-400">&quot;</div>
          <div className="text-center">
            <blockquote className="text-xl md:text-2xl font-light text-gray-100 opacity-50 leading-relaxed">
              <p className="mb-2">&quot;AI isn&apos;t a lottery ticket‚Äîit&apos;s a mirror.</p>
              <p className="mb-2">The sooner you look, the sooner you adjust the reflection.</p>
              <p>Wait too long, and you&apos;re stuck wearing yesterday&apos;s face.&quot;</p>
            </blockquote>
          </div>
          <div className="absolute bottom-6 right-8 opacity-20 text-6xl text-blue-400">&quot;</div>
        </div>
      </section> */}

      <style jsx global>{`
        .glow-blue {
          position: relative;
          color: #60a5fa;
          text-shadow: 0 0 10px rgba(96, 165, 250, 0.47), 0 0 17px rgba(96, 165, 250, 0.33);
          animation: pulse 3s infinite alternate;
        }
        
        @keyframes pulse {
          0% {
            text-shadow: 0 0 10px rgba(96, 165, 250, 0.47), 0 0 17px rgba(96, 165, 250, 0.33);
          }
          100% {
            text-shadow: 0 0 13px rgba(96, 165, 250, 0.6), 0 0 23px rgba(37, 99, 235, 0.47), 0 0 27px rgba(37, 99, 235, 0.27);
          }
        }

        .quote-container {
          box-shadow: 0 0 40px rgba(96, 165, 250, 0.1);
          transition: all 0.5s ease;
        }
        
        .quote-container:hover {
          box-shadow: 0 0 60px rgba(96, 165, 250, 0.2);
        }
        
        .image-container {
          position: relative;
          width: 100%;
          max-width: 500px;
          margin: 0 auto;
          overflow: hidden;
        }
        
        .kai-image {
          width: 100%;
          max-width: 100%;
          border-radius: 0.5rem;
          mask-image: radial-gradient(circle at center, black 85%, transparent 100%);
          -webkit-mask-image: radial-gradient(circle at center, black 85%, transparent 100%);
        }
      `}</style>
    </>
  );
};

export default Hero;
</file>

<file path="config.ts">
import themes from "daisyui/src/theming/themes";
import { ConfigProps } from "./types/config";

const config = {
  // REQUIRED
  appName: "Oceanheart.ai - Conscious AI Integration",
  // REQUIRED: a short description of your app for SEO tags (can be overwritten)
  appDescription: "Human-centric AI coaching with Kai. Master AI with heart, clarity, and purpose using 'The Art of Personal AI' framework. Integrate Story, Spirit, and Science.",
  // REQUIRED (no https://, not trailing slash at the end, just the naked domain)
  domainName: "oceanheart.ai",
  crisp: {
    // Crisp website ID. IF YOU DON'T USE CRISP: just remove this => Then add a support email in this config file (resend.supportEmail) otherwise customer support won't work.
    id: "",
    // Hide Crisp by default, except on route "/". Crisp is toggled with <ButtonSupport/>. If you want to show Crisp on every routes, just remove this below
    onlyShowOnRoutes: ["/"],
  },
  stripe: {
    // Synai Personalized AI Coaching Tiers
    plans: [
      {
        priceId: "price_1RRzzLRVLr5O3VRE5yZYNd5u", // New unique Price ID
        name: "Synai AI-Led Foundation",
        description: "AI-powered assessment -> pro review -> custom Synai AI coach.",
        price: 199, // Scaled from $150 base
        frequency: "one-time",
        features: [
          { name: "AI-Powered Synai Assessment" },
          { name: "Professional Review & Synai Blueprint by Kai" },
          { name: "Custom Synai AI Coach Creation" },
          { name: "ACT-based therapeutic framework foundation" } // Keeping this as a core element
        ],
        disabled: false,
      },
      {
        priceId: "price_1RRzzqRVLr5O3VREwOFUX7M0", // New unique Price ID
        name: "Synai Core",
        description: "1:1 pro assessment -> Synai creation -> follow-up integration.",
        price: 499, // Scaled from $400 base
        frequency: "one-time",
        features: [
          { name: "Personalized Professional Assessment with Kai (90 min)" },
          { name: "Custom Synai AI Coach Creation" },
          { name: "One 90-minute Follow-up Session (Optimization & Integration)" },
          { name: "Personal psychological profile integration" }
        ],
        disabled: false,
      },
      {
        priceId: "price_1RS01PRVLr5O3VREMLZQlizL", // New unique Price ID
        name: "Synai Deep Integration",
        description: "1:1 pro assessment -> Synai creation -> 3x 90-min sessions.",
        price: 997, // Scaled from $750 base
        frequency: "3-month engagement", // Package price, sessions unfold monthly
        features: [
          { name: "Personalized Professional Assessment with Kai (90 min)" },
          { name: "Advanced Custom Synai AI Coach (Deep Psychotherapeutic Integration)" },
          { name: "Three Monthly 90-minute " },
          { name: "Conscious AI Methodology Integration" }
        ],
        isFeatured: true, // This is a substantial offering.
        disabled: false,
      },
      {
        priceId: "price_1RS02qRVLr5O3VRE0uRCrWkc", // New unique Price ID
        name: "Synai Transformation Program",
        description: "8-week AI intensive: assessment, Synai, weekly coaching, psychotherapeutic integration, and Conscious AI Mastery.",
        price: 2199, // Scaled from $1450 base
        frequency: "8-week program",
        features: [
          { name: "Comprehensive Professional Assessment with Kai (90 min)" },
          { name: "Custom Synai AI Coach Creation" },
          { name: "8 Weekly 90-minute Intensive Coaching & Psychotherapeutic Sessions" },
          { name: "Personalized Conscious AI Workflow Development" },
          { name: "Synai MAX - Your Personalized AI Integration Coach" }
        ],
        disabled: false,
      }
    ]
  },
  aws: {
    // If you use AWS S3/Cloudfront, put values in here
    bucket: "bucket-name",
    bucketUrl: `https://bucket-name.s3.amazonaws.com/`,
    cdn: "https://cdn-id.cloudfront.net/",
  },
  resend: {
    // REQUIRED ‚Äî Email 'From' field to be used when sending magic login links
    fromNoReply: `Oceanheart.ai <noreply@oceanheart.ai>`,
    // REQUIRED ‚Äî Email 'From' field to be used when sending other emails, like abandoned carts, updates etc..
    fromAdmin: `Kai at Oceanheart.ai <kai@oceanheart.ai>`,
    // Email shown to customer if they need support. Leave empty if not needed => if empty, set up Crisp above, otherwise you won't be able to offer customer support."
    supportEmail: "kai@oceanheart.ai",
  },
  colors: {
    // REQUIRED ‚Äî The DaisyUI theme to use (added to the main layout.js). Leave blank for default (light & dark mode). If you use any theme other than light/dark, you need to add it in config.tailwind.js in daisyui.themes.
    theme: "synthwave",
    // ARCHIVED: saigoTheme was used for the now-archived Saigo feature
    // saigoTheme: "synthwave",
    // REQUIRED ‚Äî This color will be reflected on the whole app outside of the document (loading bar, Chrome tabs, etc..). By default it takes the primary color from your DaisyUI theme (make sure to update your the theme name after "data-theme=")
    // OR you can just do this to use a custom color: main: "#f37055". HEX only.
    main: themes["light"]["primary"],
  },
  auth: {
    // REQUIRED ‚Äî the path to log in users. It's use to protect private routes (like /dashboard). It's used in apiClient (/libs/api.js) upon 401 errors from our API
    loginUrl: "/signin",
    // REQUIRED ‚Äî the path you want to redirect users to after a successful login (i.e. /dashboard, /private). This is normally a private page for users to manage their accounts. It's used in apiClient (/libs/api.js) upon 401 errors from our API & in ButtonSignin.js
    callbackUrl: "/dashboard",
    // ARCHIVED: Saigo auth configuration - kept commented for reference
    // saigo: {
    //   loginUrl: "/saigo/signin",
    //   callbackUrl: "/saigo/username"
    // }
  },
} as ConfigProps;

export default config;
</file>

<file path="components/Header.tsx">
"use client";
import { useState, useEffect, Suspense } from "react";
import Link from "next/link";
import Image from "next/image";
import AuthButton from "@/components/AuthButton";
import logo from "@/app/icon.png"; // Consider updating if you have a new logo
import config from "@/config";

// Links reflecting "The Art of Personal AI" focus
const links: { href: string; label: string; className?: string }[] = [
  {
    href: "/#pricing",
    label: "Offerings",
  },
  {
    href: "/portfolio",
    label: "Portfolio",
  },
  {
    href: "/about-alt",
    label: "About Kai",
  },
  {
    href: "https://www.oceanheart.blog/",
    label: "Blog",
  },
  {
    href: "/consulting",
    label: "Consulting",
  },
  {
    href: "/synai",
    label: "Synai",
    className: "synai-nav-link",
  }
];

const cta = (
  <Suspense fallback="Loading...">
    <Link
      href="https://calendar.app.google/85ZdaqYK5vfNk4aH9"
      className="btn btn-primary"
    >
      Book a Call
    </Link>
  </Suspense>
);

// Function to split appName into main title and subtitle
const getAppNameParts = () => {
  // Split the appName at the hyphen if it exists
  const parts = config.appName.split(" - ");
  return {
    mainTitle: parts[0] || config.appName, // First part or full name if no hyphen
    subtitle: parts[1] || "", // Second part or empty if no hyphen
  };
};

const Header = () => {
  const [isOpen, setIsOpen] = useState(false);
  const { mainTitle, subtitle } = getAppNameParts();

  return (
    <header className="bg-base-200">
      <nav
        className="container flex items-center justify-between px-8 py-4 mx-auto"
        aria-label="Global"
      >
        {/* Your logo/name on large screens */}
        <div className="flex lg:flex-1">
          <Link
            className="flex items-center gap-2 shrink-0"
            href="/"
            title={config.appName}
          >
            <Image
              src={logo}
              alt={`${mainTitle} logo`}
              className="w-8"
              priority={true}
              width={32}
              height={32}
            />
            <div className="flex flex-col">
              <span className="font-extrabold text-lg">{mainTitle}</span>
              {subtitle && (
                <span className="text-xs">{subtitle}</span>
              )}
            </div>
          </Link>
        </div>
        {/* Burger button to open menu on mobile */}
        <div className="flex lg:hidden">
          <button
            type="button"
            className="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5"
            onClick={() => setIsOpen(true)}
          >
            <span className="sr-only">Open main menu</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              strokeWidth={1.5}
              stroke="currentColor"
              className="w-6 h-6 text-base-content"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
              />
            </svg>
          </button>
        </div>

        {/* Your links on large screens */}
        <div className="hidden lg:flex lg:justify-center lg:gap-12 lg:items-center">
          {links.map((link) => (
            <Link
              href={link.href}
              key={link.href}
              // Removed specific HDI styling unless needed
              className={`link link-hover ${link.className || ''}`}
              title={link.label}
            >
              {link.label}
            </Link>
          ))}
        </div>

        {/* CTA on large screens */}
        <div className="hidden lg:flex lg:justify-end lg:flex-1">{cta}</div>
      </nav>

      {/* Mobile menu */}
      <div className={`relative z-50 ${isOpen ? "" : "hidden"}`}>
        <div
          className={`fixed inset-y-0 right-0 z-10 w-full px-8 py-4 overflow-y-auto bg-base-200 sm:max-w-sm sm:ring-1 sm:ring-neutral/10 transform origin-right transition ease-in-out duration-300`}
        >
          {/* Your logo/name on small screens */}
          <div className="flex items-center justify-between">
            <Link
              className="flex items-center gap-2 shrink-0"
              title={config.appName}
              href="/"
            >
              <Image
                src={logo}
                alt={`${mainTitle} logo`}
                className="w-8"
                priority={true}
                width={32}
                height={32}
              />
              <div className="flex flex-col">
                <span className="font-extrabold text-lg">{mainTitle}</span>
                {subtitle && (
                  <span className="text-xs">{subtitle}</span>
                )}
              </div>
            </Link>
            {/* Close button */}
            <button
              type="button"
              className="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5"
              onClick={() => setIsOpen(false)}
            >
              <span className="sr-only">Close menu</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth={1.5}
                stroke="currentColor"
                className="w-6 h-6"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>

          {/* Your links on small screens */}
          <div className="flow-root mt-6">
            <div className="py-4">
              <div className="flex flex-col gap-y-4 items-start">
                {links.map((link) => (
                  <Link
                    href={link.href}
                    key={link.href}
                    className={`link link-hover ${link.className || ''}`}
                    title={link.label}
                    onClick={() => setIsOpen(false)} // Close menu on link click
                  >
                    {link.label}
                  </Link>
                ))}
              </div>
            </div>
            <div className="divider"></div>
            {/* Your CTA on small screens */}
            <div className="flex flex-col" onClick={() => setIsOpen(false)}>{cta}</div>
          </div>
        </div>
      </div>
    </header>
  );
};

export default Header;
</file>

<file path="components/PortfolioCarousel.tsx">
"use client";

import { useState } from "react";
import Image from "next/image";

interface Project {
  id: number;
  title: string;
  description: string;
  image: string;
  tech: string[];
}

interface PortfolioCarouselProps {
  projects: Project[];
  sectionId: string;
  isReversed?: boolean;
}

export default function PortfolioCarousel({ 
  projects, 
  sectionId, 
  isReversed = false 
}: PortfolioCarouselProps) {
  const [isPlaying, setIsPlaying] = useState(true);

  const toggleAutoplay = () => {
    setIsPlaying(!isPlaying);
  };

  // Calculate total width for animation
  const cardWidth = 320;
  const gap = 24;
  const totalWidth = (cardWidth + gap) * projects.length;
  const animationDuration = Math.max(20, totalWidth / 50); // Slower for longer content

  return (
    <div className="relative">
      {/* Play/Pause Control */}
      <div className="flex justify-center mb-8">
        <button
          onClick={toggleAutoplay}
          className="btn btn-circle btn-outline hover:btn-secondary transition-all duration-300"
          aria-label={isPlaying ? "Pause carousel" : "Play carousel"}
        >
          {isPlaying ? (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 9v6m4-6v6" />
            </svg>
          ) : (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3l14 9-14 9V3z" />
            </svg>
          )}
        </button>
      </div>

      {/* Continuous Scroll Carousel */}
      <div className="relative overflow-hidden">
        {/* Vertical fade gradients on left/right edges */}
        <div className="absolute left-0 top-0 bottom-0 w-16 bg-gradient-to-r from-base-100 via-base-100/50 to-transparent z-10 pointer-events-none"></div>
        <div className="absolute right-0 top-0 bottom-0 w-16 bg-gradient-to-l from-base-100 via-base-100/50 to-transparent z-10 pointer-events-none"></div>

        <div 
          className="flex gap-6"
          style={{
            animation: `scroll-${isReversed ? 'right' : 'left'} ${animationDuration}s linear infinite`,
            animationPlayState: isPlaying ? 'running' : 'paused',
          }}
        >
          {/* Duplicate content twice for seamless loop */}
          {[...projects, ...projects].map((project, index) => (
            <div
              key={`${project.id}-${index}`}
              className="group bg-base-200 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 flex-shrink-0 flex flex-col"
              style={{ width: `${cardWidth}px`, height: '580px' }}
            >
              {/* Project Image */}
              <div className="relative h-48 overflow-hidden">
                <Image
                  src={project.image}
                  alt={project.title}
                  fill
                  className="object-cover group-hover:scale-110 transition-transform duration-500"
                />
                <div className="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
              </div>

              {/* Project Content */}
              <div className="p-6 flex-1 flex flex-col">
                {/* Main Content Area */}
                <div className="flex-1 space-y-4">
                  <h3 className="font-bold text-xl text-base-content group-hover:text-primary transition-colors duration-300">
                    {project.title}
                  </h3>
                  
                  <p className="text-base-content/80 leading-relaxed text-sm">
                    {project.description}
                  </p>

                  {/* Tech Stack */}
                  <div className="flex flex-wrap gap-2">
                    {project.tech.map((tech, techIndex) => (
                      <span
                        key={`${tech}-${index}-${techIndex}`}
                        className="inline-block px-3 py-1 text-xs font-medium bg-primary/10 text-primary rounded-full border border-primary/20 hover:bg-primary/20 transition-colors duration-300"
                      >
                        {tech}
                      </span>
                    ))}
                  </div>
                </div>

                {/* Action Button - Always at bottom */}
                <div className="pt-6">
                  <button className="w-full btn btn-outline btn-sm group-hover:btn-primary transition-all duration-300">
                    <span className="group-hover:scale-110 transition-transform duration-300">
                      View Details
                    </span>
                    <svg className="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <style jsx>{`
        @keyframes scroll-left {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(-${totalWidth}px);
          }
        }

        @keyframes scroll-right {
          0% {
            transform: translateX(-${totalWidth}px);
          }
          100% {
            transform: translateX(0);
          }
        }
      `}</style>
    </div>
  );
}
</file>

</files>
